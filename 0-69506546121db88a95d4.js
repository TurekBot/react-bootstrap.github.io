(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{343:function(t,e,n){t.exports=n(350)},344:function(t,e,n){var r=n(162)("wks"),i=n(163),a=n(37).Symbol,s="function"==typeof a;(t.exports=function(t){return r[t]||(r[t]=s&&a[t]||(s?a:i)("Symbol."+t))}).store=r},345:function(t,e,n){"use strict";e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=s(n(0)),a=s(n(358));function s(t){return t&&t.__esModule?t:{default:t}}e.default=(0,a.default)(function(t,e,n,a,s){var o=t[e],p=void 0===o?"undefined":r(o);return i.default.isValidElement(o)?new Error("Invalid "+a+" `"+s+"` of type ReactElement supplied to `"+n+"`, expected an element type (a string or a ReactClass)."):"function"!==p&&"string"!==p?new Error("Invalid "+a+" `"+s+"` of value `"+o+"` supplied to `"+n+"`, expected an element type (a string or a ReactClass)."):null})},347:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t&&t.ownerDocument||document},t.exports=e.default},348:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(54))&&r.__esModule?r:{default:r};function a(t,e){if(e)do{if(e===t)return!0}while(e=e.parentNode);return!1}e.default=i.default?function(t,e){return t.contains?t.contains(e):t.compareDocumentPosition?t===e||!!(16&t.compareDocumentPosition(e)):a(t,e)}:a,t.exports=e.default},349:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){return(0,i.default)(r.default.findDOMNode(t))};var r=a(n(21)),i=a(n(347));function a(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},350:function(t,e,n){n(351),t.exports=n(23).Object.values},351:function(t,e,n){var r=n(31),i=n(153)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},353:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(e,n,r,i,a){var s=r||"<<anonymous>>",o=a||n;if(null==e[n])return new Error("The "+i+" `"+o+"` is required to make `"+s+"` accessible for users of assistive technologies such as screen readers.");for(var p=arguments.length,u=Array(p>5?p-5:0),h=5;h<p;h++)u[h-5]=arguments[h];return t.apply(void 0,[e,n,r,i,a].concat(u))}},t.exports=e.default},354:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=s(n(0)),a=s(n(104));function s(t){return t&&t.__esModule?t:{default:t}}e.default=(0,a.default)(function(t,e,n,a,s){var o=t[e],p=void 0===o?"undefined":r(o);return i.default.isValidElement(o)?new Error("Invalid "+a+" `"+s+"` of type ReactElement supplied to `"+n+"`, expected a ReactComponent or a DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):"object"===p&&"function"==typeof o.render||1===o.nodeType?null:new Error("Invalid "+a+" `"+s+"` of value `"+o+"` supplied to `"+n+"`, expected a ReactComponent or a DOMElement.")}),t.exports=e.default},355:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){return t="function"==typeof t?t():t,i.default.findDOMNode(t)||e};var r,i=(r=n(21))&&r.__esModule?r:{default:r};t.exports=e.default},357:function(t,e){t.exports={}},358:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){function e(e,n,r,i,a,s){var o=i||"<<anonymous>>",p=s||r;if(null==n[r])return e?new Error("Required "+a+" `"+p+"` was not specified in `"+o+"`."):null;for(var u=arguments.length,h=Array(u>6?u-6:0),c=6;c<u;c++)h[c-6]=arguments[c];return t.apply(void 0,[n,r,o,a,p].concat(h))}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}},359:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.default)();try{return t.activeElement}catch(t){}};var r,i=(r=n(347))&&r.__esModule?r:{default:r};t.exports=e.default},360:function(t,e,n){var r=n(101).f,i=n(152),a=n(344)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},361:function(t,e,n){"use strict";e.__esModule=!0;var r=u(n(348)),i=u(n(1)),a=u(n(0)),s=u(n(21)),o=u(n(362)),p=u(n(349));function u(t){return t&&t.__esModule?t:{default:t}}var h=27,c=function(t){function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return a.addEventListeners=function(){var t=a.props.event,e=(0,p.default)(a);a.documentMouseCaptureListener=(0,o.default)(e,t,a.handleMouseCapture,!0),a.documentMouseListener=(0,o.default)(e,t,a.handleMouse),a.documentKeyupListener=(0,o.default)(e,"keyup",a.handleKeyUp)},a.removeEventListeners=function(){a.documentMouseCaptureListener&&a.documentMouseCaptureListener.remove(),a.documentMouseListener&&a.documentMouseListener.remove(),a.documentKeyupListener&&a.documentKeyupListener.remove()},a.handleMouseCapture=function(t){var e;a.preventMouseRootClose=!!((e=t).metaKey||e.altKey||e.ctrlKey||e.shiftKey)||!function(t){return 0===t.button}(t)||(0,r.default)(s.default.findDOMNode(a),t.target)},a.handleMouse=function(t){!a.preventMouseRootClose&&a.props.onRootClose&&a.props.onRootClose(t)},a.handleKeyUp=function(t){t.keyCode===h&&a.props.onRootClose&&a.props.onRootClose(t)},a.preventMouseRootClose=!1,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},e.prototype.componentDidUpdate=function(t){!this.props.disabled&&t.disabled?this.addEventListeners():this.props.disabled&&!t.disabled&&this.removeEventListeners()},e.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},e.prototype.render=function(){return this.props.children},e}(a.default.Component);c.displayName="RootCloseWrapper",c.propTypes={onRootClose:i.default.func,children:i.default.element,disabled:i.default.bool,event:i.default.oneOf(["click","mousedown"])},c.defaultProps={event:"click"},e.default=c,t.exports=e.default},362:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e,n,a){return(0,r.default)(t,e,n,a),{remove:function(){(0,i.default)(t,e,n,a)}}};var r=a(n(155)),i=a(n(154));function a(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},363:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if((!a&&0!==a||t)&&i.default){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),a=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return a};var r,i=(r=n(54))&&r.__esModule?r:{default:r},a=void 0;t.exports=e.default},364:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.classList?!!e&&t.classList.contains(e):-1!==(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")},t.exports=e.default},365:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){return(0,r.default)(t)||(e=t)&&"body"===e.tagName.toLowerCase()?function(t){var e=(0,i.default)(t),n=(0,r.default)(e).innerWidth;if(!n){var a=e.documentElement.getBoundingClientRect();n=a.right-Math.abs(a.left)}return e.body.clientWidth<n}(t):t.scrollHeight>t.clientHeight;var e};var r=a(n(107)),i=a(n(347));function a(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},366:function(t,e,n){"use strict";e.__esModule=!0;var r=h(n(1)),i=h(n(354)),a=h(n(0)),s=h(n(21)),o=h(n(355)),p=h(n(349)),u=h(n(399));function h(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var l=function(t){function e(){var n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=c(this,t.call.apply(t,[this].concat(a))),r.setContainer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props;r._portalContainerNode=(0,o.default)(t.container,(0,p.default)(r).body)},r.getMountNode=function(){return r._portalContainerNode},c(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){this.setContainer(),this.forceUpdate(this.props.onRendered)},e.prototype.componentWillReceiveProps=function(t){t.container!==this.props.container&&this.setContainer(t)},e.prototype.componentWillUnmount=function(){this._portalContainerNode=null},e.prototype.render=function(){return this.props.children&&this._portalContainerNode?s.default.createPortal(this.props.children,this._portalContainerNode):null},e}(a.default.Component);l.displayName="Portal",l.propTypes={container:r.default.oneOfType([i.default,r.default.func]),onRendered:r.default.func},e.default=s.default.createPortal?l:u.default,t.exports=e.default},367:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=(0,a.default)(t),n=(0,i.default)(e),s=e&&e.documentElement,o={top:0,left:0,height:0,width:0};if(e)return(0,r.default)(s,t)?(void 0!==t.getBoundingClientRect&&(o=t.getBoundingClientRect()),{top:o.top+(n.pageYOffset||s.scrollTop)-(s.clientTop||0),left:o.left+(n.pageXOffset||s.scrollLeft)-(s.clientLeft||0),width:(null==o.width?t.offsetWidth:o.width)||0,height:(null==o.height?t.offsetHeight:o.height)||0}):o};var r=s(n(348)),i=s(n(107)),a=s(n(347));function s(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},370:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.properties=e.end=void 0;var r=a(n(371)),i=a(n(158));function a(t){return t&&t.__esModule?t:{default:t}}e.end=r.default,e.properties=i.default,e.default={end:r.default,properties:i.default}},371:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(158)),i=a(n(67));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n){var i,a={target:t,currentTarget:t};function s(t){t.target===t.currentTarget&&(clearTimeout(i),t.target.removeEventListener(r.default.end,s),e.call(this))}r.default.end?null==n&&(n=o(t)||0):n=0,r.default.end?(t.addEventListener(r.default.end,s,!1),i=setTimeout(function(){return s(a)},1.5*(n||100))):setTimeout(s.bind(null,a),0)}function o(t){var e=(0,i.default)(t,r.default.duration),n=-1===e.indexOf("ms")?1e3:1;return parseFloat(e)*n}s._parseDuration=o,e.default=s,t.exports=e.default},372:function(t,e,n){t.exports=n(373)},373:function(t,e,n){n(374),n(381),t.exports=n(23).Array.from},374:function(t,e,n){"use strict";var r=n(375)(!0);n(376)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},375:function(t,e,n){var r=n(109),i=n(69);t.exports=function(t){return function(e,n){var a,s,o=String(i(e)),p=r(n),u=o.length;return p<0||p>=u?t?"":void 0:(a=o.charCodeAt(p))<55296||a>56319||p+1===u||(s=o.charCodeAt(p+1))<56320||s>57343?t?o.charAt(p):a:t?o.slice(p,p+2):s-56320+(a-55296<<10)+65536}}},376:function(t,e,n){"use strict";var r=n(377),i=n(31),a=n(378),s=n(151),o=n(152),p=n(357),u=n(379),h=n(360),c=n(380),l=n(344)("iterator"),d=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,n,g,m,y,v){u(n,e,g);var b,_,x,w=function(t){if(!d&&t in E)return E[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",k="values"==m,C=!1,E=t.prototype,A=E[l]||E["@@iterator"]||m&&E[m],P=!d&&A||w(m),T=m?k?w("entries"):P:void 0,L="Array"==e&&E.entries||A;if(L&&(x=c(L.call(new t)))!==Object.prototype&&x.next&&(h(x,S,!0),r||o(x,l)||s(x,l,f)),k&&A&&"values"!==A.name&&(C=!0,P=function(){return A.call(this)}),r&&!v||!d&&!C&&E[l]||s(E,l,P),p[e]=P,p[S]=f,m)if(b={values:k?P:w("values"),keys:y?P:w("keys"),entries:T},v)for(_ in b)_ in E||a(E,_,b[_]);else i(i.P+i.F*(d||C),e,b);return b}},377:function(t,e){t.exports=!0},378:function(t,e,n){t.exports=n(151)},379:function(t,e,n){"use strict";var r=n(164),i=n(156),a=n(360),s={};n(151)(s,n(344)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),a(t,e+" Iterator")}},380:function(t,e,n){var r=n(152),i=n(102),a=n(110)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},381:function(t,e,n){"use strict";var r=n(160),i=n(31),a=n(102),s=n(382),o=n(383),p=n(161),u=n(384),h=n(385);i(i.S+i.F*!n(387)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,c,l=a(t),d="function"==typeof this?this:Array,f=arguments.length,g=f>1?arguments[1]:void 0,m=void 0!==g,y=0,v=h(l);if(m&&(g=r(g,f>2?arguments[2]:void 0,2)),void 0==v||d==Array&&o(v))for(n=new d(e=p(l.length));e>y;y++)u(n,y,m?g(l[y],y):l[y]);else for(c=v.call(l),n=new d;!(i=c.next()).done;y++)u(n,y,m?s(c,g,[i.value,y],!0):i.value);return n.length=y,n}})},382:function(t,e,n){var r=n(68);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var a=t.return;throw void 0!==a&&r(a.call(t)),e}}},383:function(t,e,n){var r=n(357),i=n(344)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||a[i]===t)}},384:function(t,e,n){"use strict";var r=n(101),i=n(156);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},385:function(t,e,n){var r=n(386),i=n(344)("iterator"),a=n(357);t.exports=n(23).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||a[r(t)]}},386:function(t,e,n){var r=n(157),i=n(344)("toStringTag"),a="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:a?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},387:function(t,e,n){var r=n(344)("iterator"),i=!1;try{var a=[7][r]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var a=[7],s=a[r]();s.next=function(){return{done:n=!0}},a[r]=function(){return s},t(a)}catch(t){}return n}},388:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.listen=e.filter=e.off=e.on=void 0;var r=o(n(155)),i=o(n(154)),a=o(n(389)),s=o(n(391));function o(t){return t&&t.__esModule?t:{default:t}}e.on=r.default,e.off=i.default,e.filter=a.default,e.listen=s.default,e.default={on:r.default,off:i.default,filter:a.default,listen:s.default}},389:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return function(n){var a=n.currentTarget,s=n.target;(0,i.default)(a,t).some(function(t){return(0,r.default)(t,s)})&&e.call(this,n)}};var r=a(n(348)),i=a(n(390));function a(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},390:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n,a="#"===e[0],s="."===e[0],o=a||s?e.slice(1):e;return r.test(o)?a?(n=(t=t.getElementById?t:document).getElementById(o))?[n]:[]:t.getElementsByClassName&&s?i(t.getElementsByClassName(o)):i(t.getElementsByTagName(e)):i(t.querySelectorAll(e))};var r=/^[\w-]*$/,i=Function.prototype.bind.call(Function.prototype.call,[].slice);t.exports=e.default},391:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(54)),i=s(n(155)),a=s(n(154));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){};r.default&&(o=function(t,e,n,r){return(0,i.default)(t,e,n,r),function(){(0,a.default)(t,e,n,r)}}),e.default=o,t.exports=e.default},392:function(t,e,n){"use strict";e.__esModule=!0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=w(n(359)),a=w(n(348)),s=w(n(54)),o=w(n(1)),p=w(n(354)),u=w(n(393)),h=w(n(12)),c=n(0),l=w(c),d=w(n(21)),f=w(n(53)),g=w(n(394)),m=w(n(366)),y=w(n(400)),v=w(n(362)),b=w(n(401)),_=w(n(355)),x=w(n(349));function w(t){return t&&t.__esModule?t:{default:t}}function S(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var k=new g.default,C=function(t){function e(){var n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=S(this,t.call.apply(t,[this].concat(a))),E.call(r),S(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.omitProps=function(t,e){var n={};return Object.keys(t).map(function(r){Object.prototype.hasOwnProperty.call(e,r)||(n[r]=t[r])}),n},e.prototype.render=function(){var t=this.props,n=t.show,i=t.container,a=t.children,s=t.transition,o=t.backdrop,p=t.className,u=t.style,h=t.onExit,d=t.onExiting,f=t.onEnter,g=t.onEntering,v=t.onEntered,b=l.default.Children.only(a),_=this.omitProps(this.props,e.propTypes);if(!(n||s&&!this.state.exited))return null;var x=b.props,w=x.role,S=x.tabIndex;return void 0!==w&&void 0!==S||(b=(0,c.cloneElement)(b,{role:void 0===w?"document":w,tabIndex:null==S?"-1":S})),s&&(b=l.default.createElement(s,{appear:!0,unmountOnExit:!0,in:n,onExit:h,onExiting:d,onExited:this.handleHidden,onEnter:f,onEntering:g,onEntered:v},b)),l.default.createElement(m.default,{ref:this.setMountNode,container:i,onRendered:this.onPortalRendered},l.default.createElement("div",r({ref:this.setModalNodeRef,role:w||"dialog"},_,{style:u,className:p}),o&&this.renderBackdrop(),l.default.createElement(y.default,{ref:this.setDialogRef},b)))},e.prototype.componentWillReceiveProps=function(t){t.show?this.setState({exited:!1}):t.transition||this.setState({exited:!0})},e.prototype.componentWillUpdate=function(t){!this.props.show&&t.show&&this.checkForFocus()},e.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},e.prototype.componentDidUpdate=function(t){var e=this.props.transition;!t.show||this.props.show||e?!t.show&&this.props.show&&this.onShow():this.onHide()},e.prototype.componentWillUnmount=function(){var t=this.props,e=t.show,n=t.transition;this._isMounted=!1,(e||n&&!this.state.exited)&&this.onHide()},e.prototype.autoFocus=function(){if(this.props.autoFocus){var t=this.getDialogElement(),e=(0,i.default)((0,x.default)(this));t&&!(0,a.default)(t,e)&&(this.lastFocus=e,t.hasAttribute("tabIndex")||((0,f.default)(!1,'The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to "-1".'),t.setAttribute("tabIndex",-1)),t.focus())}},e.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},e.prototype.getDialogElement=function(){return d.default.findDOMNode(this.dialog)},e.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},e}(l.default.Component);C.propTypes=r({},m.default.propTypes,{show:o.default.bool,container:o.default.oneOfType([p.default,o.default.func]),onShow:o.default.func,onHide:o.default.func,backdrop:o.default.oneOfType([o.default.bool,o.default.oneOf(["static"])]),renderBackdrop:o.default.func,onEscapeKeyDown:o.default.func,onEscapeKeyUp:(0,u.default)(o.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:o.default.func,backdropStyle:o.default.object,backdropClassName:o.default.string,containerClassName:o.default.string,keyboard:o.default.bool,transition:h.default,backdropTransition:h.default,autoFocus:o.default.bool,enforceFocus:o.default.bool,restoreFocus:o.default.bool,onEnter:o.default.func,onEntering:o.default.func,onEntered:o.default.func,onExit:o.default.func,onExiting:o.default.func,onExited:o.default.func,manager:o.default.object.isRequired}),C.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:k,renderBackdrop:function(t){return l.default.createElement("div",t)}};var E=function(){var t=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var e=t.props,n=e.backdropStyle,r=e.backdropClassName,i=e.renderBackdrop,a=e.backdropTransition,s=i({ref:function(e){return t.backdrop=e},style:n,className:r,onClick:t.handleBackdropClick});return a&&(s=l.default.createElement(a,{appear:!0,in:t.props.show},s)),s},this.onPortalRendered=function(){t.autoFocus(),t.props.onShow&&t.props.onShow()},this.onShow=function(){var e=(0,x.default)(t),n=(0,_.default)(t.props.container,e.body);t.props.manager.add(t,n,t.props.containerClassName),t._onDocumentKeydownListener=(0,v.default)(e,"keydown",t.handleDocumentKeyDown),t._onDocumentKeyupListener=(0,v.default)(e,"keyup",t.handleDocumentKeyUp),t._onFocusinListener=(0,b.default)(t.enforceFocus)},this.onHide=function(){t.props.manager.remove(t),t._onDocumentKeydownListener.remove(),t._onDocumentKeyupListener.remove(),t._onFocusinListener.remove(),t.props.restoreFocus&&t.restoreLastFocus()},this.setMountNode=function(e){t.mountNode=e?e.getMountNode():e},this.setModalNodeRef=function(e){t.modalNode=e},this.setDialogRef=function(e){t.dialog=e},this.handleHidden=function(){var e;t.setState({exited:!0}),t.onHide(),t.props.onExited&&(e=t.props).onExited.apply(e,arguments)},this.handleBackdropClick=function(e){e.target===e.currentTarget&&(t.props.onBackdropClick&&t.props.onBackdropClick(e),!0===t.props.backdrop&&t.props.onHide())},this.handleDocumentKeyDown=function(e){t.props.keyboard&&27===e.keyCode&&t.isTopModal()&&(t.props.onEscapeKeyDown&&t.props.onEscapeKeyDown(e),t.props.onHide())},this.handleDocumentKeyUp=function(e){t.props.keyboard&&27===e.keyCode&&t.isTopModal()&&t.props.onEscapeKeyUp&&t.props.onEscapeKeyUp(e)},this.checkForFocus=function(){s.default&&(t.lastFocus=(0,i.default)())},this.enforceFocus=function(){if(t.props.enforceFocus&&t._isMounted&&t.isTopModal()){var e=t.getDialogElement(),n=(0,i.default)((0,x.default)(t));e&&!(0,a.default)(e,n)&&e.focus()}}};C.Manager=g.default,e.default=C,t.exports=e.default},393:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r,i=(r=n(53))&&r.__esModule?r:{default:r},a={};function s(t,e){return function(n,r,s,o,p){var u=s||"<<anonymous>>",h=p||r;if(null!=n[r]){var c=s+"."+r;(0,i.default)(a[c],"The "+o+" `"+h+"` of `"+u+"` is deprecated. "+e+"."),a[c]=!0}for(var l=arguments.length,d=Array(l>5?l-5:0),f=5;f<l;f++)d[f-5]=arguments[f];return t.apply(void 0,[n,r,s,o,p].concat(d))}}s._resetWarned=function(){a={}},t.exports=e.default},394:function(t,e,n){"use strict";e.__esModule=!0;var r=p(n(395)),i=p(n(67)),a=p(n(363)),s=p(n(365)),o=n(398);function p(t){return t&&t.__esModule?t:{default:t}}e.default=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=n.hideSiblingNodes,u=void 0===p||p,h=n.handleContainerOverflow,c=void 0===h||h;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.add=function(t,n,p){var u=e.modals.indexOf(t),h=e.containers.indexOf(n);if(-1!==u)return u;if(u=e.modals.length,e.modals.push(t),e.hideSiblingNodes&&(0,o.hideSiblings)(n,t.mountNode),-1!==h)return e.data[h].modals.push(t),u;var c={modals:[t],classes:p?p.split(/\s+/):[],overflowing:(0,s.default)(n)};return e.handleContainerOverflow&&function(t,e){var n={overflow:"hidden"};t.style={overflow:e.style.overflow,paddingRight:e.style.paddingRight},t.overflowing&&(n.paddingRight=parseInt((0,i.default)(e,"paddingRight")||0,10)+(0,a.default)()+"px"),(0,i.default)(e,n)}(c,n),c.classes.forEach(r.default.addClass.bind(null,n)),e.containers.push(n),e.data.push(c),u},this.remove=function(t){var n=e.modals.indexOf(t);if(-1!==n){var i=function(t,e){return n=function(t){return-1!==t.modals.indexOf(e)},r=-1,t.some(function(t,e){if(n(t))return r=e,!0}),r;var n,r}(e.data,t),a=e.data[i],s=e.containers[i];a.modals.splice(a.modals.indexOf(t),1),e.modals.splice(n,1),0===a.modals.length?(a.classes.forEach(r.default.removeClass.bind(null,s)),e.handleContainerOverflow&&function(t,e){var n=a.style;Object.keys(n).forEach(function(t){return e.style[t]=n[t]})}(0,s),e.hideSiblingNodes&&(0,o.showSiblings)(s,t.mountNode),e.containers.splice(i,1),e.data.splice(i,1)):e.hideSiblingNodes&&(0,o.ariaHidden)(!1,a.modals[a.modals.length-1].mountNode)}},this.isTopModal=function(t){return!!e.modals.length&&e.modals[e.modals.length-1]===t},this.hideSiblingNodes=u,this.handleContainerOverflow=c,this.modals=[],this.containers=[],this.data=[]},t.exports=e.default},395:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasClass=e.removeClass=e.addClass=void 0;var r=s(n(396)),i=s(n(397)),a=s(n(364));function s(t){return t&&t.__esModule?t:{default:t}}e.addClass=r.default,e.removeClass=i.default,e.hasClass=a.default,e.default={addClass:r.default,removeClass:i.default,hasClass:a.default}},396:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t.classList?t.classList.add(e):(0,i.default)(t,e)||("string"==typeof t.className?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))};var r,i=(r=n(364))&&r.__esModule?r:{default:r};t.exports=e.default},397:function(t,e,n){"use strict";function r(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}t.exports=function(t,e){t.classList?t.classList.remove(e):"string"==typeof t.className?t.className=r(t.className,e):t.setAttribute("class",r(t.className&&t.className.baseVal||"",e))}},398:function(t,e,n){"use strict";e.__esModule=!0,e.ariaHidden=a,e.hideSiblings=function(t,e){i(t,e,function(t){return a(!0,t)})},e.showSiblings=function(t,e){i(t,e,function(t){return a(!1,t)})};var r=["template","script","style"],i=function(t,e,n){e=[].concat(e),[].forEach.call(t.children,function(t){var i,a,s;-1===e.indexOf(t)&&(a=(i=t).nodeType,s=i.tagName,1===a&&-1===r.indexOf(s.toLowerCase()))&&n(t)})};function a(t,e){e&&(t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden"))}},399:function(t,e,n){"use strict";e.__esModule=!0;var r=u(n(1)),i=u(n(354)),a=u(n(0)),s=u(n(21)),o=u(n(355)),p=u(n(349));function u(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=function(t){function e(){var n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,u=Array(i),c=0;c<i;c++)u[c]=arguments[c];return n=r=h(this,t.call.apply(t,[this].concat(u))),r._mountOverlayTarget=function(){r._overlayTarget||(r._overlayTarget=document.createElement("div"),r._portalContainerNode=(0,o.default)(r.props.container,(0,p.default)(r).body),r._portalContainerNode.appendChild(r._overlayTarget))},r._unmountOverlayTarget=function(){r._overlayTarget&&(r._portalContainerNode.removeChild(r._overlayTarget),r._overlayTarget=null),r._portalContainerNode=null},r._renderOverlay=function(){var t=r.props.children?a.default.Children.only(r.props.children):null;if(null!==t){r._mountOverlayTarget();var e=!r._overlayInstance;r._overlayInstance=s.default.unstable_renderSubtreeIntoContainer(r,t,r._overlayTarget,function(){e&&r.props.onRendered&&r.props.onRendered()})}else r._unrenderOverlay(),r._unmountOverlayTarget()},r._unrenderOverlay=function(){r._overlayTarget&&(s.default.unmountComponentAtNode(r._overlayTarget),r._overlayInstance=null)},r.getMountNode=function(){return r._overlayTarget},h(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},e.prototype.componentDidUpdate=function(){this._renderOverlay()},e.prototype.componentWillReceiveProps=function(t){this._overlayTarget&&t.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,o.default)(t.container,(0,p.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},e.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},e.prototype.render=function(){return null},e}(a.default.Component);c.displayName="Portal",c.propTypes={container:r.default.oneOfType([i.default,r.default.func]),onRendered:r.default.func},e.default=c,t.exports=e.default},400:function(t,e,n){"use strict";e.__esModule=!0;var r=a(n(1)),i=a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}var s={children:r.default.node},o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(){return this.props.children},e}(i.default.Component);o.propTypes=s,e.default=o,t.exports=e.default},401:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){var e=void 0;return document.addEventListener?(document.addEventListener("focus",t,!0),e=function(){return document.removeEventListener("focus",t,!0)}):(document.attachEvent("onfocusin",t),e=function(){return document.detachEvent("onfocusin",t)}),{remove:e}},t.exports=e.default},402:function(t,e,n){"use strict";e.__esModule=!0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=h(n(1)),a=h(n(12)),s=h(n(0)),o=h(n(366)),p=h(n(403)),u=h(n(361));function h(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r));return i.handleHidden=function(){var t;i.setState({exited:!0}),i.props.onExited&&(t=i.props).onExited.apply(t,arguments)},i.state={exited:!n.show},i.onHiddenListener=i.handleHidden.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentWillReceiveProps=function(t){t.show?this.setState({exited:!1}):t.transition||this.setState({exited:!0})},e.prototype.render=function(){var t=this.props,e=t.container,n=t.containerPadding,r=t.target,i=t.placement,a=t.shouldUpdatePosition,h=t.rootClose,c=t.children,l=t.transition,d=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]);if(!(d.show||l&&!this.state.exited))return null;var f=c;if(f=s.default.createElement(p.default,{container:e,containerPadding:n,target:r,placement:i,shouldUpdatePosition:a},f),l){var g=d.onExit,m=d.onExiting,y=d.onEnter,v=d.onEntering,b=d.onEntered;f=s.default.createElement(l,{in:d.show,appear:!0,onExit:g,onExiting:m,onExited:this.onHiddenListener,onEnter:y,onEntering:v,onEntered:b},f)}return h&&(f=s.default.createElement(u.default,{onRootClose:d.onHide},f)),s.default.createElement(o.default,{container:e},f)},e}(s.default.Component);c.propTypes=r({},o.default.propTypes,p.default.propTypes,{show:i.default.bool,rootClose:i.default.bool,onHide:function(t){var e=i.default.func;t.rootClose&&(e=e.isRequired);for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return e.apply(void 0,[t].concat(r))},transition:a.default,onEnter:i.default.func,onEntering:i.default.func,onEntered:i.default.func,onExit:i.default.func,onExiting:i.default.func,onExited:i.default.func}),e.default=c,t.exports=e.default},403:function(t,e,n){"use strict";e.__esModule=!0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=d(n(4)),a=d(n(1)),s=d(n(354)),o=n(0),p=d(o),u=d(n(21)),h=d(n(404)),c=d(n(355)),l=d(n(349));function d(t){return t&&t.__esModule?t:{default:t}}function f(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var g=function(t){function e(n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r));return i.getTarget=function(){var t=i.props.target,e="function"==typeof t?t():t;return e&&u.default.findDOMNode(e)||null},i.maybeUpdatePosition=function(t){var e=i.getTarget();(i.props.shouldUpdatePosition||e!==i._lastTarget||t)&&i.updatePosition(e)},i.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},i._needsFlush=!1,i._lastTarget=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidMount=function(){this.updatePosition(this.getTarget())},e.prototype.componentWillReceiveProps=function(){this._needsFlush=!0},e.prototype.componentDidUpdate=function(t){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==t.placement))},e.prototype.render=function(){var t=this.props,e=t.children,n=t.className,a=f(t,["children","className"]),s=this.state,u=s.positionLeft,h=s.positionTop,c=f(s,["positionLeft","positionTop"]);delete a.target,delete a.container,delete a.containerPadding,delete a.shouldUpdatePosition;var l=p.default.Children.only(e);return(0,o.cloneElement)(l,r({},a,c,{positionLeft:u,positionTop:h,className:(0,i.default)(n,l.props.className),style:r({},l.props.style,{left:u,top:h})}))},e.prototype.updatePosition=function(t){if(this._lastTarget=t,t){var e=u.default.findDOMNode(this),n=(0,c.default)(this.props.container,(0,l.default)(this).body);this.setState((0,h.default)(this.props.placement,e,t,n,this.props.containerPadding))}else this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null})},e}(p.default.Component);g.propTypes={target:a.default.oneOfType([s.default,a.default.func]),container:a.default.oneOfType([s.default,a.default.func]),containerPadding:a.default.number,placement:a.default.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:a.default.bool},g.displayName="Position",g.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1},e.default=g,t.exports=e.default},404:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e,n,a,s){var o="BODY"===a.tagName?(0,r.default)(n):(0,i.default)(n,a),u=(0,r.default)(e),h=u.height,c=u.width,l=void 0,d=void 0,f=void 0,g=void 0;if("left"===t||"right"===t){d=o.top+(o.height-h)/2,l="left"===t?o.left-c:o.left+o.width;var m=function(t,e,n,r){var i=p(n),a=i.scroll,s=i.height,o=t-r-a,u=t+r-a+e;return o<0?-o:u>s?s-u:0}(d,h,a,s);d+=m,g=50*(1-2*m/h)+"%",f=void 0}else{if("top"!==t&&"bottom"!==t)throw new Error('calcOverlayPosition(): No such placement of "'+t+'" found.');l=o.left+(o.width-c)/2,d="top"===t?o.top-h:o.top+o.height;var y=function(t,e,n,r){var i=p(n).width,a=t-r,s=t+r+e;return a<0?-a:s>i?i-s:0}(l,c,a,s);l+=y,f=50*(1-2*y/c)+"%",g=void 0}return{positionLeft:l,positionTop:d,arrowOffsetLeft:f,arrowOffsetTop:g}};var r=o(n(367)),i=o(n(405)),a=o(n(159)),s=o(n(349));function o(t){return t&&t.__esModule?t:{default:t}}function p(t){var e=void 0,n=void 0,i=void 0;if("BODY"===t.tagName)e=window.innerWidth,n=window.innerHeight,i=(0,a.default)((0,s.default)(t).documentElement)||(0,a.default)(t);else{var o=(0,r.default)(t);e=o.width,n=o.height,i=(0,a.default)(t)}return{width:e,height:n,scroll:i}}t.exports=e.default},405:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(t,e){var n,u={top:0,left:0};return"fixed"===(0,p.default)(t,"position")?n=t.getBoundingClientRect():(e=e||(0,a.default)(t),n=(0,i.default)(t),"html"!==function(t){return t.nodeName&&t.nodeName.toLowerCase()}(e)&&(u=(0,i.default)(e)),u.top+=parseInt((0,p.default)(e,"borderTopWidth"),10)-(0,s.default)(e)||0,u.left+=parseInt((0,p.default)(e,"borderLeftWidth"),10)-(0,o.default)(e)||0),r({},n,{top:n.top-u.top-(parseInt((0,p.default)(t,"marginTop"),10)||0),left:n.left-u.left-(parseInt((0,p.default)(t,"marginLeft"),10)||0)})};var i=u(n(367)),a=u(n(406)),s=u(n(159)),o=u(n(167)),p=u(n(67));function u(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},406:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=(0,r.default)(t),n=t&&t.offsetParent;n&&"html"!==s(t)&&"static"===(0,i.default)(n,"position");)n=n.offsetParent;return n||e.documentElement};var r=a(n(347)),i=a(n(67));function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return t.nodeName&&t.nodeName.toLowerCase()}t.exports=e.default},407:function(t,e,n){t.exports=n(408)},408:function(t,e,n){n(409),t.exports=n(23).Array.isArray},409:function(t,e,n){var r=n(31);r(r.S,"Array",{isArray:n(410)})},410:function(t,e,n){var r=n(157);t.exports=Array.isArray||function(t){return"Array"==r(t)}},411:function(t,e,n){"use strict";n.d(e,"d",function(){return W}),n.d(e,"a",function(){return q}),n.d(e,"b",function(){return z}),n.d(e,"c",function(){return J});var r=n(412),i=(n(413),n(414),n(415),n(416),n(417)),a=n.n(i),s=n(418),o=n.n(s),p=n(0),u=n.n(p),h=n(421),c=n(430),l=n.n(c),d=n(1),f=n.n(d),g=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(Boolean).join(" ")},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jsx";return Object(r.highlight)(t,r.languages[e])},y=/^((\t|  )+)/gm,v=/\t/g,b=function(t){return t.replace(y,function(t,e){return e.replace(v,"  ")})},_=function(t){return t.replace("\n","<br>")},x=function(t){return a()(t.replace(/<br>/gm,"\n").replace(/<\/?[^>]*>/gm,""))};function w(t,e){var n=window.getSelection();if(1==arguments.length){if(!n.rangeCount)return;var r={},i=(h=n.getRangeAt(0)).cloneRange();return i.selectNodeContents(t),i.setEnd(h.endContainer,h.endOffset),r.end=i.toString().length,i.setStart(h.startContainer,h.startOffset),r.start=r.end-i.toString().length,r.atStart=0===i.startOffset,r.commonAncestorContainer=i.commonAncestorContainer,r.endContainer=i.endContainer,r.startContainer=i.startContainer,r}for(var a,s,p=e.end&&e.end!==e.start,u=0,h=document.createRange(),c=o()(t).select(Node.TEXT_NODE).revisit(!1),l=e.start>t.textContent.length?t.textContent.length:e.start,d=e.end>t.textContent.length?t.textContent.length:e.end,f=e.atStart;a=c.next();){var g=u;if(u+=a.textContent.length,!s&&(f?u>l:u>=l)&&(s=!0,h.setStart(a,l-g),!p)){h.collapse(!0),S(t,h);break}if(p&&u>=d){h.setEnd(a,d-g),S(t,h);break}}}function S(t,e){var n=window.getSelection();t.focus(),n.removeAllRanges(),n.addRange(e)}var k=function(t,e){var n=t.slice(0,e),r=n.lastIndexOf("\n")+1;return n.slice(r)},C=/^\s+/,E=function(t,e){var n=k(t,e).match(C);return null===n?"":n[0]||""},A=/^(\t|  )*  $/,P=function(t,e){var n=k(t,e);return A.test(n)?2:0},T=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},L=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},I=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},R=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},N=function(t){function e(){var n,r;T(this,e);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=R(this,t.call.apply(t,[this].concat(a))),r.undoStack=[],r.undoOffset=0,r.undoTimestamp=0,r.compositing=!1,r.state={html:""},r.onRef=function(t){r.ref=t},r.getPlain=function(){if(r._innerHTML===r.ref.innerHTML)return r._plain;var t=x(_(r.ref.innerHTML));return r._plain=t,r._innerHTML=r.ref.innerHTML,r._plain},r.recordChange=function(t,e){if(t!==r.undoStack[r.undoStack.length-1]){r.undoOffset>0&&(r.undoStack=r.undoStack.slice(0,-r.undoOffset),r.undoOffset=0);var n=Date.now(),i={plain:t,selection:e};n-r.undoTimestamp<3e3?r.undoStack[r.undoStack.length-1]=i:(r.undoStack.push(i),r.undoStack.length>50&&r.undoStack.shift()),r.undoTimestamp=n}},r.updateContent=function(t){r.compositing||(r.setState({html:m(t,r.props.language)}),r.props.onChange&&r.props.onChange(t))},r.restoreStackState=function(t){var e=r.undoStack[r.undoStack.length-1-t],n=e.plain,i=e.selection;r.selection=i,r.undoOffset=t,r.updateContent(n)},r.undo=function(){var t=r.undoOffset+1;t>=r.undoStack.length||r.restoreStackState(t)},r.redo=function(){var t=r.undoOffset-1;t<0||r.restoreStackState(t)},r.onKeyDown=function(t){if(r.props.onKeyDown&&r.props.onKeyDown(t),9!==t.keyCode||r.props.ignoreTabKey)if(8===t.keyCode){var e=w(r.ref),n=e.start;if(n!==e.end)return;var i=P(r.getPlain(),n);if(i<=0)return;for(var a=0;a<i;a++)document.execCommand("delete",!1);t.preventDefault()}else if(13===t.keyCode){var s=w(r.ref).start,o=E(r.getPlain(),s);document.execCommand("insertHTML",!1,"\n"+o),t.preventDefault()}else 90!==t.keyCode||t.metaKey===t.ctrlKey||t.altKey||(t.shiftKey?r.redo():r.undo(),t.preventDefault());else document.execCommand("insertHTML",!1,"  "),t.preventDefault()},r.onKeyUp=function(t){if(r.props.onKeyUp&&r.props.onKeyUp(t),91!==t.keyCode&&93!==t.keyCode&&!t.ctrlKey&&!t.metaKey)if(13===t.keyCode&&(r.undoTimestamp=0),r.selection=w(r.ref),37!==t.keyCode&&38!==t.keyCode&&39!==t.keyCode&&40!==t.keyCode){var e=r.getPlain();r.recordChange(e,r.selection),r.updateContent(e)}else r.undoTimestamp=0},r.onCompositionStart=function(t){r.props.onCompositionStart&&r.props.onCompositionStart(t),r.compositing=!0},r.onCompositionEnd=function(t){r.props.onCompositionEnd&&r.props.onCompositionEnd(t),r.compositing=!1},r.onClick=function(t){r.props.onClick&&r.props.onClick(t),r.undoTimestamp=0,r.selection=w(r.ref)},R(r,n)}return O(e,t),e.prototype.componentWillMount=function(){var t=m(b(this.props.code),this.props.language);this.setState({html:t})},e.prototype.componentDidMount=function(){this.recordChange(this.getPlain()),this.undoTimestamp=0},e.prototype.componentWillReceiveProps=function(t){var e=t.code,n=t.language;if(e!==this.props.code||n!==this.props.language){var r=m(b(e),n);this.setState({html:r})}},e.prototype.componentDidUpdate=function(){var t=this.selection;t&&w(this.ref,t)},e.prototype.render=function(){var t=this.props,e=t.contentEditable,n=t.className,r=t.style,i=(t.code,t.ignoreTabKey,t.language,I(t,["contentEditable","className","style","code","ignoreTabKey","language"])),a=this.state.html;return u.a.createElement("pre",L({},i,{ref:this.onRef,className:g("prism-code",n),style:r,spellCheck:"false",contentEditable:e,onCompositionEnd:e?this.onCompositionEnd:void 0,onCompositionStart:e?this.onCompositionStart:void 0,onKeyDown:e?this.onKeyDown:void 0,onKeyUp:e?this.onKeyUp:void 0,onClick:e?this.onClick:void 0,dangerouslySetInnerHTML:{__html:a}}))},e}(p.Component);N.defaultProps={contentEditable:!0,language:"jsx"};var j={assign:l.a},M={objectAssign:"_poly.assign",transforms:{dangerousForOf:!0,dangerousTaggedTemplateString:!0}},B=function(t){return Object(h.a)(t,M).code},D=function(t,e){return function(n){function r(){return T(this,r),R(this,n.apply(this,arguments))}return O(r,n),r.prototype.componentDidCatch=function(t){e(t)},r.prototype.render=function(){return"function"==typeof t?u.a.createElement(t,null):t},r}(u.a.Component)},F=function(t,e){var n=Object.keys(e),r=n.map(function(t){return e[t]});return(new(Function.prototype.bind.apply(Function,[null].concat(["_poly","React"],n,[t])))).apply(void 0,[j,u.a].concat(r))},U=function(t,e){var n=t.code,r=void 0===n?"":n,i=t.scope,a=void 0===i?{}:i,s=r.trim().replace(/;$/,""),o=B("("+s+")").trim();return D(F("return "+o,a),e)},V=function(t,e,n){var r=t.code,i=void 0===r?"":r,a=t.scope,s=void 0===a?{}:a;if(!/render\s*\(/.test(i))return n(new SyntaxError("No-Inline evaluations must call `render`."));F(B(i),L({},s,{render:function(t){e(D(t,n))}}))},H=u.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n.prism-code {\n  display: block;\n  white-space: pre;\n\n  background-color: #1D1F21;\n  color: #C5C8C6;\n\n  padding: 0.5rem;\n  margin: 0;\n\n  box-sizing: border-box;\n  vertical-align: baseline;\n  outline: none;\n  text-shadow: none;\n  -webkit-hyphens: none;\n  -ms-hyphens: none;\n  hyphens: none;\n  word-wrap: normal;\n  word-break: normal;\n  text-align: left;\n  word-spacing: normal;\n  -moz-tab-size: 2;\n  -o-tab-size: 2;\n  tab-size: 2;\n}\n\n.token.comment,\n.token.prolog,\n.token.doctype,\n.token.cdata {\n  color: hsl(30, 20%, 50%);\n}\n\n.token.punctuation {\n  opacity: .7;\n}\n\n.namespace {\n  opacity: .7;\n}\n\n.token.property,\n.token.tag,\n.token.boolean,\n.token.number,\n.token.constant,\n.token.symbol {\n  color: hsl(350, 40%, 70%);\n}\n\n.token.selector,\n.token.attr-name,\n.token.string,\n.token.char,\n.token.builtin,\n.token.inserted {\n  color: hsl(75, 70%, 60%);\n}\n\n.token.operator,\n.token.entity,\n.token.url,\n.language-css .token.string,\n.style .token.string,\n.token.variable {\n  color: hsl(40, 90%, 60%);\n}\n\n.token.atrule,\n.token.attr-value,\n.token.keyword {\n  color: hsl(350, 40%, 70%);\n}\n\n.token.regex,\n.token.important {\n  color: #e90;\n}\n\n.token.important,\n.token.bold {\n  font-weight: bold;\n}\n.token.italic {\n  font-style: italic;\n}\n\n.token.entity {\n  cursor: help;\n}\n\n.token.deleted {\n  color: red;\n}\n"}}),K=function(){return H},G={live:f.a.shape({code:f.a.string,error:f.a.string,onError:f.a.func,onChange:f.a.func,element:f.a.oneOfType([f.a.string,f.a.number,f.a.element,f.a.func])})},W=function(t){function e(){var n,r;T(this,e);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=R(this,t.call.apply(t,[this].concat(a))),r.onChange=function(t){var e=r.props,n=e.scope,i=e.transformCode,a=e.noInline;r.transpile({code:t,scope:n,transformCode:i,noInline:a})},r.onError=function(t){r.setState({error:t.toString()})},r.transpile=function(t){var e=t.code,n=t.scope,i=t.transformCode,a=t.noInline,s=void 0!==a&&a,o={code:i?i(e):e,scope:n},p=function(t){return r.setState({element:void 0,error:t.toString()})},u=function(t){return r.setState(L({},h,{element:t}))},h={unsafeWrapperError:void 0,error:void 0};try{s?(r.setState(L({},h,{element:null})),V(o,u,p)):u(U(o,p))}catch(t){r.setState(L({},h,{error:t.toString()}))}},r.getChildContext=function(){return{live:L({},r.state,{code:r.props.code,onError:r.onError,onChange:r.onChange})}},R(r,n)}return O(e,t),e.prototype.componentWillMount=function(){var t=this.props,e=t.code,n=t.scope,r=t.transformCode,i=t.noInline;this.transpile({code:e,scope:n,transformCode:r,noInline:i})},e.prototype.componentWillReceiveProps=function(t){var e=t.code,n=t.scope,r=t.noInline,i=t.transformCode;e===this.props.code&&n===this.props.scope&&r===this.props.noInline&&i===this.props.transformCode||this.transpile({code:e,scope:n,transformCode:i,noInline:r})},e.prototype.render=function(){var t=this.props,e=t.children,n=t.className,r=(t.code,t.mountStylesheet),i=(t.noInline,t.transformCode,t.scope,I(t,["children","className","code","mountStylesheet","noInline","transformCode","scope"]));return u.a.createElement("div",L({className:g("react-live",n)},i),r&&u.a.createElement(K,null),e)},e}(p.Component);W.childContextTypes=G,W.defaultProps={code:"",mountStylesheet:!0,noInline:!1};var q=function(t,e){var n=e.live;return u.a.createElement(N,L({},t,{code:n.code,onChange:function(e){n.onChange(e),"function"==typeof t.onChange&&t.onChange(e)}}))};q.contextTypes=G;var z=function(t,e){var n=e.live,r=t.className,i=I(t,["className"]);return n.error?u.a.createElement("div",L({},i,{className:g("react-live-error",r)}),n.error):null};z.contextTypes=G;var J=function(t,e){var n=e.live.element,r=t.className,i=I(t,["className"]),a=n;return u.a.createElement("div",L({},i,{className:g("react-live-preview",r)}),a&&u.a.createElement(a,null))};J.contextTypes=G},412:function(t,e,n){(function(e){var n="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},r=function(){var t=/\blang(?:uage)?-([\w-]+)\b/i,e=0,r=n.Prism={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function(t){return t instanceof i?new i(t.type,r.util.encode(t.content),t.alias):"Array"===r.util.type(t)?t.map(r.util.encode):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(t){return Object.prototype.toString.call(t).match(/\[object (\w+)\]/)[1]},objId:function(t){return t.__id||Object.defineProperty(t,"__id",{value:++e}),t.__id},clone:function(t,e){var n=r.util.type(t);switch(e=e||{},n){case"Object":if(e[r.util.objId(t)])return e[r.util.objId(t)];var i={};for(var a in e[r.util.objId(t)]=i,t)t.hasOwnProperty(a)&&(i[a]=r.util.clone(t[a],e));return i;case"Array":return e[r.util.objId(t)]?e[r.util.objId(t)]:(i=[],e[r.util.objId(t)]=i,t.forEach(function(t,n){i[n]=r.util.clone(t,e)}),i)}return t}},languages:{extend:function(t,e){var n=r.util.clone(r.languages[t]);for(var i in e)n[i]=e[i];return n},insertBefore:function(t,e,n,i){var a=(i=i||r.languages)[t];if(2==arguments.length){for(var s in n=arguments[1])n.hasOwnProperty(s)&&(a[s]=n[s]);return a}var o={};for(var p in a)if(a.hasOwnProperty(p)){if(p==e)for(var s in n)n.hasOwnProperty(s)&&(o[s]=n[s]);o[p]=a[p]}return r.languages.DFS(r.languages,function(e,n){n===i[t]&&e!=t&&(this[e]=o)}),i[t]=o},DFS:function(t,e,n,i){for(var a in i=i||{},t)t.hasOwnProperty(a)&&(e.call(t,a,t[a],n||a),"Object"!==r.util.type(t[a])||i[r.util.objId(t[a])]?"Array"!==r.util.type(t[a])||i[r.util.objId(t[a])]||(i[r.util.objId(t[a])]=!0,r.languages.DFS(t[a],e,a,i)):(i[r.util.objId(t[a])]=!0,r.languages.DFS(t[a],e,null,i)))}},plugins:{},highlightAll:function(t,e){r.highlightAllUnder(document,t,e)},highlightAllUnder:function(t,e,n){var i={callback:n,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",i);for(var a,s=i.elements||t.querySelectorAll(i.selector),o=0;a=s[o++];)r.highlightElement(a,!0===e,i.callback)},highlightElement:function(e,i,a){for(var s,o,p=e;p&&!t.test(p.className);)p=p.parentNode;p&&(s=(p.className.match(t)||[,""])[1].toLowerCase(),o=r.languages[s]),e.className=e.className.replace(t,"").replace(/\s+/g," ")+" language-"+s,e.parentNode&&(p=e.parentNode,/pre/i.test(p.nodeName)&&(p.className=p.className.replace(t,"").replace(/\s+/g," ")+" language-"+s));var u={element:e,language:s,grammar:o,code:e.textContent};if(r.hooks.run("before-sanity-check",u),!u.code||!u.grammar)return u.code&&(r.hooks.run("before-highlight",u),u.element.textContent=u.code,r.hooks.run("after-highlight",u)),void r.hooks.run("complete",u);if(r.hooks.run("before-highlight",u),i&&n.Worker){var h=new Worker(r.filename);h.onmessage=function(t){u.highlightedCode=t.data,r.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,a&&a.call(u.element),r.hooks.run("after-highlight",u),r.hooks.run("complete",u)},h.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=r.highlight(u.code,u.grammar,u.language),r.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,a&&a.call(e),r.hooks.run("after-highlight",u),r.hooks.run("complete",u)},highlight:function(t,e,n){var a={code:t,grammar:e,language:n};return r.hooks.run("before-tokenize",a),a.tokens=r.tokenize(a.code,a.grammar),r.hooks.run("after-tokenize",a),i.stringify(r.util.encode(a.tokens),a.language)},matchGrammar:function(t,e,n,i,a,s,o){var p=r.Token;for(var u in n)if(n.hasOwnProperty(u)&&n[u]){if(u==o)return;var h=n[u];h="Array"===r.util.type(h)?h:[h];for(var c=0;c<h.length;++c){var l=h[c],d=l.inside,f=!!l.lookbehind,g=!!l.greedy,m=0,y=l.alias;if(g&&!l.pattern.global){var v=l.pattern.toString().match(/[imuy]*$/)[0];l.pattern=RegExp(l.pattern.source,v+"g")}l=l.pattern||l;for(var b=i,_=a;b<e.length;_+=e[b].length,++b){var x=e[b];if(e.length>t.length)return;if(!(x instanceof p)){if(g&&b!=e.length-1){if(l.lastIndex=_,!(A=l.exec(t)))break;for(var w=A.index+(f?A[1].length:0),S=A.index+A[0].length,k=b,C=_,E=e.length;k<E&&(C<S||!e[k].type&&!e[k-1].greedy);++k)w>=(C+=e[k].length)&&(++b,_=C);if(e[b]instanceof p)continue;P=k-b,x=t.slice(_,C),A.index-=_}else{l.lastIndex=0;var A=l.exec(x),P=1}if(A){f&&(m=A[1]?A[1].length:0),S=(w=A.index+m)+(A=A[0].slice(m)).length;var T=x.slice(0,w),L=x.slice(S),O=[b,P];T&&(++b,_+=T.length,O.push(T));var I=new p(u,d?r.tokenize(A,d):A,y,A,g);if(O.push(I),L&&O.push(L),Array.prototype.splice.apply(e,O),1!=P&&r.matchGrammar(t,e,n,b,_,!0,u),s)break}else if(s)break}}}}},tokenize:function(t,e,n){var i=[t],a=e.rest;if(a){for(var s in a)e[s]=a[s];delete e.rest}return r.matchGrammar(t,i,e,0,0,!1),i},hooks:{all:{},add:function(t,e){var n=r.hooks.all;n[t]=n[t]||[],n[t].push(e)},run:function(t,e){var n=r.hooks.all[t];if(n&&n.length)for(var i,a=0;i=n[a++];)i(e)}}},i=r.Token=function(t,e,n,r,i){this.type=t,this.content=e,this.alias=n,this.length=0|(r||"").length,this.greedy=!!i};if(i.stringify=function(t,e,n){if("string"==typeof t)return t;if("Array"===r.util.type(t))return t.map(function(n){return i.stringify(n,e,t)}).join("");var a={type:t.type,content:i.stringify(t.content,e,n),tag:"span",classes:["token",t.type],attributes:{},language:e,parent:n};if(t.alias){var s="Array"===r.util.type(t.alias)?t.alias:[t.alias];Array.prototype.push.apply(a.classes,s)}r.hooks.run("wrap",a);var o=Object.keys(a.attributes).map(function(t){return t+'="'+(a.attributes[t]||"").replace(/"/g,"&quot;")+'"'}).join(" ");return"<"+a.tag+' class="'+a.classes.join(" ")+'"'+(o?" "+o:"")+">"+a.content+"</"+a.tag+">"},!n.document)return n.addEventListener?(r.disableWorkerMessageHandler||n.addEventListener("message",function(t){var e=JSON.parse(t.data),i=e.language,a=e.code,s=e.immediateClose;n.postMessage(r.highlight(a,r.languages[i],i)),s&&n.close()},!1),n.Prism):n.Prism;var a=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return a&&(r.filename=a.src,r.manual||a.hasAttribute("data-manual")||("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(r.highlightAll):window.setTimeout(r.highlightAll,16):document.addEventListener("DOMContentLoaded",r.highlightAll))),n.Prism}();void 0!==t&&t.exports&&(t.exports=r),void 0!==e&&(e.Prism=r)}).call(this,n(150))},413:function(t,e){Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/}},414:function(t,e){Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b(?:0[xX][\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|NaN|Infinity)\b|(?:\b\d+\.?\d*|\B\.\d+)(?:[Ee][+-]?\d+)?/,function:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*\()/i,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[[^\]\r\n]+]|\\.|[^/\\\[\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=\s*(?:function\b|(?:\([^()]*\)|[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/i,alias:"function"},constant:/\b[A-Z][A-Z\d_]*\b/}),Prism.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${[^}]+}|[^\\`])*`/,greedy:!0,inside:{interpolation:{pattern:/\${[^}]+}/,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}}}),Prism.languages.javascript["template-string"].inside.interpolation.inside.rest=Prism.languages.javascript,Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\s\S]*?>)[\s\S]*?(?=<\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:"language-javascript",greedy:!0}}),Prism.languages.js=Prism.languages.javascript},415:function(t,e){Prism.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:/<!DOCTYPE[\s\S]+?>/i,cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/(^|[^\\])["']/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.hooks.add("wrap",function(t){"entity"===t.type&&(t.attributes.title=t.content.replace(/&amp;/,"&"))}),Prism.languages.xml=Prism.languages.markup,Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup},416:function(t,e){!function(t){var e=t.util.clone(t.languages.javascript);t.languages.jsx=t.languages.extend("markup",e),t.languages.jsx.tag.pattern=/<\/?(?:[\w.:-]+\s*(?:\s+(?:[\w.:-]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s{'">=]+|\{(?:\{(?:\{[^}]*\}|[^{}])*\}|[^{}])+\}))?|\{\.{3}[a-z_$][\w$]*(?:\.[a-z_$][\w$]*)*\}))*\s*\/?)?>/i,t.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/i,t.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">]+)/i,t.languages.insertBefore("inside","attr-name",{spread:{pattern:/\{\.{3}[a-z_$][\w$]*(?:\.[a-z_$][\w$]*)*\}/,inside:{punctuation:/\.{3}|[{}.]/,"attr-value":/\w+/}}},t.languages.jsx.tag),t.languages.insertBefore("inside","attr-value",{script:{pattern:/=(\{(?:\{(?:\{[^}]*\}|[^}])*\}|[^}])+\})/i,inside:{"script-punctuation":{pattern:/^=(?={)/,alias:"punctuation"},rest:t.languages.jsx},alias:"language-javascript"}},t.languages.jsx.tag);var n=function(t){return t?"string"==typeof t?t:"string"==typeof t.content?t.content:t.content.map(n).join(""):""},r=function(e){for(var i=[],a=0;a<e.length;a++){var s=e[a],o=!1;if("string"!=typeof s&&("tag"===s.type&&s.content[0]&&"tag"===s.content[0].type?"</"===s.content[0].content[0].content?i.length>0&&i[i.length-1].tagName===n(s.content[0].content[1])&&i.pop():"/>"===s.content[s.content.length-1].content||i.push({tagName:n(s.content[0].content[1]),openedBraces:0}):i.length>0&&"punctuation"===s.type&&"{"===s.content?i[i.length-1].openedBraces++:i.length>0&&i[i.length-1].openedBraces>0&&"punctuation"===s.type&&"}"===s.content?i[i.length-1].openedBraces--:o=!0),(o||"string"==typeof s)&&i.length>0&&0===i[i.length-1].openedBraces){var p=n(s);a<e.length-1&&("string"==typeof e[a+1]||"plain-text"===e[a+1].type)&&(p+=n(e[a+1]),e.splice(a+1,1)),a>0&&("string"==typeof e[a-1]||"plain-text"===e[a-1].type)&&(p=n(e[a-1])+p,e.splice(a-1,1),a--),e[a]=new t.Token("plain-text",p,null,p)}s.content&&"string"!=typeof s.content&&r(s.content)}};t.hooks.add("after-tokenize",function(t){"jsx"!==t.language&&"tsx"!==t.language||r(t.tokens)})}(Prism)},417:function(t,e,n){"use strict";var r,i=(t.exports=function(t){if(null==t)return"";var e=r||(r=new RegExp("("+Object.keys(i).join("|")+")","g"));return String(t).replace(e,function(t){return i[t]})}).chars={"&apos;":"'","&#39;":"'","&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'}},418:function(t,e,n){var r=n(419),i=n(420);function a(t,e){if(!(this instanceof a))return new a(t,e);if(this.node=this.start=this.peeked=t,this.root=e,this.closingTag=!1,this._revisit=!0,this._selects=[],this._rejects=[],t&&this.higher(t))throw new Error("root must be a parent or ancestor to node")}function s(t,e){var n="nextSibling"==t;return function(i,a,s){i=this.compile(i),a=a&&a>0?a:1;for(var o=this.node,p=this.closingTag,u=this._revisit;o;){if(r(n,p)&&o[e])o=o[e],p=!n;else if(1==o.nodeType&&!o[e]&&r(n,p)){if(p=n,!u)continue}else if(o[t])o=o[t],p=!n;else if(o=o.parentNode,p=n,!u)continue;if(!o||this.higher(o,this.root))break;if(i(o)&&this.selects(o,s)&&this.rejects(o,s)){if(--a)continue;return s||(this.node=o),this.closingTag=p,o}}return null}}t.exports=a,a.prototype.reset=function(t){return this.node=t||this.start,this},a.prototype.revisit=function(t){return this._revisit=void 0==t||t,this},a.prototype.opening=function(){return 1==this.node.nodeType&&(this.closingTag=!1),this},a.prototype.atOpening=function(){return!this.closingTag},a.prototype.closing=function(){return 1==this.node.nodeType&&(this.closingTag=!0),this},a.prototype.atClosing=function(){return this.closingTag},a.prototype.next=s("nextSibling","firstChild"),a.prototype.previous=a.prototype.prev=s("previousSibling","lastChild"),a.prototype.select=function(t){return t=this.compile(t),this._selects.push(t),this},a.prototype.selects=function(t,e){var n=this._selects,r=n.length;if(!r)return!0;for(var i=0;i<r;i++)if(n[i].call(this,t,e))return!0;return!1},a.prototype.reject=function(t){return t=this.compile(t),this._rejects.push(t),this},a.prototype.rejects=function(t,e){var n=this._rejects,r=n.length;if(!r)return!0;for(var i=0;i<r;i++)if(n[i].call(this,t,e))return!1;return!0},a.prototype.higher=function(t){var e=this.root;if(!e)return!1;for(t=t.parentNode;t&&t!=e;)t=t.parentNode;return t!=e},a.prototype.compile=function(t){switch(typeof t){case"number":return function(e){return t==e.nodeType};case"string":return new Function("node","return "+i(t,"node."));case"function":return t;default:return function(){return!0}}},a.prototype.peak=a.prototype.peek=function(t,e){return 1==arguments.length&&(e=t,t=!0),(e=void 0==e?1:e)?e>0?this.next(t,e,!0):this.prev(t,Math.abs(e),!0):this.node},a.prototype.use=function(t){return t(this),this}},419:function(t,e){t.exports=function(t,e){return t^e}},420:function(t,e){var n=/\b(Array|Date|Object|Math|JSON)\b/g;t.exports=function(t,e){var r=function(t){for(var e=[],n=0;n<t.length;n++)~e.indexOf(t[n])||e.push(t[n]);return e}(function(t){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(n,"").match(/[a-zA-Z_]\w*/g)||[]}(t));return e&&"string"==typeof e&&(e=function(t){return function(e){return t+e}}(e)),e?function(t,e,n){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g,function(t){return"("==t[t.length-1]?n(t):~e.indexOf(t)?n(t):t})}(t,r,e):r}},421:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return It});var r=n(422),i=n(429),a={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},s=/^[\da-fA-F]+$/,o=/^\d+$/,p="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function u(t,e){return t(e={exports:{}},e.exports),e.exports}var h,c=u(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.tokTypes;return e._import.startsExpr=!0,t.plugins.dynamicImport=function(t){t.extend("parseStatement",function(t){return function(){var n=this.startNode();if(this.type===e._import&&function(){return this.input[this.pos]}.call(this)===e.parenL.label){var r=this.parseExpression();return this.parseExpressionStatement(n,r)}for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return t.apply(this,a)}}),t.extend("parseExprAtom",function(t){return function(r){return this.type===e._import?function(){var t=this.startNode();return this.next(),this.type!==e.parenL&&this.unexpected(),this.finishNode(t,n)}.call(this):t.call(this,r)}})},t};var n=e.DynamicImportKey="Import"}),l=(h=c)&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h;function d(t){var e={};return Object.keys(t).forEach(function(n){"parent"!==n&&"program"!==n&&"keys"!==n&&"__wrapped"!==n&&(Array.isArray(t[n])?e[n]=t[n].map(d):t[n]&&t[n].toJSON?e[n]=t[n].toJSON():e[n]=t[n])}),e}c.DynamicImportKey;var f=function(){};function g(t){var e=[];return m[t.type](e,t),e}f.prototype.ancestor=function(t){for(var e=this;t--;)if(!(e=e.parent))return null;return e},f.prototype.contains=function(t){for(;t;){if(t===this)return!0;t=t.parent}return!1},f.prototype.findLexicalBoundary=function(){return this.parent.findLexicalBoundary()},f.prototype.findNearest=function(t){return"string"==typeof t&&(t=new RegExp("^"+t+"$")),t.test(this.type)?this:this.parent.findNearest(t)},f.prototype.unparenthesizedParent=function(){for(var t=this.parent;t&&"ParenthesizedExpression"===t.type;)t=t.parent;return t},f.prototype.unparenthesize=function(){for(var t=this;"ParenthesizedExpression"===t.type;)t=t.expression;return t},f.prototype.findScope=function(t){return this.parent.findScope(t)},f.prototype.getIndentation=function(){return this.parent.getIndentation()},f.prototype.initialise=function(t){for(var e=0,n=this.keys;e<n.length;e+=1){var r=this[n[e]];Array.isArray(r)?r.forEach(function(e){return e&&e.initialise(t)}):r&&"object"==typeof r&&r.initialise(t)}},f.prototype.toJSON=function(){return d(this)},f.prototype.toString=function(){return this.program.magicString.original.slice(this.start,this.end)},f.prototype.transpile=function(t,e){for(var n=0,r=this.keys;n<r.length;n+=1){var i=this[r[n]];Array.isArray(i)?i.forEach(function(n){return n&&n.transpile(t,e)}):i&&"object"==typeof i&&i.transpile(t,e)}};var m={Identifier:function(t,e){t.push(e)},ObjectPattern:function(t,e){for(var n=0,r=e.properties;n<r.length;n+=1){var i=r[n];m[i.type](t,i)}},Property:function(t,e){m[e.value.type](t,e.value)},ArrayPattern:function(t,e){for(var n=0,r=e.elements;n<r.length;n+=1){var i=r[n];i&&m[i.type](t,i)}},RestElement:function(t,e){m[e.argument.type](t,e.argument)},AssignmentPattern:function(t,e){m[e.left.type](t,e.left)}},y=Object.create(null);function v(t){t=t||{},this.parent=t.parent,this.isBlockScope=!!t.block,this.createDeclarationCallback=t.declare;for(var e=this;e.isBlockScope;)e=e.parent;this.functionScope=e,this.identifiers=[],this.declarations=Object.create(null),this.references=Object.create(null),this.blockScopedDeclarations=this.isBlockScope?null:Object.create(null),this.aliases=Object.create(null)}function b(t,e){for(var n="";e--;)n+=t;return n}function _(t,e,n){void 0===n&&(n=1);var r=Math.max(e.line-5,0),i=e.line,a=String(i).length,s=t.split("\n").slice(r,i),o=s[s.length-1].slice(0,e.column).replace(/\t/g,"  ").length;return s.map(function(t,e){return n=a,(i=String(e+r+1))+b(" ",n-i.length)+" : "+t.replace(/\t/g,"  ");var n,i}).join("\n")+"\n"+b(" ",a+3+o)+b("^",n)}"do if in for let new try var case else enum eval null this true void with await break catch class const false super throw while yield delete export import public return static switch typeof default extends finally package private continue debugger function arguments interface protected implements instanceof".split(" ").forEach(function(t){return y[t]=!0}),v.prototype={addDeclaration:function(t,e){for(var n=0,r=g(t);n<r.length;n+=1){var i=r[n],a=i.name,s={name:a,node:i,kind:e,instances:[]};this.declarations[a]=s,this.isBlockScope&&(this.functionScope.blockScopedDeclarations[a]||(this.functionScope.blockScopedDeclarations[a]=[]),this.functionScope.blockScopedDeclarations[a].push(s))}},addReference:function(t){this.consolidated?this.consolidateReference(t):this.identifiers.push(t)},consolidate:function(){for(var t=0;t<this.identifiers.length;t+=1){var e=this.identifiers[t];this.consolidateReference(e)}this.consolidated=!0},consolidateReference:function(t){var e=this.declarations[t.name];e?e.instances.push(t):(this.references[t.name]=!0,this.parent&&this.parent.addReference(t))},contains:function(t){return this.declarations[t]||!!this.parent&&this.parent.contains(t)},createIdentifier:function(t){"number"==typeof t&&(t=t.toString());for(var e=t=t.replace(/\s/g,"").replace(/\[([^\]]+)\]/g,"_$1").replace(/[^a-zA-Z0-9_$]/g,"_").replace(/_{2,}/,"_"),n=1;this.declarations[e]||this.references[e]||this.aliases[e]||e in y;)e=t+"$"+n++;return this.aliases[e]=!0,e},createDeclaration:function(t){var e=this.createIdentifier(t);return this.createDeclarationCallback(e),e},findDeclaration:function(t){return this.declarations[t]||this.parent&&this.parent.findDeclaration(t)},resolveName:function(t){var e=this.findDeclaration(t);return e?e.name:t}};var x=function(t){function e(e,n){if(t.call(this,e),this.name="CompileError",n){var r=n.program.magicString.original,i=function(t,e){var n,r=t.split("\n"),i=r.length,a=0;for(n=0;n<i;n+=1){var s=a+r[n].length+1;if(s>e)return{line:n+1,column:e-a,char:n};a=s}throw new Error("Could not determine location of character")}(r,n.start);this.message=e+" ("+i.line+":"+i.column+")",this.stack=(new t).stack.replace(new RegExp(".+new "+this.name+".+\\n","m"),""),this.loc=i,this.snippet=_(r,i,n.end-n.start)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+"\n"+this.snippet},e}(Error);function w(t,e){for(var n=0;n<t.length;n+=1)if(e(t[n],n))return n;return-1}var S={Identifier:C,AssignmentPattern:function(t,e,n,r,i,a,s){var o="Identifier"===r.left.type,p=o?r.left.name:i;a||s.push(function(e,n,i){t.prependRight(r.left.end,n+"if ( "+p+" === void 0 ) "+p),t.move(r.left.end,r.right.end,e),t.appendLeft(r.right.end,i)}),o||k(t,e,n,r.left,i,a,s)},ArrayPattern:function(t,e,n,r,i,a,s){var o=r.start;r.elements.forEach(function(r,p){r&&("RestElement"===r.type?A(t,e,n,o,r.argument,i+".slice("+p+")",a,s):A(t,e,n,o,r,i+"["+p+"]",a,s),o=r.end)}),t.remove(o,r.end)},ObjectPattern:E};function k(t,e,n,r,i,a,s){S[r.type](t,e,n,r,i,a,s)}function C(t,e,n,r,i,a,s){s.push(function(e,s,o){t.overwrite(r.start,r.end,(a?s:s+"var ")+n(r)+" = "+i+o),t.move(r.start,r.end,e)})}function E(t,e,n,r,i,a,s){var o=this,p=r.start,u=[];r.properties.forEach(function(r){var h,c;if("Property"===r.type){var l=r.computed||"Identifier"!==r.key.type,d=l?t.slice(r.key.start,r.key.end):r.key.name;h=l?i+"["+d+"]":i+"."+d,c=r.value,u.push(l?d:'"'+d+'"')}else{if("RestElement"!==r.type)throw new x(o,"Unexpected node of type "+r.type+" in object pattern");c=r.argument,h=e("rest"),s.push(function(e,n,s){var o=r.program.getObjectWithoutPropertiesHelper(t);t.overwrite(r.start,p=r.argument.start,(a?n:n+"var ")+h+" = "+o+"( "+i+", ["+u.join(", ")+"] )"+s),t.move(r.start,p,e)})}A(t,e,n,p,c,h,a,s),p=r.end}),t.remove(p,r.end)}function A(t,e,n,r,i,a,s,o){switch(i.type){case"Identifier":t.remove(r,i.start),C(t,0,n,i,a,s,o);break;case"MemberExpression":t.remove(r,i.start),function(t,e,n,r,i,a,s){o.push(function(e,n,a){t.prependRight(r.start,n),t.appendLeft(r.end," = "+i+a),t.move(r.start,r.end,e)})}(t,0,0,i,a);break;case"AssignmentPattern":var p,u="Identifier"===i.left.type;p=u?n(i.left):e(a),o.push(function(e,n,r){s?(t.prependRight(i.right.start,p+" = "+a+", "+p+" = "+p+" === void 0 ? "),t.appendLeft(i.right.end," : "+p+r)):(t.prependRight(i.right.start,n+"var "+p+" = "+a+"; if ( "+p+" === void 0 ) "+p+" = "),t.appendLeft(i.right.end,r)),t.move(i.right.start,i.right.end,e)}),u?t.remove(r,i.right.start):(t.remove(r,i.left.start),t.remove(i.left.end,i.right.start),A(t,e,n,r,i.left,p,s,o));break;case"ObjectPattern":t.remove(r,r=i.start);var h=a;i.properties.length>1&&(h=e(a),o.push(function(e,n,o){t.prependRight(i.start,(s?"":n+"var ")+h+" = "),t.overwrite(i.start,r=i.start+1,a),t.appendLeft(r,o),t.overwrite(i.start,r=i.start+1,(s?"":n+"var ")+h+" = "+a+o),t.move(i.start,r,e)})),E(t,e,n,i,h,s,o);break;case"ArrayPattern":if(t.remove(r,r=i.start),i.elements.filter(Boolean).length>1){var c=e(a);o.push(function(e,n,o){t.prependRight(i.start,(s?"":n+"var ")+c+" = "),t.overwrite(i.start,r=i.start+1,a,{contentOnly:!0}),t.appendLeft(r,o),t.move(i.start,r,e)}),i.elements.forEach(function(i,a){i&&("RestElement"===i.type?A(t,e,n,r,i.argument,c+".slice("+a+")",s,o):A(t,e,n,r,i,c+"["+a+"]",s,o),r=i.end)})}else{var l=w(i.elements,Boolean),d=i.elements[l];"RestElement"===d.type?A(t,e,n,r,d.argument,a+".slice("+l+")",s,o):A(t,e,n,r,d,a+"["+l+"]",s,o),r=d.end}t.remove(r,i.end);break;default:throw new Error("Unexpected node type in destructuring ("+i.type+")")}}var P=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createScope=function(){var t=this;this.parentIsFunction=/Function/.test(this.parent.type),this.isFunctionBlock=this.parentIsFunction||"Root"===this.parent.type,this.scope=new v({block:!this.isFunctionBlock,parent:this.parent.findScope(!1),declare:function(e){return t.createdDeclarations.push(e)}}),this.parentIsFunction&&this.parent.params.forEach(function(e){t.scope.addDeclaration(e,"param")})},e.prototype.initialise=function(t){this.thisAlias=null,this.argumentsAlias=null,this.defaultParameters=[],this.createdDeclarations=[],this.scope||this.createScope(),this.body.forEach(function(e){return e.initialise(t)}),this.scope.consolidate()},e.prototype.findLexicalBoundary=function(){return"Program"===this.type?this:/^Function/.test(this.parent.type)?this:this.parent.findLexicalBoundary()},e.prototype.findScope=function(t){return t&&!this.isFunctionBlock?this.parent.findScope(t):this.scope},e.prototype.getArgumentsAlias=function(){return this.argumentsAlias||(this.argumentsAlias=this.scope.createIdentifier("arguments")),this.argumentsAlias},e.prototype.getArgumentsArrayAlias=function(){return this.argumentsArrayAlias||(this.argumentsArrayAlias=this.scope.createIdentifier("argsArray")),this.argumentsArrayAlias},e.prototype.getThisAlias=function(){return this.thisAlias||(this.thisAlias=this.scope.createIdentifier("this")),this.thisAlias},e.prototype.getIndentation=function(){if(void 0===this.indentation){for(var t=this.program.magicString.original,e=this.synthetic||!this.body.length,n=e?this.start:this.body[0].start;n&&"\n"!==t[n];)n-=1;for(this.indentation="";;){var r=t[n+=1];if(" "!==r&&"\t"!==r)break;this.indentation+=r}for(var i=this.program.magicString.getIndentString(),a=this.parent;a;)"constructor"!==a.kind||a.parent.parent.superClass||(this.indentation=this.indentation.replace(i,"")),a=a.parent;e&&(this.indentation+=i)}return this.indentation},e.prototype.transpile=function(e,n){var r,i,a=this,s=this.getIndentation(),o=[];if(this.argumentsAlias&&o.push(function(t,n,r){var i=n+"var "+a.argumentsAlias+" = arguments"+r;e.appendLeft(t,i)}),this.thisAlias&&o.push(function(t,n,r){var i=n+"var "+a.thisAlias+" = this"+r;e.appendLeft(t,i)}),this.argumentsArrayAlias&&o.push(function(t,n,r){var i=a.scope.createIdentifier("i"),o=n+"var "+i+" = arguments.length, "+a.argumentsArrayAlias+" = Array("+i+");\n"+s+"while ( "+i+"-- ) "+a.argumentsArrayAlias+"["+i+"] = arguments["+i+"]"+r;e.appendLeft(t,o)}),/Function/.test(this.parent.type)?this.transpileParameters(this.parent.params,e,n,s,o):"CatchClause"===this.parent.type&&this.transpileParameters([this.parent.param],e,n,s,o),n.letConst&&this.isFunctionBlock&&this.transpileBlockScopedIdentifiers(e),t.prototype.transpile.call(this,e,n),this.createdDeclarations.length&&o.push(function(t,n,r){var i=n+"var "+a.createdDeclarations.join(", ")+r;e.appendLeft(t,i)}),this.synthetic)if("ArrowFunctionExpression"===this.parent.type){var p=this.body[0];o.length?(e.appendLeft(this.start,"{").prependRight(this.end,this.parent.getIndentation()+"}"),e.prependRight(p.start,"\n"+s+"return "),e.appendLeft(p.end,";\n")):n.arrow&&(e.prependRight(p.start,"{ return "),e.appendLeft(p.end,"; }"))}else o.length&&e.prependRight(this.start,"{").appendLeft(this.end,"}");i=this.body[0],r=i&&"ExpressionStatement"===i.type&&"Literal"===i.expression.type&&"use strict"===i.expression.value?this.body[0].end:this.synthetic||"Root"===this.parent.type?this.start:this.start+1;var u="\n"+s,h=";";o.forEach(function(t,e){e===o.length-1&&(h=";\n"),t(r,u,h)})},e.prototype.transpileParameters=function(t,e,n,r,i){var a=this;t.forEach(function(s){if("AssignmentPattern"===s.type&&"Identifier"===s.left.type)n.defaultParameter&&i.push(function(t,n,r){var i=n+"if ( "+s.left.name+" === void 0 ) "+s.left.name;e.prependRight(s.left.end,i).move(s.left.end,s.right.end,t).appendLeft(s.right.end,r)});else if("RestElement"===s.type)n.spreadRest&&i.push(function(n,i,o){var p=t[t.length-2];if(p)e.remove(p?p.end:s.start,s.end);else{for(var u=s.start,h=s.end;/\s/.test(e.original[u-1]);)u-=1;for(;/\s/.test(e.original[h]);)h+=1;e.remove(u,h)}var c=s.argument.name,l=a.scope.createIdentifier("len"),d=t.length-1;d?e.prependRight(n,i+"var "+c+" = [], "+l+" = arguments.length - "+d+";\n"+r+"while ( "+l+"-- > 0 ) "+c+"[ "+l+" ] = arguments[ "+l+" + "+d+" ]"+o):e.prependRight(n,i+"var "+c+" = [], "+l+" = arguments.length;\n"+r+"while ( "+l+"-- ) "+c+"[ "+l+" ] = arguments[ "+l+" ]"+o)});else if("Identifier"!==s.type&&n.parameterDestructuring){var o=a.scope.createIdentifier("ref");k(e,function(t){return a.scope.createIdentifier(t)},function(t){var e=t.name;return a.scope.resolveName(e)},s,o,!1,i),e.prependRight(s.start,o)}})},e.prototype.transpileBlockScopedIdentifiers=function(t){var e=this;Object.keys(this.scope.blockScopedDeclarations).forEach(function(n){for(var r=0,i=e.scope.blockScopedDeclarations[n];r<i.length;r+=1){var a=i[r],s=!1;if("for.let"===a.kind){var o=a.node.findNearest("ForStatement");if(o.shouldRewriteAsFunction){var p=e.scope.createIdentifier(n),u=o.reassigned[n]?e.scope.createIdentifier(n):n;a.name=p,t.overwrite(a.node.start,a.node.end,p,{storeName:!0}),o.aliases[n]={outer:p,inner:u};for(var h=0,c=a.instances;h<c.length;h+=1){var l=c[h],d=o.body.contains(l)?u:p;n!==d&&t.overwrite(l.start,l.end,d,{storeName:!0})}s=!0}}if(!s){var f=e.scope.createIdentifier(n);if(n!==f){a.name=f,t.overwrite(a.node.start,a.node.end,f,{storeName:!0});for(var g=0,m=a.instances;g<m.length;g+=1){var y=m[g];y.rewritten=!0,t.overwrite(y.start,y.end,f,{storeName:!0})}}}}})},e}(f);function T(t){return"Identifier"===t.type&&"arguments"===t.name}function L(t,e,n,r,i){for(var a=e.length,s=-1;a--;){var o=e[a];o&&"SpreadElement"===o.type&&(T(o.argument)&&t.overwrite(o.argument.start,o.argument.end,r),s=a)}if(-1===s)return!1;if(i){for(a=0;a<e.length;a+=1){var p=e[a];"SpreadElement"===p.type?t.remove(p.start,p.argument.start):(t.prependRight(p.start,"["),t.prependRight(p.end,"]"))}return!0}var u=e[s],h=e[s-1];for(h?t.overwrite(h.end,u.start," ].concat( "):(t.remove(n,u.start),t.overwrite(u.end,e[1].start,".concat( ")),a=s;a<e.length;a+=1)(u=e[a])&&("SpreadElement"===u.type?t.remove(u.start,u.argument.start):(t.appendLeft(u.start,"["),t.appendLeft(u.end,"]")));return!0}var O=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){if(e.spreadRest&&this.elements.length)for(var n=this.findLexicalBoundary(),r=this.elements.length;r--;){var i=this.elements[r];i&&"SpreadElement"===i.type&&T(i.argument)&&(this.argumentsArrayAlias=n.getArgumentsArrayAlias())}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){if(t.prototype.transpile.call(this,e,n),n.spreadRest){if(this.elements.length){var r=this.elements[this.elements.length-1];r&&/\s*,/.test(e.original.slice(r.end,this.end))&&e.overwrite(r.end,this.end-1," ")}if(1===this.elements.length){var i=this.elements[0];i&&"SpreadElement"===i.type&&(T(i.argument)?e.overwrite(this.start,this.end,"[].concat( "+this.argumentsArrayAlias+" )"):(e.overwrite(this.start,i.argument.start,"[].concat( "),e.overwrite(i.end,this.end," )")))}else L(e,this.elements,this.start,this.argumentsArrayAlias)&&e.overwrite(this.end-1,this.end,")")}},e}(f);function I(t,e){for(;")"!==t.original[e];){if(","===t.original[e])return void t.remove(e,e+1);"/"===t.original[e]&&(e=t.original.indexOf("/"===t.original[e+1]?"\n":"*/",e)+1),e+=1}}var R=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){this.body.createScope(),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){var r=1===this.params.length&&this.start===this.params[0].start;if(n.arrow||this.needsArguments(n)){for(var i=this.body.start;"="!==e.original[i];)i-=1;e.remove(i,this.body.start),t.prototype.transpile.call(this,e,n),r&&(e.prependRight(this.params[0].start,"("),e.appendLeft(this.params[0].end,")")),this.parent&&"ExpressionStatement"===this.parent.type?e.prependRight(this.start,"!function"):e.prependRight(this.start,"function ")}else t.prototype.transpile.call(this,e,n);n.trailingFunctionCommas&&this.params.length&&!r&&I(e,this.params[this.params.length-1].end)},e.prototype.needsArguments=function(t){return t.spreadRest&&this.params.filter(function(t){return"RestElement"===t.type}).length>0},e}(f);function N(t,e){var n=e.findDeclaration(t.name);if(n&&"const"===n.kind)throw new x(t.name+" is read-only",t)}var j=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){if("Identifier"===this.left.type){var n=this.findScope(!1).findDeclaration(this.left.name),r=n&&n.node.ancestor(3);r&&"ForStatement"===r.type&&r.body.contains(this)&&(r.reassigned[this.left.name]=!0)}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){"Identifier"===this.left.type&&N(this.left,this.findScope(!1)),"**="===this.operator&&n.exponentiation?this.transpileExponentiation(e,n):/Pattern/.test(this.left.type)&&n.destructuring&&this.transpileDestructuring(e,n),t.prototype.transpile.call(this,e,n)},e.prototype.transpileDestructuring=function(t){var e=this,n=this.findScope(!0),r=this.findScope(!1),i=n.createDeclaration("assign");t.appendRight(this.left.end,"("+i),t.appendLeft(this.right.end,", ");var a=[];k(t,function(t){return n.createDeclaration(t)},function(t){var e=r.resolveName(t.name);return N(t,r),e},this.left,i,!0,a);var s=", ";a.forEach(function(t,n){n===a.length-1&&(s=""),t(e.end,"",s)}),"ExpressionStatement"===this.unparenthesizedParent().type?t.appendRight(this.end,")"):t.appendRight(this.end,", "+i+")")},e.prototype.transpileExponentiation=function(t){for(var e,n=this.findScope(!1),r=this.left.end;"*"!==t.original[r];)r+=1;t.remove(r,r+2);var i=this.left.unparenthesize();if("Identifier"===i.type)e=n.resolveName(i.name);else if("MemberExpression"===i.type){var a,s,o=!1,p=!1,u=this.findNearest(/(?:Statement|Declaration)$/),h=u.getIndentation();"Identifier"===i.property.type?s=i.computed?n.resolveName(i.property.name):i.property.name:(s=n.createDeclaration("property"),p=!0),"Identifier"===i.object.type?a=n.resolveName(i.object.name):(a=n.createDeclaration("object"),o=!0),i.start===u.start?o&&p?(t.prependRight(u.start,a+" = "),t.overwrite(i.object.end,i.property.start,";\n"+h+s+" = "),t.overwrite(i.property.end,i.end,";\n"+h+a+"["+s+"]")):o?(t.prependRight(u.start,a+" = "),t.appendLeft(i.object.end,";\n"+h),t.appendLeft(i.object.end,a)):p&&(t.prependRight(i.property.start,s+" = "),t.appendLeft(i.property.end,";\n"+h),t.move(i.property.start,i.property.end,this.start),t.appendLeft(i.object.end,"["+s+"]"),t.remove(i.object.end,i.property.start),t.remove(i.property.end,i.end)):(o&&p?(t.prependRight(i.start,"( "+a+" = "),t.overwrite(i.object.end,i.property.start,", "+s+" = "),t.overwrite(i.property.end,i.end,", "+a+"["+s+"]")):o?(t.prependRight(i.start,"( "+a+" = "),t.appendLeft(i.object.end,", "+a)):p&&(t.prependRight(i.property.start,"( "+s+" = "),t.appendLeft(i.property.end,", "),t.move(i.property.start,i.property.end,i.start),t.overwrite(i.object.end,i.property.start,"["+s+"]"),t.remove(i.property.end,i.end)),p&&t.appendLeft(this.end," )")),e=a+(i.computed||p?"["+s+"]":"."+s)}t.prependRight(this.right.start,"Math.pow( "+e+", "),t.appendLeft(this.right.end," )")},e}(f),M=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(e,n){"**"===this.operator&&n.exponentiation&&(e.prependRight(this.start,"Math.pow( "),e.overwrite(this.left.end,this.right.start,", "),e.appendLeft(this.end," )")),t.prototype.transpile.call(this,e,n)},e}(f),B=/(?:For(?:In|Of)?|While)Statement/,D=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(){var t=this.findNearest(B),e=this.findNearest("SwitchCase");t&&(!e||t.depth>e.depth)&&(t.canBreak=!0,this.loop=t)},e.prototype.transpile=function(t){if(this.loop&&this.loop.shouldRewriteAsFunction){if(this.label)throw new x("Labels are not currently supported in a loop with locally-scoped variables",this);t.overwrite(this.start,this.start+5,"return 'break'")}},e}(f),F=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){if(e.spreadRest&&this.arguments.length>1)for(var n=this.findLexicalBoundary(),r=this.arguments.length;r--;){var i=this.arguments[r];"SpreadElement"===i.type&&T(i.argument)&&(this.argumentsArrayAlias=n.getArgumentsArrayAlias())}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){if(n.spreadRest&&this.arguments.length){var r,i=!1,a=this.arguments[0];if(1===this.arguments.length?"SpreadElement"===a.type&&(e.remove(a.start,a.argument.start),i=!0):i=L(e,this.arguments,a.start,this.argumentsArrayAlias),i){var s=null;if("Super"===this.callee.type?s=this.callee:"MemberExpression"===this.callee.type&&"Super"===this.callee.object.type&&(s=this.callee.object),s||"MemberExpression"!==this.callee.type)r="void 0";else if("Identifier"===this.callee.object.type)r=this.callee.object.name;else{r=this.findScope(!0).createDeclaration("ref");var o=this.callee.object;e.prependRight(o.start,"("+r+" = "),e.appendLeft(o.end,")")}e.appendLeft(this.callee.end,".apply"),s?(s.noCall=!0,this.arguments.length>1&&("SpreadElement"!==a.type&&e.prependRight(a.start,"[ "),e.appendLeft(this.arguments[this.arguments.length-1].end," )"))):1===this.arguments.length?e.prependRight(a.start,r+", "):("SpreadElement"===a.type?e.appendLeft(a.start,r+", "):e.appendLeft(a.start,r+", [ "),e.appendLeft(this.arguments[this.arguments.length-1].end," )"))}}n.trailingFunctionCommas&&this.arguments.length&&I(e,this.arguments[this.arguments.length-1].end),t.prototype.transpile.call(this,e,n)},e}(f),U=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(e,n,r,i){var a=this;if(n.classes){var s=this.parent.name,o=e.getIndentString(),p=this.getIndentation()+(r?o:""),u=p+o,h=w(this.body,function(t){return"constructor"===t.kind}),c=this.body[h],l="",d="";if(this.body.length?(e.remove(this.start,this.body[0].start),e.remove(this.body[this.body.length-1].end,this.end)):e.remove(this.start,this.end),c){c.value.body.isConstructorBody=!0;var f=this.body[h-1],g=this.body[h+1];h>0&&(e.remove(f.end,c.start),e.move(c.start,g?g.start:this.end-1,this.body[0].start)),r||e.appendLeft(c.end,";")}var m=!1!==this.program.options.namedFunctionExpressions,v=m||this.parent.superClass||"ClassDeclaration"!==this.parent.type;if(this.parent.superClass){var b="if ( "+i+" ) "+s+".__proto__ = "+i+";\n"+p+s+".prototype = Object.create( "+i+" && "+i+".prototype );\n"+p+s+".prototype.constructor = "+s+";";l+=c?"\n\n"+p+b:(b="function "+s+" () {"+(i?"\n"+u+i+".apply(this, arguments);\n"+p+"}":"}")+(r?"":";")+(this.body.length?"\n\n"+p:"")+b)+"\n\n"+p}else if(!c){var _="function "+(v?s+" ":"")+"() {}";"ClassDeclaration"===this.parent.type&&(_+=";"),this.body.length&&(_+="\n\n"+p),l+=_}var x,S,k=this.findScope(!1),C=[],E=[];if(this.body.forEach(function(t,n){if("constructor"!==t.kind){if(t.static){var r=" "==e.original[t.start+6]?7:6;e.remove(t.start,t.start+r)}var i,o="method"!==t.kind,u=t.key.name;(y[u]||t.value.body.scope.references[u])&&(u=k.createIdentifier(u));var c=!1;if(t.computed||"Literal"!==t.key.type||(c=!0,t.computed=!0),o){if(t.computed)throw new Error("Computed accessor properties are not currently supported");e.remove(t.start,t.key.start),t.static?(~E.indexOf(t.key.name)||E.push(t.key.name),S||(S=k.createIdentifier("staticAccessors")),i=""+S):(~C.indexOf(t.key.name)||C.push(t.key.name),x||(x=k.createIdentifier("prototypeAccessors")),i=""+x)}else i=t.static?""+s:s+".prototype";t.computed||(i+="."),(h>0&&n===h+1||0===n&&h===a.body.length-1)&&(i="\n\n"+p+i);var l=t.key.end;if(t.computed)if(c)e.prependRight(t.key.start,"["),e.appendLeft(t.key.end,"]");else{for(;"]"!==e.original[l];)l+=1;l+=1}var d=t.computed||o||!m?"":u+" ",f=(o?"."+t.kind:"")+" = function"+(t.value.generator?"* ":" ")+d;e.remove(l,t.value.start),e.prependRight(t.value.start,f),e.appendLeft(t.end,";"),t.value.generator&&e.remove(t.start,t.key.start),e.prependRight(t.start,i)}else{var g=v?" "+s:"";e.overwrite(t.key.start,t.key.end,"function"+g)}}),C.length||E.length){var A=[],P=[];C.length&&(A.push("var "+x+" = { "+C.map(function(t){return t+": { configurable: true }"}).join(",")+" };"),P.push("Object.defineProperties( "+s+".prototype, "+x+" );")),E.length&&(A.push("var "+S+" = { "+E.map(function(t){return t+": { configurable: true }"}).join(",")+" };"),P.push("Object.defineProperties( "+s+", "+S+" );")),c&&(l+="\n\n"+p),l+=A.join("\n"+p),c||(l+="\n\n"+p),d+="\n\n"+p+P.join("\n"+p)}c?e.appendLeft(c.end,l):e.prependRight(this.start,l),e.appendLeft(this.end,d)}t.prototype.transpile.call(this,e,n)},e}(f),V=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){this.id?(this.name=this.id.name,this.findScope(!0).addDeclaration(this.id,"class")):this.name=this.findScope(!0).createIdentifier("defaultExport"),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(t,e){if(e.classes){this.superClass||function(t,e){var n=t.start,r=t.end,i=e.getIndentString(),a=i.length,s=n-a;t.program.indentExclusions[s]||e.original.slice(s,n)!==i||e.remove(s,n);for(var o,p=new RegExp(i+"\\S","g"),u=e.original.slice(n,r);o=p.exec(u);){var h=n+o.index;t.program.indentExclusions[h]||e.remove(h,h+a)}}(this.body,t);var n=this.superClass&&(this.superClass.name||"superclass"),r=this.getIndentation(),i=r+t.getIndentString(),a="ExportDefaultDeclaration"===this.parent.type;a&&t.remove(this.parent.start,this.start);var s=this.start;this.id?(t.overwrite(s,this.id.start,"var "),s=this.id.end):t.prependLeft(s,"var "+this.name),this.superClass?this.superClass.end===this.body.start?(t.remove(s,this.superClass.start),t.appendLeft(s," = (function ("+n+") {\n"+i)):(t.overwrite(s,this.superClass.start," = "),t.overwrite(this.superClass.end,this.body.start,"(function ("+n+") {\n"+i)):s===this.body.start?t.appendLeft(s," = "):t.overwrite(s,this.body.start," = "),this.body.transpile(t,e,!!this.superClass,n);var o=a?"\n\n"+r+"export default "+this.name+";":"";this.superClass?(t.appendLeft(this.end,"\n\n"+i+"return "+this.name+";\n"+r+"}("),t.move(this.superClass.start,this.superClass.end,this.end),t.prependRight(this.end,"));"+o)):o&&t.prependRight(this.end,o)}else this.body.transpile(t,e,!1,null)},e}(f),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){this.name=(this.id?this.id.name:"VariableDeclarator"===this.parent.type?this.parent.id.name:"AssignmentExpression"!==this.parent.type?null:"Identifier"===this.parent.left.type?this.parent.left.name:"MemberExpression"===this.parent.left.type?this.parent.left.property.name:null)||this.findScope(!0).createIdentifier("anonymous"),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(t,e){if(e.classes){var n=this.superClass&&(this.superClass.name||"superclass"),r=this.getIndentation(),i=r+t.getIndentString();this.superClass?(t.remove(this.start,this.superClass.start),t.remove(this.superClass.end,this.body.start),t.appendLeft(this.start,"(function ("+n+") {\n"+i)):t.overwrite(this.start,this.body.start,"(function () {\n"+i),this.body.transpile(t,e,!0,n);var a="\n\n"+i+"return "+this.name+";\n"+r+"}(";this.superClass?(t.appendLeft(this.end,a),t.move(this.superClass.start,this.superClass.end,this.end),t.prependRight(this.end,"))")):t.appendLeft(this.end,"\n\n"+i+"return "+this.name+";\n"+r+"}())")}else this.body.transpile(t,e,!1)},e}(f),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(t){if(this.findNearest(B).shouldRewriteAsFunction){if(this.label)throw new x("Labels are not currently supported in a loop with locally-scoped variables",this);t.overwrite(this.start,this.start+8,"return")}},e}(f),G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){if(e.moduleExport)throw new x("export is not supported",this);t.prototype.initialise.call(this,e)},e}(f),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){if(e.moduleExport)throw new x("export is not supported",this);t.prototype.initialise.call(this,e)},e}(f),q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.findScope=function(t){return t||!this.createdScope?this.parent.findScope(t):this.body.scope},e.prototype.initialise=function(e){if(this.body.createScope(),this.createdScope=!0,this.reassigned=Object.create(null),this.aliases=Object.create(null),t.prototype.initialise.call(this,e),e.letConst)for(var n=Object.keys(this.body.scope.declarations),r=n.length;r--;){for(var i=n[r],a=this.body.scope.declarations[i],s=a.instances.length;s--;){var o=a.instances[s].findNearest(/Function/);if(o&&o.depth>this.depth){this.shouldRewriteAsFunction=!0;break}}if(this.shouldRewriteAsFunction)break}},e.prototype.transpile=function(e,n){var r="ForOfStatement"!=this.type&&("BlockStatement"!==this.body.type||"BlockStatement"===this.body.type&&this.body.synthetic);if(this.shouldRewriteAsFunction){var i=this.getIndentation(),a=i+e.getIndentString(),s=this.args?" "+this.args.join(", ")+" ":"",o=this.params?" "+this.params.join(", ")+" ":"",p=this.findScope(!0),u=p.createIdentifier("loop"),h="var "+u+" = function ("+o+") "+(this.body.synthetic?"{\n"+i+e.getIndentString():""),c=(this.body.synthetic?"\n"+i+"}":"")+";\n\n"+i;if(e.prependRight(this.body.start,h),e.appendLeft(this.body.end,c),e.move(this.start,this.body.start,this.body.end),this.canBreak||this.canReturn){var l=p.createIdentifier("returned"),d="{\n"+a+"var "+l+" = "+u+"("+s+");\n";this.canBreak&&(d+="\n"+a+"if ( "+l+" === 'break' ) break;"),this.canReturn&&(d+="\n"+a+"if ( "+l+" ) return "+l+".v;"),d+="\n"+i+"}",e.prependRight(this.body.end,d)}else{var f=u+"("+s+");";"DoWhileStatement"===this.type?e.overwrite(this.start,this.body.start,"do {\n"+a+f+"\n"+i+"}"):e.prependRight(this.body.end,f)}}else r&&(e.appendLeft(this.body.start,"{ "),e.prependRight(this.body.end," }"));t.prototype.transpile.call(this,e,n)},e}(f),z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.findScope=function(t){return t||!this.createdScope?this.parent.findScope(t):this.body.scope},e.prototype.transpile=function(e,n){var r=this,i=this.getIndentation()+e.getIndentString();if(this.shouldRewriteAsFunction){var a="VariableDeclaration"===this.init.type?[].concat.apply([],this.init.declarations.map(function(t){return g(t.id)})):[],s=this.aliases;this.args=a.map(function(t){return t in r.aliases?r.aliases[t].outer:t}),this.params=a.map(function(t){return t in r.aliases?r.aliases[t].inner:t});var o=Object.keys(this.reassigned).map(function(t){return s[t].outer+" = "+s[t].inner+";"});if(o.length)if(this.body.synthetic)e.appendLeft(this.body.body[0].end,"; "+o.join(" "));else{var p=this.body.body[this.body.body.length-1];e.appendLeft(p.end,"\n\n"+i+o.join("\n"+i))}}t.prototype.transpile.call(this,e,n)},e}(q),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.findScope=function(t){return t||!this.createdScope?this.parent.findScope(t):this.body.scope},e.prototype.transpile=function(e,n){var r=this,i="VariableDeclaration"===this.left.type;if(this.shouldRewriteAsFunction){var a=i?[].concat.apply([],this.left.declarations.map(function(t){return g(t.id)})):[];this.args=a.map(function(t){return t in r.aliases?r.aliases[t].outer:t}),this.params=a.map(function(t){return t in r.aliases?r.aliases[t].inner:t})}t.prototype.transpile.call(this,e,n);var s=i?this.left.declarations[0].id:this.left;"Identifier"!==s.type&&this.destructurePattern(e,s,i)},e.prototype.destructurePattern=function(t,e,n){var r=this.findScope(!0),i=this.getIndentation()+t.getIndentString(),a=r.createIdentifier("ref"),s=this.body.body.length?this.body.body[0].start:this.body.start+1;t.move(e.start,e.end,s),t.prependRight(e.end,n?a:"var "+a);var o=[];k(t,function(t){return r.createIdentifier(t)},function(t){var e=t.name;return r.resolveName(e)},e,a,!1,o);var p=";\n"+i;o.forEach(function(t,e){e===o.length-1&&(p=";\n\n"+i),t(s,"",p)})},e}(q),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){if(e.forOf&&!e.dangerousForOf)throw new x("for...of statements are not supported. Use `transforms: { forOf: false }` to skip transformation and disable this error, or `transforms: { dangerousForOf: true }` if you know what you're doing",this);t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){if(t.prototype.transpile.call(this,e,n),n.dangerousForOf)if(this.body.body[0]){var r=this.findScope(!0),i=this.getIndentation(),a=i+e.getIndentString(),s=r.createIdentifier("i"),o=r.createIdentifier("list");this.body.synthetic&&(e.prependRight(this.left.start,"{\n"+a),e.appendLeft(this.body.body[0].end,"\n"+i+"}"));var p=this.body.body[0].start;e.remove(this.left.end,this.right.start),e.move(this.left.start,this.left.end,p),e.prependRight(this.right.start,"var "+s+" = 0, "+o+" = "),e.appendLeft(this.right.end,"; "+s+" < "+o+".length; "+s+" += 1");var u="VariableDeclaration"===this.left.type,h=u?this.left.declarations[0].id:this.left;if("Identifier"!==h.type){var c=[],l=r.createIdentifier("ref");k(e,function(t){return r.createIdentifier(t)},function(t){var e=t.name;return r.resolveName(e)},h,l,!u,c);var d=";\n"+a;c.forEach(function(t,e){e===c.length-1&&(d=";\n\n"+a),t(p,"",d)}),u?(e.appendLeft(this.left.start+this.left.kind.length+1,l),e.appendLeft(this.left.end," = "+o+"["+s+"];\n"+a)):e.appendLeft(this.left.end,"var "+l+" = "+o+"["+s+"];\n"+a)}else e.appendLeft(this.left.end," = "+o+"["+s+"];\n\n"+a)}else"VariableDeclaration"===this.left.type&&"var"===this.left.kind?(e.remove(this.start,this.left.start),e.appendLeft(this.left.end,";"),e.remove(this.left.end,this.end)):e.remove(this.start,this.end)},e}(q),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){if(this.generator&&e.generator)throw new x("Generators are not supported",this);this.body.createScope(),this.id&&this.findScope(!0).addDeclaration(this.id,"function"),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){t.prototype.transpile.call(this,e,n),n.trailingFunctionCommas&&this.params.length&&I(e,this.params[this.params.length-1].end)},e}(f),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){if(this.generator&&e.generator)throw new x("Generators are not supported",this);this.body.createScope(),this.id&&this.body.scope.addDeclaration(this.id,"function"),t.prototype.initialise.call(this,e);var n,r=this.parent;if(e.conciseMethodProperty&&"Property"===r.type&&"init"===r.kind&&r.method&&"Identifier"===r.key.type?n=r.key.name:e.classes&&"MethodDefinition"===r.type&&"method"===r.kind&&"Identifier"===r.key.type?n=r.key.name:this.id&&"Identifier"===this.id.type&&(n=this.id.alias||this.id.name),n)for(var i=0,a=this.params;i<a.length;i+=1){var s=a[i];if("Identifier"===s.type&&n===s.name){var o=this.body.scope,p=o.declarations[n],u=o.createIdentifier(n);s.alias=u;for(var h=0,c=p.instances;h<c.length;h+=1)c[h].alias=u;break}}},e.prototype.transpile=function(e,n){t.prototype.transpile.call(this,e,n),n.trailingFunctionCommas&&this.params.length&&I(e,this.params[this.params.length-1].end)},e}(f),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.findScope=function(t){return this.parent.params&&~this.parent.params.indexOf(this)?this.parent.body.scope:"FunctionExpression"===this.parent.type&&this===this.parent.id?this.parent.body.scope:this.parent.findScope(t)},e.prototype.initialise=function(t){if(function t(e,n){return"MemberExpression"===e.type?!e.computed&&t(e.object,e):"Identifier"===e.type?!n||!/(Function|Class)Expression/.test(n.type)&&("VariableDeclarator"===n.type?e===n.init:"MemberExpression"===n.type||"MethodDefinition"===n.type?n.computed||e===n.object:"ArrayPattern"!==n.type&&("Property"===n.type?"ObjectPattern"!==n.parent.type&&(n.computed||e===n.value):"MethodDefinition"!==n.type&&("ExportSpecifier"!==n.type||e===n.local))):void 0}(this,this.parent)){if(t.arrow&&"arguments"===this.name&&!this.findScope(!1).contains(this.name)){var e=this.findLexicalBoundary(),n=this.findNearest("ArrowFunctionExpression"),r=this.findNearest(B);n&&n.depth>e.depth&&(this.alias=e.getArgumentsAlias()),r&&r.body.contains(this)&&r.depth>e.depth&&(this.alias=e.getArgumentsAlias())}this.findScope(!1).addReference(this)}},e.prototype.transpile=function(t){this.alias&&t.overwrite(this.start,this.end,this.alias,{storeName:!0,contentOnly:!0})},e}(f),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){("BlockStatement"!==this.consequent.type||"BlockStatement"===this.consequent.type&&this.consequent.synthetic)&&(e.appendLeft(this.consequent.start,"{ "),e.prependRight(this.consequent.end," }")),this.alternate&&"IfStatement"!==this.alternate.type&&("BlockStatement"!==this.alternate.type||"BlockStatement"===this.alternate.type&&this.alternate.synthetic)&&(e.appendLeft(this.alternate.start,"{ "),e.prependRight(this.alternate.end," }")),t.prototype.transpile.call(this,e,n)},e}(f),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){if(e.moduleImport)throw new x("import is not supported",this);t.prototype.initialise.call(this,e)},e}(f),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){this.findScope(!0).addDeclaration(this.local,"import"),t.prototype.initialise.call(this,e)},e}(f),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){this.findScope(!0).addDeclaration(this.local,"import"),t.prototype.initialise.call(this,e)},e}(f),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(e,n){var r,i=this.name,a=i.start,s=i.name,o=this.value?this.value.start:this.name.end;e.overwrite(a,o,(/-/.test(r=s)?"'"+r+"'":r)+": "+(this.value?"":"true")),t.prototype.transpile.call(this,e,n)},e}(f),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(t){var e,n=!0,r=this.parent.children[this.parent.children.length-1];(r&&"JSXText"===(e=r).type&&!/\S/.test(e.value)&&/\n/.test(e.value)||this.parent.openingElement.attributes.length)&&(n=!1),t.overwrite(this.start,this.end,n?" )":")")},e}(f),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(t){var e,n=!0,r=this.parent.children[this.parent.children.length-1];r&&"JSXText"===(e=r).type&&!/\S/.test(e.value)&&/\n/.test(e.value)&&(n=!1),t.overwrite(this.start,this.end,n?" )":")")},e}(f);function st(t,e){return t=t.replace(/\u00a0/g,"&nbsp;"),e&&/\n/.test(t)&&(t=t.replace(/\s+$/,"")),t=t.replace(/^\n\r?\s+/,"").replace(/\s*\n\r?\s*/gm," "),JSON.stringify(t)}var ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(e,n){t.prototype.transpile.call(this,e,n);var r=this.children.filter(function(t){return"JSXText"!==t.type||/\S/.test(t.raw)||!/\n/.test(t.raw)});if(r.length){var i,a=this.openingElement.end;for(i=0;i<r.length;i+=1){var s=r[i];if("JSXExpressionContainer"===s.type&&"JSXEmptyExpression"===s.expression.type);else{var o="\n"===e.original[a]&&"JSXText"!==s.type?"":" ";e.appendLeft(a,","+o)}if("JSXText"===s.type){var p=st(s.value,i===r.length-1);e.overwrite(s.start,s.end,p)}a=s.end}}},e}(f),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(e,n){e.remove(this.start,this.expression.start),e.remove(this.expression.end,this.end),t.prototype.transpile.call(this,e,n)},e}(f),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ot),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(e,n){t.prototype.transpile.call(this,e,n),e.overwrite(this.start,this.name.start,this.program.jsx+"( ");var r="JSXIdentifier"===this.name.type&&this.name.name[0]===this.name.name[0].toLowerCase();r&&e.prependRight(this.name.start,"'");var i=this.attributes.length,a=this.name.end;if(i){var s,o,p,u=!1;for(s=0;s<i;s+=1)if("JSXSpreadAttribute"===this.attributes[s].type){u=!0;break}for(a=this.attributes[0].end,s=0;s<i;s+=1){var h=this.attributes[s];if(s>0&&(h.start===a?e.prependRight(a,", "):e.overwrite(a,h.start,", ")),u&&"JSXSpreadAttribute"!==h.type){var c=this.attributes[s-1],l=this.attributes[s+1];c&&"JSXSpreadAttribute"!==c.type||e.prependRight(h.start,"{ "),l&&"JSXSpreadAttribute"!==l.type||e.appendLeft(h.end," }")}a=h.end}if(u)if(1===i)p=r?"',":",";else{if(!this.program.options.objectAssign)throw new x("Mixed JSX attributes ending in spread requires specified objectAssign option with 'Object.assign' or polyfill helper.",this);p=r?"', "+this.program.options.objectAssign+"({},":", "+this.program.options.objectAssign+"({},",o=")"}else p=r?"', {":", {",o=" }";e.prependRight(this.name.end,p),o&&e.appendLeft(this.attributes[i-1].end,o)}else e.appendLeft(this.name.end,r?"', null":", null"),a=this.name.end;this.selfClosing?e.overwrite(a,this.end,this.attributes.length?")":" )"):e.remove(a,this.end)},e}(f),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(t,e){t.overwrite(this.start,this.end,this.program.jsx+"( React.Fragment, null")},e}(f),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(e,n){e.remove(this.start,this.argument.start),e.remove(this.argument.end,this.end),t.prototype.transpile.call(this,e,n)},e}(f),dt=u(function(t,e){
/*!
 * regjsgen 0.3.0
 * Copyright 2014-2016 Benjamin Tan <https://demoneaux.github.io/>
 * Available under MIT license <https://github.com/demoneaux/regjsgen/blob/master/LICENSE>
 */
(function(){var n={function:!0,object:!0},r=n[typeof window]&&window||this,i=n.object&&e,a=n.object&&t&&!t.nodeType&&t,s=i&&a&&"object"==typeof p&&p;!s||s.global!==s&&s.window!==s&&s.self!==s||(r=s);var o=Object.prototype.hasOwnProperty,u=String.fromCharCode,h=Math.floor;function c(){var t,e,n=[],r=-1,i=arguments.length;if(!i)return"";for(var a="";++r<i;){var s=Number(arguments[r]);if(!isFinite(s)||s<0||s>1114111||h(s)!=s)throw RangeError("Invalid code point: "+s);s<=65535?n.push(s):(t=55296+((s-=65536)>>10),e=s%1024+56320,n.push(t,e)),(r+1==i||n.length>16384)&&(a+=u.apply(null,n),n.length=0)}return a}var l={};function d(t,e){if(-1==e.indexOf("|")){if(t==e)return;throw Error("Invalid node type: "+t+"; expected type: "+e)}if(!(e=o.call(l,e)?l[e]:l[e]=RegExp("^(?:"+e+")$")).test(t))throw Error("Invalid node type: "+t+"; expected types: "+e)}function f(t){var e=t.type;if(o.call(y,e))return y[e](t);throw Error("Invalid node type: "+e)}function g(t){return d(t.type,"anchor|characterClassEscape|characterClassRange|dot|value"),f(t)}function m(t){return d(t.type,"anchor|characterClass|characterClassEscape|empty|group|quantifier|reference|unicodePropertyEscape|value"),f(t)}var y={alternative:function(t){d(t.type,"alternative");for(var e=t.body,n=-1,r=e.length,i="";++n<r;)i+=m(e[n]);return i},anchor:function(t){switch(d(t.type,"anchor"),t.kind){case"start":return"^";case"end":return"$";case"boundary":return"\\b";case"not-boundary":return"\\B";default:throw Error("Invalid assertion")}},characterClass:function(t){d(t.type,"characterClass");var e=t.body,n=-1,r=e.length,i="";for(t.negative&&(i+="^");++n<r;)i+=g(e[n]);return"["+i+"]"},characterClassEscape:function(t){return d(t.type,"characterClassEscape"),"\\"+t.value},characterClassRange:function(t){d(t.type,"characterClassRange");var e=t.min,n=t.max;if("characterClassRange"==e.type||"characterClassRange"==n.type)throw Error("Invalid character class range");return g(e)+"-"+g(n)},unicodePropertyEscape:function(t){return d(t.type,"unicodePropertyEscape"),"\\"+(t.negative?"P":"p")+"{"+t.value+"}"},disjunction:function(t){d(t.type,"disjunction");for(var e=t.body,n=-1,r=e.length,i="";++n<r;)0!=n&&(i+="|"),i+=f(e[n]);return i},dot:function(t){return d(t.type,"dot"),"."},group:function(t){d(t.type,"group");var e="";switch(t.behavior){case"normal":break;case"ignore":e+="?:";break;case"lookahead":e+="?=";break;case"negativeLookahead":e+="?!";break;default:throw Error("Invalid behaviour: "+t.behaviour)}for(var n=t.body,r=-1,i=n.length;++r<i;)e+=f(n[r]);return"("+e+")"},quantifier:function(t){d(t.type,"quantifier");var e="",n=t.min,r=t.max;return e=null==r?0==n?"*":1==n?"+":"{"+n+",}":n==r?"{"+n+"}":0==n&&1==r?"?":"{"+n+","+r+"}",t.greedy||(e+="?"),function(t){return d(t.type,"anchor|characterClass|characterClassEscape|dot|group|reference|value"),f(t)}(t.body[0])+e},reference:function(t){return d(t.type,"reference"),"\\"+t.matchIndex},value:function(t){d(t.type,"value");var e=t.kind,n=t.codePoint;switch(e){case"controlLetter":return"\\c"+c(n+64);case"hexadecimalEscape":return"\\x"+("00"+n.toString(16).toUpperCase()).slice(-2);case"identifier":return"\\"+c(n);case"null":return"\\"+n;case"octal":return"\\"+n.toString(8);case"singleEscape":switch(n){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 11:return"\\v";case 12:return"\\f";case 13:return"\\r";default:throw Error("Invalid codepoint: "+n)}case"symbol":return c(n);case"unicodeEscape":return"\\u"+("0000"+n.toString(16).toUpperCase()).slice(-4);case"unicodeCodePointEscape":return"\\u{"+n.toString(16).toUpperCase()+"}";default:throw Error("Unsupported node kind: "+e)}}};i&&a?i.generate=f:r.regjsgen={generate:f}}).call(p)}),ft=u(function(t){!function(){var e={parse:function(t,e,n){function r(e){return e.raw=t.substring(e.range[0],e.range[1]),e}function i(t,e){return t.range[0]=e,r(t)}function a(t,e){return r({type:"anchor",kind:t,range:[N-e,N]})}function s(t,e,n,i){return r({type:"value",kind:t,codePoint:e,range:[n,i]})}function o(t,e,n,r){return r=r||0,s(t,e,N-(n.length+r),N)}function p(t){var e,n=t[0],r=n.charCodeAt(0);return R&&1===n.length&&r>=55296&&r<=56319&&(e=m().charCodeAt(0))>=56320&&e<=57343?s("symbol",1024*(r-55296)+e-56320+65536,++N-2,N):s("symbol",r,N-1,N)}function u(t,e,n,i){return null==i&&(n=N-1,i=N),r({type:"quantifier",min:t,max:e,greedy:!0,body:null,range:[n,i]})}function h(t,e,n,i){return r({type:"characterClass",body:t,negative:e,range:[n,i]})}function c(t,e,n,i){return t.codePoint>e.codePoint&&T("invalid range in character class",t.raw+"-"+e.raw,n,i),r({type:"characterClassRange",min:t,max:e,range:[n,i]})}function l(t){return"alternative"===t.type?t.body:[t]}function d(e){e=e||1;var n=t.substring(N,N+e);return N+=e||1,n}function f(t){g(t)||T("character",t)}function g(e){if(t.indexOf(e,N)===N)return d(e.length)}function m(){return t[N]}function y(e){return t.indexOf(e,N)===N}function v(e){return t[N+1]===e}function b(e){var n=t.substring(N).match(e);return n&&(n.range=[],n.range[0]=N,d(n[0].length),n.range[1]=N),n}function _(){var t=[],e=N;for(t.push(x());g("|");)t.push(x());return 1===t.length?t[0]:function(t,e,n){return r({type:"disjunction",body:t,range:[e,N]})}(t,e)}function x(){for(var t,e=[],n=N;t=w();)e.push(t);return 1===e.length?e[0]:function(t,e,n){return r({type:"alternative",body:t,range:[e,N]})}(e,n)}function w(){if(N>=t.length||y("|")||y(")"))return null;var e=g("^")?a("start",1):g("$")?a("end",1):g("\\b")?a("boundary",2):g("\\B")?a("not-boundary",2):S("(?=","lookahead","(?!","negativeLookahead");if(e)return e;var n,s=(n=b(/^[^^$\\.*+?(){[|]/))?p(n):g(".")?r({type:"dot",range:[N-1,N]}):g("\\")?((n=E())||T("atomEscape"),n):(n=function(){var t,e=N;return(t=b(/^\[\^/))?(t=A(),f("]"),h(t,!0,e,N)):g("[")?(t=A(),f("]"),h(t,!1,e,N)):null}())?n:S("(?:","ignore","(","normal");s||T("Expected atom");var o=function(){var t,e,n,r,i=N;return g("*")?e=u(0):g("+")?e=u(1):g("?")?e=u(0,1):(t=b(/^\{([0-9]+)\}/))?e=u(n=parseInt(t[1],10),n,t.range[0],t.range[1]):(t=b(/^\{([0-9]+),\}/))?e=u(n=parseInt(t[1],10),void 0,t.range[0],t.range[1]):(t=b(/^\{([0-9]+),([0-9]+)\}/))&&((n=parseInt(t[1],10))>(r=parseInt(t[2],10))&&T("numbers out of order in {} quantifier","",i,N),e=u(n,r,t.range[0],t.range[1])),e&&g("?")&&(e.greedy=!1,e.range[1]+=1),e}()||!1;return o?(o.body=l(s),i(o,s.range[0]),o):s}function S(t,e,n,i){var a=null,s=N;if(g(t))a=e;else{if(!g(n))return!1;a=i}var o=_();o||T("Expected disjunction"),f(")");var p=r({type:"group",behavior:a,body:l(o),range:[s,N]});return"normal"==a&&I&&O++,p}function k(t){var e,n;if(R&&"unicodeEscape"==t.kind&&(e=t.codePoint)>=55296&&e<=56319&&y("\\")&&v("u")){var i=N;N++;var a=C();"unicodeEscape"==a.kind&&(n=a.codePoint)>=56320&&n<=57343?(t.range[1]=a.range[1],t.codePoint=1024*(e-55296)+n-56320+65536,t.type="value",t.kind="unicodeCodePointEscape",r(t)):N=i}return t}function C(){return E(!0)}function E(t){var e,a=N;if(e=function(){var t,e,n;if(t=b(/^(?!0)\d+/)){e=t[0];var a=parseInt(t[0],10);return a<=O?(n=t[0],r({type:"reference",matchIndex:parseInt(n,10),range:[N-1-n.length,N]})):(L.push(a),d(-t[0].length),(t=b(/^[0-7]{1,3}/))?o("octal",parseInt(t[0],8),t[0],1):i(t=p(b(/^[89]/)),t.range[0]-1))}return(t=b(/^[0-7]{1,3}/))?(e=t[0],/^0{1,3}$/.test(e)?o("null",0,"0",e.length+1):o("octal",parseInt(e,8),e,1)):!!(t=b(/^[dDsSwW]/))&&r({type:"characterClassEscape",value:t[0],range:[N-2,N]})}())return e;if(t){if(g("b"))return o("singleEscape",8,"\\b");g("B")&&T("\\B not possible inside of CharacterClass","",a)}return function(){var t,e,i,a;if(t=b(/^[fnrtv]/)){var s=0;switch(t[0]){case"t":s=9;break;case"n":s=10;break;case"v":s=11;break;case"f":s=12;break;case"r":s=13}return o("singleEscape",s,"\\"+t[0])}return(t=b(/^c([a-zA-Z])/))?o("controlLetter",t[1].charCodeAt(0)%32,t[1],2):(t=b(/^x([0-9a-fA-F]{2})/))?o("hexadecimalEscape",parseInt(t[1],16),t[1],2):(t=b(/^u([0-9a-fA-F]{4})/))?k(o("unicodeEscape",parseInt(t[1],16),t[1],2)):R&&(t=b(/^u\{([0-9a-fA-F]+)\}/))?o("unicodeCodePointEscape",parseInt(t[1],16),t[1],4):n.unicodePropertyEscape&&R&&(t=b(/^([pP])\{([^\}]+)\}/))?r({type:"unicodePropertyEscape",negative:"P"===t[1],value:t[2],range:[t.range[0]-1,t.range[1]],raw:t[0]}):(i=m(),a=new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),36===i||95===i||i>=65&&i<=90||i>=97&&i<=122||i>=48&&i<=57||92===i||i>=128&&a.test(String.fromCharCode(i))?g("‌")?o("identifier",8204,"‌"):g("‍")?o("identifier",8205,"‍"):null:o("identifier",(e=d()).charCodeAt(0),e,1))}()}function A(){var t,e;return y("]")?[]:((e=P())||T("classAtom"),(t=y("]")?[e]:function t(e){var n,r,i;if(y("-")&&!v("]")){f("-"),(i=P())||T("classAtom"),r=N;var a=A();return a||T("classRanges"),n=e.range[0],"empty"===a.type?[c(e,i,n,r)]:[c(e,i,n,r)].concat(a)}return(i=function(){var e=P();return e||T("classAtom"),y("]")?e:t(e)}())||T("nonEmptyClassRangesNoDash"),[e].concat(i)}(e))||T("nonEmptyClassRanges"),t)}function P(){return g("-")?p("-"):(t=b(/^[^\\\]-]/))?p(t[0]):g("\\")?((t=C())||T("classEscape"),k(t)):void 0;var t}function T(e,n,r,i){r=null==r?N:r,i=null==i?r:i;var a=Math.max(0,r-10),s=Math.min(i+10,t.length),o="    "+t.substring(a,s),p="    "+new Array(r-a+1).join(" ")+"^";throw SyntaxError(e+" at position "+r+(n?": "+n:"")+"\n"+o+"\n"+p)}n||(n={});var L=[],O=0,I=!0,R=-1!==(e||"").indexOf("u"),N=0;""===(t=String(t))&&(t="(?:)");var j=_();j.range[1]!==t.length&&T("Could not parse entire input - got stuck","",j.range[1]);for(var M=0;M<L.length;M++)if(L[M]<=O)return N=0,I=!1,_();return j}};t.exports?t.exports=e:window.regjsparser=e}()}),gt=u(function(t,e){
/*! https://mths.be/regenerate v1.3.3 by @mathias | MIT license */
!function(n){var r=e,i=t&&t.exports==r&&t,a="object"==typeof p&&p;a.global!==a&&a.window!==a||(n=a);var s="A range’s `stop` value must be greater than or equal to the `start` value.",o="Invalid code point value. Code points range from U+000000 to U+10FFFF.",u=/\\x00([^0123456789]|$)/g,h={},c=h.hasOwnProperty,l=function(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n)},d=h.toString,f=function(t){return"[object Array]"==d.call(t)},g=function(t){return"number"==typeof t||"[object Number]"==d.call(t)},m=function(t,e){var n=String(t);return n.length<e?("0000"+n).slice(-e):n},y=function(t){return Number(t).toString(16).toUpperCase()},v=[].slice,b=function(t,e){for(var n,r,i=0,a=t.length;i<a;){if(n=t[i],r=t[i+1],e>=n&&e<r)return e==n?r==n+1?(t.splice(i,2),t):(t[i]=e+1,t):e==r-1?(t[i+1]=e,t):(t.splice(i,2,n,e,e+1,r),t);i+=2}return t},_=function(t,e,n){if(n<e)throw Error(s);for(var r,i,a=0;a<t.length;){if(r=t[a],i=t[a+1]-1,r>n)return t;if(e<=r&&n>=i)t.splice(a,2);else{if(e>=r&&n<i)return e==r?(t[a]=n+1,t[a+1]=i+1,t):(t.splice(a,2,r,e,n+1,i+1),t);if(e>=r&&e<=i)t[a+1]=e;else if(n>=r&&n<=i)return t[a]=n+1,t;a+=2}}return t},x=function(t,e){var n,r,i=0,a=null,s=t.length;if(e<0||e>1114111)throw RangeError(o);for(;i<s;){if(n=t[i],r=t[i+1],e>=n&&e<r)return t;if(e==n-1)return t[i]=e,t;if(n>e)return t.splice(null!=a?a+2:0,0,e,e+1),t;if(e==r)return e+1==t[i+2]?(t.splice(i,4,n,t[i+3]),t):(t[i+1]=e+1,t);a=i,i+=2}return t.push(e,e+1),t},w=function(t,e){for(var n,r,i=0,a=t.slice(),s=e.length;i<s;)a=(n=e[i])==(r=e[i+1]-1)?x(a,n):S(a,n,r),i+=2;return a},S=function(t,e,n){if(n<e)throw Error(s);if(e<0||e>1114111||n<0||n>1114111)throw RangeError(o);for(var r,i,a=0,p=!1,u=t.length;a<u;){if(r=t[a],i=t[a+1],p){if(r==n+1)return t.splice(a-1,2),t;if(r>n)return t;r>=e&&r<=n&&(i>e&&i-1<=n?(t.splice(a,2),a-=2):(t.splice(a-1,2),a-=2))}else{if(r==n+1)return t[a]=e,t;if(r>n)return t.splice(a,0,e,n+1),t;if(e>=r&&e<i&&n+1<=i)return t;e>=r&&e<i||i==e?(t[a+1]=n+1,p=!0):e<=r&&n+1>=i&&(t[a]=e,t[a+1]=n+1,p=!0)}a+=2}return p||t.push(e,n+1),t},k=function(t,e){var n=0,r=t.length,i=t[n],a=t[r-1];if(r>=2&&(e<i||e>a))return!1;for(;n<r;){if(i=t[n],a=t[n+1],e>=i&&e<a)return!0;n+=2}return!1},C=function(t){return!t.length},E=function(t){return 2==t.length&&t[0]+1==t[1]},A=function(t){for(var e,n,r=0,i=[],a=t.length;r<a;){for(e=t[r],n=t[r+1];e<n;)i.push(e),++e;r+=2}return i},P=Math.floor,T=function(t){return parseInt(P((t-65536)/1024)+55296,10)},L=function(t){return parseInt((t-65536)%1024+56320,10)},O=String.fromCharCode,I=function(t){return 9==t?"\\t":10==t?"\\n":12==t?"\\f":13==t?"\\r":92==t?"\\\\":36==t||t>=40&&t<=43||t>=45&&t<=47||63==t||t>=91&&t<=94||t>=123&&t<=125?"\\"+O(t):t>=32&&t<=126?O(t):t<=255?"\\x"+m(y(t),2):"\\u"+m(y(t),4)},R=function(t){return t<=65535?I(t):"\\u{"+t.toString(16).toUpperCase()+"}"},N=function(t){var e=t.length,n=t.charCodeAt(0);return n>=55296&&n<=56319&&e>1?1024*(n-55296)+t.charCodeAt(1)-56320+65536:n},j=function(t){var e,n,r="",i=0,a=t.length;if(E(t))return I(t[0]);for(;i<a;)r+=(e=t[i])==(n=t[i+1]-1)?I(e):e+1==n?I(e)+I(n):I(e)+"-"+I(n),i+=2;return"["+r+"]"},M=function(t){if(!t.length)return[];for(var e,n,r,i,a,s,o=0,p=[],u=t.length;o<u;){e=t[o],n=t[o+1]-1,r=T(e),i=L(e),a=T(n);var h=57343==(s=L(n)),c=!1;r==a||56320==i&&h?(p.push([[r,a+1],[i,s+1]]),c=!0):p.push([[r,r+1],[i,57344]]),!c&&r+1<a&&(h?(p.push([[r+1,a+1],[56320,s+1]]),c=!0):p.push([[r+1,a],[56320,57344]])),c||p.push([[a,a+1],[56320,s+1]]),o+=2}return function(t){for(var e,n,r,i,a,s,o=[],p=[],u=!1,h=-1,c=t.length;++h<c;)if(e=t[h],n=t[h+1]){for(r=e[0],i=e[1],a=n[0],s=n[1],p=i;a&&r[0]==a[0]&&r[1]==a[1];)p=E(s)?x(p,s[0]):S(p,s[0],s[1]-1),r=(e=t[++h])[0],i=e[1],a=(n=t[h+1])&&n[0],s=n&&n[1],u=!0;o.push([r,u?p:i]),u=!1}else o.push(e);return function(t){if(1==t.length)return t;for(var e=-1,n=-1;++e<t.length;){var r=t[e],i=r[1],a=i[0],s=i[1];for(n=e;++n<t.length;){var o=t[n],p=o[1],u=p[0],h=p[1];a==u&&s==h&&(E(o[0])?r[0]=x(r[0],o[0][0]):r[0]=S(r[0],o[0][0],o[0][1]-1),t.splice(n,1),--n)}}return t}(o)}(p)},B=function(t){return arguments.length>1&&(t=v.call(arguments)),this instanceof B?(this.data=[],t?this.add(t):this):(new B).add(t)};B.version="1.3.3";var D=B.prototype;!function(t,e){var n;for(n in e)c.call(e,n)&&(t[n]=e[n])}(D,{add:function(t){var e=this;return null==t?e:t instanceof B?(e.data=w(e.data,t.data),e):(arguments.length>1&&(t=v.call(arguments)),f(t)?(l(t,function(t){e.add(t)}),e):(e.data=x(e.data,g(t)?t:N(t)),e))},remove:function(t){var e=this;return null==t?e:t instanceof B?(e.data=function(t,e){for(var n,r,i=0,a=t.slice(),s=e.length;i<s;)a=(n=e[i])==(r=e[i+1]-1)?b(a,n):_(a,n,r),i+=2;return a}(e.data,t.data),e):(arguments.length>1&&(t=v.call(arguments)),f(t)?(l(t,function(t){e.remove(t)}),e):(e.data=b(e.data,g(t)?t:N(t)),e))},addRange:function(t,e){return this.data=S(this.data,g(t)?t:N(t),g(e)?e:N(e)),this},removeRange:function(t,e){var n=g(t)?t:N(t),r=g(e)?e:N(e);return this.data=_(this.data,n,r),this},intersection:function(t){var e=t instanceof B?A(t.data):t;return this.data=function(t,e){for(var n,r=0,i=e.length,a=[];r<i;)n=e[r],k(t,n)&&a.push(n),++r;return function(t){for(var e,n=-1,r=t.length,i=r-1,a=[],s=!0,o=0;++n<r;)if(e=t[n],s)a.push(e),o=e,s=!1;else if(e==o+1){if(n!=i){o=e;continue}s=!0,a.push(e+1)}else a.push(o+1,e),o=e;return s||a.push(e+1),a}(a)}(this.data,e),this},contains:function(t){return k(this.data,g(t)?t:N(t))},clone:function(){var t=new B;return t.data=this.data.slice(0),t},toString:function(t){var e=function(t,e,n){if(n)return function(t){var e,n,r="",i=0,a=t.length;if(E(t))return R(t[0]);for(;i<a;)r+=(e=t[i])==(n=t[i+1]-1)?R(e):e+1==n?R(e)+R(n):R(e)+"-"+R(n),i+=2;return"["+r+"]"}(t);var r=[],i=function(t){for(var e,n,r=[],i=[],a=[],s=[],o=0,p=t.length;o<p;)e=t[o],n=t[o+1]-1,e<55296?(n<55296&&a.push(e,n+1),n>=55296&&n<=56319&&(a.push(e,55296),r.push(55296,n+1)),n>=56320&&n<=57343&&(a.push(e,55296),r.push(55296,56320),i.push(56320,n+1)),n>57343&&(a.push(e,55296),r.push(55296,56320),i.push(56320,57344),n<=65535?a.push(57344,n+1):(a.push(57344,65536),s.push(65536,n+1)))):e>=55296&&e<=56319?(n>=55296&&n<=56319&&r.push(e,n+1),n>=56320&&n<=57343&&(r.push(e,56320),i.push(56320,n+1)),n>57343&&(r.push(e,56320),i.push(56320,57344),n<=65535?a.push(57344,n+1):(a.push(57344,65536),s.push(65536,n+1)))):e>=56320&&e<=57343?(n>=56320&&n<=57343&&i.push(e,n+1),n>57343&&(i.push(e,57344),n<=65535?a.push(57344,n+1):(a.push(57344,65536),s.push(65536,n+1)))):e>57343&&e<=65535?n<=65535?a.push(e,n+1):(a.push(e,65536),s.push(65536,n+1)):s.push(e,n+1),o+=2;return{loneHighSurrogates:r,loneLowSurrogates:i,bmp:a,astral:s}}(t),a=i.loneHighSurrogates,s=i.loneLowSurrogates,o=i.bmp,p=i.astral,u=!C(a),h=!C(s),c=M(p);return e&&(o=w(o,a),u=!1,o=w(o,s),h=!1),C(o)||r.push(j(o)),c.length&&r.push(function(t){var e=[];return l(c,function(t){var n=t[0],r=t[1];e.push(j(n)+j(r))}),e.join("|")}()),u&&r.push(j(a)+"(?![\\uDC00-\\uDFFF])"),h&&r.push("(?:[^\\uD800-\\uDBFF]|^)"+j(s)),r.join("|")}(this.data,!!t&&t.bmpOnly,!!t&&t.hasUnicodeFlag);return e?e.replace(u,"\\0$1"):"[]"},toRegExp:function(t){var e=this.toString(t&&-1!=t.indexOf("u")?{hasUnicodeFlag:!0}:null);return RegExp(e,t||"")},valueOf:function(){return A(this.data)}}),D.toArray=D.valueOf,r&&!r.nodeType?i?i.exports=B:r.regenerate=B:n.regenerate=B}(p)}),mt=new Set(["General_Category","Script","Script_Extensions","Alphabetic","Any","ASCII","ASCII_Hex_Digit","Assigned","Bidi_Control","Bidi_Mirrored","Case_Ignorable","Cased","Changes_When_Casefolded","Changes_When_Casemapped","Changes_When_Lowercased","Changes_When_NFKC_Casefolded","Changes_When_Titlecased","Changes_When_Uppercased","Dash","Default_Ignorable_Code_Point","Deprecated","Diacritic","Emoji","Emoji_Component","Emoji_Modifier","Emoji_Modifier_Base","Emoji_Presentation","Extender","Grapheme_Base","Grapheme_Extend","Hex_Digit","ID_Continue","ID_Start","Ideographic","IDS_Binary_Operator","IDS_Trinary_Operator","Join_Control","Logical_Order_Exception","Lowercase","Math","Noncharacter_Code_Point","Pattern_Syntax","Pattern_White_Space","Quotation_Mark","Radical","Regional_Indicator","Sentence_Terminal","Soft_Dotted","Terminal_Punctuation","Unified_Ideograph","Uppercase","Variation_Selector","White_Space","XID_Continue","XID_Start"]),yt=new Map([["scx","Script_Extensions"],["sc","Script"],["gc","General_Category"],["AHex","ASCII_Hex_Digit"],["Alpha","Alphabetic"],["Bidi_C","Bidi_Control"],["Bidi_M","Bidi_Mirrored"],["Cased","Cased"],["CI","Case_Ignorable"],["CWCF","Changes_When_Casefolded"],["CWCM","Changes_When_Casemapped"],["CWKCF","Changes_When_NFKC_Casefolded"],["CWL","Changes_When_Lowercased"],["CWT","Changes_When_Titlecased"],["CWU","Changes_When_Uppercased"],["Dash","Dash"],["Dep","Deprecated"],["DI","Default_Ignorable_Code_Point"],["Dia","Diacritic"],["Ext","Extender"],["Gr_Base","Grapheme_Base"],["Gr_Ext","Grapheme_Extend"],["Hex","Hex_Digit"],["IDC","ID_Continue"],["Ideo","Ideographic"],["IDS","ID_Start"],["IDSB","IDS_Binary_Operator"],["IDST","IDS_Trinary_Operator"],["Join_C","Join_Control"],["LOE","Logical_Order_Exception"],["Lower","Lowercase"],["Math","Math"],["NChar","Noncharacter_Code_Point"],["Pat_Syn","Pattern_Syntax"],["Pat_WS","Pattern_White_Space"],["QMark","Quotation_Mark"],["Radical","Radical"],["RI","Regional_Indicator"],["SD","Soft_Dotted"],["STerm","Sentence_Terminal"],["Term","Terminal_Punctuation"],["UIdeo","Unified_Ideograph"],["Upper","Uppercase"],["VS","Variation_Selector"],["WSpace","White_Space"],["space","White_Space"],["XIDC","XID_Continue"],["XIDS","XID_Start"]]),vt=function(t){if(mt.has(t))return t;if(yt.has(t))return yt.get(t);throw new Error("Unknown property: "+t)},bt=new Map([["General_Category",new Map([["C","Other"],["Cc","Control"],["cntrl","Control"],["Cf","Format"],["Cn","Unassigned"],["Co","Private_Use"],["Cs","Surrogate"],["L","Letter"],["LC","Cased_Letter"],["Ll","Lowercase_Letter"],["Lm","Modifier_Letter"],["Lo","Other_Letter"],["Lt","Titlecase_Letter"],["Lu","Uppercase_Letter"],["M","Mark"],["Combining_Mark","Mark"],["Mc","Spacing_Mark"],["Me","Enclosing_Mark"],["Mn","Nonspacing_Mark"],["N","Number"],["Nd","Decimal_Number"],["digit","Decimal_Number"],["Nl","Letter_Number"],["No","Other_Number"],["P","Punctuation"],["punct","Punctuation"],["Pc","Connector_Punctuation"],["Pd","Dash_Punctuation"],["Pe","Close_Punctuation"],["Pf","Final_Punctuation"],["Pi","Initial_Punctuation"],["Po","Other_Punctuation"],["Ps","Open_Punctuation"],["S","Symbol"],["Sc","Currency_Symbol"],["Sk","Modifier_Symbol"],["Sm","Math_Symbol"],["So","Other_Symbol"],["Z","Separator"],["Zl","Line_Separator"],["Zp","Paragraph_Separator"],["Zs","Space_Separator"],["Other","Other"],["Control","Control"],["Format","Format"],["Unassigned","Unassigned"],["Private_Use","Private_Use"],["Surrogate","Surrogate"],["Letter","Letter"],["Cased_Letter","Cased_Letter"],["Lowercase_Letter","Lowercase_Letter"],["Modifier_Letter","Modifier_Letter"],["Other_Letter","Other_Letter"],["Titlecase_Letter","Titlecase_Letter"],["Uppercase_Letter","Uppercase_Letter"],["Mark","Mark"],["Spacing_Mark","Spacing_Mark"],["Enclosing_Mark","Enclosing_Mark"],["Nonspacing_Mark","Nonspacing_Mark"],["Number","Number"],["Decimal_Number","Decimal_Number"],["Letter_Number","Letter_Number"],["Other_Number","Other_Number"],["Punctuation","Punctuation"],["Connector_Punctuation","Connector_Punctuation"],["Dash_Punctuation","Dash_Punctuation"],["Close_Punctuation","Close_Punctuation"],["Final_Punctuation","Final_Punctuation"],["Initial_Punctuation","Initial_Punctuation"],["Other_Punctuation","Other_Punctuation"],["Open_Punctuation","Open_Punctuation"],["Symbol","Symbol"],["Currency_Symbol","Currency_Symbol"],["Modifier_Symbol","Modifier_Symbol"],["Math_Symbol","Math_Symbol"],["Other_Symbol","Other_Symbol"],["Separator","Separator"],["Line_Separator","Line_Separator"],["Paragraph_Separator","Paragraph_Separator"],["Space_Separator","Space_Separator"]])],["Script",new Map([["Adlm","Adlam"],["Aghb","Caucasian_Albanian"],["Ahom","Ahom"],["Arab","Arabic"],["Armi","Imperial_Aramaic"],["Armn","Armenian"],["Avst","Avestan"],["Bali","Balinese"],["Bamu","Bamum"],["Bass","Bassa_Vah"],["Batk","Batak"],["Beng","Bengali"],["Bhks","Bhaiksuki"],["Bopo","Bopomofo"],["Brah","Brahmi"],["Brai","Braille"],["Bugi","Buginese"],["Buhd","Buhid"],["Cakm","Chakma"],["Cans","Canadian_Aboriginal"],["Cari","Carian"],["Cham","Cham"],["Cher","Cherokee"],["Copt","Coptic"],["Qaac","Coptic"],["Cprt","Cypriot"],["Cyrl","Cyrillic"],["Deva","Devanagari"],["Dsrt","Deseret"],["Dupl","Duployan"],["Egyp","Egyptian_Hieroglyphs"],["Elba","Elbasan"],["Ethi","Ethiopic"],["Geor","Georgian"],["Glag","Glagolitic"],["Gonm","Masaram_Gondi"],["Goth","Gothic"],["Gran","Grantha"],["Grek","Greek"],["Gujr","Gujarati"],["Guru","Gurmukhi"],["Hang","Hangul"],["Hani","Han"],["Hano","Hanunoo"],["Hatr","Hatran"],["Hebr","Hebrew"],["Hira","Hiragana"],["Hluw","Anatolian_Hieroglyphs"],["Hmng","Pahawh_Hmong"],["Hrkt","Katakana_Or_Hiragana"],["Hung","Old_Hungarian"],["Ital","Old_Italic"],["Java","Javanese"],["Kali","Kayah_Li"],["Kana","Katakana"],["Khar","Kharoshthi"],["Khmr","Khmer"],["Khoj","Khojki"],["Knda","Kannada"],["Kthi","Kaithi"],["Lana","Tai_Tham"],["Laoo","Lao"],["Latn","Latin"],["Lepc","Lepcha"],["Limb","Limbu"],["Lina","Linear_A"],["Linb","Linear_B"],["Lisu","Lisu"],["Lyci","Lycian"],["Lydi","Lydian"],["Mahj","Mahajani"],["Mand","Mandaic"],["Mani","Manichaean"],["Marc","Marchen"],["Mend","Mende_Kikakui"],["Merc","Meroitic_Cursive"],["Mero","Meroitic_Hieroglyphs"],["Mlym","Malayalam"],["Modi","Modi"],["Mong","Mongolian"],["Mroo","Mro"],["Mtei","Meetei_Mayek"],["Mult","Multani"],["Mymr","Myanmar"],["Narb","Old_North_Arabian"],["Nbat","Nabataean"],["Newa","Newa"],["Nkoo","Nko"],["Nshu","Nushu"],["Ogam","Ogham"],["Olck","Ol_Chiki"],["Orkh","Old_Turkic"],["Orya","Oriya"],["Osge","Osage"],["Osma","Osmanya"],["Palm","Palmyrene"],["Pauc","Pau_Cin_Hau"],["Perm","Old_Permic"],["Phag","Phags_Pa"],["Phli","Inscriptional_Pahlavi"],["Phlp","Psalter_Pahlavi"],["Phnx","Phoenician"],["Plrd","Miao"],["Prti","Inscriptional_Parthian"],["Rjng","Rejang"],["Runr","Runic"],["Samr","Samaritan"],["Sarb","Old_South_Arabian"],["Saur","Saurashtra"],["Sgnw","SignWriting"],["Shaw","Shavian"],["Shrd","Sharada"],["Sidd","Siddham"],["Sind","Khudawadi"],["Sinh","Sinhala"],["Sora","Sora_Sompeng"],["Soyo","Soyombo"],["Sund","Sundanese"],["Sylo","Syloti_Nagri"],["Syrc","Syriac"],["Tagb","Tagbanwa"],["Takr","Takri"],["Tale","Tai_Le"],["Talu","New_Tai_Lue"],["Taml","Tamil"],["Tang","Tangut"],["Tavt","Tai_Viet"],["Telu","Telugu"],["Tfng","Tifinagh"],["Tglg","Tagalog"],["Thaa","Thaana"],["Thai","Thai"],["Tibt","Tibetan"],["Tirh","Tirhuta"],["Ugar","Ugaritic"],["Vaii","Vai"],["Wara","Warang_Citi"],["Xpeo","Old_Persian"],["Xsux","Cuneiform"],["Yiii","Yi"],["Zanb","Zanabazar_Square"],["Zinh","Inherited"],["Qaai","Inherited"],["Zyyy","Common"],["Zzzz","Unknown"],["Adlam","Adlam"],["Caucasian_Albanian","Caucasian_Albanian"],["Arabic","Arabic"],["Imperial_Aramaic","Imperial_Aramaic"],["Armenian","Armenian"],["Avestan","Avestan"],["Balinese","Balinese"],["Bamum","Bamum"],["Bassa_Vah","Bassa_Vah"],["Batak","Batak"],["Bengali","Bengali"],["Bhaiksuki","Bhaiksuki"],["Bopomofo","Bopomofo"],["Brahmi","Brahmi"],["Braille","Braille"],["Buginese","Buginese"],["Buhid","Buhid"],["Chakma","Chakma"],["Canadian_Aboriginal","Canadian_Aboriginal"],["Carian","Carian"],["Cherokee","Cherokee"],["Coptic","Coptic"],["Cypriot","Cypriot"],["Cyrillic","Cyrillic"],["Devanagari","Devanagari"],["Deseret","Deseret"],["Duployan","Duployan"],["Egyptian_Hieroglyphs","Egyptian_Hieroglyphs"],["Elbasan","Elbasan"],["Ethiopic","Ethiopic"],["Georgian","Georgian"],["Glagolitic","Glagolitic"],["Masaram_Gondi","Masaram_Gondi"],["Gothic","Gothic"],["Grantha","Grantha"],["Greek","Greek"],["Gujarati","Gujarati"],["Gurmukhi","Gurmukhi"],["Hangul","Hangul"],["Han","Han"],["Hanunoo","Hanunoo"],["Hatran","Hatran"],["Hebrew","Hebrew"],["Hiragana","Hiragana"],["Anatolian_Hieroglyphs","Anatolian_Hieroglyphs"],["Pahawh_Hmong","Pahawh_Hmong"],["Katakana_Or_Hiragana","Katakana_Or_Hiragana"],["Old_Hungarian","Old_Hungarian"],["Old_Italic","Old_Italic"],["Javanese","Javanese"],["Kayah_Li","Kayah_Li"],["Katakana","Katakana"],["Kharoshthi","Kharoshthi"],["Khmer","Khmer"],["Khojki","Khojki"],["Kannada","Kannada"],["Kaithi","Kaithi"],["Tai_Tham","Tai_Tham"],["Lao","Lao"],["Latin","Latin"],["Lepcha","Lepcha"],["Limbu","Limbu"],["Linear_A","Linear_A"],["Linear_B","Linear_B"],["Lycian","Lycian"],["Lydian","Lydian"],["Mahajani","Mahajani"],["Mandaic","Mandaic"],["Manichaean","Manichaean"],["Marchen","Marchen"],["Mende_Kikakui","Mende_Kikakui"],["Meroitic_Cursive","Meroitic_Cursive"],["Meroitic_Hieroglyphs","Meroitic_Hieroglyphs"],["Malayalam","Malayalam"],["Mongolian","Mongolian"],["Mro","Mro"],["Meetei_Mayek","Meetei_Mayek"],["Multani","Multani"],["Myanmar","Myanmar"],["Old_North_Arabian","Old_North_Arabian"],["Nabataean","Nabataean"],["Nko","Nko"],["Nushu","Nushu"],["Ogham","Ogham"],["Ol_Chiki","Ol_Chiki"],["Old_Turkic","Old_Turkic"],["Oriya","Oriya"],["Osage","Osage"],["Osmanya","Osmanya"],["Palmyrene","Palmyrene"],["Pau_Cin_Hau","Pau_Cin_Hau"],["Old_Permic","Old_Permic"],["Phags_Pa","Phags_Pa"],["Inscriptional_Pahlavi","Inscriptional_Pahlavi"],["Psalter_Pahlavi","Psalter_Pahlavi"],["Phoenician","Phoenician"],["Miao","Miao"],["Inscriptional_Parthian","Inscriptional_Parthian"],["Rejang","Rejang"],["Runic","Runic"],["Samaritan","Samaritan"],["Old_South_Arabian","Old_South_Arabian"],["Saurashtra","Saurashtra"],["SignWriting","SignWriting"],["Shavian","Shavian"],["Sharada","Sharada"],["Siddham","Siddham"],["Khudawadi","Khudawadi"],["Sinhala","Sinhala"],["Sora_Sompeng","Sora_Sompeng"],["Soyombo","Soyombo"],["Sundanese","Sundanese"],["Syloti_Nagri","Syloti_Nagri"],["Syriac","Syriac"],["Tagbanwa","Tagbanwa"],["Takri","Takri"],["Tai_Le","Tai_Le"],["New_Tai_Lue","New_Tai_Lue"],["Tamil","Tamil"],["Tangut","Tangut"],["Tai_Viet","Tai_Viet"],["Telugu","Telugu"],["Tifinagh","Tifinagh"],["Tagalog","Tagalog"],["Thaana","Thaana"],["Tibetan","Tibetan"],["Tirhuta","Tirhuta"],["Ugaritic","Ugaritic"],["Vai","Vai"],["Warang_Citi","Warang_Citi"],["Old_Persian","Old_Persian"],["Cuneiform","Cuneiform"],["Yi","Yi"],["Zanabazar_Square","Zanabazar_Square"],["Inherited","Inherited"],["Common","Common"],["Unknown","Unknown"]])],["Script_Extensions",new Map([["Adlm","Adlam"],["Aghb","Caucasian_Albanian"],["Ahom","Ahom"],["Arab","Arabic"],["Armi","Imperial_Aramaic"],["Armn","Armenian"],["Avst","Avestan"],["Bali","Balinese"],["Bamu","Bamum"],["Bass","Bassa_Vah"],["Batk","Batak"],["Beng","Bengali"],["Bhks","Bhaiksuki"],["Bopo","Bopomofo"],["Brah","Brahmi"],["Brai","Braille"],["Bugi","Buginese"],["Buhd","Buhid"],["Cakm","Chakma"],["Cans","Canadian_Aboriginal"],["Cari","Carian"],["Cham","Cham"],["Cher","Cherokee"],["Copt","Coptic"],["Qaac","Coptic"],["Cprt","Cypriot"],["Cyrl","Cyrillic"],["Deva","Devanagari"],["Dsrt","Deseret"],["Dupl","Duployan"],["Egyp","Egyptian_Hieroglyphs"],["Elba","Elbasan"],["Ethi","Ethiopic"],["Geor","Georgian"],["Glag","Glagolitic"],["Gonm","Masaram_Gondi"],["Goth","Gothic"],["Gran","Grantha"],["Grek","Greek"],["Gujr","Gujarati"],["Guru","Gurmukhi"],["Hang","Hangul"],["Hani","Han"],["Hano","Hanunoo"],["Hatr","Hatran"],["Hebr","Hebrew"],["Hira","Hiragana"],["Hluw","Anatolian_Hieroglyphs"],["Hmng","Pahawh_Hmong"],["Hrkt","Katakana_Or_Hiragana"],["Hung","Old_Hungarian"],["Ital","Old_Italic"],["Java","Javanese"],["Kali","Kayah_Li"],["Kana","Katakana"],["Khar","Kharoshthi"],["Khmr","Khmer"],["Khoj","Khojki"],["Knda","Kannada"],["Kthi","Kaithi"],["Lana","Tai_Tham"],["Laoo","Lao"],["Latn","Latin"],["Lepc","Lepcha"],["Limb","Limbu"],["Lina","Linear_A"],["Linb","Linear_B"],["Lisu","Lisu"],["Lyci","Lycian"],["Lydi","Lydian"],["Mahj","Mahajani"],["Mand","Mandaic"],["Mani","Manichaean"],["Marc","Marchen"],["Mend","Mende_Kikakui"],["Merc","Meroitic_Cursive"],["Mero","Meroitic_Hieroglyphs"],["Mlym","Malayalam"],["Modi","Modi"],["Mong","Mongolian"],["Mroo","Mro"],["Mtei","Meetei_Mayek"],["Mult","Multani"],["Mymr","Myanmar"],["Narb","Old_North_Arabian"],["Nbat","Nabataean"],["Newa","Newa"],["Nkoo","Nko"],["Nshu","Nushu"],["Ogam","Ogham"],["Olck","Ol_Chiki"],["Orkh","Old_Turkic"],["Orya","Oriya"],["Osge","Osage"],["Osma","Osmanya"],["Palm","Palmyrene"],["Pauc","Pau_Cin_Hau"],["Perm","Old_Permic"],["Phag","Phags_Pa"],["Phli","Inscriptional_Pahlavi"],["Phlp","Psalter_Pahlavi"],["Phnx","Phoenician"],["Plrd","Miao"],["Prti","Inscriptional_Parthian"],["Rjng","Rejang"],["Runr","Runic"],["Samr","Samaritan"],["Sarb","Old_South_Arabian"],["Saur","Saurashtra"],["Sgnw","SignWriting"],["Shaw","Shavian"],["Shrd","Sharada"],["Sidd","Siddham"],["Sind","Khudawadi"],["Sinh","Sinhala"],["Sora","Sora_Sompeng"],["Soyo","Soyombo"],["Sund","Sundanese"],["Sylo","Syloti_Nagri"],["Syrc","Syriac"],["Tagb","Tagbanwa"],["Takr","Takri"],["Tale","Tai_Le"],["Talu","New_Tai_Lue"],["Taml","Tamil"],["Tang","Tangut"],["Tavt","Tai_Viet"],["Telu","Telugu"],["Tfng","Tifinagh"],["Tglg","Tagalog"],["Thaa","Thaana"],["Thai","Thai"],["Tibt","Tibetan"],["Tirh","Tirhuta"],["Ugar","Ugaritic"],["Vaii","Vai"],["Wara","Warang_Citi"],["Xpeo","Old_Persian"],["Xsux","Cuneiform"],["Yiii","Yi"],["Zanb","Zanabazar_Square"],["Zinh","Inherited"],["Qaai","Inherited"],["Zyyy","Common"],["Zzzz","Unknown"],["Adlam","Adlam"],["Caucasian_Albanian","Caucasian_Albanian"],["Arabic","Arabic"],["Imperial_Aramaic","Imperial_Aramaic"],["Armenian","Armenian"],["Avestan","Avestan"],["Balinese","Balinese"],["Bamum","Bamum"],["Bassa_Vah","Bassa_Vah"],["Batak","Batak"],["Bengali","Bengali"],["Bhaiksuki","Bhaiksuki"],["Bopomofo","Bopomofo"],["Brahmi","Brahmi"],["Braille","Braille"],["Buginese","Buginese"],["Buhid","Buhid"],["Chakma","Chakma"],["Canadian_Aboriginal","Canadian_Aboriginal"],["Carian","Carian"],["Cherokee","Cherokee"],["Coptic","Coptic"],["Cypriot","Cypriot"],["Cyrillic","Cyrillic"],["Devanagari","Devanagari"],["Deseret","Deseret"],["Duployan","Duployan"],["Egyptian_Hieroglyphs","Egyptian_Hieroglyphs"],["Elbasan","Elbasan"],["Ethiopic","Ethiopic"],["Georgian","Georgian"],["Glagolitic","Glagolitic"],["Masaram_Gondi","Masaram_Gondi"],["Gothic","Gothic"],["Grantha","Grantha"],["Greek","Greek"],["Gujarati","Gujarati"],["Gurmukhi","Gurmukhi"],["Hangul","Hangul"],["Han","Han"],["Hanunoo","Hanunoo"],["Hatran","Hatran"],["Hebrew","Hebrew"],["Hiragana","Hiragana"],["Anatolian_Hieroglyphs","Anatolian_Hieroglyphs"],["Pahawh_Hmong","Pahawh_Hmong"],["Katakana_Or_Hiragana","Katakana_Or_Hiragana"],["Old_Hungarian","Old_Hungarian"],["Old_Italic","Old_Italic"],["Javanese","Javanese"],["Kayah_Li","Kayah_Li"],["Katakana","Katakana"],["Kharoshthi","Kharoshthi"],["Khmer","Khmer"],["Khojki","Khojki"],["Kannada","Kannada"],["Kaithi","Kaithi"],["Tai_Tham","Tai_Tham"],["Lao","Lao"],["Latin","Latin"],["Lepcha","Lepcha"],["Limbu","Limbu"],["Linear_A","Linear_A"],["Linear_B","Linear_B"],["Lycian","Lycian"],["Lydian","Lydian"],["Mahajani","Mahajani"],["Mandaic","Mandaic"],["Manichaean","Manichaean"],["Marchen","Marchen"],["Mende_Kikakui","Mende_Kikakui"],["Meroitic_Cursive","Meroitic_Cursive"],["Meroitic_Hieroglyphs","Meroitic_Hieroglyphs"],["Malayalam","Malayalam"],["Mongolian","Mongolian"],["Mro","Mro"],["Meetei_Mayek","Meetei_Mayek"],["Multani","Multani"],["Myanmar","Myanmar"],["Old_North_Arabian","Old_North_Arabian"],["Nabataean","Nabataean"],["Nko","Nko"],["Nushu","Nushu"],["Ogham","Ogham"],["Ol_Chiki","Ol_Chiki"],["Old_Turkic","Old_Turkic"],["Oriya","Oriya"],["Osage","Osage"],["Osmanya","Osmanya"],["Palmyrene","Palmyrene"],["Pau_Cin_Hau","Pau_Cin_Hau"],["Old_Permic","Old_Permic"],["Phags_Pa","Phags_Pa"],["Inscriptional_Pahlavi","Inscriptional_Pahlavi"],["Psalter_Pahlavi","Psalter_Pahlavi"],["Phoenician","Phoenician"],["Miao","Miao"],["Inscriptional_Parthian","Inscriptional_Parthian"],["Rejang","Rejang"],["Runic","Runic"],["Samaritan","Samaritan"],["Old_South_Arabian","Old_South_Arabian"],["Saurashtra","Saurashtra"],["SignWriting","SignWriting"],["Shavian","Shavian"],["Sharada","Sharada"],["Siddham","Siddham"],["Khudawadi","Khudawadi"],["Sinhala","Sinhala"],["Sora_Sompeng","Sora_Sompeng"],["Soyombo","Soyombo"],["Sundanese","Sundanese"],["Syloti_Nagri","Syloti_Nagri"],["Syriac","Syriac"],["Tagbanwa","Tagbanwa"],["Takri","Takri"],["Tai_Le","Tai_Le"],["New_Tai_Lue","New_Tai_Lue"],["Tamil","Tamil"],["Tangut","Tangut"],["Tai_Viet","Tai_Viet"],["Telugu","Telugu"],["Tifinagh","Tifinagh"],["Tagalog","Tagalog"],["Thaana","Thaana"],["Tibetan","Tibetan"],["Tirhuta","Tirhuta"],["Ugaritic","Ugaritic"],["Vai","Vai"],["Warang_Citi","Warang_Citi"],["Old_Persian","Old_Persian"],["Cuneiform","Cuneiform"],["Yi","Yi"],["Zanabazar_Square","Zanabazar_Square"],["Inherited","Inherited"],["Common","Common"],["Unknown","Unknown"]])]]),_t=function(t,e){var n=bt.get(t);if(!n)throw new Error("Unknown property `"+t+"`.");var r=n.get(e);if(r)return r;throw new Error("Unknown value `"+e+"` for property `"+t+"`.")},xt=new Map([[75,8490],[83,383],[107,8490],[115,383],[181,924],[197,8491],[223,7838],[229,8491],[383,83],[452,453],[453,452],[455,456],[456,455],[458,459],[459,458],[497,498],[498,497],[618,42926],[669,42930],[837,8126],[914,976],[917,1013],[920,1012],[921,8126],[922,1008],[924,181],[928,982],[929,1009],[931,962],[934,981],[937,8486],[952,1012],[962,931],[969,8486],[976,914],[977,1012],[981,934],[982,928],[1008,922],[1009,929],[1012,[920,977,952]],[1013,917],[1042,7296],[1044,7297],[1054,7298],[1057,7299],[1058,7301],[1066,7302],[1074,7296],[1076,7297],[1086,7298],[1089,7299],[1090,[7300,7301]],[1098,7302],[1122,7303],[1123,7303],[5024,43888],[5025,43889],[5026,43890],[5027,43891],[5028,43892],[5029,43893],[5030,43894],[5031,43895],[5032,43896],[5033,43897],[5034,43898],[5035,43899],[5036,43900],[5037,43901],[5038,43902],[5039,43903],[5040,43904],[5041,43905],[5042,43906],[5043,43907],[5044,43908],[5045,43909],[5046,43910],[5047,43911],[5048,43912],[5049,43913],[5050,43914],[5051,43915],[5052,43916],[5053,43917],[5054,43918],[5055,43919],[5056,43920],[5057,43921],[5058,43922],[5059,43923],[5060,43924],[5061,43925],[5062,43926],[5063,43927],[5064,43928],[5065,43929],[5066,43930],[5067,43931],[5068,43932],[5069,43933],[5070,43934],[5071,43935],[5072,43936],[5073,43937],[5074,43938],[5075,43939],[5076,43940],[5077,43941],[5078,43942],[5079,43943],[5080,43944],[5081,43945],[5082,43946],[5083,43947],[5084,43948],[5085,43949],[5086,43950],[5087,43951],[5088,43952],[5089,43953],[5090,43954],[5091,43955],[5092,43956],[5093,43957],[5094,43958],[5095,43959],[5096,43960],[5097,43961],[5098,43962],[5099,43963],[5100,43964],[5101,43965],[5102,43966],[5103,43967],[5104,5112],[5105,5113],[5106,5114],[5107,5115],[5108,5116],[5109,5117],[5112,5104],[5113,5105],[5114,5106],[5115,5107],[5116,5108],[5117,5109],[7296,[1042,1074]],[7297,[1044,1076]],[7298,[1054,1086]],[7299,[1057,1089]],[7300,[7301,1090]],[7301,[1058,7300,1090]],[7302,[1066,1098]],[7303,[1122,1123]],[7304,[42570,42571]],[7776,7835],[7835,7776],[7838,223],[8064,8072],[8065,8073],[8066,8074],[8067,8075],[8068,8076],[8069,8077],[8070,8078],[8071,8079],[8072,8064],[8073,8065],[8074,8066],[8075,8067],[8076,8068],[8077,8069],[8078,8070],[8079,8071],[8080,8088],[8081,8089],[8082,8090],[8083,8091],[8084,8092],[8085,8093],[8086,8094],[8087,8095],[8088,8080],[8089,8081],[8090,8082],[8091,8083],[8092,8084],[8093,8085],[8094,8086],[8095,8087],[8096,8104],[8097,8105],[8098,8106],[8099,8107],[8100,8108],[8101,8109],[8102,8110],[8103,8111],[8104,8096],[8105,8097],[8106,8098],[8107,8099],[8108,8100],[8109,8101],[8110,8102],[8111,8103],[8115,8124],[8124,8115],[8126,[837,921]],[8131,8140],[8140,8131],[8179,8188],[8188,8179],[8486,[937,969]],[8490,75],[8491,[197,229]],[42570,7304],[42571,7304],[42926,618],[42930,669],[42931,43859],[42932,42933],[42933,42932],[42934,42935],[42935,42934],[43859,42931],[43888,5024],[43889,5025],[43890,5026],[43891,5027],[43892,5028],[43893,5029],[43894,5030],[43895,5031],[43896,5032],[43897,5033],[43898,5034],[43899,5035],[43900,5036],[43901,5037],[43902,5038],[43903,5039],[43904,5040],[43905,5041],[43906,5042],[43907,5043],[43908,5044],[43909,5045],[43910,5046],[43911,5047],[43912,5048],[43913,5049],[43914,5050],[43915,5051],[43916,5052],[43917,5053],[43918,5054],[43919,5055],[43920,5056],[43921,5057],[43922,5058],[43923,5059],[43924,5060],[43925,5061],[43926,5062],[43927,5063],[43928,5064],[43929,5065],[43930,5066],[43931,5067],[43932,5068],[43933,5069],[43934,5070],[43935,5071],[43936,5072],[43937,5073],[43938,5074],[43939,5075],[43940,5076],[43941,5077],[43942,5078],[43943,5079],[43944,5080],[43945,5081],[43946,5082],[43947,5083],[43948,5084],[43949,5085],[43950,5086],[43951,5087],[43952,5088],[43953,5089],[43954,5090],[43955,5091],[43956,5092],[43957,5093],[43958,5094],[43959,5095],[43960,5096],[43961,5097],[43962,5098],[43963,5099],[43964,5100],[43965,5101],[43966,5102],[43967,5103],[66560,66600],[66561,66601],[66562,66602],[66563,66603],[66564,66604],[66565,66605],[66566,66606],[66567,66607],[66568,66608],[66569,66609],[66570,66610],[66571,66611],[66572,66612],[66573,66613],[66574,66614],[66575,66615],[66576,66616],[66577,66617],[66578,66618],[66579,66619],[66580,66620],[66581,66621],[66582,66622],[66583,66623],[66584,66624],[66585,66625],[66586,66626],[66587,66627],[66588,66628],[66589,66629],[66590,66630],[66591,66631],[66592,66632],[66593,66633],[66594,66634],[66595,66635],[66596,66636],[66597,66637],[66598,66638],[66599,66639],[66600,66560],[66601,66561],[66602,66562],[66603,66563],[66604,66564],[66605,66565],[66606,66566],[66607,66567],[66608,66568],[66609,66569],[66610,66570],[66611,66571],[66612,66572],[66613,66573],[66614,66574],[66615,66575],[66616,66576],[66617,66577],[66618,66578],[66619,66579],[66620,66580],[66621,66581],[66622,66582],[66623,66583],[66624,66584],[66625,66585],[66626,66586],[66627,66587],[66628,66588],[66629,66589],[66630,66590],[66631,66591],[66632,66592],[66633,66593],[66634,66594],[66635,66595],[66636,66596],[66637,66597],[66638,66598],[66639,66599],[66736,66776],[66737,66777],[66738,66778],[66739,66779],[66740,66780],[66741,66781],[66742,66782],[66743,66783],[66744,66784],[66745,66785],[66746,66786],[66747,66787],[66748,66788],[66749,66789],[66750,66790],[66751,66791],[66752,66792],[66753,66793],[66754,66794],[66755,66795],[66756,66796],[66757,66797],[66758,66798],[66759,66799],[66760,66800],[66761,66801],[66762,66802],[66763,66803],[66764,66804],[66765,66805],[66766,66806],[66767,66807],[66768,66808],[66769,66809],[66770,66810],[66771,66811],[66776,66736],[66777,66737],[66778,66738],[66779,66739],[66780,66740],[66781,66741],[66782,66742],[66783,66743],[66784,66744],[66785,66745],[66786,66746],[66787,66747],[66788,66748],[66789,66749],[66790,66750],[66791,66751],[66792,66752],[66793,66753],[66794,66754],[66795,66755],[66796,66756],[66797,66757],[66798,66758],[66799,66759],[66800,66760],[66801,66761],[66802,66762],[66803,66763],[66804,66764],[66805,66765],[66806,66766],[66807,66767],[66808,66768],[66809,66769],[66810,66770],[66811,66771],[68736,68800],[68737,68801],[68738,68802],[68739,68803],[68740,68804],[68741,68805],[68742,68806],[68743,68807],[68744,68808],[68745,68809],[68746,68810],[68747,68811],[68748,68812],[68749,68813],[68750,68814],[68751,68815],[68752,68816],[68753,68817],[68754,68818],[68755,68819],[68756,68820],[68757,68821],[68758,68822],[68759,68823],[68760,68824],[68761,68825],[68762,68826],[68763,68827],[68764,68828],[68765,68829],[68766,68830],[68767,68831],[68768,68832],[68769,68833],[68770,68834],[68771,68835],[68772,68836],[68773,68837],[68774,68838],[68775,68839],[68776,68840],[68777,68841],[68778,68842],[68779,68843],[68780,68844],[68781,68845],[68782,68846],[68783,68847],[68784,68848],[68785,68849],[68786,68850],[68800,68736],[68801,68737],[68802,68738],[68803,68739],[68804,68740],[68805,68741],[68806,68742],[68807,68743],[68808,68744],[68809,68745],[68810,68746],[68811,68747],[68812,68748],[68813,68749],[68814,68750],[68815,68751],[68816,68752],[68817,68753],[68818,68754],[68819,68755],[68820,68756],[68821,68757],[68822,68758],[68823,68759],[68824,68760],[68825,68761],[68826,68762],[68827,68763],[68828,68764],[68829,68765],[68830,68766],[68831,68767],[68832,68768],[68833,68769],[68834,68770],[68835,68771],[68836,68772],[68837,68773],[68838,68774],[68839,68775],[68840,68776],[68841,68777],[68842,68778],[68843,68779],[68844,68780],[68845,68781],[68846,68782],[68847,68783],[68848,68784],[68849,68785],[68850,68786],[71840,71872],[71841,71873],[71842,71874],[71843,71875],[71844,71876],[71845,71877],[71846,71878],[71847,71879],[71848,71880],[71849,71881],[71850,71882],[71851,71883],[71852,71884],[71853,71885],[71854,71886],[71855,71887],[71856,71888],[71857,71889],[71858,71890],[71859,71891],[71860,71892],[71861,71893],[71862,71894],[71863,71895],[71864,71896],[71865,71897],[71866,71898],[71867,71899],[71868,71900],[71869,71901],[71870,71902],[71871,71903],[71872,71840],[71873,71841],[71874,71842],[71875,71843],[71876,71844],[71877,71845],[71878,71846],[71879,71847],[71880,71848],[71881,71849],[71882,71850],[71883,71851],[71884,71852],[71885,71853],[71886,71854],[71887,71855],[71888,71856],[71889,71857],[71890,71858],[71891,71859],[71892,71860],[71893,71861],[71894,71862],[71895,71863],[71896,71864],[71897,71865],[71898,71866],[71899,71867],[71900,71868],[71901,71869],[71902,71870],[71903,71871],[125184,125218],[125185,125219],[125186,125220],[125187,125221],[125188,125222],[125189,125223],[125190,125224],[125191,125225],[125192,125226],[125193,125227],[125194,125228],[125195,125229],[125196,125230],[125197,125231],[125198,125232],[125199,125233],[125200,125234],[125201,125235],[125202,125236],[125203,125237],[125204,125238],[125205,125239],[125206,125240],[125207,125241],[125208,125242],[125209,125243],[125210,125244],[125211,125245],[125212,125246],[125213,125247],[125214,125248],[125215,125249],[125216,125250],[125217,125251],[125218,125184],[125219,125185],[125220,125186],[125221,125187],[125222,125188],[125223,125189],[125224,125190],[125225,125191],[125226,125192],[125227,125193],[125228,125194],[125229,125195],[125230,125196],[125231,125197],[125232,125198],[125233,125199],[125234,125200],[125235,125201],[125236,125202],[125237,125203],[125238,125204],[125239,125205],[125240,125206],[125241,125207],[125242,125208],[125243,125209],[125244,125210],[125245,125211],[125246,125212],[125247,125213],[125248,125214],[125249,125215],[125250,125216],[125251,125217]]),wt={REGULAR:new Map([["d",gt().addRange(48,57)],["D",gt().addRange(0,47).addRange(58,65535)],["s",gt(32,160,5760,8239,8287,12288,65279).addRange(9,13).addRange(8192,8202).addRange(8232,8233)],["S",gt().addRange(0,8).addRange(14,31).addRange(33,159).addRange(161,5759).addRange(5761,8191).addRange(8203,8231).addRange(8234,8238).addRange(8240,8286).addRange(8288,12287).addRange(12289,65278).addRange(65280,65535)],["w",gt(95).addRange(48,57).addRange(65,90).addRange(97,122)],["W",gt(96).addRange(0,47).addRange(58,64).addRange(91,94).addRange(123,65535)]]),UNICODE:new Map([["d",gt().addRange(48,57)],["D",gt().addRange(0,47).addRange(58,1114111)],["s",gt(32,160,5760,8239,8287,12288,65279).addRange(9,13).addRange(8192,8202).addRange(8232,8233)],["S",gt().addRange(0,8).addRange(14,31).addRange(33,159).addRange(161,5759).addRange(5761,8191).addRange(8203,8231).addRange(8234,8238).addRange(8240,8286).addRange(8288,12287).addRange(12289,65278).addRange(65280,1114111)],["w",gt(95).addRange(48,57).addRange(65,90).addRange(97,122)],["W",gt(96).addRange(0,47).addRange(58,64).addRange(91,94).addRange(123,1114111)]]),UNICODE_IGNORE_CASE:new Map([["d",gt().addRange(48,57)],["D",gt().addRange(0,47).addRange(58,1114111)],["s",gt(32,160,5760,8239,8287,12288,65279).addRange(9,13).addRange(8192,8202).addRange(8232,8233)],["S",gt().addRange(0,8).addRange(14,31).addRange(33,159).addRange(161,5759).addRange(5761,8191).addRange(8203,8231).addRange(8234,8238).addRange(8240,8286).addRange(8288,12287).addRange(12289,65278).addRange(65280,1114111)],["w",gt(95,383,8490).addRange(48,57).addRange(65,90).addRange(97,122)],["W",gt(96).addRange(0,47).addRange(58,64).addRange(91,94).addRange(123,382).addRange(384,8489).addRange(8491,1114111)]])},St=u(function(t){var e=dt.generate,n=ft.parse,r=gt().addRange(0,1114111),i=gt().addRange(0,65535),a=r.clone().remove(10,13,8232,8233),s=a.clone().intersection(i),o=function(t,e,n){return e?n?wt.UNICODE_IGNORE_CASE.get(t):wt.UNICODE.get(t):wt.REGULAR.get(t)},p=function(t,e){try{return function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}()}catch(n){throw new Error("Failed to recognize value `"+e+"` for property `"+t+"`.")}},u=function(t,e){var n,i=t.split("="),a=i[0];if(1==i.length)n=function(t){try{var e=_t("General_Category",t);return p("General_Category",e)}catch(t){}var n=vt(t);return p(n)}(a);else{var s=vt(a),o=_t(s,i[1]);n=p(s,o)}return e?r.clone().remove(n):n.clone()};gt.prototype.iuAddRange=function(t,e){do{var n=l(t);n&&this.add(n)}while(++t<=e);return this};var h=function(t,e){var r=n(e,f.useUnicodeFlag?"u":"");switch(r.type){case"characterClass":case"group":case"value":break;default:r=c(r,e)}Object.assign(t,r)},c=function(t,e){return{type:"group",behavior:"ignore",body:[t],raw:"(?:"+e+")"}},l=function(t){return xt.get(t)||!1},d=function(t,e){switch(t.type){case"dot":h(t,(g=f.unicode,m=f.dotAll,m?g?r:i:g?a:s).toString(e));break;case"characterClass":t=function(t,e){for(var n=gt(),a=0,s=t.body;a<s.length;a+=1){var p=s[a];switch(p.type){case"value":if(n.add(p.codePoint),f.ignoreCase&&f.unicode&&!f.useUnicodeFlag){var c=l(p.codePoint);c&&n.add(c)}break;case"characterClassRange":var d=p.min.codePoint,g=p.max.codePoint;n.addRange(d,g),f.ignoreCase&&f.unicode&&!f.useUnicodeFlag&&n.iuAddRange(d,g);break;case"characterClassEscape":n.add(o(p.value,f.unicode,f.ignoreCase));break;case"unicodePropertyEscape":n.add(u(p.value,p.negative));break;default:throw new Error("Unknown term type: "+p.type)}}return t.negative&&(n=(f.unicode?r:i).clone().remove(n)),h(t,n.toString(e)),t}(t,e);break;case"unicodePropertyEscape":h(t,u(t.value,t.negative).toString(e));break;case"characterClassEscape":h(t,o(t.value,f.unicode,f.ignoreCase).toString(e));break;case"alternative":case"disjunction":case"group":case"quantifier":t.body=t.body.map(function(t){return d(t,e)});break;case"value":var n=t.codePoint,p=gt(n);if(f.ignoreCase&&f.unicode&&!f.useUnicodeFlag){var c=l(n);c&&p.add(c)}h(t,p.toString(e));break;case"anchor":case"empty":case"group":case"reference":break;default:throw new Error("Unknown term type: "+t.type)}var g,m;return t},f={ignoreCase:!1,unicode:!1,dotAll:!1,useUnicodeFlag:!1};t.exports=function(t,r,i){var a={unicodePropertyEscape:i&&i.unicodePropertyEscape};f.ignoreCase=r&&r.includes("i"),f.unicode=r&&r.includes("u");var s=i&&i.dotAllFlag;f.dotAll=s&&r&&r.includes("s"),f.useUnicodeFlag=i&&i.useUnicodeFlag;var o={hasUnicodeFlag:f.useUnicodeFlag,bmpOnly:!f.unicode},p=n(t,r,a);return d(p,o),e(p)}}),kt={ArrayExpression:O,ArrowFunctionExpression:R,AssignmentExpression:j,BinaryExpression:M,BreakStatement:D,CallExpression:F,ClassBody:U,ClassDeclaration:V,ClassExpression:H,ContinueStatement:K,DoWhileStatement:q,ExportNamedDeclaration:W,ExportDefaultDeclaration:G,ForStatement:z,ForInStatement:J,ForOfStatement:X,FunctionDeclaration:Y,FunctionExpression:$,Identifier:Q,IfStatement:Z,ImportDeclaration:tt,ImportDefaultSpecifier:et,ImportSpecifier:nt,JSXAttribute:rt,JSXClosingElement:it,JSXClosingFragment:at,JSXElement:ot,JSXExpressionContainer:pt,JSXFragment:ut,JSXOpeningElement:ht,JSXOpeningFragment:ct,JSXSpreadAttribute:lt,Literal:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(){"string"==typeof this.value&&this.program.indentExclusionElements.push(this)},e.prototype.transpile=function(t,e){if(e.numericLiteral){var n=this.raw.slice(0,2);"0b"!==n&&"0o"!==n||t.overwrite(this.start,this.end,String(this.value),{storeName:!0,contentOnly:!0})}if(this.regex){var r=this.regex,i=r.pattern,a=r.flags;if(e.stickyRegExp&&/y/.test(a))throw new x("Regular expression sticky flag is not supported",this);e.unicodeRegExp&&/u/.test(a)&&t.overwrite(this.start,this.end,"/"+St(i,a)+"/"+a.replace("u",""),{contentOnly:!0})}},e}(f),MemberExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(e,n){n.reservedProperties&&y[this.property.name]&&(e.overwrite(this.object.end,this.property.start,"['"),e.appendLeft(this.property.end,"']")),t.prototype.transpile.call(this,e,n)},e}(f),NewExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){if(e.spreadRest&&this.arguments.length)for(var n=this.findLexicalBoundary(),r=this.arguments.length;r--;){var i=this.arguments[r];if("SpreadElement"===i.type&&T(i.argument)){this.argumentsArrayAlias=n.getArgumentsArrayAlias();break}}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){if(t.prototype.transpile.call(this,e,n),n.spreadRest&&this.arguments.length){var r=this.arguments[0];L(e,this.arguments,r.start,this.argumentsArrayAlias,!0)&&(e.prependRight(this.start+"new".length," (Function.prototype.bind.apply("),e.overwrite(this.callee.end,r.start,", [ null ].concat( "),e.appendLeft(this.end," ))"))}this.arguments.length&&I(e,this.arguments[this.arguments.length-1].end)},e}(f),ObjectExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(e,n){t.prototype.transpile.call(this,e,n);for(var r=this.start+1,i=0,a=0,s=0,o=null,p=null,u=0;u<this.properties.length;++u){var h=this.properties[u];"SpreadElement"===h.type?(a+=1,null===o&&(o=u)):h.computed?(s+=1,null===p&&(p=u)):"Property"===h.type&&(i+=1)}if(a){if(!this.program.options.objectAssign)throw new x("Object spread operator requires specified objectAssign option with 'Object.assign' or polyfill helper.",this);var c=this.properties.length;if(i&&!s)for(;c--;){var l=this.properties[c];if("Property"===l.type&&!l.computed){var d=this.properties[c-1],f=this.properties[c+1];d&&"Property"===d.type&&!d.computed||e.prependRight(l.start,"{"),f&&"Property"===f.type&&!f.computed||e.appendLeft(l.end,"}")}}r=this.properties[0].start,s?"SpreadElement"===this.properties[0].type?(e.overwrite(this.start,r,this.program.options.objectAssign+"({}, "),e.remove(this.end-1,this.end),e.appendRight(this.end,")")):(e.prependLeft(this.start,this.program.options.objectAssign+"("),e.appendRight(this.end,")")):(e.overwrite(this.start,r,this.program.options.objectAssign+"({}, "),e.overwrite(this.properties[this.properties.length-1].end,this.end,")"))}if(s&&n.computedProperty){var g,m,y=this.getIndentation();"VariableDeclarator"===this.parent.type&&1===this.parent.parent.declarations.length&&"Identifier"===this.parent.id.type?(g=!0,m=this.parent.id.alias||this.parent.id.name):"AssignmentExpression"===this.parent.type&&"ExpressionStatement"===this.parent.parent.type&&"Identifier"===this.parent.left.type?(g=!0,m=this.parent.left.alias||this.parent.left.name):"AssignmentPattern"===this.parent.type&&"Identifier"===this.parent.left.type&&(g=!0,m=this.parent.left.alias||this.parent.left.name),a&&(g=!1),m=this.findScope(!1).resolveName(m);var v=r,b=this.end;g||(null===o||p<o?(m=this.findScope(!0).createDeclaration("obj"),e.prependRight(this.start,"( "+m+" = ")):m=null);for(var _,w=this.properties.length,S=!1,k=!0,C=0;C<w;C+=1){var E=this.properties[C],A=C>0?this.properties[C-1].end:v;if("Property"===E.type&&(E.computed||_&&!a)){if(0===C&&(A=this.start+1),_=E,m){var P=(g?";\n"+y+m:", "+m)+("Literal"===E.key.type||E.computed?"":".");A<E.start?e.overwrite(A,E.start,P):e.prependRight(E.start,P)}else{var T=(m=this.findScope(!0).createDeclaration("obj"))+(E.computed?"":".");e.appendRight(E.start,"( "+m+" = {}, "+T)}var L=E.key.end;if(E.computed){for(;"]"!==e.original[L];)L+=1;L+=1}"Literal"!==E.key.type||E.computed?E.shorthand||E.method&&!E.computed&&n.conciseMethodProperty?e.overwrite(E.key.start,E.key.end,e.slice(E.key.start,E.key.end).replace(/:/," =")):(E.value.start>L&&e.remove(L,E.value.start),e.prependLeft(L," = ")):e.overwrite(E.start,E.key.end+1,"["+e.slice(E.start,E.key.end)+"] = "),!E.method||!E.computed&&n.conciseMethodProperty||(E.value.generator&&e.remove(E.start,E.key.start),e.prependRight(E.value.start,"function"+(E.value.generator?"*":"")+" "))}else"SpreadElement"===E.type?m&&C>0&&(_||(_=this.properties[C-1]),e.appendLeft(_.end,", "+m+" )"),_=null,m=null):(!k&&a&&(e.prependRight(E.start,"{"),e.appendLeft(E.end,"}")),S=!0);if(k&&("SpreadElement"===E.type||E.computed)){var O=S?this.properties[this.properties.length-1].end:this.end-1;","==e.original[O]&&++O;var I=e.slice(O,b);e.prependLeft(A,I),e.remove(O,b),k=!1}var R=E.end;if(C<w-1&&!S)for(;","!==e.original[R];)R+=1;else C==w-1&&(R=this.end);e.remove(E.end,R)}s===w&&e.remove(this.properties[w-1].end,this.end-1),!g&&m&&e.appendLeft(_.end,", "+m+" )")}},e}(f),Property:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(e,n){if(t.prototype.transpile.call(this,e,n),n.conciseMethodProperty&&!this.computed&&"ObjectPattern"!==this.parent.type)if(this.shorthand)e.prependRight(this.start,this.key.name+": ");else if(this.method){var r="";!1!==this.program.options.namedFunctionExpressions&&(r=" "+(r="Literal"===this.key.type&&"number"==typeof this.key.value?"":"Identifier"===this.key.type?y[this.key.name]||!/^[a-z_$][a-z0-9_$]*$/i.test(this.key.name)||this.value.body.scope.references[this.key.name]?this.findScope(!0).createIdentifier(this.key.name):this.key.name:this.findScope(!0).createIdentifier(this.key.value))),this.value.generator&&e.remove(this.start,this.key.start),e.appendLeft(this.key.end,": function"+(this.value.generator?"*":"")+r)}n.reservedProperties&&y[this.key.name]&&(e.prependRight(this.key.start,"'"),e.appendLeft(this.key.end,"'"))},e}(f),ReturnStatement:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(t){this.loop=this.findNearest(B),this.nearestFunction=this.findNearest(/Function/),this.loop&&(!this.nearestFunction||this.loop.depth>this.nearestFunction.depth)&&(this.loop.canReturn=!0,this.shouldWrap=!0),this.argument&&this.argument.initialise(t)},e.prototype.transpile=function(t,e){var n=this.shouldWrap&&this.loop&&this.loop.shouldRewriteAsFunction;this.argument?(n&&t.prependRight(this.argument.start,"{ v: "),this.argument.transpile(t,e),n&&t.appendLeft(this.argument.end," }")):n&&t.appendLeft(this.start+6," {}")},e}(f),SpreadElement:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(e,n){"ObjectExpression"==this.parent.type&&(e.remove(this.start,this.argument.start),e.remove(this.argument.end,this.end)),t.prototype.transpile.call(this,e,n)},e}(f),Super:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(t){if(t.classes){if(this.method=this.findNearest("MethodDefinition"),!this.method)throw new x("use of super outside class method",this);var e=this.findNearest("ClassBody").parent;if(this.superClassName=e.superClass&&(e.superClass.name||"superclass"),!this.superClassName)throw new x("super used in base class",this);if(this.isCalled="CallExpression"===this.parent.type&&this===this.parent.callee,"constructor"!==this.method.kind&&this.isCalled)throw new x("super() not allowed outside class constructor",this);if(this.isMember="MemberExpression"===this.parent.type,!this.isCalled&&!this.isMember)throw new x("Unexpected use of `super` (expected `super(...)` or `super.*`)",this)}if(t.arrow){var n=this.findLexicalBoundary(),r=this.findNearest("ArrowFunctionExpression"),i=this.findNearest(B);r&&r.depth>n.depth&&(this.thisAlias=n.getThisAlias()),i&&i.body.contains(this)&&i.depth>n.depth&&(this.thisAlias=n.getThisAlias())}},e.prototype.transpile=function(t,e){if(e.classes){var n=this.isCalled||this.method.static?this.superClassName:this.superClassName+".prototype";t.overwrite(this.start,this.end,n,{storeName:!0,contentOnly:!0});var r=this.isCalled?this.parent:this.parent.parent;if(r&&"CallExpression"===r.type){this.noCall||t.appendLeft(r.callee.end,".call");var i=this.thisAlias||"this";r.arguments.length?t.appendLeft(r.arguments[0].start,i+", "):t.appendLeft(r.end-1,""+i)}}},e}(f),TaggedTemplateExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){if(e.templateString&&!e.dangerousTaggedTemplateString)throw new x("Tagged template strings are not supported. Use `transforms: { templateString: false }` to skip transformation and disable this error, or `transforms: { dangerousTaggedTemplateString: true }` if you know what you're doing",this);t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){if(n.templateString&&n.dangerousTaggedTemplateString){var r=this.quasi.expressions.concat(this.quasi.quasis).sort(function(t,e){return t.start-e.start}),i=this.program.body.scope,a=this.quasi.quasis.map(function(t){return JSON.stringify(t.value.cooked)}).join(", "),s=this.program.templateLiteralQuasis[a];s||(s=i.createIdentifier("templateObject"),e.prependRight(this.program.prependAt,"var "+s+" = Object.freeze(["+a+"]);\n"),this.program.templateLiteralQuasis[a]=s),e.overwrite(this.tag.end,r[0].start,"("+s);var o=r[0].start;r.forEach(function(t){"TemplateElement"===t.type?e.remove(o,t.end):e.overwrite(o,t.start,", "),o=t.end}),e.overwrite(o,this.end,")")}t.prototype.transpile.call(this,e,n)},e}(f),TemplateElement:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(){this.program.indentExclusionElements.push(this)},e}(f),TemplateLiteral:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.transpile=function(e,n){if(t.prototype.transpile.call(this,e,n),n.templateString&&"TaggedTemplateExpression"!==this.parent.type){var r=this.expressions.concat(this.quasis).sort(function(t,e){return t.start-e.start||t.end-e.end}).filter(function(t,e){return"TemplateElement"!==t.type||!!t.value.raw||!e});if(r.length>=3){var i=r[0],a=r[2];"TemplateElement"===i.type&&""===i.value.raw&&"TemplateElement"===a.type&&r.shift()}var s=!(1===this.quasis.length&&0===this.expressions.length||"TemplateLiteral"===this.parent.type||"AssignmentExpression"===this.parent.type||"AssignmentPattern"===this.parent.type||"VariableDeclarator"===this.parent.type||"BinaryExpression"===this.parent.type&&"+"===this.parent.operator);s&&e.appendRight(this.start,"(");var o=this.start;r.forEach(function(t,n){var r=0===n?s?"(":"":" + ";if("TemplateElement"===t.type)e.overwrite(o,t.end,r+JSON.stringify(t.value.cooked));else{var i="Identifier"!==t.type;i&&(r+="("),e.remove(o,t.start),r&&e.prependRight(t.start,r),i&&e.appendLeft(t.end,")")}o=t.end}),s&&e.appendLeft(o,")"),e.overwrite(o,this.end,"",{contentOnly:!0})}},e}(f),ThisExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(t){if(t.arrow){var e=this.findLexicalBoundary(),n=this.findNearest("ArrowFunctionExpression"),r=this.findNearest(B);(n&&n.depth>e.depth||r&&r.body.contains(this)&&r.depth>e.depth||r&&r.right&&r.right.contains(this))&&(this.alias=e.getThisAlias())}},e.prototype.transpile=function(t){this.alias&&t.overwrite(this.start,this.end,this.alias,{storeName:!0,contentOnly:!0})},e}(f),UpdateExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){if("Identifier"===this.argument.type){var n=this.findScope(!1).findDeclaration(this.argument.name),r=n&&n.node.ancestor(3);r&&"ForStatement"===r.type&&r.body.contains(this)&&(r.reassigned[this.argument.name]=!0)}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,n){"Identifier"===this.argument.type&&N(this.argument,this.findScope(!1)),t.prototype.transpile.call(this,e,n)},e}(f),VariableDeclaration:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(t){this.scope=this.findScope("var"===this.kind),this.declarations.forEach(function(e){return e.initialise(t)})},e.prototype.transpile=function(t,e){var n=this,r=this.getIndentation(),i=this.kind;if(e.letConst&&"var"!==i&&(i="var",t.overwrite(this.start,this.start+this.kind.length,i,{storeName:!0})),e.destructuring&&"ForOfStatement"!==this.parent.type&&"ForInStatement"!==this.parent.type){var a,s=this.start;this.declarations.forEach(function(i,o){if(i.transpile(t,e),"Identifier"===i.id.type)o>0&&"Identifier"!==n.declarations[o-1].id.type&&t.overwrite(s,i.id.start,"var ");else{var p=B.test(n.parent.type);0===o?t.remove(s,i.id.start):t.overwrite(s,i.id.start,";\n"+r);var u="Identifier"===i.init.type&&!i.init.rewritten,h=u?i.init.alias||i.init.name:i.findScope(!0).createIdentifier("ref");s=i.start;var c=[];u?t.remove(i.id.end,i.end):c.push(function(e,n,r){t.prependRight(i.id.end,"var "+h),t.appendLeft(i.init.end,""+r),t.move(i.id.end,i.end,e)});var l=i.findScope(!1);k(t,function(t){return l.createIdentifier(t)},function(t){var e=t.name;return l.resolveName(e)},i.id,h,p,c);var d=p?"var ":"",f=p?", ":";\n"+r;c.forEach(function(t,e){o===n.declarations.length-1&&e===c.length-1&&(f=p?"":";"),t(i.start,0===e?d:"",f)})}s=i.end,a="Identifier"!==i.id.type}),a&&this.end>s&&t.overwrite(s,this.end,"",{contentOnly:!0})}else this.declarations.forEach(function(n){n.transpile(t,e)})},e}(f),VariableDeclarator:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initialise=function(e){var n=this.parent.kind;"let"===n&&"ForStatement"===this.parent.parent.type&&(n="for.let"),this.parent.scope.addDeclaration(this.id,n),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(t,e){if(!this.init&&e.letConst&&"var"!==this.parent.kind){var n=this.findNearest(/Function|^For(In|Of)?Statement|^(?:Do)?WhileStatement/);!n||/Function/.test(n.type)||this.isLeftDeclaratorOfLoop()||t.appendLeft(this.id.end," = (void 0)")}this.id&&this.id.transpile(t,e),this.init&&this.init.transpile(t,e)},e.prototype.isLeftDeclaratorOfLoop=function(){return this.parent&&"VariableDeclaration"===this.parent.type&&this.parent.parent&&("ForInStatement"===this.parent.parent.type||"ForOfStatement"===this.parent.parent.type)&&this.parent.parent.left&&this.parent.parent.left.declarations[0]===this},e}(f),WhileStatement:q},Ct={Program:["body"],Literal:[]},Et={IfStatement:"consequent",ForStatement:"body",ForInStatement:"body",ForOfStatement:"body",WhileStatement:"body",DoWhileStatement:"body",ArrowFunctionExpression:"body"};function At(t,e,n,i){this.type="Root",this.jsx=i.jsx||"React.createElement",this.options=i,this.source=t,this.magicString=new r.a(t),this.ast=e,this.depth=0,function t(e,n){if(e)if("length"in e)for(var r=e.length;r--;)t(e[r],n);else if(!e.__wrapped){e.__wrapped=!0,Ct[e.type]||(Ct[e.type]=Object.keys(e).filter(function(t){return"object"==typeof e[t]}));var i=Et[e.type];if(i&&"BlockStatement"!==e[i].type){var a=e[i];e[i]={start:a.start,end:a.end,type:"BlockStatement",body:[a],synthetic:!0}}e.parent=n,e.program=n.program||n,e.depth=n.depth+1,e.keys=Ct[e.type],e.indentation=void 0;for(var s=0,o=Ct[e.type];s<o.length;s+=1){var p=o[s];t(e[p],e)}e.program.magicString.addSourcemapLocation(e.start),e.program.magicString.addSourcemapLocation(e.end);var u=("BlockStatement"===e.type?P:kt[e.type])||f;e.__proto__=u.prototype}}(this.body=e,this),this.body.__proto__=P.prototype,this.templateLiteralQuasis=Object.create(null);for(var a=0;a<this.body.body.length;++a)if(!this.body.body[a].directive){this.prependAt=this.body.body[a].start;break}this.objectWithoutPropertiesHelper=null,this.indentExclusionElements=[],this.body.initialise(n),this.indentExclusions=Object.create(null);for(var s=0,o=this.indentExclusionElements;s<o.length;s+=1)for(var p=o[s],u=p.start;u<p.end;u+=1)this.indentExclusions[u]=!0;this.body.transpile(this.magicString,n)}At.prototype={export:function(t){return void 0===t&&(t={}),{code:this.magicString.toString(),map:this.magicString.generateMap({file:t.file,source:t.source,includeContent:!1!==t.includeContent})}},findNearest:function(){return null},findScope:function(){return null},getObjectWithoutPropertiesHelper:function(t){return this.objectWithoutPropertiesHelper||(this.objectWithoutPropertiesHelper=this.body.scope.createIdentifier("objectWithoutProperties"),t.prependLeft(this.prependAt,"function "+this.objectWithoutPropertiesHelper+" (obj, exclude) { var target = {}; for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k) && exclude.indexOf(k) === -1) target[k] = obj[k]; return target; }\n")),this.objectWithoutPropertiesHelper}};var Pt={chrome:{48:305357,49:326143,50:391679,51:391679,52:522751,53:522751,54:522751,55:522751,56:522751,57:522751,58:1047039,59:1047039,60:1047039,61:1047039,62:1047039,63:1047039},firefox:{43:325853,44:326109,45:326111,46:391647,47:391679,48:391679,49:387583,50:387583,51:387583,52:1047039,53:1047039,54:1047039,55:1047039,56:1047039,57:1047039,58:1047039},safari:{8:262148,9:301166,10:915967,10.1:1047039,11:1047039},ie:{8:0,9:262144,10:262144,11:262400},edge:{12:305485,13:387535,14:1042943,15:1042943,16:1042943},node:{"0.10":262144,.12:262208,4:297167,5:297167,6:391679,8:1047039,8.3:1047039,8.7:1047039}},Tt=["arrow","classes","computedProperty","conciseMethodProperty","defaultParameter","destructuring","forOf","generator","letConst","moduleExport","moduleImport","numericLiteral","parameterDestructuring","spreadRest","stickyRegExp","templateString","unicodeRegExp","exponentiation","reservedProperties","trailingFunctionCommas"],Lt=[function(t){var e=t.tokTypes,n=t.tokContexts;n.j_oTag=new t.TokContext("<tag",!1),n.j_cTag=new t.TokContext("</tag",!1),n.j_expr=new t.TokContext("<tag>...</tag>",!0,!0),e.jsxName=new t.TokenType("jsxName"),e.jsxText=new t.TokenType("jsxText",{beforeExpr:!0}),e.jsxTagStart=new t.TokenType("jsxTagStart"),e.jsxTagEnd=new t.TokenType("jsxTagEnd"),e.jsxTagStart.updateContext=function(){this.context.push(n.j_expr),this.context.push(n.j_oTag),this.exprAllowed=!1},e.jsxTagEnd.updateContext=function(t){var r=this.context.pop();r===n.j_oTag&&t===e.slash||r===n.j_cTag?(this.context.pop(),this.exprAllowed=this.curContext()===n.j_expr):this.exprAllowed=!0};var r=t.Parser.prototype;function i(t){return t?"JSXIdentifier"===t.type?t.name:"JSXNamespacedName"===t.type?t.namespace.name+":"+t.name.name:"JSXMemberExpression"===t.type?i(t.object)+"."+i(t.property):void 0:t}return r.jsx_readToken=function(){for(var n="",r=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");var i=this.input.charCodeAt(this.pos);switch(i){case 60:case 123:return this.pos===this.start?60===i&&this.exprAllowed?(++this.pos,this.finishToken(e.jsxTagStart)):this.getTokenFromCode(i):(n+=this.input.slice(r,this.pos),this.finishToken(e.jsxText,n));case 38:n+=this.input.slice(r,this.pos),n+=this.jsx_readEntity(),r=this.pos;break;default:t.isNewLine(i)?(n+=this.input.slice(r,this.pos),n+=this.jsx_readNewLine(!0),r=this.pos):++this.pos}}},r.jsx_readNewLine=function(t){var e,n=this.input.charCodeAt(this.pos);return++this.pos,13===n&&10===this.input.charCodeAt(this.pos)?(++this.pos,e=t?"\n":"\r\n"):e=String.fromCharCode(n),this.options.locations&&(++this.curLine,this.lineStart=this.pos),e},r.jsx_readString=function(n){for(var r="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var a=this.input.charCodeAt(this.pos);if(a===n)break;38===a?(r+=this.input.slice(i,this.pos),r+=this.jsx_readEntity(),i=this.pos):t.isNewLine(a)?(r+=this.input.slice(i,this.pos),r+=this.jsx_readNewLine(!1),i=this.pos):++this.pos}return r+=this.input.slice(i,this.pos++),this.finishToken(e.string,r)},r.jsx_readEntity=function(){var t,e="",n=0,r=this.input[this.pos];"&"!==r&&this.raise(this.pos,"Entity must start with an ampersand");for(var i=++this.pos;this.pos<this.input.length&&n++<10;){if(";"===(r=this.input[this.pos++])){"#"===e[0]?"x"===e[1]?(e=e.substr(2),s.test(e)&&(t=String.fromCharCode(parseInt(e,16)))):(e=e.substr(1),o.test(e)&&(t=String.fromCharCode(parseInt(e,10)))):t=a[e];break}e+=r}return t||(this.pos=i,"&")},r.jsx_readWord=function(){var n,r=this.pos;do{n=this.input.charCodeAt(++this.pos)}while(t.isIdentifierChar(n)||45===n);return this.finishToken(e.jsxName,this.input.slice(r,this.pos))},r.jsx_parseIdentifier=function(){var t=this.startNode();return this.type===e.jsxName?t.name=this.value:this.type.keyword?t.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(t,"JSXIdentifier")},r.jsx_parseNamespacedName=function(){var t=this.start,n=this.startLoc,r=this.jsx_parseIdentifier();if(!this.options.plugins.jsx.allowNamespaces||!this.eat(e.colon))return r;var i=this.startNodeAt(t,n);return i.namespace=r,i.name=this.jsx_parseIdentifier(),this.finishNode(i,"JSXNamespacedName")},r.jsx_parseElementName=function(){if(this.type===e.jsxTagEnd)return"";var t=this.start,n=this.startLoc,r=this.jsx_parseNamespacedName();for(this.type!==e.dot||"JSXNamespacedName"!==r.type||this.options.plugins.jsx.allowNamespacedObjects||this.unexpected();this.eat(e.dot);){var i=this.startNodeAt(t,n);i.object=r,i.property=this.jsx_parseIdentifier(),r=this.finishNode(i,"JSXMemberExpression")}return r},r.jsx_parseAttributeValue=function(){switch(this.type){case e.braceL:var t=this.jsx_parseExpressionContainer();return"JSXEmptyExpression"===t.expression.type&&this.raise(t.start,"JSX attributes must only be assigned a non-empty expression"),t;case e.jsxTagStart:case e.string:return this.parseExprAtom();default:this.raise(this.start,"JSX value should be either an expression or a quoted JSX text")}},r.jsx_parseEmptyExpression=function(){var t=this.startNodeAt(this.lastTokEnd,this.lastTokEndLoc);return this.finishNodeAt(t,"JSXEmptyExpression",this.start,this.startLoc)},r.jsx_parseExpressionContainer=function(){var t=this.startNode();return this.next(),t.expression=this.type===e.braceR?this.jsx_parseEmptyExpression():this.parseExpression(),this.expect(e.braceR),this.finishNode(t,"JSXExpressionContainer")},r.jsx_parseAttribute=function(){var t=this.startNode();return this.eat(e.braceL)?(this.expect(e.ellipsis),t.argument=this.parseMaybeAssign(),this.expect(e.braceR),this.finishNode(t,"JSXSpreadAttribute")):(t.name=this.jsx_parseNamespacedName(),t.value=this.eat(e.eq)?this.jsx_parseAttributeValue():null,this.finishNode(t,"JSXAttribute"))},r.jsx_parseOpeningElementAt=function(t,n){var r=this.startNodeAt(t,n);r.attributes=[];var i=this.jsx_parseElementName();for(i&&(r.name=i);this.type!==e.slash&&this.type!==e.jsxTagEnd;)r.attributes.push(this.jsx_parseAttribute());return r.selfClosing=this.eat(e.slash),this.expect(e.jsxTagEnd),this.finishNode(r,i?"JSXOpeningElement":"JSXOpeningFragment")},r.jsx_parseClosingElementAt=function(t,n){var r=this.startNodeAt(t,n),i=this.jsx_parseElementName();return i&&(r.name=i),this.expect(e.jsxTagEnd),this.finishNode(r,i?"JSXClosingElement":"JSXClosingFragment")},r.jsx_parseElementAt=function(t,n){var r=this.startNodeAt(t,n),a=[],s=this.jsx_parseOpeningElementAt(t,n),o=null;if(!s.selfClosing){t:for(;;)switch(this.type){case e.jsxTagStart:if(t=this.start,n=this.startLoc,this.next(),this.eat(e.slash)){o=this.jsx_parseClosingElementAt(t,n);break t}a.push(this.jsx_parseElementAt(t,n));break;case e.jsxText:a.push(this.parseExprAtom());break;case e.braceL:a.push(this.jsx_parseExpressionContainer());break;default:this.unexpected()}i(o.name)!==i(s.name)&&this.raise(o.start,"Expected corresponding JSX closing tag for <"+i(s.name)+">")}return r.openingElement=s,r.closingElement=o,r.children=a,this.type===e.relational&&"<"===this.value&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),this.finishNode(r,s.name?"JSXElement":"JSXFragment")},r.jsx_parseText=function(t){var e=this.parseLiteral(t);return e.type="JSXText",e},r.jsx_parseElement=function(){var t=this.start,e=this.startLoc;return this.next(),this.jsx_parseElementAt(t,e)},t.plugins.jsx=function(r,i){i&&("object"!=typeof i&&(i={}),r.options.plugins.jsx={allowNamespaces:!1!==i.allowNamespaces,allowNamespacedObjects:!!i.allowNamespacedObjects},r.extend("parseExprAtom",function(t){return function(n){return this.type===e.jsxText?this.jsx_parseText(this.value):this.type===e.jsxTagStart?this.jsx_parseElement():t.call(this,n)}}),r.extend("readToken",function(r){return function(i){var a=this.curContext();if(a===n.j_expr)return this.jsx_readToken();if(a===n.j_oTag||a===n.j_cTag){if(t.isIdentifierStart(i))return this.jsx_readWord();if(62==i)return++this.pos,this.finishToken(e.jsxTagEnd);if((34===i||39===i)&&a==n.j_oTag)return this.jsx_readString(i)}return 60===i&&this.exprAllowed&&33!==this.input.charCodeAt(this.pos+1)?(++this.pos,this.finishToken(e.jsxTagStart)):r.call(this,i)}}),r.extend("updateContext",function(t){return function(r){if(this.type==e.braceL){var i=this.curContext();i==n.j_oTag?this.context.push(n.b_expr):i==n.j_expr?this.context.push(n.b_tmpl):t.call(this,r),this.exprAllowed=!0}else{if(this.type!==e.slash||r!==e.jsxTagStart)return t.call(this,r);this.context.length-=2,this.context.push(n.j_cTag),this.exprAllowed=!1}}}))},t},l].reduce(function(t,e){return e(t)},i).parse,Ot=["dangerousTaggedTemplateString","dangerousForOf"];function It(t,e){var n;void 0===e&&(e={});var r=null;try{n=Lt(t,{ecmaVersion:9,preserveParens:!0,sourceType:"module",onComment:function(t,e){if(!r){var n=/@jsx\s+([^\s]+)/.exec(e);n&&(r=n[1])}},plugins:{jsx:!0,dynamicImport:!0}}),e.jsx=r||e.jsx}catch(e){throw e.snippet=_(t,e.loc),e.toString=function(){return e.name+": "+e.message+"\n"+e.snippet},e}var i=function(t){var e=Object.keys(t).length?1048575:262144;Object.keys(t).forEach(function(n){var r=Pt[n];if(!r)throw new Error("Unknown environment '"+n+"'. Please raise an issue at https://github.com/Rich-Harris/buble/issues");var i=t[n];if(!(i in r))throw new Error("Support data exists for the following versions of "+n+": "+Object.keys(r).join(", ")+". Please raise an issue at https://github.com/Rich-Harris/buble/issues");var a=r[i];e&=a});var n=Object.create(null);return Tt.forEach(function(t,r){n[t]=!(e&1<<r)}),Ot.forEach(function(t){n[t]=!1}),n}(e.target||{});return Object.keys(e.transforms||{}).forEach(function(t){if("modules"===t)return"moduleImport"in e.transforms||(i.moduleImport=e.transforms.modules),void("moduleExport"in e.transforms||(i.moduleExport=e.transforms.modules));if(!(t in i))throw new Error("Unknown transform '"+t+"'");i[t]=e.transforms[t]}),new At(t,n,i,e).export(e)}}).call(this,n(150))},422:function(t,e,n){"use strict";(function(t,r){var i=n(428);function a(t,e,n){this.start=t,this.end=e,this.original=n,this.intro="",this.outro="",this.content=n,this.storeName=!1,this.edited=!1,Object.defineProperties(this,{previous:{writable:!0,value:null},next:{writable:!0,value:null}})}a.prototype={appendLeft:function(t){this.outro+=t},appendRight:function(t){this.intro=this.intro+t},clone:function(){var t=new a(this.start,this.end,this.original);return t.intro=this.intro,t.outro=this.outro,t.content=this.content,t.storeName=this.storeName,t.edited=this.edited,t},contains:function(t){return this.start<t&&t<this.end},eachNext:function(t){for(var e=this;e;)t(e),e=e.next},eachPrevious:function(t){for(var e=this;e;)t(e),e=e.previous},edit:function(t,e,n){return this.content=t,n||(this.intro="",this.outro=""),this.storeName=e,this.edited=!0,this},prependLeft:function(t){this.outro=t+this.outro},prependRight:function(t){this.intro=t+this.intro},split:function(t){var e=t-this.start,n=this.original.slice(0,e),r=this.original.slice(e);this.original=n;var i=new a(t,this.end,r);return i.outro=this.outro,this.outro="",this.end=t,this.edited?(i.edit("",!1),this.content=""):this.content=n,i.next=this.next,i.next&&(i.next.previous=i),i.previous=this,this.next=i,i},toString:function(){return this.intro+this.content+this.outro},trimEnd:function(t){if(this.outro=this.outro.replace(t,""),this.outro.length)return!0;var e=this.content.replace(t,"");return e.length?(e!==this.content&&this.split(this.start+e.length).edit("",!1),!0):(this.edit("",!1),this.intro=this.intro.replace(t,""),!!this.intro.length||void 0)},trimStart:function(t){if(this.intro=this.intro.replace(t,""),this.intro.length)return!0;var e=this.content.replace(t,"");return e.length?(e!==this.content&&(this.split(this.end-e.length),this.edit("",!1)),!0):(this.edit("",!1),this.outro=this.outro.replace(t,""),!!this.outro.length||void 0)}};var s="undefined"!=typeof window&&"function"==typeof window.btoa?window.btoa:"function"==typeof t?function(e){return new t(e).toString("base64")}:function(){throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")};function o(t){this.version=3,this.file=t.file,this.sources=t.sources,this.sourcesContent=t.sourcesContent,this.names=t.names,this.mappings=t.mappings}function p(t,e){var n=t.split(/[\/\\]/),r=e.split(/[\/\\]/);for(n.pop();n[0]===r[0];)n.shift(),r.shift();if(n.length)for(var i=n.length;i--;)n[i]="..";return n.concat(r).join("/")}o.prototype={toString:function(){return JSON.stringify(this)},toUrl:function(){return"data:application/json;charset=utf-8;base64,"+s(this.toString())}};var u=Object.prototype.toString;function h(t){return"[object Object]"===u.call(t)}function c(t){var e=0,n=t.split("\n").map(function(t,n){var r=e+t.length+1,i={start:e,end:r,line:n};return e=r,i}),r=0;function i(t,e){return t.start<=e&&e<t.end}function a(t,e){return{line:t.line,column:e-t.start}}return function(t){for(var e=n[r],s=t>=e.end?1:-1;e;){if(i(e,t))return a(e,t);e=n[r+=s]}}}function l(t){var e=this,n={generatedCodeColumn:0,sourceIndex:0,sourceCodeLine:0,sourceCodeColumn:0,sourceCodeName:0},r=0,a=0;this.raw=[];var s=this.raw[r]=[],o=null;this.addEdit=function(t,n,r,i,p){n.length?s.push([a,t,i.line,i.column,p]):o&&s.push(o),e.advance(n),o=null},this.addUneditedChunk=function(n,i,p,u,h){for(var c=i.start,l=!0;c<i.end;)(t||l||h[c])&&s.push([a,n,u.line,u.column,-1]),"\n"===p[c]?(u.line+=1,u.column=0,r+=1,e.raw[r]=s=[],a=0):(u.column+=1,a+=1),c+=1,l=!1;o=[a,n,u.line,u.column,-1]},this.advance=function(t){if(t){var n=t.split("\n"),i=n.pop();n.length?(r+=n.length,e.raw[r]=s=[],a=i.length):a+=i.length}},this.encode=function(){return e.raw.map(function(t){var e=0;return t.map(function(t){var r=[t[0]-e,t[1]-n.sourceIndex,t[2]-n.sourceCodeLine,t[3]-n.sourceCodeColumn];return e=t[0],n.sourceIndex=t[1],n.sourceCodeLine=t[2],n.sourceCodeColumn=t[3],~t[4]&&(r.push(t[4]-n.sourceCodeName),n.sourceCodeName=t[4]),Object(i.a)(r)}).join(",")}).join(";")}}var d=function(){Object.defineProperties(this,{startTimes:{value:{}}})};d.prototype.time=function(t){this.startTimes[t]=r.hrtime()},d.prototype.timeEnd=function(t){var e=r.hrtime(this.startTimes[t]);this[t]||(this[t]=0),this[t]+=1e3*e[0]+1e-6*e[1]};var f={insertLeft:!1,insertRight:!1,storeName:!1};function g(t,e){void 0===e&&(e={});var n=new a(0,t.length,t);Object.defineProperties(this,{original:{writable:!0,value:t},outro:{writable:!0,value:""},intro:{writable:!0,value:""},firstChunk:{writable:!0,value:n},lastChunk:{writable:!0,value:n},lastSearchedChunk:{writable:!0,value:n},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:e.filename},indentExclusionRanges:{writable:!0,value:e.indentExclusionRanges},sourcemapLocations:{writable:!0,value:{}},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:function(t){var e=t.split("\n"),n=e.filter(function(t){return/^\t+/.test(t)}),r=e.filter(function(t){return/^ {2,}/.test(t)});if(0===n.length&&0===r.length)return null;if(n.length>=r.length)return"\t";var i=r.reduce(function(t,e){var n=/^ +/.exec(e)[0].length;return Math.min(n,t)},1/0);return new Array(i+1).join(" ")}(t)}}),this.byStart[0]=n,this.byEnd[t.length]=n}g.prototype={addSourcemapLocation:function(t){this.sourcemapLocations[t]=!0},append:function(t){if("string"!=typeof t)throw new TypeError("outro content must be a string");return this.outro+=t,this},appendLeft:function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var n=this.byEnd[t];return n?n.appendLeft(e):this.intro+=e,this},appendRight:function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var n=this.byStart[t];return n?n.appendRight(e):this.outro+=e,this},clone:function(){for(var t=new g(this.original,{filename:this.filename}),e=this.firstChunk,n=t.firstChunk=t.lastSearchedChunk=e.clone();e;){t.byStart[n.start]=n,t.byEnd[n.end]=n;var r=e.next,i=r&&r.clone();i&&(n.next=i,i.previous=n,n=i),e=r}return t.lastChunk=n,this.indentExclusionRanges&&(t.indentExclusionRanges=this.indentExclusionRanges.slice()),Object.keys(this.sourcemapLocations).forEach(function(e){t.sourcemapLocations[e]=!0}),t},generateMap:function(t){var e=this;t=t||{};var n=Object.keys(this.storedNames),r=new l(t.hires),i=c(this.original);return this.intro&&r.advance(this.intro),this.firstChunk.eachNext(function(t){var a=i(t.start);t.intro.length&&r.advance(t.intro),t.edited?r.addEdit(0,t.content,t.original,a,t.storeName?n.indexOf(t.original):-1):r.addUneditedChunk(0,t,e.original,a,e.sourcemapLocations),t.outro.length&&r.advance(t.outro)}),new o({file:t.file?t.file.split(/[\/\\]/).pop():null,sources:[t.source?p(t.file||"",t.source):null],sourcesContent:t.includeContent?[this.original]:[null],names:n,mappings:r.encode()})},getIndentString:function(){return null===this.indentStr?"\t":this.indentStr},indent:function(t,e){var n=/^[^\r\n]/gm;if(h(t)&&(e=t,t=void 0),""===(t=void 0!==t?t:this.indentStr||"\t"))return this;var r={};(e=e||{}).exclude&&("number"==typeof e.exclude[0]?[e.exclude]:e.exclude).forEach(function(t){for(var e=t[0];e<t[1];e+=1)r[e]=!0});var i=!1!==e.indentStart,a=function(e){return i?""+t+e:(i=!0,e)};this.intro=this.intro.replace(n,a);for(var s=0,o=this.firstChunk;o;){var p=o.end;if(o.edited)r[s]||(o.content=o.content.replace(n,a),o.content.length&&(i="\n"===o.content[o.content.length-1]));else for(s=o.start;s<p;){if(!r[s]){var u=this.original[s];"\n"===u?i=!0:"\r"!==u&&i&&(i=!1,s===o.start?o.prependRight(t):(this._splitChunk(o,s),(o=o.next).prependRight(t)))}s+=1}s=o.end,o=o.next}return this.outro=this.outro.replace(n,a),this},insert:function(){throw new Error("magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)")},insertLeft:function(t,e){return f.insertLeft||(console.warn("magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead"),f.insertLeft=!0),this.appendLeft(t,e)},insertRight:function(t,e){return f.insertRight||(console.warn("magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead"),f.insertRight=!0),this.prependRight(t,e)},move:function(t,e,n){if(n>=t&&n<=e)throw new Error("Cannot move a selection inside itself");this._split(t),this._split(e),this._split(n);var r=this.byStart[t],i=this.byEnd[e],a=r.previous,s=i.next,o=this.byStart[n];if(!o&&i===this.lastChunk)return this;var p=o?o.previous:this.lastChunk;return a&&(a.next=s),s&&(s.previous=a),p&&(p.next=r),o&&(o.previous=i),r.previous||(this.firstChunk=i.next),i.next||(this.lastChunk=r.previous,this.lastChunk.next=null),r.previous=p,i.next=o||null,p||(this.firstChunk=r),o||(this.lastChunk=i),this},overwrite:function(t,e,n,r){if("string"!=typeof n)throw new TypeError("replacement content must be a string");for(;t<0;)t+=this.original.length;for(;e<0;)e+=this.original.length;if(e>this.original.length)throw new Error("end is out of bounds");if(t===e)throw new Error("Cannot overwrite a zero-length range – use appendLeft or prependRight instead");this._split(t),this._split(e),!0===r&&(f.storeName||(console.warn("The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string"),f.storeName=!0),r={storeName:!0});var i=void 0!==r&&r.storeName,s=void 0!==r&&r.contentOnly;if(i){var o=this.original.slice(t,e);this.storedNames[o]=!0}var p=this.byStart[t],u=this.byEnd[e];if(p){if(e>p.end&&p.next!==this.byStart[p.end])throw new Error("Cannot overwrite across a split point");if(p.edit(n,i,s),p!==u){for(var h=p.next;h!==u;)h.edit("",!1),h=h.next;h.edit("",!1)}}else{var c=new a(t,e,"").edit(n,i);u.next=c,c.previous=u}return this},prepend:function(t){if("string"!=typeof t)throw new TypeError("outro content must be a string");return this.intro=t+this.intro,this},prependLeft:function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var n=this.byEnd[t];return n?n.prependLeft(e):this.intro=e+this.intro,this},prependRight:function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var n=this.byStart[t];return n?n.prependRight(e):this.outro=e+this.outro,this},remove:function(t,e){for(;t<0;)t+=this.original.length;for(;e<0;)e+=this.original.length;if(t===e)return this;if(t<0||e>this.original.length)throw new Error("Character is out of bounds");if(t>e)throw new Error("end must be greater than start");this._split(t),this._split(e);for(var n=this.byStart[t];n;)n.intro="",n.outro="",n.edit(""),n=e>n.end?this.byStart[n.end]:null;return this},slice:function(t,e){for(void 0===t&&(t=0),void 0===e&&(e=this.original.length);t<0;)t+=this.original.length;for(;e<0;)e+=this.original.length;for(var n="",r=this.firstChunk;r&&(r.start>t||r.end<=t);){if(r.start<e&&r.end>=e)return n;r=r.next}if(r&&r.edited&&r.start!==t)throw new Error("Cannot use replaced character "+t+" as slice start anchor.");for(var i=r;r;){!r.intro||i===r&&r.start!==t||(n+=r.intro);var a=r.start<e&&r.end>=e;if(a&&r.edited&&r.end!==e)throw new Error("Cannot use replaced character "+e+" as slice end anchor.");var s=i===r?t-r.start:0,o=a?r.content.length+e-r.end:r.content.length;if(n+=r.content.slice(s,o),!r.outro||a&&r.end!==e||(n+=r.outro),a)break;r=r.next}return n},snip:function(t,e){var n=this.clone();return n.remove(0,t),n.remove(e,n.original.length),n},_split:function(t){if(!this.byStart[t]&&!this.byEnd[t])for(var e=this.lastSearchedChunk,n=t>e.end;;){if(e.contains(t))return this._splitChunk(e,t);e=n?this.byStart[e.end]:this.byEnd[e.start]}},_splitChunk:function(t,e){if(t.edited&&t.content.length){var n=c(this.original)(e);throw new Error("Cannot split a chunk that has already been edited ("+n.line+":"+n.column+' – "'+t.original+'")')}var r=t.split(e);return this.byEnd[e]=t,this.byStart[e]=r,this.byEnd[r.end]=r,t===this.lastChunk&&(this.lastChunk=r),this.lastSearchedChunk=t,!0},toString:function(){for(var t=this.intro,e=this.firstChunk;e;)t+=e.toString(),e=e.next;return t+this.outro},trimLines:function(){return this.trim("[\\r\\n]")},trim:function(t){return this.trimStart(t).trimEnd(t)},trimEnd:function(t){var e=new RegExp((t||"\\s")+"+$");if(this.outro=this.outro.replace(e,""),this.outro.length)return this;var n=this.lastChunk;do{var r=n.end,i=n.trimEnd(e);if(n.end!==r&&(this.lastChunk===n&&(this.lastChunk=n.next),this.byEnd[n.end]=n,this.byStart[n.next.start]=n.next,this.byEnd[n.next.end]=n.next),i)return this;n=n.previous}while(n);return this},trimStart:function(t){var e=new RegExp("^"+(t||"\\s")+"+");if(this.intro=this.intro.replace(e,""),this.intro.length)return this;var n=this.firstChunk;do{var r=n.end,i=n.trimStart(e);if(n.end!==r&&(n===this.lastChunk&&(this.lastChunk=n.next),this.byEnd[n.end]=n,this.byStart[n.next.start]=n.next,this.byEnd[n.next.end]=n.next),i)return this;n=n.next}while(n);return this}};var m=Object.prototype.hasOwnProperty;function y(t){void 0===t&&(t={}),this.intro=t.intro||"",this.separator=void 0!==t.separator?t.separator:"\n",this.sources=[],this.uniqueSources=[],this.uniqueSourceIndexByFilename={}}y.prototype={addSource:function(t){if(t instanceof g)return this.addSource({content:t,filename:t.filename,separator:this.separator});if(!h(t)||!t.content)throw new Error("bundle.addSource() takes an object with a `content` property, which should be an instance of MagicString, and an optional `filename`");if(["filename","indentExclusionRanges","separator"].forEach(function(e){m.call(t,e)||(t[e]=t.content[e])}),void 0===t.separator&&(t.separator=this.separator),t.filename)if(m.call(this.uniqueSourceIndexByFilename,t.filename)){var e=this.uniqueSources[this.uniqueSourceIndexByFilename[t.filename]];if(t.content.original!==e.content)throw new Error("Illegal source: same filename ("+t.filename+"), different contents")}else this.uniqueSourceIndexByFilename[t.filename]=this.uniqueSources.length,this.uniqueSources.push({filename:t.filename,content:t.content.original});return this.sources.push(t),this},append:function(t,e){return this.addSource({content:new g(t),separator:e&&e.separator||""}),this},clone:function(){var t=new y({intro:this.intro,separator:this.separator});return this.sources.forEach(function(e){t.addSource({filename:e.filename,content:e.content.clone(),separator:e.separator})}),t},generateMap:function(t){var e=this;void 0===t&&(t={});var n=[];this.sources.forEach(function(t){Object.keys(t.content.storedNames).forEach(function(t){~n.indexOf(t)||n.push(t)})});var r=new l(t.hires);return this.intro&&r.advance(this.intro),this.sources.forEach(function(t,i){i>0&&r.advance(e.separator);var a=t.filename?e.uniqueSourceIndexByFilename[t.filename]:-1,s=t.content,o=c(s.original);s.intro&&r.advance(s.intro),s.firstChunk.eachNext(function(e){var i=o(e.start);e.intro.length&&r.advance(e.intro),t.filename?e.edited?r.addEdit(a,e.content,e.original,i,e.storeName?n.indexOf(e.original):-1):r.addUneditedChunk(a,e,s.original,i,s.sourcemapLocations):r.advance(e.content),e.outro.length&&r.advance(e.outro)}),s.outro&&r.advance(s.outro)}),new o({file:t.file?t.file.split(/[\/\\]/).pop():null,sources:this.uniqueSources.map(function(e){return t.file?p(t.file,e.filename):e.filename}),sourcesContent:this.uniqueSources.map(function(e){return t.includeContent?e.content:null}),names:n,mappings:r.encode()})},getIndentString:function(){var t={};return this.sources.forEach(function(e){var n=e.content.indentStr;null!==n&&(t[n]||(t[n]=0),t[n]+=1)}),Object.keys(t).sort(function(e,n){return t[e]-t[n]})[0]||"\t"},indent:function(t){var e=this;if(arguments.length||(t=this.getIndentString()),""===t)return this;var n=!this.intro||"\n"===this.intro.slice(-1);return this.sources.forEach(function(r,i){var a=void 0!==r.separator?r.separator:e.separator,s=n||i>0&&/\r?\n$/.test(a);r.content.indent(t,{exclude:r.indentExclusionRanges,indentStart:s}),n="\n"===r.content.toString().slice(0,-1)}),this.intro&&(this.intro=t+this.intro.replace(/^[^\n]/gm,function(e,n){return n>0?t+e:e})),this},prepend:function(t){return this.intro=t+this.intro,this},toString:function(){var t=this,e=this.sources.map(function(e,n){var r=void 0!==e.separator?e.separator:t.separator;return(n>0?r:"")+e.content.toString()}).join("");return this.intro+e},trimLines:function(){return this.trim("[\\r\\n]")},trim:function(t){return this.trimStart(t).trimEnd(t)},trimStart:function(t){var e=new RegExp("^"+(t||"\\s")+"+");if(this.intro=this.intro.replace(e,""),!this.intro){var n,r=0;do{if(!(n=this.sources[r]))break;n.content.trimStart(t),r+=1}while(""===n.content.toString())}return this},trimEnd:function(t){var e,n=new RegExp((t||"\\s")+"+$"),r=this.sources.length-1;do{if(!(e=this.sources[r])){this.intro=this.intro.replace(n,"");break}e.content.trimEnd(t),r-=1}while(""===e.content.toString());return this}},e.a=g}).call(this,n(423).Buffer,n(427))},423:function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(424),i=n(425),a=n(426);function s(){return p.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return p.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=p.prototype:(null===t&&(t=new p(e)),t.length=e),t}function p(t,e,n){if(!(p.TYPED_ARRAY_SUPPORT||this instanceof p))return new p(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),p.TYPED_ARRAY_SUPPORT?(t=e).__proto__=p.prototype:t=l(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!p.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(e,n),i=(t=o(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(p.isBuffer(e)){var n=0|d(e.length);return 0===(t=o(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?o(t,0):l(t,e);if("Buffer"===e.type&&a(e.data))return l(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(h(e),t=o(t,e<0?0:0|d(e)),!p.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function l(t,e){var n=e.length<0?0:0|d(e.length);t=o(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function f(t,e){if(p.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=p.from(e,r)),p.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return e&=255,p.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var a,s=1,o=t.length,p=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,o/=2,p/=2,n/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(a=n;a<o;a++)if(u(t,a)===u(e,-1===h?0:a-h)){if(-1===h&&(h=a),a-h+1===p)return h*s}else-1!==h&&(a-=a-h),h=-1}else for(n+p>o&&(n=o-p),a=n;a>=0;a--){for(var c=!0,l=0;l<p;l++)if(u(t,a+l)!==u(e,l)){c=!1;break}if(c)return a}return-1}function v(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var s=0;s<r;++s){var o=parseInt(e.substr(2*s,2),16);if(isNaN(o))return s;t[n+s]=o}return s}function b(t,e,n,r){return H(U(e,t.length-n),t,n,r)}function _(t,e,n,r){return H(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return _(t,e,n,r)}function w(t,e,n,r){return H(V(e),t,n,r)}function S(t,e,n,r){return H(function(t,e){for(var n,r,i,a=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i=n%256,a.push(i),a.push(r);return a}(e,t.length-n),t,n,r)}function k(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function C(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,s,o,p,u=t[i],h=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c<=n)switch(c){case 1:u<128&&(h=u);break;case 2:128==(192&(a=t[i+1]))&&(p=(31&u)<<6|63&a)>127&&(h=p);break;case 3:a=t[i+1],s=t[i+2],128==(192&a)&&128==(192&s)&&(p=(15&u)<<12|(63&a)<<6|63&s)>2047&&(p<55296||p>57343)&&(h=p);break;case 4:a=t[i+1],s=t[i+2],o=t[i+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&(p=(15&u)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&p<1114112&&(h=p)}null===h?(h=65533,c=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=c}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=E));return n}(r)}e.Buffer=p,e.SlowBuffer=function(t){return+t!=t&&(t=0),p.alloc(+t)},e.INSPECT_MAX_BYTES=50,p.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),p.poolSize=8192,p._augment=function(t){return t.__proto__=p.prototype,t},p.from=function(t,e,n){return u(null,t,e,n)},p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0})),p.alloc=function(t,e,n){return function(t,e,n,r){return h(e),e<=0?o(t,e):void 0!==n?"string"==typeof r?o(t,e).fill(n,r):o(t,e).fill(n):o(t,e)}(null,t,e,n)},p.allocUnsafe=function(t){return c(null,t)},p.allocUnsafeSlow=function(t){return c(null,t)},p.isBuffer=function(t){return!(null==t||!t._isBuffer)},p.compare=function(t,e){if(!p.isBuffer(t)||!p.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},p.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return p.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=p.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!p.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},p.byteLength=f,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},p.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},p.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},p.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return k(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},p.prototype.equals=function(t){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===p.compare(this,t)},p.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},p.prototype.compare=function(t,e,n,r,i){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var a=i-r,s=n-e,o=Math.min(a,s),u=this.slice(r,i),h=t.slice(e,n),c=0;c<o;++c)if(u[c]!==h[c]){a=u[c],s=h[c];break}return a<s?-1:s<a?1:0},p.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},p.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},p.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},p.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function T(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=F(t[a]);return i}function L(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function O(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,n,r,i,a){if(!p.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function R(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function j(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(t,e,n,r,a){return a||j(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function B(t,e,n,r,a){return a||j(t,0,n,8),i.write(t,e,n,r,52,8),n+8}p.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),p.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=p.prototype;else{var i=e-t;n=new p(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},p.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},p.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},p.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},p.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},p.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},p.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},p.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},p.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},p.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},p.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},p.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},p.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},p.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!0,23,4)},p.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!1,23,4)},p.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!0,52,8)},p.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!1,52,8)},p.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||I(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},p.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||I(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},p.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,255,0),p.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},p.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},p.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},p.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},p.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},p.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var a=0,s=1,o=0;for(this[e]=255&t;++a<n&&(s*=256);)t<0&&0===o&&0!==this[e+a-1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+n},p.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var a=n-1,s=1,o=0;for(this[e+a]=255&t;--a>=0&&(s*=256);)t<0&&0===o&&0!==this[e+a+1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+n},p.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,127,-128),p.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},p.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},p.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},p.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},p.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},p.prototype.writeFloatLE=function(t,e,n){return M(this,t,e,!0,n)},p.prototype.writeFloatBE=function(t,e,n){return M(this,t,e,!1,n)},p.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},p.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},p.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!p.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},p.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!p.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var s=p.isBuffer(t)?t:U(new p(t,r).toString()),o=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%o]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function F(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function V(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(150))},424:function(t,e,n){"use strict";e.byteLength=function(t){return 3*t.length/4-u(t)},e.toByteArray=function(t){var e,n,r,s,o,p=t.length;s=u(t),o=new a(3*p/4-s),n=s>0?p-4:p;var h=0;for(e=0;e<n;e+=4)r=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)],o[h++]=r>>16&255,o[h++]=r>>8&255,o[h++]=255&r;return 2===s?(r=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4,o[h++]=255&r):1===s&&(r=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2,o[h++]=r>>8&255,o[h++]=255&r),o},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a="",s=[],o=0,p=n-i;o<p;o+=16383)s.push(h(t,o,o+16383>p?p:o+16383));return 1===i?(e=t[n-1],a+=r[e>>2],a+=r[e<<4&63],a+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],a+=r[e>>10],a+=r[e>>4&63],a+=r[e<<2&63],a+="="),s.push(a),s.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,p=s.length;o<p;++o)r[o]=s[o],i[s.charCodeAt(o)]=o;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function h(t,e,n){for(var i,a,s=[],o=e;o<n;o+=3)i=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),s.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},425:function(t,e){e.read=function(t,e,n,r,i){var a,s,o=8*i-r-1,p=(1<<o)-1,u=p>>1,h=-7,c=n?i-1:0,l=n?-1:1,d=t[e+c];for(c+=l,a=d&(1<<-h)-1,d>>=-h,h+=o;h>0;a=256*a+t[e+c],c+=l,h-=8);for(s=a&(1<<-h)-1,a>>=-h,h+=r;h>0;s=256*s+t[e+c],c+=l,h-=8);if(0===a)a=1-u;else{if(a===p)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),a-=u}return(d?-1:1)*s*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var s,o,p,u=8*a-i-1,h=(1<<u)-1,c=h>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,f=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-s))<1&&(s--,p*=2),(e+=s+c>=1?l/p:l*Math.pow(2,1-c))*p>=2&&(s++,p/=2),s+c>=h?(o=0,s=h):s+c>=1?(o=(e*p-1)*Math.pow(2,i),s+=c):(o=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;t[n+d]=255&o,d+=f,o/=256,i-=8);for(s=s<<i|o,u+=i;u>0;t[n+d]=255&s,d+=f,s/=256,u-=8);t[n+d-f]|=128*g}},426:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},427:function(t,e){var n,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var p,u=[],h=!1,c=-1;function l(){h&&p&&(h=!1,p.length?u=p.concat(u):c=-1,u.length&&d())}function d(){if(!h){var t=o(l);h=!0;for(var e=u.length;e;){for(p=u,u=[];++c<e;)p&&p[c].run();c=-1,e=u.length}p=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new f(t,e)),1!==u.length||h||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},428:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r={},i={};function a(t){var e;if("number"==typeof t)e=s(t);else{e="";for(var n=0;n<t.length;n+=1)e+=s(t[n])}return e}function s(t){var e="";t<0?t=-t<<1|1:t<<=1;do{var n=31&t;(t>>=5)>0&&(n|=32),e+=i[n]}while(t>0);return e}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(t,e){r[t]=e,i[e]=t})},429:function(t,e,n){"use strict";n.r(e),n.d(e,"version",function(){return kt}),n.d(e,"parse",function(){return Ct}),n.d(e,"parseExpressionAt",function(){return Et}),n.d(e,"tokenizer",function(){return At}),n.d(e,"parse_dammit",function(){return xt}),n.d(e,"LooseParser",function(){return wt}),n.d(e,"pluginsLoose",function(){return St}),n.d(e,"addLooseExports",function(){return Pt}),n.d(e,"Parser",function(){return F}),n.d(e,"plugins",function(){return B}),n.d(e,"defaultOptions",function(){return M}),n.d(e,"Position",function(){return R}),n.d(e,"SourceLocation",function(){return N}),n.d(e,"getLineInfo",function(){return j}),n.d(e,"Node",function(){return Z}),n.d(e,"TokenType",function(){return m}),n.d(e,"tokTypes",function(){return w}),n.d(e,"keywordTypes",function(){return _}),n.d(e,"TokContext",function(){return nt}),n.d(e,"tokContexts",function(){return rt}),n.d(e,"isIdentifierChar",function(){return g}),n.d(e,"isIdentifierStart",function(){return f}),n.d(e,"Token",function(){return yt}),n.d(e,"isNewLine",function(){return C}),n.d(e,"lineBreak",function(){return S}),n.d(e,"lineBreakG",function(){return k}),n.d(e,"nonASCIIwhitespace",function(){return E});var r={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},i="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",a={5:i,6:i+" const class extends export import super"},s=/^in(stanceof)?$/,o="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞹꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",p="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",u=new RegExp("["+o+"]"),h=new RegExp("["+o+p+"]");o=p=null;var c=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],l=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function d(t,e){for(var n=65536,r=0;r<e.length;r+=2){if((n+=e[r])>t)return!1;if((n+=e[r+1])>=t)return!0}}function f(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&u.test(String.fromCharCode(t)):!1!==e&&d(t,c)))}function g(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&h.test(String.fromCharCode(t)):!1!==e&&(d(t,c)||d(t,l)))))}var m=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function y(t,e){return new m(t,{beforeExpr:!0,binop:e})}var v={beforeExpr:!0},b={startsExpr:!0},_={};function x(t,e){return void 0===e&&(e={}),e.keyword=t,_[t]=new m(t,e)}var w={num:new m("num",b),regexp:new m("regexp",b),string:new m("string",b),name:new m("name",b),eof:new m("eof"),bracketL:new m("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new m("]"),braceL:new m("{",{beforeExpr:!0,startsExpr:!0}),braceR:new m("}"),parenL:new m("(",{beforeExpr:!0,startsExpr:!0}),parenR:new m(")"),comma:new m(",",v),semi:new m(";",v),colon:new m(":",v),dot:new m("."),question:new m("?",v),arrow:new m("=>",v),template:new m("template"),invalidTemplate:new m("invalidTemplate"),ellipsis:new m("...",v),backQuote:new m("`",b),dollarBraceL:new m("${",{beforeExpr:!0,startsExpr:!0}),eq:new m("=",{beforeExpr:!0,isAssign:!0}),assign:new m("_=",{beforeExpr:!0,isAssign:!0}),incDec:new m("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new m("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:y("||",1),logicalAND:y("&&",2),bitwiseOR:y("|",3),bitwiseXOR:y("^",4),bitwiseAND:y("&",5),equality:y("==/!=/===/!==",6),relational:y("</>/<=/>=",7),bitShift:y("<</>>/>>>",8),plusMin:new m("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:y("%",10),star:y("*",10),slash:y("/",10),starstar:new m("**",{beforeExpr:!0}),_break:x("break"),_case:x("case",v),_catch:x("catch"),_continue:x("continue"),_debugger:x("debugger"),_default:x("default",v),_do:x("do",{isLoop:!0,beforeExpr:!0}),_else:x("else",v),_finally:x("finally"),_for:x("for",{isLoop:!0}),_function:x("function",b),_if:x("if"),_return:x("return",v),_switch:x("switch"),_throw:x("throw",v),_try:x("try"),_var:x("var"),_const:x("const"),_while:x("while",{isLoop:!0}),_with:x("with"),_new:x("new",{beforeExpr:!0,startsExpr:!0}),_this:x("this",b),_super:x("super",b),_class:x("class",b),_extends:x("extends",v),_export:x("export"),_import:x("import"),_null:x("null",b),_true:x("true",b),_false:x("false",b),_in:x("in",{beforeExpr:!0,binop:7}),_instanceof:x("instanceof",{beforeExpr:!0,binop:7}),_typeof:x("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:x("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:x("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},S=/\r\n?|\n|\u2028|\u2029/,k=new RegExp(S.source,"g");function C(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var E=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,A=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,P=Object.prototype,T=P.hasOwnProperty,L=P.toString;function O(t,e){return T.call(t,e)}var I=Array.isArray||function(t){return"[object Array]"===L.call(t)},R=function(t,e){this.line=t,this.column=e};R.prototype.offset=function(t){return new R(this.line,this.column+t)};var N=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function j(t,e){for(var n=1,r=0;;){k.lastIndex=r;var i=k.exec(t);if(!(i&&i.index<e))return new R(n,e-r);++n,r=i.index+i[0].length}}var M={ecmaVersion:7,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}};var B={};function D(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var F=function(t,e,n){this.options=t=function(t){var e={};for(var n in M)e[n]=t&&O(t,n)?t[n]:M[n];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),I(e.onToken)){var r=e.onToken;e.onToken=function(t){return r.push(t)}}return I(e.onComment)&&(e.onComment=function(t,e){return function(n,r,i,a,s,o){var p={type:n?"Block":"Line",value:r,start:i,end:a};t.locations&&(p.loc=new N(this,s,o)),t.ranges&&(p.range=[i,a]),e.push(p)}}(e,e.onComment)),e}(t),this.sourceFile=t.sourceFile,this.keywords=D(a[t.ecmaVersion>=6?6:5]);var i="";if(!t.allowReserved){for(var s=t.ecmaVersion;!(i=r[s]);s--);"module"===t.sourceType&&(i+=" await")}this.reservedWords=D(i);var o=(i?i+" ":"")+r.strict;this.reservedWordsStrict=D(o),this.reservedWordsStrictBind=D(o+" "+r.strictBind),this.input=String(e),this.containsEsc=!1,this.loadPlugins(t.plugins),n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(S).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=w.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.inFunction=this.inGenerator=this.inAsync=!1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterFunctionScope(),this.regexpState=null};F.prototype.isKeyword=function(t){return this.keywords.test(t)},F.prototype.isReservedWord=function(t){return this.reservedWords.test(t)},F.prototype.extend=function(t,e){this[t]=e(this[t])},F.prototype.loadPlugins=function(t){for(var e in t){var n=B[e];if(!n)throw new Error("Plugin '"+e+"' not found");n(this,t[e])}},F.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};var U=F.prototype,V=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;function H(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}U.strictDirective=function(t){for(;;){A.lastIndex=t,t+=A.exec(this.input)[0].length;var e=V.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2]))return!0;t+=e[0].length}},U.eat=function(t){return this.type===t&&(this.next(),!0)},U.isContextual=function(t){return this.type===w.name&&this.value===t&&!this.containsEsc},U.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},U.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},U.canInsertSemicolon=function(){return this.type===w.eof||this.type===w.braceR||S.test(this.input.slice(this.lastTokEnd,this.start))},U.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},U.semicolon=function(){this.eat(w.semi)||this.insertSemicolon()||this.unexpected()},U.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},U.expect=function(t){this.eat(t)||this.unexpected()},U.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},U.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},U.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,r=t.doubleProto;if(!e)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},U.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},U.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var K=F.prototype;K.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==w.eof;){var n=this.parseStatement(!0,!0,e);t.body.push(n)}return this.adaptDirectivePrologue(t.body),this.next(),this.options.ecmaVersion>=6&&(t.sourceType=this.options.sourceType),this.finishNode(t,"Program")};var G={kind:"loop"},W={kind:"switch"};K.isLet=function(){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;A.lastIndex=this.pos;var t=A.exec(this.input),e=this.pos+t[0].length,n=this.input.charCodeAt(e);if(91===n||123===n)return!0;if(f(n,!0)){for(var r=e+1;g(this.input.charCodeAt(r),!0);)++r;var i=this.input.slice(e,r);if(!s.test(i))return!0}return!1},K.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;A.lastIndex=this.pos;var t=A.exec(this.input),e=this.pos+t[0].length;return!(S.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&g(this.input.charAt(e+8)))},K.parseStatement=function(t,e,n){var r,i=this.type,a=this.startNode();switch(this.isLet()&&(i=w._var,r="let"),i){case w._break:case w._continue:return this.parseBreakContinueStatement(a,i.keyword);case w._debugger:return this.parseDebuggerStatement(a);case w._do:return this.parseDoStatement(a);case w._for:return this.parseForStatement(a);case w._function:return!t&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1);case w._class:return t||this.unexpected(),this.parseClass(a,!0);case w._if:return this.parseIfStatement(a);case w._return:return this.parseReturnStatement(a);case w._switch:return this.parseSwitchStatement(a);case w._throw:return this.parseThrowStatement(a);case w._try:return this.parseTryStatement(a);case w._const:case w._var:return r=r||this.value,t||"var"===r||this.unexpected(),this.parseVarStatement(a,r);case w._while:return this.parseWhileStatement(a);case w._with:return this.parseWithStatement(a);case w.braceL:return this.parseBlock();case w.semi:return this.parseEmptyStatement(a);case w._export:case w._import:return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===w._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return t||this.unexpected(),this.next(),this.parseFunctionStatement(a,!0);var s=this.value,o=this.parseExpression();return i===w.name&&"Identifier"===o.type&&this.eat(w.colon)?this.parseLabeledStatement(a,s,o):this.parseExpressionStatement(a,o)}},K.parseBreakContinueStatement=function(t,e){var n="break"===e;this.next(),this.eat(w.semi)||this.insertSemicolon()?t.label=null:this.type!==w.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==t.label||i.name===t.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(t.label&&n)break}}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},K.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},K.parseDoStatement=function(t){return this.next(),this.labels.push(G),t.body=this.parseStatement(!1),this.labels.pop(),this.expect(w._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(w.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},K.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.inAsync&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(G),this.enterLexicalScope(),this.expect(w.parenL),this.type===w.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===w._var||this.type===w._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),!(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==r.declarations.length||"var"!==i&&r.declarations[0].init?(e>-1&&this.unexpected(e),this.parseFor(t,r)):(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,r))}var a=new H,s=this.parseExpression(!0,a);return this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(s,!1,a),this.checkLVal(s),this.parseForIn(t,s)):(this.checkExpressionErrors(a,!0),e>-1&&this.unexpected(e),this.parseFor(t,s))},K.parseFunctionStatement=function(t,e){return this.next(),this.parseFunction(t,!0,!1,e)},K.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement(!this.strict&&this.type===w._function),t.alternate=this.eat(w._else)?this.parseStatement(!this.strict&&this.type===w._function):null,this.finishNode(t,"IfStatement")},K.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(w.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},K.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(w.braceL),this.labels.push(W),this.enterLexicalScope();for(var n=!1;this.type!==w.braceR;)if(this.type===w._case||this.type===w._default){var r=this.type===w._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(w.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(!0));return this.exitLexicalScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},K.parseThrowStatement=function(t){return this.next(),S.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var q=[];K.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===w._catch){var e=this.startNode();this.next(),this.eat(w.parenL)?(e.param=this.parseBindingAtom(),this.enterLexicalScope(),this.checkLVal(e.param,"let"),this.expect(w.parenR)):(this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterLexicalScope()),e.body=this.parseBlock(!1),this.exitLexicalScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(w._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},K.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},K.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(G),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"WhileStatement")},K.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement(!1),this.finishNode(t,"WithStatement")},K.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},K.parseLabeledStatement=function(t,e,n){for(var r=0,i=this.labels;r<i.length;r+=1)i[r].name===e&&this.raise(n.start,"Label '"+e+"' is already declared");for(var a=this.type.isLoop?"loop":this.type===w._switch?"switch":null,s=this.labels.length-1;s>=0;s--){var o=this.labels[s];if(o.statementStart!==t.start)break;o.statementStart=this.start,o.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(!0),("ClassDeclaration"===t.body.type||"VariableDeclaration"===t.body.type&&"var"!==t.body.kind||"FunctionDeclaration"===t.body.type&&(this.strict||t.body.generator))&&this.raiseRecoverable(t.body.start,"Invalid labeled declaration"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},K.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},K.parseBlock=function(t){void 0===t&&(t=!0);var e=this.startNode();for(e.body=[],this.expect(w.braceL),t&&this.enterLexicalScope();!this.eat(w.braceR);){var n=this.parseStatement(!0);e.body.push(n)}return t&&this.exitLexicalScope(),this.finishNode(e,"BlockStatement")},K.parseFor=function(t,e){return t.init=e,this.expect(w.semi),t.test=this.type===w.semi?null:this.parseExpression(),this.expect(w.semi),t.update=this.type===w.parenR?null:this.parseExpression(),this.expect(w.parenR),this.exitLexicalScope(),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"ForStatement")},K.parseForIn=function(t,e){var n=this.type===w._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===n&&("AssignmentPattern"===e.type||"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(this.strict||"Identifier"!==e.declarations[0].id.type))&&this.raise(e.start,"Invalid assignment in for-in loop head"),t.left=e,t.right="ForInStatement"===n?this.parseExpression():this.parseMaybeAssign(),this.expect(w.parenR),this.exitLexicalScope(),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,n)},K.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(w.eq)?r.init=this.parseMaybeAssign(e):"const"!==n||this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||e&&(this.type===w._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(w.comma))break}return t},K.parseVarId=function(t,e){t.id=this.parseBindingAtom(e),this.checkLVal(t.id,e,!1)},K.parseFunction=function(t,e,n,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(t.generator=this.eat(w.star)),this.options.ecmaVersion>=8&&(t.async=!!r),e&&(t.id="nullableID"===e&&this.type!==w.name?null:this.parseIdent(),t.id&&this.checkLVal(t.id,"var"));var i=this.inGenerator,a=this.inAsync,s=this.yieldPos,o=this.awaitPos,p=this.inFunction;return this.inGenerator=t.generator,this.inAsync=t.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),e||(t.id=this.type===w.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n),this.inGenerator=i,this.inAsync=a,this.yieldPos=s,this.awaitPos=o,this.inFunction=p,this.finishNode(t,e?"FunctionDeclaration":"FunctionExpression")},K.parseFunctionParams=function(t){this.expect(w.parenL),t.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},K.parseClass=function(t,e){this.next(),this.parseClassId(t,e),this.parseClassSuper(t);var n=this.startNode(),r=!1;for(n.body=[],this.expect(w.braceL);!this.eat(w.braceR);){var i=this.parseClassMember(n);i&&"MethodDefinition"===i.type&&"constructor"===i.kind&&(r&&this.raise(i.start,"Duplicate constructor in the same class"),r=!0)}return t.body=this.finishNode(n,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},K.parseClassMember=function(t){var e=this;if(this.eat(w.semi))return null;var n=this.startNode(),r=function(t,r){void 0===r&&(r=!1);var i=e.start,a=e.startLoc;return!(!e.eatContextual(t)||(e.type===w.parenL||r&&e.canInsertSemicolon())&&(n.key&&e.unexpected(),n.computed=!1,n.key=e.startNodeAt(i,a),n.key.name=t,e.finishNode(n.key,"Identifier"),1))};n.kind="method",n.static=r("static");var i=this.eat(w.star),a=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(a=!0,i=this.options.ecmaVersion>=9&&this.eat(w.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var s=n.key;return n.computed||n.static||!("Identifier"===s.type&&"constructor"===s.name||"Literal"===s.type&&"constructor"===s.value)?n.static&&"Identifier"===s.type&&"prototype"===s.name&&this.raise(s.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(s.start,"Constructor can't have get/set modifier"),i&&this.raise(s.start,"Constructor can't be a generator"),a&&this.raise(s.start,"Constructor can't be an async method"),n.kind="constructor"),this.parseClassMethod(t,n,i,a),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},K.parseClassMethod=function(t,e,n,r){e.value=this.parseMethod(n,r),t.body.push(this.finishNode(e,"MethodDefinition"))},K.parseClassId=function(t,e){t.id=this.type===w.name?this.parseIdent():!0===e?this.unexpected():null},K.parseClassSuper=function(t){t.superClass=this.eat(w._extends)?this.parseExprSubscripts():null},K.parseExport=function(t,e){if(this.next(),this.eat(w.star))return this.expectContextual("from"),this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(w._default)){var n;if(this.checkExport(e,"default",this.lastTokStart),this.type===w._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(r,"nullableID",!1,n)}else if(this.type===w._class){var i=this.startNode();t.declaration=this.parseClass(i,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(!0),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var a=0,s=t.specifiers;a<s.length;a+=1){var o=s[a];this.checkUnreserved(o.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},K.checkExport=function(t,e,n){t&&(O(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},K.checkPatternExport=function(t,e){var n=e.type;if("Identifier"===n)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===n)for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.checkPatternExport(t,a)}else if("ArrayPattern"===n)for(var s=0,o=e.elements;s<o.length;s+=1){var p=o[s];p&&this.checkPatternExport(t,p)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,e.expression)},K.checkVariableExport=function(t,e){if(t)for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.checkPatternExport(t,i.id)}},K.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},K.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(w.braceL);!this.eat(w.braceR);){if(n)n=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(t,r.exported.name,r.exported.start),e.push(this.finishNode(r,"ExportSpecifier"))}return e},K.parseImport=function(t){return this.next(),this.type===w.string?(t.specifiers=q,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===w.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},K.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===w.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,"let"),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(w.comma))return t}if(this.type===w.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,"let"),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t}for(this.expect(w.braceL);!this.eat(w.braceR);){if(e)e=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,"let"),t.push(this.finishNode(i,"ImportSpecifier"))}return t},K.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},K.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var z=F.prototype;z.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.toAssignable(a,e),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},z.toAssignableList=function(t,e){for(var n=t.length,r=0;r<n;r++){var i=t[r];i&&this.toAssignable(i,e)}if(n){var a=t[n-1];6===this.options.ecmaVersion&&e&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return t},z.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},z.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==w.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},z.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case w.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(w.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case w.braceL:return this.parseObj(!0)}return this.parseIdent()},z.parseBindingList=function(t,e,n){for(var r=[],i=!0;!this.eat(t);)if(i?i=!1:this.expect(w.comma),e&&this.type===w.comma)r.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===w.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var s=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(s),r.push(s)}return r},z.parseBindingListItem=function(t){return t},z.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(w.eq))return n;var r=this.startNodeAt(t,e);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},z.checkLVal=function(t,e,n){switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(O(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),e&&"none"!==e&&(("var"===e&&!this.canDeclareVarName(t.name)||"var"!==e&&!this.canDeclareLexicalName(t.name))&&this.raiseRecoverable(t.start,"Identifier '"+t.name+"' has already been declared"),"var"===e?this.declareVarName(t.name):this.declareLexicalName(t.name));break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.checkLVal(a,e,n)}break;case"Property":this.checkLVal(t.value,e,n);break;case"ArrayPattern":for(var s=0,o=t.elements;s<o.length;s+=1){var p=o[s];p&&this.checkLVal(p,e,n)}break;case"AssignmentPattern":this.checkLVal(t.left,e,n);break;case"RestElement":this.checkLVal(t.argument,e,n);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,n);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var J=F.prototype;J.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var r,i=t.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var a=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===a&&(e.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),e.proto=!0);else{var s=e[r="$"+r];s?("init"===a?this.strict&&s.init||s.get||s.set:s.init||s[a])&&this.raiseRecoverable(i.start,"Redefinition of property"):s=e[r]={init:!1,get:!1,set:!1},s[a]=!0}}},J.parseExpression=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(t,e);if(this.type===w.comma){var a=this.startNodeAt(n,r);for(a.expressions=[i];this.eat(w.comma);)a.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(a,"SequenceExpression")}return i},J.parseMaybeAssign=function(t,e,n){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var r=!1,i=-1,a=-1;e?(i=e.parenthesizedAssign,a=e.trailingComma,e.parenthesizedAssign=e.trailingComma=-1):(e=new H,r=!0);var s=this.start,o=this.startLoc;this.type!==w.parenL&&this.type!==w.name||(this.potentialArrowAt=this.start);var p=this.parseMaybeConditional(t,e);if(n&&(p=n.call(this,p,s,o)),this.type.isAssign){var u=this.startNodeAt(s,o);return u.operator=this.value,u.left=this.type===w.eq?this.toAssignable(p,!1,e):p,r||H.call(e),e.shorthandAssign=-1,this.checkLVal(p),this.next(),u.right=this.parseMaybeAssign(t),this.finishNode(u,"AssignmentExpression")}return r&&this.checkExpressionErrors(e,!0),i>-1&&(e.parenthesizedAssign=i),a>-1&&(e.trailingComma=a),p},J.parseMaybeConditional=function(t,e){var n=this.start,r=this.startLoc,i=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return i;if(this.eat(w.question)){var a=this.startNodeAt(n,r);return a.test=i,a.consequent=this.parseMaybeAssign(),this.expect(w.colon),a.alternate=this.parseMaybeAssign(t),this.finishNode(a,"ConditionalExpression")}return i},J.parseExprOps=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)?i:i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,t)},J.parseExprOp=function(t,e,n,r,i){var a=this.type.binop;if(null!=a&&(!i||this.type!==w._in)&&a>r){var s=this.type===w.logicalOR||this.type===w.logicalAND,o=this.value;this.next();var p=this.start,u=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1),p,u,a,i),c=this.buildBinary(e,n,t,h,o,s);return this.parseExprOp(c,e,n,r,i)}return t},J.buildBinary=function(t,e,n,r,i,a){var s=this.startNodeAt(t,e);return s.left=n,s.operator=i,s.right=r,this.finishNode(s,a?"LogicalExpression":"BinaryExpression")},J.parseMaybeUnary=function(t,e){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),e=!0;else if(this.type.prefix){var a=this.startNode(),s=this.type===w.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),s?this.checkLVal(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):e=!0,n=this.finishNode(a,s?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(r,i);o.operator=this.value,o.prefix=!1,o.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(o,"UpdateExpression")}}return!e&&this.eat(w.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},J.parseExprSubscripts=function(t){var e=this.start,n=this.startLoc,r=this.parseExprAtom(t),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(t)||i)return r;var a=this.parseSubscripts(r,e,n);return t&&"MemberExpression"===a.type&&(t.parenthesizedAssign>=a.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=a.start&&(t.parenthesizedBind=-1)),a},J.parseSubscripts=function(t,e,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end),a=void 0;;)if((a=this.eat(w.bracketL))||this.eat(w.dot)){var s=this.startNodeAt(e,n);s.object=t,s.property=a?this.parseExpression():this.parseIdent(!0),s.computed=!!a,a&&this.expect(w.bracketR),t=this.finishNode(s,"MemberExpression")}else if(!r&&this.eat(w.parenL)){var o=new H,p=this.yieldPos,u=this.awaitPos;this.yieldPos=0,this.awaitPos=0;var h=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1,o);if(i&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=u,this.parseArrowExpression(this.startNodeAt(e,n),h,!0);this.checkExpressionErrors(o,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=u||this.awaitPos;var c=this.startNodeAt(e,n);c.callee=t,c.arguments=h,t=this.finishNode(c,"CallExpression")}else{if(this.type!==w.backQuote)return t;var l=this.startNodeAt(e,n);l.tag=t,l.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(l,"TaggedTemplateExpression")}},J.parseExprAtom=function(t){var e,n=this.potentialArrowAt===this.start;switch(this.type){case w._super:return this.inFunction||this.raise(this.start,"'super' outside of function or class"),e=this.startNode(),this.next(),this.type!==w.dot&&this.type!==w.bracketL&&this.type!==w.parenL&&this.unexpected(),this.finishNode(e,"Super");case w._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case w.name:var r=this.start,i=this.startLoc,a=this.containsEsc,s=this.parseIdent(this.type!==w.name);if(this.options.ecmaVersion>=8&&!a&&"async"===s.name&&!this.canInsertSemicolon()&&this.eat(w._function))return this.parseFunction(this.startNodeAt(r,i),!1,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(w.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[s],!1);if(this.options.ecmaVersion>=8&&"async"===s.name&&this.type===w.name&&!a)return s=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(w.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[s],!0)}return s;case w.regexp:var o=this.value;return(e=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},e;case w.num:case w.string:return this.parseLiteral(this.value);case w._null:case w._true:case w._false:return(e=this.startNode()).value=this.type===w._null?null:this.type===w._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case w.parenL:var p=this.start,u=this.parseParenAndDistinguishExpression(n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(t.parenthesizedAssign=p),t.parenthesizedBind<0&&(t.parenthesizedBind=p)),u;case w.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(w.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case w.braceL:return this.parseObj(!1,t);case w._function:return e=this.startNode(),this.next(),this.parseFunction(e,!1);case w._class:return this.parseClass(this.startNode(),!1);case w._new:return this.parseNew();case w.backQuote:return this.parseTemplate();default:this.unexpected()}},J.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(e,"Literal")},J.parseParenExpression=function(){this.expect(w.parenL);var t=this.parseExpression();return this.expect(w.parenR),t},J.parseParenAndDistinguishExpression=function(t){var e,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,s=this.start,o=this.startLoc,p=[],u=!0,h=!1,c=new H,l=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==w.parenR;){if(u?u=!1:this.expect(w.comma),i&&this.afterTrailingComma(w.parenR,!0)){h=!0;break}if(this.type===w.ellipsis){a=this.start,p.push(this.parseParenItem(this.parseRestBinding())),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}p.push(this.parseMaybeAssign(!1,c,this.parseParenItem))}var f=this.start,g=this.startLoc;if(this.expect(w.parenR),t&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(c,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=d,this.parseParenArrowList(n,r,p);p.length&&!h||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(c,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=d||this.awaitPos,p.length>1?((e=this.startNodeAt(s,o)).expressions=p,this.finishNodeAt(e,"SequenceExpression",f,g)):e=p[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(n,r);return m.expression=e,this.finishNode(m,"ParenthesizedExpression")}return e},J.parseParenItem=function(t){return t},J.parseParenArrowList=function(t,e,n){return this.parseArrowExpression(this.startNodeAt(t,e),n)};var X=[];J.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(w.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||n)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var r=this.start,i=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),this.eat(w.parenL)?t.arguments=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1):t.arguments=X,this.finishNode(t,"NewExpression")},J.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===w.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===w.backQuote,this.finishNode(n,"TemplateElement")},J.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:e});for(n.quasis=[r];!r.tail;)this.expect(w.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(w.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},J.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===w.name||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===w.star)&&!S.test(this.input.slice(this.lastTokEnd,this.start))},J.parseObj=function(t,e){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(w.braceR);){if(r)r=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var a=this.parseProperty(t,e);t||this.checkPropClash(a,i,e),n.properties.push(a)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},J.parseProperty=function(t,e){var n,r,i,a,s=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(w.ellipsis))return t?(s.argument=this.parseIdent(!1),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(s,"RestElement")):(this.type===w.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),s.argument=this.parseMaybeAssign(!1,e),this.type===w.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(s,"SpreadElement"));this.options.ecmaVersion>=6&&(s.method=!1,s.shorthand=!1,(t||e)&&(i=this.start,a=this.startLoc),t||(n=this.eat(w.star)));var o=this.containsEsc;return this.parsePropertyName(s),!t&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(s)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(w.star),this.parsePropertyName(s,e)):r=!1,this.parsePropertyValue(s,t,n,r,i,a,e,o),this.finishNode(s,"Property")},J.parsePropertyValue=function(t,e,n,r,i,a,s,o){if((n||r)&&this.type===w.colon&&this.unexpected(),this.eat(w.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,s),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===w.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,r);else if(e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===w.comma||this.type===w.braceR)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?(this.checkUnreserved(t.key),t.kind="init",e?t.value=this.parseMaybeDefault(i,a,t.key):this.type===w.eq&&s?(s.shorthandAssign<0&&(s.shorthandAssign=this.start),t.value=this.parseMaybeDefault(i,a,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var p="get"===t.kind?0:1;if(t.value.params.length!==p){var u=t.value.start;"get"===t.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},J.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(w.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(w.bracketR),t.key;t.computed=!1}return t.key=this.type===w.num||this.type===w.string?this.parseExprAtom():this.parseIdent(!0)},J.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=!1,t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},J.parseMethod=function(t,e){var n=this.startNode(),r=this.inGenerator,i=this.inAsync,a=this.yieldPos,s=this.awaitPos,o=this.inFunction;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=t),this.options.ecmaVersion>=8&&(n.async=!!e),this.inGenerator=n.generator,this.inAsync=n.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),this.expect(w.parenL),n.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1),this.inGenerator=r,this.inAsync=i,this.yieldPos=a,this.awaitPos=s,this.inFunction=o,this.finishNode(n,"FunctionExpression")},J.parseArrowExpression=function(t,e,n){var r=this.inGenerator,i=this.inAsync,a=this.yieldPos,s=this.awaitPos,o=this.inFunction;return this.enterFunctionScope(),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.inGenerator=!1,this.inAsync=t.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0),this.inGenerator=r,this.inAsync=i,this.yieldPos=a,this.awaitPos=s,this.inFunction=o,this.finishNode(t,"ArrowFunctionExpression")},J.parseFunctionBody=function(t,e){var n=e&&this.type!==w.braceL,r=this.strict,i=!1;if(n)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);r&&!a||(i=this.strictDirective(this.end))&&a&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var s=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(t,!r&&!i&&!e&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=s}this.exitFunctionScope(),this.strict&&t.id&&this.checkLVal(t.id,"none"),this.strict=r},J.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1)if("Identifier"!==n[e].type)return!1;return!0},J.checkParams=function(t,e){for(var n={},r=0,i=t.params;r<i.length;r+=1){var a=i[r];this.checkLVal(a,"var",e?null:n)}},J.parseExprList=function(t,e,n,r){for(var i=[],a=!0;!this.eat(t);){if(a)a=!1;else if(this.expect(w.comma),e&&this.afterTrailingComma(t))break;var s=void 0;n&&this.type===w.comma?s=null:this.type===w.ellipsis?(s=this.parseSpread(r),r&&this.type===w.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):s=this.parseMaybeAssign(!1,r),i.push(s)}return i},J.checkUnreserved=function(t){var e=t.start,n=t.end,r=t.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(e,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(e,"Can not use 'await' as identifier inside an async function"),this.isKeyword(r)&&this.raise(e,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(e,"Can not use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+r+"' is reserved"))},J.parseIdent=function(t,e){var n=this.startNode();return t&&"never"===this.options.allowReserved&&(t=!1),this.type===w.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),t||this.checkUnreserved(n),n},J.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===w.semi||this.canInsertSemicolon()||this.type!==w.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(w.star),t.argument=this.parseMaybeAssign()),this.finishNode(t,"YieldExpression")},J.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var Y=F.prototype;Y.raise=function(t,e){var n=j(this.input,t);e+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=n,r.raisedAt=this.pos,r},Y.raiseRecoverable=Y.raise,Y.curPosition=function(){if(this.options.locations)return new R(this.curLine,this.pos-this.lineStart)};var $=F.prototype,Q=Object.assign||function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var a=i[r];for(var s in a)O(a,s)&&(t[s]=a[s])}return t};$.enterFunctionScope=function(){this.scopeStack.push({var:{},lexical:{},childVar:{},parentLexical:{}})},$.exitFunctionScope=function(){this.scopeStack.pop()},$.enterLexicalScope=function(){var t=this.scopeStack[this.scopeStack.length-1],e={var:{},lexical:{},childVar:{},parentLexical:{}};this.scopeStack.push(e),Q(e.parentLexical,t.lexical,t.parentLexical)},$.exitLexicalScope=function(){var t=this.scopeStack.pop(),e=this.scopeStack[this.scopeStack.length-1];Q(e.childVar,t.var,t.childVar)},$.canDeclareVarName=function(t){var e=this.scopeStack[this.scopeStack.length-1];return!O(e.lexical,t)&&!O(e.parentLexical,t)},$.canDeclareLexicalName=function(t){var e=this.scopeStack[this.scopeStack.length-1];return!O(e.lexical,t)&&!O(e.var,t)&&!O(e.childVar,t)},$.declareVarName=function(t){this.scopeStack[this.scopeStack.length-1].var[t]=!0},$.declareLexicalName=function(t){this.scopeStack[this.scopeStack.length-1].lexical[t]=!0};var Z=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new N(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},tt=F.prototype;function et(t,e,n,r){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=n),t}tt.startNode=function(){return new Z(this,this.start,this.startLoc)},tt.startNodeAt=function(t,e){return new Z(this,t,e)},tt.finishNode=function(t,e){return et.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},tt.finishNodeAt=function(t,e,n,r){return et.call(this,t,e,n,r)};var nt=function(t,e,n,r,i){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=r,this.generator=!!i},rt={b_stat:new nt("{",!1),b_expr:new nt("{",!0),b_tmpl:new nt("${",!1),p_stat:new nt("(",!1),p_expr:new nt("(",!0),q_tmpl:new nt("`",!0,!0,function(t){return t.tryReadTemplateToken()}),f_stat:new nt("function",!1),f_expr:new nt("function",!0),f_expr_gen:new nt("function",!0,!1,null,!0),f_gen:new nt("function",!1,!1,null,!0)},it=F.prototype;it.initialContext=function(){return[rt.b_stat]},it.braceIsBlock=function(t){var e=this.curContext();return e===rt.f_expr||e===rt.f_stat||(t!==w.colon||e!==rt.b_stat&&e!==rt.b_expr?t===w._return||t===w.name&&this.exprAllowed?S.test(this.input.slice(this.lastTokEnd,this.start)):t===w._else||t===w.semi||t===w.eof||t===w.parenR||t===w.arrow||(t===w.braceL?e===rt.b_stat:t!==w._var&&t!==w.name&&!this.exprAllowed):!e.isExpr)},it.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},it.updateContext=function(t){var e,n=this.type;n.keyword&&t===w.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},w.parenR.updateContext=w.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===rt.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},w.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?rt.b_stat:rt.b_expr),this.exprAllowed=!0},w.dollarBraceL.updateContext=function(){this.context.push(rt.b_tmpl),this.exprAllowed=!0},w.parenL.updateContext=function(t){var e=t===w._if||t===w._for||t===w._with||t===w._while;this.context.push(e?rt.p_stat:rt.p_expr),this.exprAllowed=!0},w.incDec.updateContext=function(){},w._function.updateContext=w._class.updateContext=function(t){t.beforeExpr&&t!==w.semi&&t!==w._else&&(t!==w.colon&&t!==w.braceL||this.curContext()!==rt.b_stat)?this.context.push(rt.f_expr):this.context.push(rt.f_stat),this.exprAllowed=!1},w.backQuote.updateContext=function(){this.curContext()===rt.q_tmpl?this.context.pop():this.context.push(rt.q_tmpl),this.exprAllowed=!1},w.star.updateContext=function(t){if(t===w._function){var e=this.context.length-1;this.context[e]===rt.f_expr?this.context[e]=rt.f_expr_gen:this.context[e]=rt.f_gen}this.exprAllowed=!0},w.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var at={$LONE:["ASCII","ASCII_Hex_Digit","AHex","Alphabetic","Alpha","Any","Assigned","Bidi_Control","Bidi_C","Bidi_Mirrored","Bidi_M","Case_Ignorable","CI","Cased","Changes_When_Casefolded","CWCF","Changes_When_Casemapped","CWCM","Changes_When_Lowercased","CWL","Changes_When_NFKC_Casefolded","CWKCF","Changes_When_Titlecased","CWT","Changes_When_Uppercased","CWU","Dash","Default_Ignorable_Code_Point","DI","Deprecated","Dep","Diacritic","Dia","Emoji","Emoji_Component","Emoji_Modifier","Emoji_Modifier_Base","Emoji_Presentation","Extender","Ext","Grapheme_Base","Gr_Base","Grapheme_Extend","Gr_Ext","Hex_Digit","Hex","IDS_Binary_Operator","IDSB","IDS_Trinary_Operator","IDST","ID_Continue","IDC","ID_Start","IDS","Ideographic","Ideo","Join_Control","Join_C","Logical_Order_Exception","LOE","Lowercase","Lower","Math","Noncharacter_Code_Point","NChar","Pattern_Syntax","Pat_Syn","Pattern_White_Space","Pat_WS","Quotation_Mark","QMark","Radical","Regional_Indicator","RI","Sentence_Terminal","STerm","Soft_Dotted","SD","Terminal_Punctuation","Term","Unified_Ideograph","UIdeo","Uppercase","Upper","Variation_Selector","VS","White_Space","space","XID_Continue","XIDC","XID_Start","XIDS"],General_Category:["Cased_Letter","LC","Close_Punctuation","Pe","Connector_Punctuation","Pc","Control","Cc","cntrl","Currency_Symbol","Sc","Dash_Punctuation","Pd","Decimal_Number","Nd","digit","Enclosing_Mark","Me","Final_Punctuation","Pf","Format","Cf","Initial_Punctuation","Pi","Letter","L","Letter_Number","Nl","Line_Separator","Zl","Lowercase_Letter","Ll","Mark","M","Combining_Mark","Math_Symbol","Sm","Modifier_Letter","Lm","Modifier_Symbol","Sk","Nonspacing_Mark","Mn","Number","N","Open_Punctuation","Ps","Other","C","Other_Letter","Lo","Other_Number","No","Other_Punctuation","Po","Other_Symbol","So","Paragraph_Separator","Zp","Private_Use","Co","Punctuation","P","punct","Separator","Z","Space_Separator","Zs","Spacing_Mark","Mc","Surrogate","Cs","Symbol","S","Titlecase_Letter","Lt","Unassigned","Cn","Uppercase_Letter","Lu"],Script:["Adlam","Adlm","Ahom","Anatolian_Hieroglyphs","Hluw","Arabic","Arab","Armenian","Armn","Avestan","Avst","Balinese","Bali","Bamum","Bamu","Bassa_Vah","Bass","Batak","Batk","Bengali","Beng","Bhaiksuki","Bhks","Bopomofo","Bopo","Brahmi","Brah","Braille","Brai","Buginese","Bugi","Buhid","Buhd","Canadian_Aboriginal","Cans","Carian","Cari","Caucasian_Albanian","Aghb","Chakma","Cakm","Cham","Cherokee","Cher","Common","Zyyy","Coptic","Copt","Qaac","Cuneiform","Xsux","Cypriot","Cprt","Cyrillic","Cyrl","Deseret","Dsrt","Devanagari","Deva","Duployan","Dupl","Egyptian_Hieroglyphs","Egyp","Elbasan","Elba","Ethiopic","Ethi","Georgian","Geor","Glagolitic","Glag","Gothic","Goth","Grantha","Gran","Greek","Grek","Gujarati","Gujr","Gurmukhi","Guru","Han","Hani","Hangul","Hang","Hanunoo","Hano","Hatran","Hatr","Hebrew","Hebr","Hiragana","Hira","Imperial_Aramaic","Armi","Inherited","Zinh","Qaai","Inscriptional_Pahlavi","Phli","Inscriptional_Parthian","Prti","Javanese","Java","Kaithi","Kthi","Kannada","Knda","Katakana","Kana","Kayah_Li","Kali","Kharoshthi","Khar","Khmer","Khmr","Khojki","Khoj","Khudawadi","Sind","Lao","Laoo","Latin","Latn","Lepcha","Lepc","Limbu","Limb","Linear_A","Lina","Linear_B","Linb","Lisu","Lycian","Lyci","Lydian","Lydi","Mahajani","Mahj","Malayalam","Mlym","Mandaic","Mand","Manichaean","Mani","Marchen","Marc","Masaram_Gondi","Gonm","Meetei_Mayek","Mtei","Mende_Kikakui","Mend","Meroitic_Cursive","Merc","Meroitic_Hieroglyphs","Mero","Miao","Plrd","Modi","Mongolian","Mong","Mro","Mroo","Multani","Mult","Myanmar","Mymr","Nabataean","Nbat","New_Tai_Lue","Talu","Newa","Nko","Nkoo","Nushu","Nshu","Ogham","Ogam","Ol_Chiki","Olck","Old_Hungarian","Hung","Old_Italic","Ital","Old_North_Arabian","Narb","Old_Permic","Perm","Old_Persian","Xpeo","Old_South_Arabian","Sarb","Old_Turkic","Orkh","Oriya","Orya","Osage","Osge","Osmanya","Osma","Pahawh_Hmong","Hmng","Palmyrene","Palm","Pau_Cin_Hau","Pauc","Phags_Pa","Phag","Phoenician","Phnx","Psalter_Pahlavi","Phlp","Rejang","Rjng","Runic","Runr","Samaritan","Samr","Saurashtra","Saur","Sharada","Shrd","Shavian","Shaw","Siddham","Sidd","SignWriting","Sgnw","Sinhala","Sinh","Sora_Sompeng","Sora","Soyombo","Soyo","Sundanese","Sund","Syloti_Nagri","Sylo","Syriac","Syrc","Tagalog","Tglg","Tagbanwa","Tagb","Tai_Le","Tale","Tai_Tham","Lana","Tai_Viet","Tavt","Takri","Takr","Tamil","Taml","Tangut","Tang","Telugu","Telu","Thaana","Thaa","Thai","Tibetan","Tibt","Tifinagh","Tfng","Tirhuta","Tirh","Ugaritic","Ugar","Vai","Vaii","Warang_Citi","Wara","Yi","Yiii","Zanabazar_Square","Zanb"]};Array.prototype.push.apply(at.$LONE,at.General_Category),at.gc=at.General_Category,at.sc=at.Script_Extensions=at.scx=at.Script;var st=F.prototype,ot=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function pt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function ut(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function ht(t){return t>=65&&t<=90||t>=97&&t<=122}function ct(t){return ht(t)||95===t}function lt(t){return ct(t)||dt(t)}function dt(t){return t>=48&&t<=57}function ft(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function gt(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function mt(t){return t>=48&&t<=55}ot.prototype.reset=function(t,e,n){var r=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},ot.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},ot.prototype.at=function(t){var e=this.source,n=e.length;if(t>=n)return-1;var r=e.charCodeAt(t);return!this.switchU||r<=55295||r>=57344||t+1>=n?r:(r<<10)+e.charCodeAt(t+1)-56613888},ot.prototype.nextIndex=function(t){var e=this.source,n=e.length;if(t>=n)return n;var r=e.charCodeAt(t);return!this.switchU||r<=55295||r>=57344||t+1>=n?t+1:t+2},ot.prototype.current=function(){return this.at(this.pos)},ot.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},ot.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},ot.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},st.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===e.indexOf(i)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},st.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},st.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var r=n[e];-1===t.groupNames.indexOf(r)&&t.raise("Invalid named capture referenced")}},st.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},st.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},st.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!(t.switchU?!this.regexp_eatAtom(t):!this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},st.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},st.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},st.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},st.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue),t.eat(125)))return-1!==i&&i<r&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},st.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},st.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},st.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},st.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},st.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},st.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},st.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!ut(e)&&(t.lastIntValue=e,t.advance(),!0)},st.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!ut(n);)t.advance();return t.pos!==e},st.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e||(t.advance(),0))},st.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},st.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},st.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=pt(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=pt(t.lastIntValue);return!0}return!1},st.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),function(t){return f(t,!0)||36===t||95===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},st.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),function(t){return g(t,!0)||36===t||95===t||8204===t||8205===t}(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},st.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},st.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},st.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},st.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},st.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},st.regexp_eatZero=function(t){return 48===t.current()&&!dt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},st.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},st.regexp_eatControlLetter=function(t){var e=t.current();return!!ht(e)&&(t.lastIntValue=e%32,t.advance(),!0)},st.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e,n=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var r=t.lastIntValue;if(t.switchU&&r>=55296&&r<=56319){var i=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(a>=56320&&a<=57343)return t.lastIntValue=1024*(r-55296)+(a-56320)+65536,!0}t.pos=i,t.lastIntValue=r}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&(e=t.lastIntValue)>=0&&e<=1114111)return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=n}return!1},st.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e||(t.lastIntValue=e,t.advance(),0))},st.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},st.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(100===e||68===e||115===e||83===e||119===e||87===e)return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},st.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,r),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,i),!0}return!1},st.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){at.hasOwnProperty(e)&&-1!==at[e].indexOf(n)||t.raise("Invalid property name")},st.regexp_validateUnicodePropertyNameOrValue=function(t,e){-1===at.$LONE.indexOf(e)&&t.raise("Invalid property name")},st.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";ct(e=t.current());)t.lastStringValue+=pt(e),t.advance();return""!==t.lastStringValue},st.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";lt(e=t.current());)t.lastStringValue+=pt(e),t.advance();return""!==t.lastStringValue},st.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},st.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},st.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise("Invalid character class"),-1!==e&&-1!==n&&e>n&&t.raise("Range out of order in character class")}}},st.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||mt(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var r=t.current();return 93!==r&&(t.lastIntValue=r,t.advance(),!0)},st.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},st.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!dt(e)&&95!==e||(t.lastIntValue=e%32,t.advance(),0))},st.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},st.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;dt(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},st.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;ft(n=t.current());)t.lastIntValue=16*t.lastIntValue+gt(n),t.advance();return t.pos!==e},st.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},st.regexp_eatOctalDigit=function(t){var e=t.current();return mt(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},st.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var r=0;r<e;++r){var i=t.current();if(!ft(i))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+gt(i),t.advance()}return!0};var yt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new N(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},vt=F.prototype;function bt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}vt.next=function(){this.options.onToken&&this.options.onToken(new yt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},vt.getToken=function(){return this.next(),new yt(this)},"undefined"!=typeof Symbol&&(vt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===w.eof,value:e}}}}),vt.curContext=function(){return this.context[this.context.length-1]},vt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(w.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},vt.readToken=function(t){return f(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},vt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},vt.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(k.lastIndex=n;(t=k.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,e,this.curPosition())},vt.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!C(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},vt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&E.test(String.fromCharCode(t))))break t;++this.pos}}},vt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},vt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(w.ellipsis)):(++this.pos,this.finishToken(w.dot))},vt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(w.assign,2):this.finishOp(w.slash,1)},vt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,r=42===t?w.star:w.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,r=w.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(w.assign,n+1):this.finishOp(r,n)},vt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?w.logicalOR:w.logicalAND,2):61===e?this.finishOp(w.assign,2):this.finishOp(124===t?w.bitwiseOR:w.bitwiseAND,1)},vt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(w.assign,2):this.finishOp(w.bitwiseXOR,1)},vt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!S.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(w.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(w.assign,2):this.finishOp(w.plusMin,1)},vt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(w.assign,n+1):this.finishOp(w.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(w.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},vt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(w.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(w.arrow)):this.finishOp(61===t?w.eq:w.prefix,1)},vt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(w.parenL);case 41:return++this.pos,this.finishToken(w.parenR);case 59:return++this.pos,this.finishToken(w.semi);case 44:return++this.pos,this.finishToken(w.comma);case 91:return++this.pos,this.finishToken(w.bracketL);case 93:return++this.pos,this.finishToken(w.bracketR);case 123:return++this.pos,this.finishToken(w.braceL);case 125:return++this.pos,this.finishToken(w.braceR);case 58:return++this.pos,this.finishToken(w.colon);case 63:return++this.pos,this.finishToken(w.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(w.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(w.prefix,1)}this.raise(this.pos,"Unexpected character '"+bt(t)+"'")},vt.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},vt.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(S.test(r)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var a=this.pos,s=this.readWord1();this.containsEsc&&this.unexpected(a);var o=this.regexpState||(this.regexpState=new ot(this));o.reset(n,i,s),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var p=null;try{p=new RegExp(i,s)}catch(t){}return this.finishToken(w.regexp,{pattern:i,flags:s,value:p})},vt.readInt=function(t,e){for(var n=this.pos,r=0,i=0,a=null==e?1/0:e;i<a;++i){var s,o=this.input.charCodeAt(this.pos);if((s=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=t)break;++this.pos,r=r*t+s}return this.pos===n||null!=e&&this.pos-n!==e?null:r},vt.readRadixNumber=function(t){this.pos+=2;var e=this.readInt(t);return null==e&&this.raise(this.start+2,"Expected number in radix "+t),f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,e)},vt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number"),n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=this.input.slice(e,this.pos),a=n?parseInt(i,8):parseFloat(i);return this.finishToken(w.num,a)},vt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},vt.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===t)break;92===r?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):(C(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(w.string,e)};var _t={};vt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==_t)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},vt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw _t;this.raise(t,e)},vt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==w.template&&this.type!==w.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(w.template,t)):36===n?(this.pos+=2,this.finishToken(w.dollarBraceL)):(++this.pos,this.finishToken(w.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(C(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},vt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(w.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},vt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return bt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(e>=48&&e<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,e=this.input.charCodeAt(this.pos),"0"===n&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-n.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return String.fromCharCode(e)}},vt.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},vt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(g(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var s=this.readCodePoint();(e?f:g)(s,r)||this.invalidStringToken(a,"Invalid Unicode escape"),t+=bt(s),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},vt.readWord=function(){var t=this.readWord1(),e=w.name;return this.keywords.test(t)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+t),e=_[t]),this.finishToken(e,t)};var xt,wt,St,kt="5.7.1";function Ct(t,e){return new F(e,t).parse()}function Et(t,e,n){var r=new F(n,t,e);return r.nextToken(),r.parseExpression()}function At(t,e){return new F(e,t)}function Pt(t,e,n){xt=t,wt=e,St=n}},430:function(t,e,n){n(100),t.exports=n(55).Object.assign}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC02OTUwNjU0NjEyMWRiODhhOTVkNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMi9jb3JlLWpzL29iamVjdC92YWx1ZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2J1YmxlL2Rpc3QvYnVibGUtYnJvd3Nlci5lcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYnVmZmVyL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvdmFsdWVzXCIpOyIsImltcG9ydCBNYWdpY1N0cmluZyBmcm9tICdtYWdpYy1zdHJpbmcnO1xuaW1wb3J0ICogYXMgYWNvcm4gZnJvbSAnYWNvcm4nO1xuXG52YXIgeGh0bWwgPSB7XG4gIHF1b3Q6ICdcXHUwMDIyJyxcbiAgYW1wOiAnJicsXG4gIGFwb3M6ICdcXHUwMDI3JyxcbiAgbHQ6ICc8JyxcbiAgZ3Q6ICc+JyxcbiAgbmJzcDogJ1xcdTAwQTAnLFxuICBpZXhjbDogJ1xcdTAwQTEnLFxuICBjZW50OiAnXFx1MDBBMicsXG4gIHBvdW5kOiAnXFx1MDBBMycsXG4gIGN1cnJlbjogJ1xcdTAwQTQnLFxuICB5ZW46ICdcXHUwMEE1JyxcbiAgYnJ2YmFyOiAnXFx1MDBBNicsXG4gIHNlY3Q6ICdcXHUwMEE3JyxcbiAgdW1sOiAnXFx1MDBBOCcsXG4gIGNvcHk6ICdcXHUwMEE5JyxcbiAgb3JkZjogJ1xcdTAwQUEnLFxuICBsYXF1bzogJ1xcdTAwQUInLFxuICBub3Q6ICdcXHUwMEFDJyxcbiAgc2h5OiAnXFx1MDBBRCcsXG4gIHJlZzogJ1xcdTAwQUUnLFxuICBtYWNyOiAnXFx1MDBBRicsXG4gIGRlZzogJ1xcdTAwQjAnLFxuICBwbHVzbW46ICdcXHUwMEIxJyxcbiAgc3VwMjogJ1xcdTAwQjInLFxuICBzdXAzOiAnXFx1MDBCMycsXG4gIGFjdXRlOiAnXFx1MDBCNCcsXG4gIG1pY3JvOiAnXFx1MDBCNScsXG4gIHBhcmE6ICdcXHUwMEI2JyxcbiAgbWlkZG90OiAnXFx1MDBCNycsXG4gIGNlZGlsOiAnXFx1MDBCOCcsXG4gIHN1cDE6ICdcXHUwMEI5JyxcbiAgb3JkbTogJ1xcdTAwQkEnLFxuICByYXF1bzogJ1xcdTAwQkInLFxuICBmcmFjMTQ6ICdcXHUwMEJDJyxcbiAgZnJhYzEyOiAnXFx1MDBCRCcsXG4gIGZyYWMzNDogJ1xcdTAwQkUnLFxuICBpcXVlc3Q6ICdcXHUwMEJGJyxcbiAgQWdyYXZlOiAnXFx1MDBDMCcsXG4gIEFhY3V0ZTogJ1xcdTAwQzEnLFxuICBBY2lyYzogJ1xcdTAwQzInLFxuICBBdGlsZGU6ICdcXHUwMEMzJyxcbiAgQXVtbDogJ1xcdTAwQzQnLFxuICBBcmluZzogJ1xcdTAwQzUnLFxuICBBRWxpZzogJ1xcdTAwQzYnLFxuICBDY2VkaWw6ICdcXHUwMEM3JyxcbiAgRWdyYXZlOiAnXFx1MDBDOCcsXG4gIEVhY3V0ZTogJ1xcdTAwQzknLFxuICBFY2lyYzogJ1xcdTAwQ0EnLFxuICBFdW1sOiAnXFx1MDBDQicsXG4gIElncmF2ZTogJ1xcdTAwQ0MnLFxuICBJYWN1dGU6ICdcXHUwMENEJyxcbiAgSWNpcmM6ICdcXHUwMENFJyxcbiAgSXVtbDogJ1xcdTAwQ0YnLFxuICBFVEg6ICdcXHUwMEQwJyxcbiAgTnRpbGRlOiAnXFx1MDBEMScsXG4gIE9ncmF2ZTogJ1xcdTAwRDInLFxuICBPYWN1dGU6ICdcXHUwMEQzJyxcbiAgT2NpcmM6ICdcXHUwMEQ0JyxcbiAgT3RpbGRlOiAnXFx1MDBENScsXG4gIE91bWw6ICdcXHUwMEQ2JyxcbiAgdGltZXM6ICdcXHUwMEQ3JyxcbiAgT3NsYXNoOiAnXFx1MDBEOCcsXG4gIFVncmF2ZTogJ1xcdTAwRDknLFxuICBVYWN1dGU6ICdcXHUwMERBJyxcbiAgVWNpcmM6ICdcXHUwMERCJyxcbiAgVXVtbDogJ1xcdTAwREMnLFxuICBZYWN1dGU6ICdcXHUwMEREJyxcbiAgVEhPUk46ICdcXHUwMERFJyxcbiAgc3psaWc6ICdcXHUwMERGJyxcbiAgYWdyYXZlOiAnXFx1MDBFMCcsXG4gIGFhY3V0ZTogJ1xcdTAwRTEnLFxuICBhY2lyYzogJ1xcdTAwRTInLFxuICBhdGlsZGU6ICdcXHUwMEUzJyxcbiAgYXVtbDogJ1xcdTAwRTQnLFxuICBhcmluZzogJ1xcdTAwRTUnLFxuICBhZWxpZzogJ1xcdTAwRTYnLFxuICBjY2VkaWw6ICdcXHUwMEU3JyxcbiAgZWdyYXZlOiAnXFx1MDBFOCcsXG4gIGVhY3V0ZTogJ1xcdTAwRTknLFxuICBlY2lyYzogJ1xcdTAwRUEnLFxuICBldW1sOiAnXFx1MDBFQicsXG4gIGlncmF2ZTogJ1xcdTAwRUMnLFxuICBpYWN1dGU6ICdcXHUwMEVEJyxcbiAgaWNpcmM6ICdcXHUwMEVFJyxcbiAgaXVtbDogJ1xcdTAwRUYnLFxuICBldGg6ICdcXHUwMEYwJyxcbiAgbnRpbGRlOiAnXFx1MDBGMScsXG4gIG9ncmF2ZTogJ1xcdTAwRjInLFxuICBvYWN1dGU6ICdcXHUwMEYzJyxcbiAgb2NpcmM6ICdcXHUwMEY0JyxcbiAgb3RpbGRlOiAnXFx1MDBGNScsXG4gIG91bWw6ICdcXHUwMEY2JyxcbiAgZGl2aWRlOiAnXFx1MDBGNycsXG4gIG9zbGFzaDogJ1xcdTAwRjgnLFxuICB1Z3JhdmU6ICdcXHUwMEY5JyxcbiAgdWFjdXRlOiAnXFx1MDBGQScsXG4gIHVjaXJjOiAnXFx1MDBGQicsXG4gIHV1bWw6ICdcXHUwMEZDJyxcbiAgeWFjdXRlOiAnXFx1MDBGRCcsXG4gIHRob3JuOiAnXFx1MDBGRScsXG4gIHl1bWw6ICdcXHUwMEZGJyxcbiAgT0VsaWc6ICdcXHUwMTUyJyxcbiAgb2VsaWc6ICdcXHUwMTUzJyxcbiAgU2Nhcm9uOiAnXFx1MDE2MCcsXG4gIHNjYXJvbjogJ1xcdTAxNjEnLFxuICBZdW1sOiAnXFx1MDE3OCcsXG4gIGZub2Y6ICdcXHUwMTkyJyxcbiAgY2lyYzogJ1xcdTAyQzYnLFxuICB0aWxkZTogJ1xcdTAyREMnLFxuICBBbHBoYTogJ1xcdTAzOTEnLFxuICBCZXRhOiAnXFx1MDM5MicsXG4gIEdhbW1hOiAnXFx1MDM5MycsXG4gIERlbHRhOiAnXFx1MDM5NCcsXG4gIEVwc2lsb246ICdcXHUwMzk1JyxcbiAgWmV0YTogJ1xcdTAzOTYnLFxuICBFdGE6ICdcXHUwMzk3JyxcbiAgVGhldGE6ICdcXHUwMzk4JyxcbiAgSW90YTogJ1xcdTAzOTknLFxuICBLYXBwYTogJ1xcdTAzOUEnLFxuICBMYW1iZGE6ICdcXHUwMzlCJyxcbiAgTXU6ICdcXHUwMzlDJyxcbiAgTnU6ICdcXHUwMzlEJyxcbiAgWGk6ICdcXHUwMzlFJyxcbiAgT21pY3JvbjogJ1xcdTAzOUYnLFxuICBQaTogJ1xcdTAzQTAnLFxuICBSaG86ICdcXHUwM0ExJyxcbiAgU2lnbWE6ICdcXHUwM0EzJyxcbiAgVGF1OiAnXFx1MDNBNCcsXG4gIFVwc2lsb246ICdcXHUwM0E1JyxcbiAgUGhpOiAnXFx1MDNBNicsXG4gIENoaTogJ1xcdTAzQTcnLFxuICBQc2k6ICdcXHUwM0E4JyxcbiAgT21lZ2E6ICdcXHUwM0E5JyxcbiAgYWxwaGE6ICdcXHUwM0IxJyxcbiAgYmV0YTogJ1xcdTAzQjInLFxuICBnYW1tYTogJ1xcdTAzQjMnLFxuICBkZWx0YTogJ1xcdTAzQjQnLFxuICBlcHNpbG9uOiAnXFx1MDNCNScsXG4gIHpldGE6ICdcXHUwM0I2JyxcbiAgZXRhOiAnXFx1MDNCNycsXG4gIHRoZXRhOiAnXFx1MDNCOCcsXG4gIGlvdGE6ICdcXHUwM0I5JyxcbiAga2FwcGE6ICdcXHUwM0JBJyxcbiAgbGFtYmRhOiAnXFx1MDNCQicsXG4gIG11OiAnXFx1MDNCQycsXG4gIG51OiAnXFx1MDNCRCcsXG4gIHhpOiAnXFx1MDNCRScsXG4gIG9taWNyb246ICdcXHUwM0JGJyxcbiAgcGk6ICdcXHUwM0MwJyxcbiAgcmhvOiAnXFx1MDNDMScsXG4gIHNpZ21hZjogJ1xcdTAzQzInLFxuICBzaWdtYTogJ1xcdTAzQzMnLFxuICB0YXU6ICdcXHUwM0M0JyxcbiAgdXBzaWxvbjogJ1xcdTAzQzUnLFxuICBwaGk6ICdcXHUwM0M2JyxcbiAgY2hpOiAnXFx1MDNDNycsXG4gIHBzaTogJ1xcdTAzQzgnLFxuICBvbWVnYTogJ1xcdTAzQzknLFxuICB0aGV0YXN5bTogJ1xcdTAzRDEnLFxuICB1cHNpaDogJ1xcdTAzRDInLFxuICBwaXY6ICdcXHUwM0Q2JyxcbiAgZW5zcDogJ1xcdTIwMDInLFxuICBlbXNwOiAnXFx1MjAwMycsXG4gIHRoaW5zcDogJ1xcdTIwMDknLFxuICB6d25qOiAnXFx1MjAwQycsXG4gIHp3ajogJ1xcdTIwMEQnLFxuICBscm06ICdcXHUyMDBFJyxcbiAgcmxtOiAnXFx1MjAwRicsXG4gIG5kYXNoOiAnXFx1MjAxMycsXG4gIG1kYXNoOiAnXFx1MjAxNCcsXG4gIGxzcXVvOiAnXFx1MjAxOCcsXG4gIHJzcXVvOiAnXFx1MjAxOScsXG4gIHNicXVvOiAnXFx1MjAxQScsXG4gIGxkcXVvOiAnXFx1MjAxQycsXG4gIHJkcXVvOiAnXFx1MjAxRCcsXG4gIGJkcXVvOiAnXFx1MjAxRScsXG4gIGRhZ2dlcjogJ1xcdTIwMjAnLFxuICBEYWdnZXI6ICdcXHUyMDIxJyxcbiAgYnVsbDogJ1xcdTIwMjInLFxuICBoZWxsaXA6ICdcXHUyMDI2JyxcbiAgcGVybWlsOiAnXFx1MjAzMCcsXG4gIHByaW1lOiAnXFx1MjAzMicsXG4gIFByaW1lOiAnXFx1MjAzMycsXG4gIGxzYXF1bzogJ1xcdTIwMzknLFxuICByc2FxdW86ICdcXHUyMDNBJyxcbiAgb2xpbmU6ICdcXHUyMDNFJyxcbiAgZnJhc2w6ICdcXHUyMDQ0JyxcbiAgZXVybzogJ1xcdTIwQUMnLFxuICBpbWFnZTogJ1xcdTIxMTEnLFxuICB3ZWllcnA6ICdcXHUyMTE4JyxcbiAgcmVhbDogJ1xcdTIxMUMnLFxuICB0cmFkZTogJ1xcdTIxMjInLFxuICBhbGVmc3ltOiAnXFx1MjEzNScsXG4gIGxhcnI6ICdcXHUyMTkwJyxcbiAgdWFycjogJ1xcdTIxOTEnLFxuICByYXJyOiAnXFx1MjE5MicsXG4gIGRhcnI6ICdcXHUyMTkzJyxcbiAgaGFycjogJ1xcdTIxOTQnLFxuICBjcmFycjogJ1xcdTIxQjUnLFxuICBsQXJyOiAnXFx1MjFEMCcsXG4gIHVBcnI6ICdcXHUyMUQxJyxcbiAgckFycjogJ1xcdTIxRDInLFxuICBkQXJyOiAnXFx1MjFEMycsXG4gIGhBcnI6ICdcXHUyMUQ0JyxcbiAgZm9yYWxsOiAnXFx1MjIwMCcsXG4gIHBhcnQ6ICdcXHUyMjAyJyxcbiAgZXhpc3Q6ICdcXHUyMjAzJyxcbiAgZW1wdHk6ICdcXHUyMjA1JyxcbiAgbmFibGE6ICdcXHUyMjA3JyxcbiAgaXNpbjogJ1xcdTIyMDgnLFxuICBub3RpbjogJ1xcdTIyMDknLFxuICBuaTogJ1xcdTIyMEInLFxuICBwcm9kOiAnXFx1MjIwRicsXG4gIHN1bTogJ1xcdTIyMTEnLFxuICBtaW51czogJ1xcdTIyMTInLFxuICBsb3dhc3Q6ICdcXHUyMjE3JyxcbiAgcmFkaWM6ICdcXHUyMjFBJyxcbiAgcHJvcDogJ1xcdTIyMUQnLFxuICBpbmZpbjogJ1xcdTIyMUUnLFxuICBhbmc6ICdcXHUyMjIwJyxcbiAgYW5kOiAnXFx1MjIyNycsXG4gIG9yOiAnXFx1MjIyOCcsXG4gIGNhcDogJ1xcdTIyMjknLFxuICBjdXA6ICdcXHUyMjJBJyxcbiAgJ2ludCc6ICdcXHUyMjJCJyxcbiAgdGhlcmU0OiAnXFx1MjIzNCcsXG4gIHNpbTogJ1xcdTIyM0MnLFxuICBjb25nOiAnXFx1MjI0NScsXG4gIGFzeW1wOiAnXFx1MjI0OCcsXG4gIG5lOiAnXFx1MjI2MCcsXG4gIGVxdWl2OiAnXFx1MjI2MScsXG4gIGxlOiAnXFx1MjI2NCcsXG4gIGdlOiAnXFx1MjI2NScsXG4gIHN1YjogJ1xcdTIyODInLFxuICBzdXA6ICdcXHUyMjgzJyxcbiAgbnN1YjogJ1xcdTIyODQnLFxuICBzdWJlOiAnXFx1MjI4NicsXG4gIHN1cGU6ICdcXHUyMjg3JyxcbiAgb3BsdXM6ICdcXHUyMjk1JyxcbiAgb3RpbWVzOiAnXFx1MjI5NycsXG4gIHBlcnA6ICdcXHUyMkE1JyxcbiAgc2RvdDogJ1xcdTIyQzUnLFxuICBsY2VpbDogJ1xcdTIzMDgnLFxuICByY2VpbDogJ1xcdTIzMDknLFxuICBsZmxvb3I6ICdcXHUyMzBBJyxcbiAgcmZsb29yOiAnXFx1MjMwQicsXG4gIGxhbmc6ICdcXHUyMzI5JyxcbiAgcmFuZzogJ1xcdTIzMkEnLFxuICBsb3o6ICdcXHUyNUNBJyxcbiAgc3BhZGVzOiAnXFx1MjY2MCcsXG4gIGNsdWJzOiAnXFx1MjY2MycsXG4gIGhlYXJ0czogJ1xcdTI2NjUnLFxuICBkaWFtczogJ1xcdTI2NjYnXG59O1xuXG52YXIgaGV4TnVtYmVyID0gL15bXFxkYS1mQS1GXSskLztcbnZhciBkZWNpbWFsTnVtYmVyID0gL15cXGQrJC87XG5cbnZhciBpbmplY3QgPSBmdW5jdGlvbihhY29ybiQkMSkge1xuICB2YXIgdHQgPSBhY29ybiQkMS50b2tUeXBlcztcbiAgdmFyIHRjID0gYWNvcm4kJDEudG9rQ29udGV4dHM7XG5cbiAgdGMual9vVGFnID0gbmV3IGFjb3JuJCQxLlRva0NvbnRleHQoJzx0YWcnLCBmYWxzZSk7XG4gIHRjLmpfY1RhZyA9IG5ldyBhY29ybiQkMS5Ub2tDb250ZXh0KCc8L3RhZycsIGZhbHNlKTtcbiAgdGMual9leHByID0gbmV3IGFjb3JuJCQxLlRva0NvbnRleHQoJzx0YWc+Li4uPC90YWc+JywgdHJ1ZSwgdHJ1ZSk7XG5cbiAgdHQuanN4TmFtZSA9IG5ldyBhY29ybiQkMS5Ub2tlblR5cGUoJ2pzeE5hbWUnKTtcbiAgdHQuanN4VGV4dCA9IG5ldyBhY29ybiQkMS5Ub2tlblR5cGUoJ2pzeFRleHQnLCB7YmVmb3JlRXhwcjogdHJ1ZX0pO1xuICB0dC5qc3hUYWdTdGFydCA9IG5ldyBhY29ybiQkMS5Ub2tlblR5cGUoJ2pzeFRhZ1N0YXJ0Jyk7XG4gIHR0LmpzeFRhZ0VuZCA9IG5ldyBhY29ybiQkMS5Ub2tlblR5cGUoJ2pzeFRhZ0VuZCcpO1xuXG4gIHR0LmpzeFRhZ1N0YXJ0LnVwZGF0ZUNvbnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNvbnRleHQucHVzaCh0Yy5qX2V4cHIpOyAvLyB0cmVhdCBhcyBiZWdpbm5pbmcgb2YgSlNYIGV4cHJlc3Npb25cbiAgICB0aGlzLmNvbnRleHQucHVzaCh0Yy5qX29UYWcpOyAvLyBzdGFydCBvcGVuaW5nIHRhZyBjb250ZXh0XG4gICAgdGhpcy5leHByQWxsb3dlZCA9IGZhbHNlO1xuICB9O1xuICB0dC5qc3hUYWdFbmQudXBkYXRlQ29udGV4dCA9IGZ1bmN0aW9uKHByZXZUeXBlKSB7XG4gICAgdmFyIG91dCA9IHRoaXMuY29udGV4dC5wb3AoKTtcbiAgICBpZiAob3V0ID09PSB0Yy5qX29UYWcgJiYgcHJldlR5cGUgPT09IHR0LnNsYXNoIHx8IG91dCA9PT0gdGMual9jVGFnKSB7XG4gICAgICB0aGlzLmNvbnRleHQucG9wKCk7XG4gICAgICB0aGlzLmV4cHJBbGxvd2VkID0gdGhpcy5jdXJDb250ZXh0KCkgPT09IHRjLmpfZXhwcjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5leHByQWxsb3dlZCA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIHZhciBwcCA9IGFjb3JuJCQxLlBhcnNlci5wcm90b3R5cGU7XG5cbiAgLy8gUmVhZHMgaW5saW5lIEpTWCBjb250ZW50cyB0b2tlbi5cblxuICBwcC5qc3hfcmVhZFRva2VuID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG91dCA9ICcnLCBjaHVua1N0YXJ0ID0gdGhpcy5wb3M7XG4gICAgZm9yICg7Oykge1xuICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMuaW5wdXQubGVuZ3RoKVxuICAgICAgICB0aGlzLnJhaXNlKHRoaXMuc3RhcnQsICdVbnRlcm1pbmF0ZWQgSlNYIGNvbnRlbnRzJyk7XG4gICAgICB2YXIgY2ggPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MpO1xuXG4gICAgICBzd2l0Y2ggKGNoKSB7XG4gICAgICBjYXNlIDYwOiAvLyAnPCdcbiAgICAgIGNhc2UgMTIzOiAvLyAneydcbiAgICAgICAgaWYgKHRoaXMucG9zID09PSB0aGlzLnN0YXJ0KSB7XG4gICAgICAgICAgaWYgKGNoID09PSA2MCAmJiB0aGlzLmV4cHJBbGxvd2VkKSB7XG4gICAgICAgICAgICArK3RoaXMucG9zO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHQuanN4VGFnU3RhcnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUb2tlbkZyb21Db2RlKGNoKTtcbiAgICAgICAgfVxuICAgICAgICBvdXQgKz0gdGhpcy5pbnB1dC5zbGljZShjaHVua1N0YXJ0LCB0aGlzLnBvcyk7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR0LmpzeFRleHQsIG91dCk7XG5cbiAgICAgIGNhc2UgMzg6IC8vICcmJ1xuICAgICAgICBvdXQgKz0gdGhpcy5pbnB1dC5zbGljZShjaHVua1N0YXJ0LCB0aGlzLnBvcyk7XG4gICAgICAgIG91dCArPSB0aGlzLmpzeF9yZWFkRW50aXR5KCk7XG4gICAgICAgIGNodW5rU3RhcnQgPSB0aGlzLnBvcztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChhY29ybiQkMS5pc05ld0xpbmUoY2gpKSB7XG4gICAgICAgICAgb3V0ICs9IHRoaXMuaW5wdXQuc2xpY2UoY2h1bmtTdGFydCwgdGhpcy5wb3MpO1xuICAgICAgICAgIG91dCArPSB0aGlzLmpzeF9yZWFkTmV3TGluZSh0cnVlKTtcbiAgICAgICAgICBjaHVua1N0YXJ0ID0gdGhpcy5wb3M7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgKyt0aGlzLnBvcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBwcC5qc3hfcmVhZE5ld0xpbmUgPSBmdW5jdGlvbihub3JtYWxpemVDUkxGKSB7XG4gICAgdmFyIGNoID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zKTtcbiAgICB2YXIgb3V0O1xuICAgICsrdGhpcy5wb3M7XG4gICAgaWYgKGNoID09PSAxMyAmJiB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MpID09PSAxMCkge1xuICAgICAgKyt0aGlzLnBvcztcbiAgICAgIG91dCA9IG5vcm1hbGl6ZUNSTEYgPyAnXFxuJyA6ICdcXHJcXG4nO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdXQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpIHtcbiAgICAgICsrdGhpcy5jdXJMaW5lO1xuICAgICAgdGhpcy5saW5lU3RhcnQgPSB0aGlzLnBvcztcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0O1xuICB9O1xuXG4gIHBwLmpzeF9yZWFkU3RyaW5nID0gZnVuY3Rpb24ocXVvdGUpIHtcbiAgICB2YXIgb3V0ID0gJycsIGNodW5rU3RhcnQgPSArK3RoaXMucG9zO1xuICAgIGZvciAoOzspIHtcbiAgICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLmlucHV0Lmxlbmd0aClcbiAgICAgICAgdGhpcy5yYWlzZSh0aGlzLnN0YXJ0LCAnVW50ZXJtaW5hdGVkIHN0cmluZyBjb25zdGFudCcpO1xuICAgICAgdmFyIGNoID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zKTtcbiAgICAgIGlmIChjaCA9PT0gcXVvdGUpIGJyZWFrO1xuICAgICAgaWYgKGNoID09PSAzOCkgeyAvLyAnJidcbiAgICAgICAgb3V0ICs9IHRoaXMuaW5wdXQuc2xpY2UoY2h1bmtTdGFydCwgdGhpcy5wb3MpO1xuICAgICAgICBvdXQgKz0gdGhpcy5qc3hfcmVhZEVudGl0eSgpO1xuICAgICAgICBjaHVua1N0YXJ0ID0gdGhpcy5wb3M7XG4gICAgICB9IGVsc2UgaWYgKGFjb3JuJCQxLmlzTmV3TGluZShjaCkpIHtcbiAgICAgICAgb3V0ICs9IHRoaXMuaW5wdXQuc2xpY2UoY2h1bmtTdGFydCwgdGhpcy5wb3MpO1xuICAgICAgICBvdXQgKz0gdGhpcy5qc3hfcmVhZE5ld0xpbmUoZmFsc2UpO1xuICAgICAgICBjaHVua1N0YXJ0ID0gdGhpcy5wb3M7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICArK3RoaXMucG9zO1xuICAgICAgfVxuICAgIH1cbiAgICBvdXQgKz0gdGhpcy5pbnB1dC5zbGljZShjaHVua1N0YXJ0LCB0aGlzLnBvcysrKTtcbiAgICByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0dC5zdHJpbmcsIG91dCk7XG4gIH07XG5cbiAgcHAuanN4X3JlYWRFbnRpdHkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RyID0gJycsIGNvdW50ID0gMCwgZW50aXR5O1xuICAgIHZhciBjaCA9IHRoaXMuaW5wdXRbdGhpcy5wb3NdO1xuICAgIGlmIChjaCAhPT0gJyYnKVxuICAgICAgdGhpcy5yYWlzZSh0aGlzLnBvcywgJ0VudGl0eSBtdXN0IHN0YXJ0IHdpdGggYW4gYW1wZXJzYW5kJyk7XG4gICAgdmFyIHN0YXJ0UG9zID0gKyt0aGlzLnBvcztcbiAgICB3aGlsZSAodGhpcy5wb3MgPCB0aGlzLmlucHV0Lmxlbmd0aCAmJiBjb3VudCsrIDwgMTApIHtcbiAgICAgIGNoID0gdGhpcy5pbnB1dFt0aGlzLnBvcysrXTtcbiAgICAgIGlmIChjaCA9PT0gJzsnKSB7XG4gICAgICAgIGlmIChzdHJbMF0gPT09ICcjJykge1xuICAgICAgICAgIGlmIChzdHJbMV0gPT09ICd4Jykge1xuICAgICAgICAgICAgc3RyID0gc3RyLnN1YnN0cigyKTtcbiAgICAgICAgICAgIGlmIChoZXhOdW1iZXIudGVzdChzdHIpKVxuICAgICAgICAgICAgICBlbnRpdHkgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KHN0ciwgMTYpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyID0gc3RyLnN1YnN0cigxKTtcbiAgICAgICAgICAgIGlmIChkZWNpbWFsTnVtYmVyLnRlc3Qoc3RyKSlcbiAgICAgICAgICAgICAgZW50aXR5ID0gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChzdHIsIDEwKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVudGl0eSA9IHhodG1sW3N0cl07XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzdHIgKz0gY2g7XG4gICAgfVxuICAgIGlmICghZW50aXR5KSB7XG4gICAgICB0aGlzLnBvcyA9IHN0YXJ0UG9zO1xuICAgICAgcmV0dXJuICcmJztcbiAgICB9XG4gICAgcmV0dXJuIGVudGl0eTtcbiAgfTtcblxuXG4gIC8vIFJlYWQgYSBKU1ggaWRlbnRpZmllciAodmFsaWQgdGFnIG9yIGF0dHJpYnV0ZSBuYW1lKS5cbiAgLy9cbiAgLy8gT3B0aW1pemVkIHZlcnNpb24gc2luY2UgSlNYIGlkZW50aWZpZXJzIGNhbid0IGNvbnRhaW5cbiAgLy8gZXNjYXBlIGNoYXJhY3RlcnMgYW5kIHNvIGNhbiBiZSByZWFkIGFzIHNpbmdsZSBzbGljZS5cbiAgLy8gQWxzbyBhc3N1bWVzIHRoYXQgZmlyc3QgY2hhcmFjdGVyIHdhcyBhbHJlYWR5IGNoZWNrZWRcbiAgLy8gYnkgaXNJZGVudGlmaWVyU3RhcnQgaW4gcmVhZFRva2VuLlxuXG4gIHBwLmpzeF9yZWFkV29yZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjaCwgc3RhcnQgPSB0aGlzLnBvcztcbiAgICBkbyB7XG4gICAgICBjaCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCgrK3RoaXMucG9zKTtcbiAgICB9IHdoaWxlIChhY29ybiQkMS5pc0lkZW50aWZpZXJDaGFyKGNoKSB8fCBjaCA9PT0gNDUpOyAvLyAnLSdcbiAgICByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0dC5qc3hOYW1lLCB0aGlzLmlucHV0LnNsaWNlKHN0YXJ0LCB0aGlzLnBvcykpO1xuICB9O1xuXG4gIC8vIFRyYW5zZm9ybXMgSlNYIGVsZW1lbnQgbmFtZSB0byBzdHJpbmcuXG5cbiAgZnVuY3Rpb24gZ2V0UXVhbGlmaWVkSlNYTmFtZShvYmplY3QpIHtcbiAgICBpZiAoIW9iamVjdClcbiAgICAgIHJldHVybiBvYmplY3Q7XG5cbiAgICBpZiAob2JqZWN0LnR5cGUgPT09ICdKU1hJZGVudGlmaWVyJylcbiAgICAgIHJldHVybiBvYmplY3QubmFtZTtcblxuICAgIGlmIChvYmplY3QudHlwZSA9PT0gJ0pTWE5hbWVzcGFjZWROYW1lJylcbiAgICAgIHJldHVybiBvYmplY3QubmFtZXNwYWNlLm5hbWUgKyAnOicgKyBvYmplY3QubmFtZS5uYW1lO1xuXG4gICAgaWYgKG9iamVjdC50eXBlID09PSAnSlNYTWVtYmVyRXhwcmVzc2lvbicpXG4gICAgICByZXR1cm4gZ2V0UXVhbGlmaWVkSlNYTmFtZShvYmplY3Qub2JqZWN0KSArICcuJyArXG4gICAgICBnZXRRdWFsaWZpZWRKU1hOYW1lKG9iamVjdC5wcm9wZXJ0eSk7XG4gIH1cblxuICAvLyBQYXJzZSBuZXh0IHRva2VuIGFzIEpTWCBpZGVudGlmaWVyXG5cbiAgcHAuanN4X3BhcnNlSWRlbnRpZmllciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTtcbiAgICBpZiAodGhpcy50eXBlID09PSB0dC5qc3hOYW1lKVxuICAgICAgbm9kZS5uYW1lID0gdGhpcy52YWx1ZTtcbiAgICBlbHNlIGlmICh0aGlzLnR5cGUua2V5d29yZClcbiAgICAgIG5vZGUubmFtZSA9IHRoaXMudHlwZS5rZXl3b3JkO1xuICAgIGVsc2VcbiAgICAgIHRoaXMudW5leHBlY3RlZCgpO1xuICAgIHRoaXMubmV4dCgpO1xuICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgJ0pTWElkZW50aWZpZXInKTtcbiAgfTtcblxuICAvLyBQYXJzZSBuYW1lc3BhY2VkIGlkZW50aWZpZXIuXG5cbiAgcHAuanN4X3BhcnNlTmFtZXNwYWNlZE5hbWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RhcnRQb3MgPSB0aGlzLnN0YXJ0LCBzdGFydExvYyA9IHRoaXMuc3RhcnRMb2M7XG4gICAgdmFyIG5hbWUgPSB0aGlzLmpzeF9wYXJzZUlkZW50aWZpZXIoKTtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5wbHVnaW5zLmpzeC5hbGxvd05hbWVzcGFjZXMgfHwgIXRoaXMuZWF0KHR0LmNvbG9uKSkgcmV0dXJuIG5hbWU7XG4gICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0UG9zLCBzdGFydExvYyk7XG4gICAgbm9kZS5uYW1lc3BhY2UgPSBuYW1lO1xuICAgIG5vZGUubmFtZSA9IHRoaXMuanN4X3BhcnNlSWRlbnRpZmllcigpO1xuICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgJ0pTWE5hbWVzcGFjZWROYW1lJyk7XG4gIH07XG5cbiAgLy8gUGFyc2VzIGVsZW1lbnQgbmFtZSBpbiBhbnkgZm9ybSAtIG5hbWVzcGFjZWQsIG1lbWJlclxuICAvLyBvciBzaW5nbGUgaWRlbnRpZmllci5cblxuICBwcC5qc3hfcGFyc2VFbGVtZW50TmFtZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnR5cGUgPT09IHR0LmpzeFRhZ0VuZClcbiAgICAgIHJldHVybiAnJztcbiAgICB2YXIgc3RhcnRQb3MgPSB0aGlzLnN0YXJ0LCBzdGFydExvYyA9IHRoaXMuc3RhcnRMb2M7XG4gICAgdmFyIG5vZGUgPSB0aGlzLmpzeF9wYXJzZU5hbWVzcGFjZWROYW1lKCk7XG4gICAgaWYgKHRoaXMudHlwZSA9PT0gdHQuZG90ICYmIG5vZGUudHlwZSA9PT0gJ0pTWE5hbWVzcGFjZWROYW1lJyAmJiAhdGhpcy5vcHRpb25zLnBsdWdpbnMuanN4LmFsbG93TmFtZXNwYWNlZE9iamVjdHMpIHtcbiAgICAgIHRoaXMudW5leHBlY3RlZCgpO1xuICAgIH1cbiAgICB3aGlsZSAodGhpcy5lYXQodHQuZG90KSkge1xuICAgICAgdmFyIG5ld05vZGUgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0UG9zLCBzdGFydExvYyk7XG4gICAgICBuZXdOb2RlLm9iamVjdCA9IG5vZGU7XG4gICAgICBuZXdOb2RlLnByb3BlcnR5ID0gdGhpcy5qc3hfcGFyc2VJZGVudGlmaWVyKCk7XG4gICAgICBub2RlID0gdGhpcy5maW5pc2hOb2RlKG5ld05vZGUsICdKU1hNZW1iZXJFeHByZXNzaW9uJyk7XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xuICB9O1xuXG4gIC8vIFBhcnNlcyBhbnkgdHlwZSBvZiBKU1ggYXR0cmlidXRlIHZhbHVlLlxuXG4gIHBwLmpzeF9wYXJzZUF0dHJpYnV0ZVZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcbiAgICBjYXNlIHR0LmJyYWNlTDpcbiAgICAgIHZhciBub2RlID0gdGhpcy5qc3hfcGFyc2VFeHByZXNzaW9uQ29udGFpbmVyKCk7XG4gICAgICBpZiAobm9kZS5leHByZXNzaW9uLnR5cGUgPT09ICdKU1hFbXB0eUV4cHJlc3Npb24nKVxuICAgICAgICB0aGlzLnJhaXNlKG5vZGUuc3RhcnQsICdKU1ggYXR0cmlidXRlcyBtdXN0IG9ubHkgYmUgYXNzaWduZWQgYSBub24tZW1wdHkgZXhwcmVzc2lvbicpO1xuICAgICAgcmV0dXJuIG5vZGU7XG5cbiAgICBjYXNlIHR0LmpzeFRhZ1N0YXJ0OlxuICAgIGNhc2UgdHQuc3RyaW5nOlxuICAgICAgcmV0dXJuIHRoaXMucGFyc2VFeHByQXRvbSgpO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHRoaXMucmFpc2UodGhpcy5zdGFydCwgJ0pTWCB2YWx1ZSBzaG91bGQgYmUgZWl0aGVyIGFuIGV4cHJlc3Npb24gb3IgYSBxdW90ZWQgSlNYIHRleHQnKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gSlNYRW1wdHlFeHByZXNzaW9uIGlzIHVuaXF1ZSB0eXBlIHNpbmNlIGl0IGRvZXNuJ3QgYWN0dWFsbHkgcGFyc2UgYW55dGhpbmcsXG4gIC8vIGFuZCBzbyBpdCBzaG91bGQgc3RhcnQgYXQgdGhlIGVuZCBvZiBsYXN0IHJlYWQgdG9rZW4gKGxlZnQgYnJhY2UpIGFuZCBmaW5pc2hcbiAgLy8gYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgbmV4dCBvbmUgKHJpZ2h0IGJyYWNlKS5cblxuICBwcC5qc3hfcGFyc2VFbXB0eUV4cHJlc3Npb24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlQXQodGhpcy5sYXN0VG9rRW5kLCB0aGlzLmxhc3RUb2tFbmRMb2MpO1xuICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGVBdChub2RlLCAnSlNYRW1wdHlFeHByZXNzaW9uJywgdGhpcy5zdGFydCwgdGhpcy5zdGFydExvYyk7XG4gIH07XG5cbiAgLy8gUGFyc2VzIEpTWCBleHByZXNzaW9uIGVuY2xvc2VkIGludG8gY3VybHkgYnJhY2tldHMuXG5cblxuICBwcC5qc3hfcGFyc2VFeHByZXNzaW9uQ29udGFpbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpO1xuICAgIHRoaXMubmV4dCgpO1xuICAgIG5vZGUuZXhwcmVzc2lvbiA9IHRoaXMudHlwZSA9PT0gdHQuYnJhY2VSXG4gICAgICA/IHRoaXMuanN4X3BhcnNlRW1wdHlFeHByZXNzaW9uKClcbiAgICAgIDogdGhpcy5wYXJzZUV4cHJlc3Npb24oKTtcbiAgICB0aGlzLmV4cGVjdCh0dC5icmFjZVIpO1xuICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgJ0pTWEV4cHJlc3Npb25Db250YWluZXInKTtcbiAgfTtcblxuICAvLyBQYXJzZXMgZm9sbG93aW5nIEpTWCBhdHRyaWJ1dGUgbmFtZS12YWx1ZSBwYWlyLlxuXG4gIHBwLmpzeF9wYXJzZUF0dHJpYnV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTtcbiAgICBpZiAodGhpcy5lYXQodHQuYnJhY2VMKSkge1xuICAgICAgdGhpcy5leHBlY3QodHQuZWxsaXBzaXMpO1xuICAgICAgbm9kZS5hcmd1bWVudCA9IHRoaXMucGFyc2VNYXliZUFzc2lnbigpO1xuICAgICAgdGhpcy5leHBlY3QodHQuYnJhY2VSKTtcbiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgJ0pTWFNwcmVhZEF0dHJpYnV0ZScpO1xuICAgIH1cbiAgICBub2RlLm5hbWUgPSB0aGlzLmpzeF9wYXJzZU5hbWVzcGFjZWROYW1lKCk7XG4gICAgbm9kZS52YWx1ZSA9IHRoaXMuZWF0KHR0LmVxKSA/IHRoaXMuanN4X3BhcnNlQXR0cmlidXRlVmFsdWUoKSA6IG51bGw7XG4gICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAnSlNYQXR0cmlidXRlJyk7XG4gIH07XG5cbiAgLy8gUGFyc2VzIEpTWCBvcGVuaW5nIHRhZyBzdGFydGluZyBhZnRlciAnPCcuXG5cbiAgcHAuanN4X3BhcnNlT3BlbmluZ0VsZW1lbnRBdCA9IGZ1bmN0aW9uKHN0YXJ0UG9zLCBzdGFydExvYykge1xuICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGVBdChzdGFydFBvcywgc3RhcnRMb2MpO1xuICAgIG5vZGUuYXR0cmlidXRlcyA9IFtdO1xuICAgIHZhciBub2RlTmFtZSA9IHRoaXMuanN4X3BhcnNlRWxlbWVudE5hbWUoKTtcbiAgICBpZiAobm9kZU5hbWUpIG5vZGUubmFtZSA9IG5vZGVOYW1lO1xuICAgIHdoaWxlICh0aGlzLnR5cGUgIT09IHR0LnNsYXNoICYmIHRoaXMudHlwZSAhPT0gdHQuanN4VGFnRW5kKVxuICAgICAgbm9kZS5hdHRyaWJ1dGVzLnB1c2godGhpcy5qc3hfcGFyc2VBdHRyaWJ1dGUoKSk7XG4gICAgbm9kZS5zZWxmQ2xvc2luZyA9IHRoaXMuZWF0KHR0LnNsYXNoKTtcbiAgICB0aGlzLmV4cGVjdCh0dC5qc3hUYWdFbmQpO1xuICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgbm9kZU5hbWUgPyAnSlNYT3BlbmluZ0VsZW1lbnQnIDogJ0pTWE9wZW5pbmdGcmFnbWVudCcpO1xuICB9O1xuXG4gIC8vIFBhcnNlcyBKU1ggY2xvc2luZyB0YWcgc3RhcnRpbmcgYWZ0ZXIgJzwvJy5cblxuICBwcC5qc3hfcGFyc2VDbG9zaW5nRWxlbWVudEF0ID0gZnVuY3Rpb24oc3RhcnRQb3MsIHN0YXJ0TG9jKSB7XG4gICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0UG9zLCBzdGFydExvYyk7XG4gICAgdmFyIG5vZGVOYW1lID0gdGhpcy5qc3hfcGFyc2VFbGVtZW50TmFtZSgpO1xuICAgIGlmIChub2RlTmFtZSkgbm9kZS5uYW1lID0gbm9kZU5hbWU7XG4gICAgdGhpcy5leHBlY3QodHQuanN4VGFnRW5kKTtcbiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsIG5vZGVOYW1lID8gJ0pTWENsb3NpbmdFbGVtZW50JyA6ICdKU1hDbG9zaW5nRnJhZ21lbnQnKTtcbiAgfTtcblxuICAvLyBQYXJzZXMgZW50aXJlIEpTWCBlbGVtZW50LCBpbmNsdWRpbmcgaXQncyBvcGVuaW5nIHRhZ1xuICAvLyAoc3RhcnRpbmcgYWZ0ZXIgJzwnKSwgYXR0cmlidXRlcywgY29udGVudHMgYW5kIGNsb3NpbmcgdGFnLlxuXG4gIHBwLmpzeF9wYXJzZUVsZW1lbnRBdCA9IGZ1bmN0aW9uKHN0YXJ0UG9zLCBzdGFydExvYykge1xuICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGVBdChzdGFydFBvcywgc3RhcnRMb2MpO1xuICAgIHZhciBjaGlsZHJlbiA9IFtdO1xuICAgIHZhciBvcGVuaW5nRWxlbWVudCA9IHRoaXMuanN4X3BhcnNlT3BlbmluZ0VsZW1lbnRBdChzdGFydFBvcywgc3RhcnRMb2MpO1xuICAgIHZhciBjbG9zaW5nRWxlbWVudCA9IG51bGw7XG5cbiAgICBpZiAoIW9wZW5pbmdFbGVtZW50LnNlbGZDbG9zaW5nKSB7XG4gICAgICBjb250ZW50czogZm9yICg7Oykge1xuICAgICAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xuICAgICAgICBjYXNlIHR0LmpzeFRhZ1N0YXJ0OlxuICAgICAgICAgIHN0YXJ0UG9zID0gdGhpcy5zdGFydDsgc3RhcnRMb2MgPSB0aGlzLnN0YXJ0TG9jO1xuICAgICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICAgIGlmICh0aGlzLmVhdCh0dC5zbGFzaCkpIHtcbiAgICAgICAgICAgIGNsb3NpbmdFbGVtZW50ID0gdGhpcy5qc3hfcGFyc2VDbG9zaW5nRWxlbWVudEF0KHN0YXJ0UG9zLCBzdGFydExvYyk7XG4gICAgICAgICAgICBicmVhayBjb250ZW50cztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2hpbGRyZW4ucHVzaCh0aGlzLmpzeF9wYXJzZUVsZW1lbnRBdChzdGFydFBvcywgc3RhcnRMb2MpKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIHR0LmpzeFRleHQ6XG4gICAgICAgICAgY2hpbGRyZW4ucHVzaCh0aGlzLnBhcnNlRXhwckF0b20oKSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSB0dC5icmFjZUw6XG4gICAgICAgICAgY2hpbGRyZW4ucHVzaCh0aGlzLmpzeF9wYXJzZUV4cHJlc3Npb25Db250YWluZXIoKSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aGlzLnVuZXhwZWN0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGdldFF1YWxpZmllZEpTWE5hbWUoY2xvc2luZ0VsZW1lbnQubmFtZSkgIT09IGdldFF1YWxpZmllZEpTWE5hbWUob3BlbmluZ0VsZW1lbnQubmFtZSkpIHtcbiAgICAgICAgdGhpcy5yYWlzZShcbiAgICAgICAgICBjbG9zaW5nRWxlbWVudC5zdGFydCxcbiAgICAgICAgICAnRXhwZWN0ZWQgY29ycmVzcG9uZGluZyBKU1ggY2xvc2luZyB0YWcgZm9yIDwnICsgZ2V0UXVhbGlmaWVkSlNYTmFtZShvcGVuaW5nRWxlbWVudC5uYW1lKSArICc+Jyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbm9kZS5vcGVuaW5nRWxlbWVudCA9IG9wZW5pbmdFbGVtZW50O1xuICAgIG5vZGUuY2xvc2luZ0VsZW1lbnQgPSBjbG9zaW5nRWxlbWVudDtcbiAgICBub2RlLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgaWYgKHRoaXMudHlwZSA9PT0gdHQucmVsYXRpb25hbCAmJiB0aGlzLnZhbHVlID09PSBcIjxcIikge1xuICAgICAgdGhpcy5yYWlzZSh0aGlzLnN0YXJ0LCBcIkFkamFjZW50IEpTWCBlbGVtZW50cyBtdXN0IGJlIHdyYXBwZWQgaW4gYW4gZW5jbG9zaW5nIHRhZ1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCBvcGVuaW5nRWxlbWVudC5uYW1lID8gJ0pTWEVsZW1lbnQnIDogJ0pTWEZyYWdtZW50Jyk7XG4gIH07XG5cbiAgLy8gUGFyc2UgSlNYIHRleHRcblxuICBwcC5qc3hfcGFyc2VUZXh0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YXIgbm9kZSA9IHRoaXMucGFyc2VMaXRlcmFsKHZhbHVlKTtcbiAgICBub2RlLnR5cGUgPSBcIkpTWFRleHRcIjtcblxuICAgIHJldHVybiBub2RlO1xuICB9O1xuXG4gIC8vIFBhcnNlcyBlbnRpcmUgSlNYIGVsZW1lbnQgZnJvbSBjdXJyZW50IHBvc2l0aW9uLlxuXG4gIHBwLmpzeF9wYXJzZUVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RhcnRQb3MgPSB0aGlzLnN0YXJ0LCBzdGFydExvYyA9IHRoaXMuc3RhcnRMb2M7XG4gICAgdGhpcy5uZXh0KCk7XG4gICAgcmV0dXJuIHRoaXMuanN4X3BhcnNlRWxlbWVudEF0KHN0YXJ0UG9zLCBzdGFydExvYyk7XG4gIH07XG5cbiAgYWNvcm4kJDEucGx1Z2lucy5qc3ggPSBmdW5jdGlvbihpbnN0YW5jZSwgb3B0cykge1xuICAgIGlmICghb3B0cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb3B0cyAhPT0gJ29iamVjdCcpIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICBpbnN0YW5jZS5vcHRpb25zLnBsdWdpbnMuanN4ID0ge1xuICAgICAgYWxsb3dOYW1lc3BhY2VzOiBvcHRzLmFsbG93TmFtZXNwYWNlcyAhPT0gZmFsc2UsXG4gICAgICBhbGxvd05hbWVzcGFjZWRPYmplY3RzOiAhIW9wdHMuYWxsb3dOYW1lc3BhY2VkT2JqZWN0c1xuICAgIH07XG5cbiAgICBpbnN0YW5jZS5leHRlbmQoJ3BhcnNlRXhwckF0b20nLCBmdW5jdGlvbihpbm5lcikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlZlNob3J0SGFuZERlZmF1bHRQb3MpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gdHQuanN4VGV4dClcbiAgICAgICAgICByZXR1cm4gdGhpcy5qc3hfcGFyc2VUZXh0KHRoaXMudmFsdWUpO1xuICAgICAgICBlbHNlIGlmICh0aGlzLnR5cGUgPT09IHR0LmpzeFRhZ1N0YXJ0KVxuICAgICAgICAgIHJldHVybiB0aGlzLmpzeF9wYXJzZUVsZW1lbnQoKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHJldHVybiBpbm5lci5jYWxsKHRoaXMsIHJlZlNob3J0SGFuZERlZmF1bHRQb3MpO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIGluc3RhbmNlLmV4dGVuZCgncmVhZFRva2VuJywgZnVuY3Rpb24oaW5uZXIpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihjb2RlKSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jdXJDb250ZXh0KCk7XG5cbiAgICAgICAgaWYgKGNvbnRleHQgPT09IHRjLmpfZXhwcikgcmV0dXJuIHRoaXMuanN4X3JlYWRUb2tlbigpO1xuXG4gICAgICAgIGlmIChjb250ZXh0ID09PSB0Yy5qX29UYWcgfHwgY29udGV4dCA9PT0gdGMual9jVGFnKSB7XG4gICAgICAgICAgaWYgKGFjb3JuJCQxLmlzSWRlbnRpZmllclN0YXJ0KGNvZGUpKSByZXR1cm4gdGhpcy5qc3hfcmVhZFdvcmQoKTtcblxuICAgICAgICAgIGlmIChjb2RlID09IDYyKSB7XG4gICAgICAgICAgICArK3RoaXMucG9zO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHQuanN4VGFnRW5kKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoKGNvZGUgPT09IDM0IHx8IGNvZGUgPT09IDM5KSAmJiBjb250ZXh0ID09IHRjLmpfb1RhZylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmpzeF9yZWFkU3RyaW5nKGNvZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvZGUgPT09IDYwICYmIHRoaXMuZXhwckFsbG93ZWQgJiYgdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMSkgIT09IDMzKSB7XG4gICAgICAgICAgKyt0aGlzLnBvcztcbiAgICAgICAgICByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0dC5qc3hUYWdTdGFydCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlubmVyLmNhbGwodGhpcywgY29kZSk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgaW5zdGFuY2UuZXh0ZW5kKCd1cGRhdGVDb250ZXh0JywgZnVuY3Rpb24oaW5uZXIpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihwcmV2VHlwZSkge1xuICAgICAgICBpZiAodGhpcy50eXBlID09IHR0LmJyYWNlTCkge1xuICAgICAgICAgIHZhciBjdXJDb250ZXh0ID0gdGhpcy5jdXJDb250ZXh0KCk7XG4gICAgICAgICAgaWYgKGN1ckNvbnRleHQgPT0gdGMual9vVGFnKSB0aGlzLmNvbnRleHQucHVzaCh0Yy5iX2V4cHIpO1xuICAgICAgICAgIGVsc2UgaWYgKGN1ckNvbnRleHQgPT0gdGMual9leHByKSB0aGlzLmNvbnRleHQucHVzaCh0Yy5iX3RtcGwpO1xuICAgICAgICAgIGVsc2UgaW5uZXIuY2FsbCh0aGlzLCBwcmV2VHlwZSk7XG4gICAgICAgICAgdGhpcy5leHByQWxsb3dlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSB0dC5zbGFzaCAmJiBwcmV2VHlwZSA9PT0gdHQuanN4VGFnU3RhcnQpIHtcbiAgICAgICAgICB0aGlzLmNvbnRleHQubGVuZ3RoIC09IDI7IC8vIGRvIG5vdCBjb25zaWRlciBKU1ggZXhwciAtPiBKU1ggb3BlbiB0YWcgLT4gLi4uIGFueW1vcmVcbiAgICAgICAgICB0aGlzLmNvbnRleHQucHVzaCh0Yy5qX2NUYWcpOyAvLyByZWNvbnNpZGVyIGFzIGNsb3NpbmcgdGFnIGNvbnRleHRcbiAgICAgICAgICB0aGlzLmV4cHJBbGxvd2VkID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGlubmVyLmNhbGwodGhpcywgcHJldlR5cGUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBhY29ybiQkMTtcbn07XG5cbnZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDoge307XG5cbmZ1bmN0aW9uIGNvbW1vbmpzUmVxdWlyZSAoKSB7XG5cdHRocm93IG5ldyBFcnJvcignRHluYW1pYyByZXF1aXJlcyBhcmUgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgYnkgcm9sbHVwLXBsdWdpbi1jb21tb25qcycpO1xufVxuXG5mdW5jdGlvbiB1bndyYXBFeHBvcnRzICh4KSB7XG5cdHJldHVybiB4ICYmIHguX19lc01vZHVsZSAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoeCwgJ2RlZmF1bHQnKSA/IHhbJ2RlZmF1bHQnXSA6IHg7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZuLCBtb2R1bGUpIHtcblx0cmV0dXJuIG1vZHVsZSA9IHsgZXhwb3J0czoge30gfSwgZm4obW9kdWxlLCBtb2R1bGUuZXhwb3J0cyksIG1vZHVsZS5leHBvcnRzO1xufVxuXG52YXIgaW5qZWN0JDEgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0c1snZGVmYXVsdCddID0gaW5qZWN0RHluYW1pY0ltcG9ydDtcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVyc2NvcmUtZGFuZ2xlICovXG5cbnZhciBEeW5hbWljSW1wb3J0S2V5ID0gZXhwb3J0cy5EeW5hbWljSW1wb3J0S2V5ID0gJ0ltcG9ydCc7XG5cbmZ1bmN0aW9uIGluamVjdER5bmFtaWNJbXBvcnQoYWNvcm4kJDEpIHtcbiAgdmFyIHR0ID0gYWNvcm4kJDEudG9rVHlwZXM7XG5cbiAgLy8gTk9URTogVGhpcyBhbGxvd3MgYHlpZWxkIGltcG9ydCgpYCB0byBwYXJzZSBjb3JyZWN0bHkuXG4gIHR0Ll9pbXBvcnQuc3RhcnRzRXhwciA9IHRydWU7XG5cbiAgZnVuY3Rpb24gcGFyc2VEeW5hbWljSW1wb3J0KCkge1xuICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTtcbiAgICB0aGlzLm5leHQoKTtcbiAgICBpZiAodGhpcy50eXBlICE9PSB0dC5wYXJlbkwpIHtcbiAgICAgIHRoaXMudW5leHBlY3RlZCgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsIER5bmFtaWNJbXBvcnRLZXkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGVla05leHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXRbdGhpcy5wb3NdO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gIGFjb3JuJCQxLnBsdWdpbnMuZHluYW1pY0ltcG9ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBkeW5hbWljSW1wb3J0UGx1Z2luKGluc3RhbmNlKSB7XG4gICAgICBpbnN0YW5jZS5leHRlbmQoJ3BhcnNlU3RhdGVtZW50JywgZnVuY3Rpb24gKG5leHRNZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmdW5jdGlvbiBwYXJzZVN0YXRlbWVudCgpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09IHR0Ll9pbXBvcnQpIHtcbiAgICAgICAgICAgICAgdmFyIG5leHRUb2tlbiA9IHBlZWtOZXh0LmNhbGwodGhpcyk7XG4gICAgICAgICAgICAgIGlmIChuZXh0VG9rZW4gPT09IHR0LnBhcmVuTC5sYWJlbCkge1xuICAgICAgICAgICAgICAgIHZhciBleHByID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUV4cHJlc3Npb25TdGF0ZW1lbnQobm9kZSwgZXhwcik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5leHRNZXRob2QuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHBhcnNlU3RhdGVtZW50O1xuICAgICAgICB9KCk7XG4gICAgICB9KTtcblxuICAgICAgaW5zdGFuY2UuZXh0ZW5kKCdwYXJzZUV4cHJBdG9tJywgZnVuY3Rpb24gKG5leHRNZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmdW5jdGlvbiBwYXJzZUV4cHJBdG9tKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09IHR0Ll9pbXBvcnQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRHluYW1pY0ltcG9ydC5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5leHRNZXRob2QuY2FsbCh0aGlzLCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gcGFyc2VFeHByQXRvbTtcbiAgICAgICAgfSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGR5bmFtaWNJbXBvcnRQbHVnaW47XG4gIH0oKTtcblxuICByZXR1cm4gYWNvcm4kJDE7XG59XG59KTtcblxudmFyIGFjb3JuRHluYW1pY0ltcG9ydCA9IHVud3JhcEV4cG9ydHMoaW5qZWN0JDEpO1xudmFyIGluamVjdF8xID0gaW5qZWN0JDEuRHluYW1pY0ltcG9ydEtleTtcblxuLy8gdXNlZCBmb3IgZGVidWdnaW5nLCB3aXRob3V0IHRoZSBub2lzZSBjcmVhdGVkIGJ5XG4vLyBjaXJjdWxhciByZWZlcmVuY2VzXG5mdW5jdGlvbiB0b0pTT04obm9kZSkge1xuXHR2YXIgb2JqID0ge307XG5cblx0T2JqZWN0LmtleXMobm9kZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0aWYgKFxuXHRcdFx0a2V5ID09PSAncGFyZW50JyB8fFxuXHRcdFx0a2V5ID09PSAncHJvZ3JhbScgfHxcblx0XHRcdGtleSA9PT0gJ2tleXMnIHx8XG5cdFx0XHRrZXkgPT09ICdfX3dyYXBwZWQnXG5cdFx0KVxuXHRcdFx0eyByZXR1cm47IH1cblxuXHRcdGlmIChBcnJheS5pc0FycmF5KG5vZGVba2V5XSkpIHtcblx0XHRcdG9ialtrZXldID0gbm9kZVtrZXldLm1hcCh0b0pTT04pO1xuXHRcdH0gZWxzZSBpZiAobm9kZVtrZXldICYmIG5vZGVba2V5XS50b0pTT04pIHtcblx0XHRcdG9ialtrZXldID0gbm9kZVtrZXldLnRvSlNPTigpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRvYmpba2V5XSA9IG5vZGVba2V5XTtcblx0XHR9XG5cdH0pO1xuXG5cdHJldHVybiBvYmo7XG59XG5cbnZhciBOb2RlID0gZnVuY3Rpb24gTm9kZSAoKSB7fTtcblxuTm9kZS5wcm90b3R5cGUuYW5jZXN0b3IgPSBmdW5jdGlvbiBhbmNlc3RvciAobGV2ZWwpIHtcblx0dmFyIG5vZGUgPSB0aGlzO1xuXHR3aGlsZSAobGV2ZWwtLSkge1xuXHRcdG5vZGUgPSBub2RlLnBhcmVudDtcblx0XHRpZiAoIW5vZGUpIHsgcmV0dXJuIG51bGw7IH1cblx0fVxuXG5cdHJldHVybiBub2RlO1xufTtcblxuTm9kZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiBjb250YWlucyAobm9kZSkge1xuXHRcdHZhciB0aGlzJDEgPSB0aGlzO1xuXG5cdHdoaWxlIChub2RlKSB7XG5cdFx0aWYgKG5vZGUgPT09IHRoaXMkMSkgeyByZXR1cm4gdHJ1ZTsgfVxuXHRcdG5vZGUgPSBub2RlLnBhcmVudDtcblx0fVxuXG5cdHJldHVybiBmYWxzZTtcbn07XG5cbk5vZGUucHJvdG90eXBlLmZpbmRMZXhpY2FsQm91bmRhcnkgPSBmdW5jdGlvbiBmaW5kTGV4aWNhbEJvdW5kYXJ5ICgpIHtcblx0cmV0dXJuIHRoaXMucGFyZW50LmZpbmRMZXhpY2FsQm91bmRhcnkoKTtcbn07XG5cbk5vZGUucHJvdG90eXBlLmZpbmROZWFyZXN0ID0gZnVuY3Rpb24gZmluZE5lYXJlc3QgKHR5cGUpIHtcblx0aWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykgeyB0eXBlID0gbmV3IFJlZ0V4cCgoXCJeXCIgKyB0eXBlICsgXCIkXCIpKTsgfVxuXHRpZiAodHlwZS50ZXN0KHRoaXMudHlwZSkpIHsgcmV0dXJuIHRoaXM7IH1cblx0cmV0dXJuIHRoaXMucGFyZW50LmZpbmROZWFyZXN0KHR5cGUpO1xufTtcblxuTm9kZS5wcm90b3R5cGUudW5wYXJlbnRoZXNpemVkUGFyZW50ID0gZnVuY3Rpb24gdW5wYXJlbnRoZXNpemVkUGFyZW50ICgpIHtcblx0dmFyIG5vZGUgPSB0aGlzLnBhcmVudDtcblx0d2hpbGUgKG5vZGUgJiYgbm9kZS50eXBlID09PSAnUGFyZW50aGVzaXplZEV4cHJlc3Npb24nKSB7XG5cdFx0bm9kZSA9IG5vZGUucGFyZW50O1xuXHR9XG5cdHJldHVybiBub2RlO1xufTtcblxuTm9kZS5wcm90b3R5cGUudW5wYXJlbnRoZXNpemUgPSBmdW5jdGlvbiB1bnBhcmVudGhlc2l6ZSAoKSB7XG5cdHZhciBub2RlID0gdGhpcztcblx0d2hpbGUgKG5vZGUudHlwZSA9PT0gJ1BhcmVudGhlc2l6ZWRFeHByZXNzaW9uJykge1xuXHRcdG5vZGUgPSBub2RlLmV4cHJlc3Npb247XG5cdH1cblx0cmV0dXJuIG5vZGU7XG59O1xuXG5Ob2RlLnByb3RvdHlwZS5maW5kU2NvcGUgPSBmdW5jdGlvbiBmaW5kU2NvcGUgKGZ1bmN0aW9uU2NvcGUpIHtcblx0cmV0dXJuIHRoaXMucGFyZW50LmZpbmRTY29wZShmdW5jdGlvblNjb3BlKTtcbn07XG5cbk5vZGUucHJvdG90eXBlLmdldEluZGVudGF0aW9uID0gZnVuY3Rpb24gZ2V0SW5kZW50YXRpb24gKCkge1xuXHRyZXR1cm4gdGhpcy5wYXJlbnQuZ2V0SW5kZW50YXRpb24oKTtcbn07XG5cbk5vZGUucHJvdG90eXBlLmluaXRpYWxpc2UgPSBmdW5jdGlvbiBpbml0aWFsaXNlICh0cmFuc2Zvcm1zKSB7XG5cdFx0dmFyIHRoaXMkMSA9IHRoaXM7XG5cblx0Zm9yICh2YXIgaSA9IDAsIGxpc3QgPSB0aGlzJDEua2V5czsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpIHtcblx0XHR2YXIga2V5ID0gbGlzdFtpXTtcblxuXHRcdFx0dmFyIHZhbHVlID0gdGhpcyQxW2tleV07XG5cblx0XHRpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdHZhbHVlLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUgJiYgbm9kZS5pbml0aWFsaXNlKHRyYW5zZm9ybXMpOyB9KTtcblx0XHR9IGVsc2UgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdHZhbHVlLmluaXRpYWxpc2UodHJhbnNmb3Jtcyk7XG5cdFx0fVxuXHR9XG59O1xuXG5Ob2RlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04kMSAoKSB7XG5cdHJldHVybiB0b0pTT04odGhpcyk7XG59O1xuXG5Ob2RlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHtcblx0cmV0dXJuIHRoaXMucHJvZ3JhbS5tYWdpY1N0cmluZy5vcmlnaW5hbC5zbGljZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XG59O1xuXG5Ob2RlLnByb3RvdHlwZS50cmFuc3BpbGUgPSBmdW5jdGlvbiB0cmFuc3BpbGUgKGNvZGUsIHRyYW5zZm9ybXMpIHtcblx0XHR2YXIgdGhpcyQxID0gdGhpcztcblxuXHRmb3IgKHZhciBpID0gMCwgbGlzdCA9IHRoaXMkMS5rZXlzOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdHZhciBrZXkgPSBsaXN0W2ldO1xuXG5cdFx0XHR2YXIgdmFsdWUgPSB0aGlzJDFba2V5XTtcblxuXHRcdGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHRcdFx0dmFsdWUuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZSAmJiBub2RlLnRyYW5zcGlsZShjb2RlLCB0cmFuc2Zvcm1zKTsgfSk7XG5cdFx0fSBlbHNlIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHR2YWx1ZS50cmFuc3BpbGUoY29kZSwgdHJhbnNmb3Jtcyk7XG5cdFx0fVxuXHR9XG59O1xuXG5mdW5jdGlvbiBleHRyYWN0TmFtZXMobm9kZSkge1xuXHR2YXIgbmFtZXMgPSBbXTtcblx0ZXh0cmFjdG9yc1tub2RlLnR5cGVdKG5hbWVzLCBub2RlKTtcblx0cmV0dXJuIG5hbWVzO1xufVxuXG52YXIgZXh0cmFjdG9ycyA9IHtcblx0SWRlbnRpZmllcjogZnVuY3Rpb24gSWRlbnRpZmllcihuYW1lcywgbm9kZSkge1xuXHRcdG5hbWVzLnB1c2gobm9kZSk7XG5cdH0sXG5cblx0T2JqZWN0UGF0dGVybjogZnVuY3Rpb24gT2JqZWN0UGF0dGVybihuYW1lcywgbm9kZSkge1xuXHRcdGZvciAodmFyIGkgPSAwLCBsaXN0ID0gbm9kZS5wcm9wZXJ0aWVzOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0dmFyIHByb3AgPSBsaXN0W2ldO1xuXG5cdFx0XHRleHRyYWN0b3JzW3Byb3AudHlwZV0obmFtZXMsIHByb3ApO1xuXHRcdH1cblx0fSxcblxuXHRQcm9wZXJ0eTogZnVuY3Rpb24gUHJvcGVydHkobmFtZXMsIG5vZGUpIHtcblx0XHRleHRyYWN0b3JzW25vZGUudmFsdWUudHlwZV0obmFtZXMsIG5vZGUudmFsdWUpO1xuXHR9LFxuXG5cdEFycmF5UGF0dGVybjogZnVuY3Rpb24gQXJyYXlQYXR0ZXJuKG5hbWVzLCBub2RlKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIGxpc3QgPSBub2RlLmVsZW1lbnRzOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0dmFyIGVsZW1lbnQgPSBsaXN0W2ldO1xuXG5cdFx0XHRpZiAoZWxlbWVudCkgeyBleHRyYWN0b3JzW2VsZW1lbnQudHlwZV0obmFtZXMsIGVsZW1lbnQpOyB9XG5cdFx0fVxuXHR9LFxuXG5cdFJlc3RFbGVtZW50OiBmdW5jdGlvbiBSZXN0RWxlbWVudChuYW1lcywgbm9kZSkge1xuXHRcdGV4dHJhY3RvcnNbbm9kZS5hcmd1bWVudC50eXBlXShuYW1lcywgbm9kZS5hcmd1bWVudCk7XG5cdH0sXG5cblx0QXNzaWdubWVudFBhdHRlcm46IGZ1bmN0aW9uIEFzc2lnbm1lbnRQYXR0ZXJuKG5hbWVzLCBub2RlKSB7XG5cdFx0ZXh0cmFjdG9yc1tub2RlLmxlZnQudHlwZV0obmFtZXMsIG5vZGUubGVmdCk7XG5cdH1cbn07XG5cbnZhciByZXNlcnZlZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4nZG8gaWYgaW4gZm9yIGxldCBuZXcgdHJ5IHZhciBjYXNlIGVsc2UgZW51bSBldmFsIG51bGwgdGhpcyB0cnVlIHZvaWQgd2l0aCBhd2FpdCBicmVhayBjYXRjaCBjbGFzcyBjb25zdCBmYWxzZSBzdXBlciB0aHJvdyB3aGlsZSB5aWVsZCBkZWxldGUgZXhwb3J0IGltcG9ydCBwdWJsaWMgcmV0dXJuIHN0YXRpYyBzd2l0Y2ggdHlwZW9mIGRlZmF1bHQgZXh0ZW5kcyBmaW5hbGx5IHBhY2thZ2UgcHJpdmF0ZSBjb250aW51ZSBkZWJ1Z2dlciBmdW5jdGlvbiBhcmd1bWVudHMgaW50ZXJmYWNlIHByb3RlY3RlZCBpbXBsZW1lbnRzIGluc3RhbmNlb2YnXG5cdC5zcGxpdCgnICcpXG5cdC5mb3JFYWNoKGZ1bmN0aW9uICh3b3JkKSB7IHJldHVybiAocmVzZXJ2ZWRbd29yZF0gPSB0cnVlKTsgfSk7XG5cbmZ1bmN0aW9uIFNjb3BlKG9wdGlvbnMpIHtcblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0dGhpcy5wYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcblx0dGhpcy5pc0Jsb2NrU2NvcGUgPSAhIW9wdGlvbnMuYmxvY2s7XG5cdHRoaXMuY3JlYXRlRGVjbGFyYXRpb25DYWxsYmFjayA9IG9wdGlvbnMuZGVjbGFyZTtcblxuXHR2YXIgc2NvcGUgPSB0aGlzO1xuXHR3aGlsZSAoc2NvcGUuaXNCbG9ja1Njb3BlKSB7IHNjb3BlID0gc2NvcGUucGFyZW50OyB9XG5cdHRoaXMuZnVuY3Rpb25TY29wZSA9IHNjb3BlO1xuXG5cdHRoaXMuaWRlbnRpZmllcnMgPSBbXTtcblx0dGhpcy5kZWNsYXJhdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHR0aGlzLnJlZmVyZW5jZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHR0aGlzLmJsb2NrU2NvcGVkRGVjbGFyYXRpb25zID0gdGhpcy5pc0Jsb2NrU2NvcGUgPyBudWxsIDogT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0dGhpcy5hbGlhc2VzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cblxuU2NvcGUucHJvdG90eXBlID0ge1xuXHRhZGREZWNsYXJhdGlvbjogZnVuY3Rpb24gYWRkRGVjbGFyYXRpb24obm9kZSwga2luZCkge1xuXHRcdHZhciB0aGlzJDEgPSB0aGlzO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDAsIGxpc3QgPSBleHRyYWN0TmFtZXMobm9kZSk7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHR2YXIgaWRlbnRpZmllciA9IGxpc3RbaV07XG5cblx0XHRcdHZhciBuYW1lID0gaWRlbnRpZmllci5uYW1lO1xuXG5cdFx0XHR2YXIgZGVjbGFyYXRpb24gPSB7IG5hbWU6IG5hbWUsIG5vZGU6IGlkZW50aWZpZXIsIGtpbmQ6IGtpbmQsIGluc3RhbmNlczogW10gfTtcblx0XHRcdHRoaXMkMS5kZWNsYXJhdGlvbnNbbmFtZV0gPSBkZWNsYXJhdGlvbjtcblxuXHRcdFx0aWYgKHRoaXMkMS5pc0Jsb2NrU2NvcGUpIHtcblx0XHRcdFx0aWYgKCF0aGlzJDEuZnVuY3Rpb25TY29wZS5ibG9ja1Njb3BlZERlY2xhcmF0aW9uc1tuYW1lXSlcblx0XHRcdFx0XHR7IHRoaXMkMS5mdW5jdGlvblNjb3BlLmJsb2NrU2NvcGVkRGVjbGFyYXRpb25zW25hbWVdID0gW107IH1cblx0XHRcdFx0dGhpcyQxLmZ1bmN0aW9uU2NvcGUuYmxvY2tTY29wZWREZWNsYXJhdGlvbnNbbmFtZV0ucHVzaChkZWNsYXJhdGlvbik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdGFkZFJlZmVyZW5jZTogZnVuY3Rpb24gYWRkUmVmZXJlbmNlKGlkZW50aWZpZXIpIHtcblx0XHRpZiAodGhpcy5jb25zb2xpZGF0ZWQpIHtcblx0XHRcdHRoaXMuY29uc29saWRhdGVSZWZlcmVuY2UoaWRlbnRpZmllcik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcblx0XHR9XG5cdH0sXG5cblx0Y29uc29saWRhdGU6IGZ1bmN0aW9uIGNvbnNvbGlkYXRlKCkge1xuXHRcdHZhciB0aGlzJDEgPSB0aGlzO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmlkZW50aWZpZXJzLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHQvLyB3ZSBtaWdodCBwdXNoIHRvIHRoZSBhcnJheSBkdXJpbmcgY29uc29saWRhdGlvbiwgc28gZG9uJ3QgY2FjaGUgbGVuZ3RoXG5cdFx0XHR2YXIgaWRlbnRpZmllciA9IHRoaXMkMS5pZGVudGlmaWVyc1tpXTtcblx0XHRcdHRoaXMkMS5jb25zb2xpZGF0ZVJlZmVyZW5jZShpZGVudGlmaWVyKTtcblx0XHR9XG5cblx0XHR0aGlzLmNvbnNvbGlkYXRlZCA9IHRydWU7IC8vIFRPRE8gdW5kZXJzdGFuZCB3aHkgdGhpcyBpcyBuZWNlc3NhcnkuLi4gc2VlbXMgYmFkXG5cdH0sXG5cblx0Y29uc29saWRhdGVSZWZlcmVuY2U6IGZ1bmN0aW9uIGNvbnNvbGlkYXRlUmVmZXJlbmNlKGlkZW50aWZpZXIpIHtcblx0XHR2YXIgZGVjbGFyYXRpb24gPSB0aGlzLmRlY2xhcmF0aW9uc1tpZGVudGlmaWVyLm5hbWVdO1xuXHRcdGlmIChkZWNsYXJhdGlvbikge1xuXHRcdFx0ZGVjbGFyYXRpb24uaW5zdGFuY2VzLnB1c2goaWRlbnRpZmllcik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucmVmZXJlbmNlc1tpZGVudGlmaWVyLm5hbWVdID0gdHJ1ZTtcblx0XHRcdGlmICh0aGlzLnBhcmVudCkgeyB0aGlzLnBhcmVudC5hZGRSZWZlcmVuY2UoaWRlbnRpZmllcik7IH1cblx0XHR9XG5cdH0sXG5cblx0Y29udGFpbnM6IGZ1bmN0aW9uIGNvbnRhaW5zKG5hbWUpIHtcblx0XHRyZXR1cm4gKFxuXHRcdFx0dGhpcy5kZWNsYXJhdGlvbnNbbmFtZV0gfHxcblx0XHRcdCh0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50LmNvbnRhaW5zKG5hbWUpIDogZmFsc2UpXG5cdFx0KTtcblx0fSxcblxuXHRjcmVhdGVJZGVudGlmaWVyOiBmdW5jdGlvbiBjcmVhdGVJZGVudGlmaWVyKGJhc2UpIHtcblx0XHRpZiAodHlwZW9mIGJhc2UgPT09ICdudW1iZXInKSB7IGJhc2UgPSBiYXNlLnRvU3RyaW5nKCk7IH1cblxuXHRcdGJhc2UgPSBiYXNlXG5cdFx0XHQucmVwbGFjZSgvXFxzL2csICcnKVxuXHRcdFx0LnJlcGxhY2UoL1xcWyhbXlxcXV0rKVxcXS9nLCAnXyQxJylcblx0XHRcdC5yZXBsYWNlKC9bXmEtekEtWjAtOV8kXS9nLCAnXycpXG5cdFx0XHQucmVwbGFjZSgvX3syLH0vLCAnXycpO1xuXG5cdFx0dmFyIG5hbWUgPSBiYXNlO1xuXHRcdHZhciBjb3VudGVyID0gMTtcblxuXHRcdHdoaWxlIChcblx0XHRcdHRoaXMuZGVjbGFyYXRpb25zW25hbWVdIHx8XG5cdFx0XHR0aGlzLnJlZmVyZW5jZXNbbmFtZV0gfHxcblx0XHRcdHRoaXMuYWxpYXNlc1tuYW1lXSB8fFxuXHRcdFx0bmFtZSBpbiByZXNlcnZlZFxuXHRcdCkge1xuXHRcdFx0bmFtZSA9IGJhc2UgKyBcIiRcIiArIChjb3VudGVyKyspO1xuXHRcdH1cblxuXHRcdHRoaXMuYWxpYXNlc1tuYW1lXSA9IHRydWU7XG5cdFx0cmV0dXJuIG5hbWU7XG5cdH0sXG5cblx0Y3JlYXRlRGVjbGFyYXRpb246IGZ1bmN0aW9uIGNyZWF0ZURlY2xhcmF0aW9uKGJhc2UpIHtcblx0XHR2YXIgaWQgPSB0aGlzLmNyZWF0ZUlkZW50aWZpZXIoYmFzZSk7XG5cdFx0dGhpcy5jcmVhdGVEZWNsYXJhdGlvbkNhbGxiYWNrKGlkKTtcblx0XHRyZXR1cm4gaWQ7XG5cdH0sXG5cblx0ZmluZERlY2xhcmF0aW9uOiBmdW5jdGlvbiBmaW5kRGVjbGFyYXRpb24obmFtZSkge1xuXHRcdHJldHVybiAoXG5cdFx0XHR0aGlzLmRlY2xhcmF0aW9uc1tuYW1lXSB8fFxuXHRcdFx0KHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LmZpbmREZWNsYXJhdGlvbihuYW1lKSlcblx0XHQpO1xuXHR9LFxuXG5cdC8vIFNvbWV0aW1lcywgYmxvY2sgc2NvcGUgZGVjbGFyYXRpb25zIGNoYW5nZSBuYW1lIGR1cmluZyB0cmFuc3BpbGF0aW9uXG5cdHJlc29sdmVOYW1lOiBmdW5jdGlvbiByZXNvbHZlTmFtZShuYW1lKSB7XG5cdFx0dmFyIGRlY2xhcmF0aW9uID0gdGhpcy5maW5kRGVjbGFyYXRpb24obmFtZSk7XG5cdFx0cmV0dXJuIGRlY2xhcmF0aW9uID8gZGVjbGFyYXRpb24ubmFtZSA6IG5hbWU7XG5cdH1cbn07XG5cbmZ1bmN0aW9uIGxvY2F0ZShzb3VyY2UsIGluZGV4KSB7XG5cdHZhciBsaW5lcyA9IHNvdXJjZS5zcGxpdCgnXFxuJyk7XG5cdHZhciBsZW4gPSBsaW5lcy5sZW5ndGg7XG5cblx0dmFyIGxpbmVTdGFydCA9IDA7XG5cdHZhciBpO1xuXG5cdGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuXHRcdHZhciBsaW5lID0gbGluZXNbaV07XG5cdFx0dmFyIGxpbmVFbmQgPSBsaW5lU3RhcnQgKyBsaW5lLmxlbmd0aCArIDE7IC8vICsxIGZvciBuZXdsaW5lXG5cblx0XHRpZiAobGluZUVuZCA+IGluZGV4KSB7XG5cdFx0XHRyZXR1cm4geyBsaW5lOiBpICsgMSwgY29sdW1uOiBpbmRleCAtIGxpbmVTdGFydCwgY2hhcjogaSB9O1xuXHRcdH1cblxuXHRcdGxpbmVTdGFydCA9IGxpbmVFbmQ7XG5cdH1cblxuXHR0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBkZXRlcm1pbmUgbG9jYXRpb24gb2YgY2hhcmFjdGVyJyk7XG59XG5cbmZ1bmN0aW9uIHBhZChudW0sIGxlbikge1xuXHR2YXIgcmVzdWx0ID0gU3RyaW5nKG51bSk7XG5cdHJldHVybiByZXN1bHQgKyByZXBlYXQoJyAnLCBsZW4gLSByZXN1bHQubGVuZ3RoKTtcbn1cblxuZnVuY3Rpb24gcmVwZWF0KHN0ciwgdGltZXMpIHtcblx0dmFyIHJlc3VsdCA9ICcnO1xuXHR3aGlsZSAodGltZXMtLSkgeyByZXN1bHQgKz0gc3RyOyB9XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGdldFNuaXBwZXQoc291cmNlLCBsb2MsIGxlbmd0aCkge1xuXHRpZiAoIGxlbmd0aCA9PT0gdm9pZCAwICkgbGVuZ3RoID0gMTtcblxuXHR2YXIgZmlyc3QgPSBNYXRoLm1heChsb2MubGluZSAtIDUsIDApO1xuXHR2YXIgbGFzdCA9IGxvYy5saW5lO1xuXG5cdHZhciBudW1EaWdpdHMgPSBTdHJpbmcobGFzdCkubGVuZ3RoO1xuXG5cdHZhciBsaW5lcyA9IHNvdXJjZS5zcGxpdCgnXFxuJykuc2xpY2UoZmlyc3QsIGxhc3QpO1xuXG5cdHZhciBsYXN0TGluZSA9IGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdO1xuXHR2YXIgb2Zmc2V0ID0gbGFzdExpbmUuc2xpY2UoMCwgbG9jLmNvbHVtbikucmVwbGFjZSgvXFx0L2csICcgICcpLmxlbmd0aDtcblxuXHR2YXIgc25pcHBldCA9IGxpbmVzXG5cdFx0Lm1hcChmdW5jdGlvbiAobGluZSwgaSkgeyByZXR1cm4gKChwYWQoaSArIGZpcnN0ICsgMSwgbnVtRGlnaXRzKSkgKyBcIiA6IFwiICsgKGxpbmUucmVwbGFjZSgvXFx0L2csICcgICcpKSk7IH0pXG5cdFx0LmpvaW4oJ1xcbicpO1xuXG5cdHNuaXBwZXQgKz0gJ1xcbicgKyByZXBlYXQoJyAnLCBudW1EaWdpdHMgKyAzICsgb2Zmc2V0KSArIHJlcGVhdCgnXicsIGxlbmd0aCk7XG5cblx0cmV0dXJuIHNuaXBwZXQ7XG59XG5cbnZhciBDb21waWxlRXJyb3IgPSAoZnVuY3Rpb24gKEVycm9yKSB7XG5cdGZ1bmN0aW9uIENvbXBpbGVFcnJvcihtZXNzYWdlLCBub2RlKSB7XG5cdFx0RXJyb3IuY2FsbCh0aGlzLCBtZXNzYWdlKTtcblxuXHRcdHRoaXMubmFtZSA9ICdDb21waWxlRXJyb3InO1xuXHRcdGlmICghbm9kZSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhciBzb3VyY2UgPSBub2RlLnByb2dyYW0ubWFnaWNTdHJpbmcub3JpZ2luYWw7XG5cdFx0dmFyIGxvYyA9IGxvY2F0ZShzb3VyY2UsIG5vZGUuc3RhcnQpO1xuXG5cdFx0dGhpcy5tZXNzYWdlID0gbWVzc2FnZSArIFwiIChcIiArIChsb2MubGluZSkgKyBcIjpcIiArIChsb2MuY29sdW1uKSArIFwiKVwiO1xuXG5cdFx0dGhpcy5zdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrLnJlcGxhY2UoXG5cdFx0XHRuZXcgUmVnRXhwKChcIi4rbmV3IFwiICsgKHRoaXMubmFtZSkgKyBcIi4rXFxcXG5cIiksICdtJyksXG5cdFx0XHQnJ1xuXHRcdCk7XG5cblx0XHR0aGlzLmxvYyA9IGxvYztcblx0XHR0aGlzLnNuaXBwZXQgPSBnZXRTbmlwcGV0KHNvdXJjZSwgbG9jLCBub2RlLmVuZCAtIG5vZGUuc3RhcnQpO1xuXHR9XG5cblx0aWYgKCBFcnJvciApIENvbXBpbGVFcnJvci5fX3Byb3RvX18gPSBFcnJvcjtcblx0Q29tcGlsZUVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEVycm9yICYmIEVycm9yLnByb3RvdHlwZSApO1xuXHRDb21waWxlRXJyb3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ29tcGlsZUVycm9yO1xuXG5cdENvbXBpbGVFcnJvci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoKSB7XG5cdFx0cmV0dXJuICgodGhpcy5uYW1lKSArIFwiOiBcIiArICh0aGlzLm1lc3NhZ2UpICsgXCJcXG5cIiArICh0aGlzLnNuaXBwZXQpKTtcblx0fTtcblxuXHRyZXR1cm4gQ29tcGlsZUVycm9yO1xufShFcnJvcikpO1xuXG5mdW5jdGlvbiBmaW5kSW5kZXgoYXJyYXksIGZuKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpICs9IDEpIHtcblx0XHRpZiAoZm4oYXJyYXlbaV0sIGkpKSB7IHJldHVybiBpOyB9XG5cdH1cblxuXHRyZXR1cm4gLTE7XG59XG5cbnZhciBoYW5kbGVycyA9IHtcblx0SWRlbnRpZmllcjogZGVzdHJ1Y3R1cmVJZGVudGlmaWVyLFxuXHRBc3NpZ25tZW50UGF0dGVybjogZGVzdHJ1Y3R1cmVBc3NpZ25tZW50UGF0dGVybixcblx0QXJyYXlQYXR0ZXJuOiBkZXN0cnVjdHVyZUFycmF5UGF0dGVybixcblx0T2JqZWN0UGF0dGVybjogZGVzdHJ1Y3R1cmVPYmplY3RQYXR0ZXJuXG59O1xuXG5mdW5jdGlvbiBkZXN0cnVjdHVyZShcblx0Y29kZSxcblx0Y3JlYXRlSWRlbnRpZmllcixcblx0cmVzb2x2ZU5hbWUsXG5cdG5vZGUsXG5cdHJlZixcblx0aW5saW5lLFxuXHRzdGF0ZW1lbnRHZW5lcmF0b3JzXG4pIHtcblx0aGFuZGxlcnNbbm9kZS50eXBlXShjb2RlLCBjcmVhdGVJZGVudGlmaWVyLCByZXNvbHZlTmFtZSwgbm9kZSwgcmVmLCBpbmxpbmUsIHN0YXRlbWVudEdlbmVyYXRvcnMpO1xufVxuXG5mdW5jdGlvbiBkZXN0cnVjdHVyZUlkZW50aWZpZXIoXG5cdGNvZGUsXG5cdGNyZWF0ZUlkZW50aWZpZXIsXG5cdHJlc29sdmVOYW1lLFxuXHRub2RlLFxuXHRyZWYsXG5cdGlubGluZSxcblx0c3RhdGVtZW50R2VuZXJhdG9yc1xuKSB7XG5cdHN0YXRlbWVudEdlbmVyYXRvcnMucHVzaChmdW5jdGlvbiAoc3RhcnQsIHByZWZpeCwgc3VmZml4KSB7XG5cdFx0Y29kZS5vdmVyd3JpdGUobm9kZS5zdGFydCwgbm9kZS5lbmQsIChpbmxpbmUgPyBwcmVmaXggOiAocHJlZml4ICsgXCJ2YXIgXCIpKSArIHJlc29sdmVOYW1lKG5vZGUpICsgXCIgPSBcIiArIHJlZiArIHN1ZmZpeCk7XG5cdFx0Y29kZS5tb3ZlKG5vZGUuc3RhcnQsIG5vZGUuZW5kLCBzdGFydCk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBkZXN0cnVjdHVyZU1lbWJlckV4cHJlc3Npb24oXG5cdGNvZGUsXG5cdGNyZWF0ZUlkZW50aWZpZXIsXG5cdHJlc29sdmVOYW1lLFxuXHRub2RlLFxuXHRyZWYsXG5cdGlubGluZSxcblx0c3RhdGVtZW50R2VuZXJhdG9yc1xuKSB7XG5cdHN0YXRlbWVudEdlbmVyYXRvcnMucHVzaChmdW5jdGlvbiAoc3RhcnQsIHByZWZpeCwgc3VmZml4KSB7XG5cdFx0Y29kZS5wcmVwZW5kUmlnaHQobm9kZS5zdGFydCwgaW5saW5lID8gcHJlZml4IDogKHByZWZpeCArIFwidmFyIFwiKSk7XG5cdFx0Y29kZS5hcHBlbmRMZWZ0KG5vZGUuZW5kLCAoXCIgPSBcIiArIHJlZiArIHN1ZmZpeCkpO1xuXHRcdGNvZGUubW92ZShub2RlLnN0YXJ0LCBub2RlLmVuZCwgc3RhcnQpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gZGVzdHJ1Y3R1cmVBc3NpZ25tZW50UGF0dGVybihcblx0Y29kZSxcblx0Y3JlYXRlSWRlbnRpZmllcixcblx0cmVzb2x2ZU5hbWUsXG5cdG5vZGUsXG5cdHJlZixcblx0aW5saW5lLFxuXHRzdGF0ZW1lbnRHZW5lcmF0b3JzXG4pIHtcblx0dmFyIGlzSWRlbnRpZmllciA9IG5vZGUubGVmdC50eXBlID09PSAnSWRlbnRpZmllcic7XG5cdHZhciBuYW1lID0gaXNJZGVudGlmaWVyID8gbm9kZS5sZWZ0Lm5hbWUgOiByZWY7XG5cblx0aWYgKCFpbmxpbmUpIHtcblx0XHRzdGF0ZW1lbnRHZW5lcmF0b3JzLnB1c2goZnVuY3Rpb24gKHN0YXJ0LCBwcmVmaXgsIHN1ZmZpeCkge1xuXHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQoXG5cdFx0XHRcdG5vZGUubGVmdC5lbmQsXG5cdFx0XHRcdChwcmVmaXggKyBcImlmICggXCIgKyBuYW1lICsgXCIgPT09IHZvaWQgMCApIFwiICsgbmFtZSlcblx0XHRcdCk7XG5cdFx0XHRjb2RlLm1vdmUobm9kZS5sZWZ0LmVuZCwgbm9kZS5yaWdodC5lbmQsIHN0YXJ0KTtcblx0XHRcdGNvZGUuYXBwZW5kTGVmdChub2RlLnJpZ2h0LmVuZCwgc3VmZml4KTtcblx0XHR9KTtcblx0fVxuXG5cdGlmICghaXNJZGVudGlmaWVyKSB7XG5cdFx0ZGVzdHJ1Y3R1cmUoY29kZSwgY3JlYXRlSWRlbnRpZmllciwgcmVzb2x2ZU5hbWUsIG5vZGUubGVmdCwgcmVmLCBpbmxpbmUsIHN0YXRlbWVudEdlbmVyYXRvcnMpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGRlc3RydWN0dXJlQXJyYXlQYXR0ZXJuKFxuXHRjb2RlLFxuXHRjcmVhdGVJZGVudGlmaWVyLFxuXHRyZXNvbHZlTmFtZSxcblx0bm9kZSxcblx0cmVmLFxuXHRpbmxpbmUsXG5cdHN0YXRlbWVudEdlbmVyYXRvcnNcbikge1xuXHR2YXIgYyA9IG5vZGUuc3RhcnQ7XG5cblx0bm9kZS5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpKSB7XG5cdFx0aWYgKCFlbGVtZW50KSB7IHJldHVybjsgfVxuXG5cdFx0aWYgKGVsZW1lbnQudHlwZSA9PT0gJ1Jlc3RFbGVtZW50Jykge1xuXHRcdFx0aGFuZGxlUHJvcGVydHkoXG5cdFx0XHRcdGNvZGUsXG5cdFx0XHRcdGNyZWF0ZUlkZW50aWZpZXIsXG5cdFx0XHRcdHJlc29sdmVOYW1lLFxuXHRcdFx0XHRjLFxuXHRcdFx0XHRlbGVtZW50LmFyZ3VtZW50LFxuXHRcdFx0XHQocmVmICsgXCIuc2xpY2UoXCIgKyBpICsgXCIpXCIpLFxuXHRcdFx0XHRpbmxpbmUsXG5cdFx0XHRcdHN0YXRlbWVudEdlbmVyYXRvcnNcblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGhhbmRsZVByb3BlcnR5KFxuXHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRjcmVhdGVJZGVudGlmaWVyLFxuXHRcdFx0XHRyZXNvbHZlTmFtZSxcblx0XHRcdFx0Yyxcblx0XHRcdFx0ZWxlbWVudCxcblx0XHRcdFx0KHJlZiArIFwiW1wiICsgaSArIFwiXVwiKSxcblx0XHRcdFx0aW5saW5lLFxuXHRcdFx0XHRzdGF0ZW1lbnRHZW5lcmF0b3JzXG5cdFx0XHQpO1xuXHRcdH1cblx0XHRjID0gZWxlbWVudC5lbmQ7XG5cdH0pO1xuXG5cdGNvZGUucmVtb3ZlKGMsIG5vZGUuZW5kKTtcbn1cblxuZnVuY3Rpb24gZGVzdHJ1Y3R1cmVPYmplY3RQYXR0ZXJuKFxuXHRjb2RlLFxuXHRjcmVhdGVJZGVudGlmaWVyLFxuXHRyZXNvbHZlTmFtZSxcblx0bm9kZSxcblx0cmVmLFxuXHRpbmxpbmUsXG5cdHN0YXRlbWVudEdlbmVyYXRvcnNcbikge1xuXHR2YXIgdGhpcyQxID0gdGhpcztcblxuXHR2YXIgYyA9IG5vZGUuc3RhcnQ7XG5cblx0dmFyIG5vblJlc3RLZXlzID0gW107XG5cdG5vZGUucHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG5cdFx0dmFyIHZhbHVlO1xuXHRcdHZhciBjb250ZW50O1xuXHRcdGlmIChwcm9wLnR5cGUgPT09ICdQcm9wZXJ0eScpIHtcblx0XHRcdHZhciBpc0NvbXB1dGVkS2V5ID0gcHJvcC5jb21wdXRlZCB8fCBwcm9wLmtleS50eXBlICE9PSAnSWRlbnRpZmllcic7XG5cdFx0XHR2YXIga2V5ID0gaXNDb21wdXRlZEtleVxuXHRcdFx0XHQ/IGNvZGUuc2xpY2UocHJvcC5rZXkuc3RhcnQsIHByb3Aua2V5LmVuZClcblx0XHRcdFx0OiBwcm9wLmtleS5uYW1lO1xuXHRcdFx0dmFsdWUgPSBpc0NvbXB1dGVkS2V5ID8gKHJlZiArIFwiW1wiICsga2V5ICsgXCJdXCIpIDogKHJlZiArIFwiLlwiICsga2V5KTtcblx0XHRcdGNvbnRlbnQgPSBwcm9wLnZhbHVlO1xuXHRcdFx0bm9uUmVzdEtleXMucHVzaChpc0NvbXB1dGVkS2V5ID8ga2V5IDogJ1wiJyArIGtleSArICdcIicpO1xuXHRcdH0gZWxzZSBpZiAocHJvcC50eXBlID09PSAnUmVzdEVsZW1lbnQnKSB7XG5cdFx0XHRjb250ZW50ID0gcHJvcC5hcmd1bWVudDtcblx0XHRcdHZhbHVlID0gY3JlYXRlSWRlbnRpZmllcigncmVzdCcpO1xuXHRcdFx0c3RhdGVtZW50R2VuZXJhdG9ycy5wdXNoKGZ1bmN0aW9uIChzdGFydCwgcHJlZml4LCBzdWZmaXgpIHtcblx0XHRcdFx0dmFyIGhlbHBlciA9IHByb3AucHJvZ3JhbS5nZXRPYmplY3RXaXRob3V0UHJvcGVydGllc0hlbHBlcihjb2RlKTtcblx0XHRcdFx0Y29kZS5vdmVyd3JpdGUoXG5cdFx0XHRcdFx0cHJvcC5zdGFydCxcblx0XHRcdFx0XHQoYyA9IHByb3AuYXJndW1lbnQuc3RhcnQpLFxuXHRcdFx0XHRcdChpbmxpbmUgPyBwcmVmaXggOiAocHJlZml4ICsgXCJ2YXIgXCIpKSArIHZhbHVlICsgXCIgPSBcIiArIGhlbHBlciArIFwiKCBcIiArIHJlZiArIFwiLCBbXCIgKyAobm9uUmVzdEtleXMuam9pbignLCAnKSkgKyBcIl0gKVwiICsgc3VmZml4XG5cdFx0XHRcdCk7XG5cdFx0XHRcdGNvZGUubW92ZShwcm9wLnN0YXJ0LCBjLCBzdGFydCk7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhyb3cgbmV3IENvbXBpbGVFcnJvcihcblx0XHRcdFx0dGhpcyQxLFxuXHRcdFx0XHQoXCJVbmV4cGVjdGVkIG5vZGUgb2YgdHlwZSBcIiArIChwcm9wLnR5cGUpICsgXCIgaW4gb2JqZWN0IHBhdHRlcm5cIilcblx0XHRcdCk7XG5cdFx0fVxuXHRcdGhhbmRsZVByb3BlcnR5KGNvZGUsIGNyZWF0ZUlkZW50aWZpZXIsIHJlc29sdmVOYW1lLCBjLCBjb250ZW50LCB2YWx1ZSwgaW5saW5lLCBzdGF0ZW1lbnRHZW5lcmF0b3JzKTtcblx0XHRjID0gcHJvcC5lbmQ7XG5cdH0pO1xuXG5cdGNvZGUucmVtb3ZlKGMsIG5vZGUuZW5kKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUHJvcGVydHkoXG5cdGNvZGUsXG5cdGNyZWF0ZUlkZW50aWZpZXIsXG5cdHJlc29sdmVOYW1lLFxuXHRjLFxuXHRub2RlLFxuXHR2YWx1ZSxcblx0aW5saW5lLFxuXHRzdGF0ZW1lbnRHZW5lcmF0b3JzXG4pIHtcblx0c3dpdGNoIChub2RlLnR5cGUpIHtcblx0XHRjYXNlICdJZGVudGlmaWVyJzoge1xuXHRcdFx0Y29kZS5yZW1vdmUoYywgbm9kZS5zdGFydCk7XG5cdFx0XHRkZXN0cnVjdHVyZUlkZW50aWZpZXIoXG5cdFx0XHRcdGNvZGUsXG5cdFx0XHRcdGNyZWF0ZUlkZW50aWZpZXIsXG5cdFx0XHRcdHJlc29sdmVOYW1lLFxuXHRcdFx0XHRub2RlLFxuXHRcdFx0XHR2YWx1ZSxcblx0XHRcdFx0aW5saW5lLFxuXHRcdFx0XHRzdGF0ZW1lbnRHZW5lcmF0b3JzXG5cdFx0XHQpO1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0Y2FzZSAnTWVtYmVyRXhwcmVzc2lvbic6XG5cdFx0XHRjb2RlLnJlbW92ZShjLCBub2RlLnN0YXJ0KTtcblx0XHRcdGRlc3RydWN0dXJlTWVtYmVyRXhwcmVzc2lvbihcblx0XHRcdFx0Y29kZSxcblx0XHRcdFx0Y3JlYXRlSWRlbnRpZmllcixcblx0XHRcdFx0cmVzb2x2ZU5hbWUsXG5cdFx0XHRcdG5vZGUsXG5cdFx0XHRcdHZhbHVlLFxuXHRcdFx0XHR0cnVlLFxuXHRcdFx0XHRzdGF0ZW1lbnRHZW5lcmF0b3JzXG5cdFx0XHQpO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRjYXNlICdBc3NpZ25tZW50UGF0dGVybic6IHtcblx0XHRcdHZhciBuYW1lO1xuXG5cdFx0XHR2YXIgaXNJZGVudGlmaWVyID0gbm9kZS5sZWZ0LnR5cGUgPT09ICdJZGVudGlmaWVyJztcblxuXHRcdFx0aWYgKGlzSWRlbnRpZmllcikge1xuXHRcdFx0XHRuYW1lID0gcmVzb2x2ZU5hbWUobm9kZS5sZWZ0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG5hbWUgPSBjcmVhdGVJZGVudGlmaWVyKHZhbHVlKTtcblx0XHRcdH1cblxuXHRcdFx0c3RhdGVtZW50R2VuZXJhdG9ycy5wdXNoKGZ1bmN0aW9uIChzdGFydCwgcHJlZml4LCBzdWZmaXgpIHtcblx0XHRcdFx0aWYgKGlubGluZSkge1xuXHRcdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KFxuXHRcdFx0XHRcdFx0bm9kZS5yaWdodC5zdGFydCxcblx0XHRcdFx0XHRcdChuYW1lICsgXCIgPSBcIiArIHZhbHVlICsgXCIsIFwiICsgbmFtZSArIFwiID0gXCIgKyBuYW1lICsgXCIgPT09IHZvaWQgMCA/IFwiKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KG5vZGUucmlnaHQuZW5kLCAoXCIgOiBcIiArIG5hbWUgKyBzdWZmaXgpKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb2RlLnByZXBlbmRSaWdodChcblx0XHRcdFx0XHRcdG5vZGUucmlnaHQuc3RhcnQsXG5cdFx0XHRcdFx0XHQocHJlZml4ICsgXCJ2YXIgXCIgKyBuYW1lICsgXCIgPSBcIiArIHZhbHVlICsgXCI7IGlmICggXCIgKyBuYW1lICsgXCIgPT09IHZvaWQgMCApIFwiICsgbmFtZSArIFwiID0gXCIpXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRjb2RlLmFwcGVuZExlZnQobm9kZS5yaWdodC5lbmQsIHN1ZmZpeCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb2RlLm1vdmUobm9kZS5yaWdodC5zdGFydCwgbm9kZS5yaWdodC5lbmQsIHN0YXJ0KTtcblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAoaXNJZGVudGlmaWVyKSB7XG5cdFx0XHRcdGNvZGUucmVtb3ZlKGMsIG5vZGUucmlnaHQuc3RhcnQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29kZS5yZW1vdmUoYywgbm9kZS5sZWZ0LnN0YXJ0KTtcblx0XHRcdFx0Y29kZS5yZW1vdmUobm9kZS5sZWZ0LmVuZCwgbm9kZS5yaWdodC5zdGFydCk7XG5cdFx0XHRcdGhhbmRsZVByb3BlcnR5KFxuXHRcdFx0XHRcdGNvZGUsXG5cdFx0XHRcdFx0Y3JlYXRlSWRlbnRpZmllcixcblx0XHRcdFx0XHRyZXNvbHZlTmFtZSxcblx0XHRcdFx0XHRjLFxuXHRcdFx0XHRcdG5vZGUubGVmdCxcblx0XHRcdFx0XHRuYW1lLFxuXHRcdFx0XHRcdGlubGluZSxcblx0XHRcdFx0XHRzdGF0ZW1lbnRHZW5lcmF0b3JzXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdGNhc2UgJ09iamVjdFBhdHRlcm4nOiB7XG5cdFx0XHRjb2RlLnJlbW92ZShjLCAoYyA9IG5vZGUuc3RhcnQpKTtcblxuXHRcdFx0dmFyIHJlZiA9IHZhbHVlO1xuXHRcdFx0aWYgKG5vZGUucHJvcGVydGllcy5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdHJlZiA9IGNyZWF0ZUlkZW50aWZpZXIodmFsdWUpO1xuXG5cdFx0XHRcdHN0YXRlbWVudEdlbmVyYXRvcnMucHVzaChmdW5jdGlvbiAoc3RhcnQsIHByZWZpeCwgc3VmZml4KSB7XG5cdFx0XHRcdFx0Ly8gdGhpcyBmZWVscyBhIHRpbnkgYml0IGhhY2t5LCBidXQgd2UgY2FuJ3QgZG8gYVxuXHRcdFx0XHRcdC8vIHN0cmFpZ2h0Zm9yd2FyZCBhcHBlbmRMZWZ0IGFuZCBrZWVwIGNvcnJlY3Qgb3JkZXIuLi5cblx0XHRcdFx0XHRjb2RlLnByZXBlbmRSaWdodChub2RlLnN0YXJ0LCAoaW5saW5lID8gJycgOiAocHJlZml4ICsgXCJ2YXIgXCIpKSArIHJlZiArIFwiID0gXCIpO1xuXHRcdFx0XHRcdGNvZGUub3ZlcndyaXRlKG5vZGUuc3RhcnQsIChjID0gbm9kZS5zdGFydCArIDEpLCB2YWx1ZSk7XG5cdFx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KGMsIHN1ZmZpeCk7XG5cblx0XHRcdFx0XHRjb2RlLm92ZXJ3cml0ZShcblx0XHRcdFx0XHRcdG5vZGUuc3RhcnQsXG5cdFx0XHRcdFx0XHQoYyA9IG5vZGUuc3RhcnQgKyAxKSxcblx0XHRcdFx0XHRcdChpbmxpbmUgPyAnJyA6IChwcmVmaXggKyBcInZhciBcIikpICsgcmVmICsgXCIgPSBcIiArIHZhbHVlICsgc3VmZml4XG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRjb2RlLm1vdmUobm9kZS5zdGFydCwgYywgc3RhcnQpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0ZGVzdHJ1Y3R1cmVPYmplY3RQYXR0ZXJuKFxuXHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRjcmVhdGVJZGVudGlmaWVyLFxuXHRcdFx0XHRyZXNvbHZlTmFtZSxcblx0XHRcdFx0bm9kZSxcblx0XHRcdFx0cmVmLFxuXHRcdFx0XHRpbmxpbmUsXG5cdFx0XHRcdHN0YXRlbWVudEdlbmVyYXRvcnNcblx0XHRcdCk7XG5cblx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdGNhc2UgJ0FycmF5UGF0dGVybic6IHtcblx0XHRcdGNvZGUucmVtb3ZlKGMsIChjID0gbm9kZS5zdGFydCkpO1xuXG5cdFx0XHRpZiAobm9kZS5lbGVtZW50cy5maWx0ZXIoQm9vbGVhbikubGVuZ3RoID4gMSkge1xuXHRcdFx0XHR2YXIgcmVmJDEgPSBjcmVhdGVJZGVudGlmaWVyKHZhbHVlKTtcblxuXHRcdFx0XHRzdGF0ZW1lbnRHZW5lcmF0b3JzLnB1c2goZnVuY3Rpb24gKHN0YXJ0LCBwcmVmaXgsIHN1ZmZpeCkge1xuXHRcdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KG5vZGUuc3RhcnQsIChpbmxpbmUgPyAnJyA6IChwcmVmaXggKyBcInZhciBcIikpICsgcmVmJDEgKyBcIiA9IFwiKTtcblx0XHRcdFx0XHRjb2RlLm92ZXJ3cml0ZShub2RlLnN0YXJ0LCAoYyA9IG5vZGUuc3RhcnQgKyAxKSwgdmFsdWUsIHtcblx0XHRcdFx0XHRcdGNvbnRlbnRPbmx5OiB0cnVlXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KGMsIHN1ZmZpeCk7XG5cblx0XHRcdFx0XHRjb2RlLm1vdmUobm9kZS5zdGFydCwgYywgc3RhcnQpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRub2RlLmVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQsIGkpIHtcblx0XHRcdFx0XHRpZiAoIWVsZW1lbnQpIHsgcmV0dXJuOyB9XG5cblx0XHRcdFx0XHRpZiAoZWxlbWVudC50eXBlID09PSAnUmVzdEVsZW1lbnQnKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVQcm9wZXJ0eShcblx0XHRcdFx0XHRcdFx0Y29kZSxcblx0XHRcdFx0XHRcdFx0Y3JlYXRlSWRlbnRpZmllcixcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZU5hbWUsXG5cdFx0XHRcdFx0XHRcdGMsXG5cdFx0XHRcdFx0XHRcdGVsZW1lbnQuYXJndW1lbnQsXG5cdFx0XHRcdFx0XHRcdChyZWYkMSArIFwiLnNsaWNlKFwiICsgaSArIFwiKVwiKSxcblx0XHRcdFx0XHRcdFx0aW5saW5lLFxuXHRcdFx0XHRcdFx0XHRzdGF0ZW1lbnRHZW5lcmF0b3JzXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVQcm9wZXJ0eShcblx0XHRcdFx0XHRcdFx0Y29kZSxcblx0XHRcdFx0XHRcdFx0Y3JlYXRlSWRlbnRpZmllcixcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZU5hbWUsXG5cdFx0XHRcdFx0XHRcdGMsXG5cdFx0XHRcdFx0XHRcdGVsZW1lbnQsXG5cdFx0XHRcdFx0XHRcdChyZWYkMSArIFwiW1wiICsgaSArIFwiXVwiKSxcblx0XHRcdFx0XHRcdFx0aW5saW5lLFxuXHRcdFx0XHRcdFx0XHRzdGF0ZW1lbnRHZW5lcmF0b3JzXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjID0gZWxlbWVudC5lbmQ7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFyIGluZGV4ID0gZmluZEluZGV4KG5vZGUuZWxlbWVudHMsIEJvb2xlYW4pO1xuXHRcdFx0XHR2YXIgZWxlbWVudCA9IG5vZGUuZWxlbWVudHNbaW5kZXhdO1xuXHRcdFx0XHRpZiAoZWxlbWVudC50eXBlID09PSAnUmVzdEVsZW1lbnQnKSB7XG5cdFx0XHRcdFx0aGFuZGxlUHJvcGVydHkoXG5cdFx0XHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRcdFx0Y3JlYXRlSWRlbnRpZmllcixcblx0XHRcdFx0XHRcdHJlc29sdmVOYW1lLFxuXHRcdFx0XHRcdFx0Yyxcblx0XHRcdFx0XHRcdGVsZW1lbnQuYXJndW1lbnQsXG5cdFx0XHRcdFx0XHQodmFsdWUgKyBcIi5zbGljZShcIiArIGluZGV4ICsgXCIpXCIpLFxuXHRcdFx0XHRcdFx0aW5saW5lLFxuXHRcdFx0XHRcdFx0c3RhdGVtZW50R2VuZXJhdG9yc1xuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aGFuZGxlUHJvcGVydHkoXG5cdFx0XHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRcdFx0Y3JlYXRlSWRlbnRpZmllcixcblx0XHRcdFx0XHRcdHJlc29sdmVOYW1lLFxuXHRcdFx0XHRcdFx0Yyxcblx0XHRcdFx0XHRcdGVsZW1lbnQsXG5cdFx0XHRcdFx0XHQodmFsdWUgKyBcIltcIiArIGluZGV4ICsgXCJdXCIpLFxuXHRcdFx0XHRcdFx0aW5saW5lLFxuXHRcdFx0XHRcdFx0c3RhdGVtZW50R2VuZXJhdG9yc1xuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YyA9IGVsZW1lbnQuZW5kO1xuXHRcdFx0fVxuXG5cdFx0XHRjb2RlLnJlbW92ZShjLCBub2RlLmVuZCk7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHRkZWZhdWx0OiB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoKFwiVW5leHBlY3RlZCBub2RlIHR5cGUgaW4gZGVzdHJ1Y3R1cmluZyAoXCIgKyAobm9kZS50eXBlKSArIFwiKVwiKSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGlzVXNlU3RyaWN0KG5vZGUpIHtcblx0aWYgKCFub2RlKSB7IHJldHVybiBmYWxzZTsgfVxuXHRpZiAobm9kZS50eXBlICE9PSAnRXhwcmVzc2lvblN0YXRlbWVudCcpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdGlmIChub2RlLmV4cHJlc3Npb24udHlwZSAhPT0gJ0xpdGVyYWwnKSB7IHJldHVybiBmYWxzZTsgfVxuXHRyZXR1cm4gbm9kZS5leHByZXNzaW9uLnZhbHVlID09PSAndXNlIHN0cmljdCc7XG59XG5cbnZhciBCbG9ja1N0YXRlbWVudCA9IChmdW5jdGlvbiAoTm9kZSQkMSkge1xuXHRmdW5jdGlvbiBCbG9ja1N0YXRlbWVudCAoKSB7XG5cdFx0Tm9kZSQkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0aWYgKCBOb2RlJCQxICkgQmxvY2tTdGF0ZW1lbnQuX19wcm90b19fID0gTm9kZSQkMTtcblx0QmxvY2tTdGF0ZW1lbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTm9kZSQkMSAmJiBOb2RlJCQxLnByb3RvdHlwZSApO1xuXHRCbG9ja1N0YXRlbWVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCbG9ja1N0YXRlbWVudDtcblxuXHRCbG9ja1N0YXRlbWVudC5wcm90b3R5cGUuY3JlYXRlU2NvcGUgPSBmdW5jdGlvbiBjcmVhdGVTY29wZSAoKSB7XG5cdFx0dmFyIHRoaXMkMSA9IHRoaXM7XG5cblx0XHR0aGlzLnBhcmVudElzRnVuY3Rpb24gPSAvRnVuY3Rpb24vLnRlc3QodGhpcy5wYXJlbnQudHlwZSk7XG5cdFx0dGhpcy5pc0Z1bmN0aW9uQmxvY2sgPSB0aGlzLnBhcmVudElzRnVuY3Rpb24gfHwgdGhpcy5wYXJlbnQudHlwZSA9PT0gJ1Jvb3QnO1xuXHRcdHRoaXMuc2NvcGUgPSBuZXcgU2NvcGUoe1xuXHRcdFx0YmxvY2s6ICF0aGlzLmlzRnVuY3Rpb25CbG9jayxcblx0XHRcdHBhcmVudDogdGhpcy5wYXJlbnQuZmluZFNjb3BlKGZhbHNlKSxcblx0XHRcdGRlY2xhcmU6IGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gdGhpcyQxLmNyZWF0ZWREZWNsYXJhdGlvbnMucHVzaChpZCk7IH1cblx0XHR9KTtcblxuXHRcdGlmICh0aGlzLnBhcmVudElzRnVuY3Rpb24pIHtcblx0XHRcdHRoaXMucGFyZW50LnBhcmFtcy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG5cdFx0XHRcdHRoaXMkMS5zY29wZS5hZGREZWNsYXJhdGlvbihub2RlLCAncGFyYW0nKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblxuXHRCbG9ja1N0YXRlbWVudC5wcm90b3R5cGUuaW5pdGlhbGlzZSA9IGZ1bmN0aW9uIGluaXRpYWxpc2UgKHRyYW5zZm9ybXMpIHtcblx0XHR0aGlzLnRoaXNBbGlhcyA9IG51bGw7XG5cdFx0dGhpcy5hcmd1bWVudHNBbGlhcyA9IG51bGw7XG5cdFx0dGhpcy5kZWZhdWx0UGFyYW1ldGVycyA9IFtdO1xuXHRcdHRoaXMuY3JlYXRlZERlY2xhcmF0aW9ucyA9IFtdO1xuXG5cdFx0Ly8gbm9ybWFsbHkgdGhlIHNjb3BlIGdldHMgY3JlYXRlZCBoZXJlLCBkdXJpbmcgaW5pdGlhbGlzYXRpb24sXG5cdFx0Ly8gYnV0IGluIHNvbWUgY2FzZXMgKGUuZy4gYGZvcmAgc3RhdGVtZW50cyksIHdlIG5lZWQgdG8gY3JlYXRlXG5cdFx0Ly8gdGhlIHNjb3BlIGVhcmx5LCBhcyBpdCBwZXJ0YWlucyB0byBib3RoIHRoZSBpbml0IGJsb2NrIGFuZFxuXHRcdC8vIHRoZSBib2R5IG9mIHRoZSBzdGF0ZW1lbnRcblx0XHRpZiAoIXRoaXMuc2NvcGUpIHsgdGhpcy5jcmVhdGVTY29wZSgpOyB9XG5cblx0XHR0aGlzLmJvZHkuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5pbml0aWFsaXNlKHRyYW5zZm9ybXMpOyB9KTtcblxuXHRcdHRoaXMuc2NvcGUuY29uc29saWRhdGUoKTtcblx0fTtcblxuXHRCbG9ja1N0YXRlbWVudC5wcm90b3R5cGUuZmluZExleGljYWxCb3VuZGFyeSA9IGZ1bmN0aW9uIGZpbmRMZXhpY2FsQm91bmRhcnkgKCkge1xuXHRcdGlmICh0aGlzLnR5cGUgPT09ICdQcm9ncmFtJykgeyByZXR1cm4gdGhpczsgfVxuXHRcdGlmICgvXkZ1bmN0aW9uLy50ZXN0KHRoaXMucGFyZW50LnR5cGUpKSB7IHJldHVybiB0aGlzOyB9XG5cblx0XHRyZXR1cm4gdGhpcy5wYXJlbnQuZmluZExleGljYWxCb3VuZGFyeSgpO1xuXHR9O1xuXG5cdEJsb2NrU3RhdGVtZW50LnByb3RvdHlwZS5maW5kU2NvcGUgPSBmdW5jdGlvbiBmaW5kU2NvcGUgKGZ1bmN0aW9uU2NvcGUpIHtcblx0XHRpZiAoZnVuY3Rpb25TY29wZSAmJiAhdGhpcy5pc0Z1bmN0aW9uQmxvY2spXG5cdFx0XHR7IHJldHVybiB0aGlzLnBhcmVudC5maW5kU2NvcGUoZnVuY3Rpb25TY29wZSk7IH1cblx0XHRyZXR1cm4gdGhpcy5zY29wZTtcblx0fTtcblxuXHRCbG9ja1N0YXRlbWVudC5wcm90b3R5cGUuZ2V0QXJndW1lbnRzQWxpYXMgPSBmdW5jdGlvbiBnZXRBcmd1bWVudHNBbGlhcyAoKSB7XG5cdFx0aWYgKCF0aGlzLmFyZ3VtZW50c0FsaWFzKSB7XG5cdFx0XHR0aGlzLmFyZ3VtZW50c0FsaWFzID0gdGhpcy5zY29wZS5jcmVhdGVJZGVudGlmaWVyKCdhcmd1bWVudHMnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5hcmd1bWVudHNBbGlhcztcblx0fTtcblxuXHRCbG9ja1N0YXRlbWVudC5wcm90b3R5cGUuZ2V0QXJndW1lbnRzQXJyYXlBbGlhcyA9IGZ1bmN0aW9uIGdldEFyZ3VtZW50c0FycmF5QWxpYXMgKCkge1xuXHRcdGlmICghdGhpcy5hcmd1bWVudHNBcnJheUFsaWFzKSB7XG5cdFx0XHR0aGlzLmFyZ3VtZW50c0FycmF5QWxpYXMgPSB0aGlzLnNjb3BlLmNyZWF0ZUlkZW50aWZpZXIoJ2FyZ3NBcnJheScpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmFyZ3VtZW50c0FycmF5QWxpYXM7XG5cdH07XG5cblx0QmxvY2tTdGF0ZW1lbnQucHJvdG90eXBlLmdldFRoaXNBbGlhcyA9IGZ1bmN0aW9uIGdldFRoaXNBbGlhcyAoKSB7XG5cdFx0aWYgKCF0aGlzLnRoaXNBbGlhcykge1xuXHRcdFx0dGhpcy50aGlzQWxpYXMgPSB0aGlzLnNjb3BlLmNyZWF0ZUlkZW50aWZpZXIoJ3RoaXMnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy50aGlzQWxpYXM7XG5cdH07XG5cblx0QmxvY2tTdGF0ZW1lbnQucHJvdG90eXBlLmdldEluZGVudGF0aW9uID0gZnVuY3Rpb24gZ2V0SW5kZW50YXRpb24gKCkge1xuXHRcdHZhciB0aGlzJDEgPSB0aGlzO1xuXG5cdFx0aWYgKHRoaXMuaW5kZW50YXRpb24gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0dmFyIHNvdXJjZSA9IHRoaXMucHJvZ3JhbS5tYWdpY1N0cmluZy5vcmlnaW5hbDtcblxuXHRcdFx0dmFyIHVzZU91dGVyID0gdGhpcy5zeW50aGV0aWMgfHwgIXRoaXMuYm9keS5sZW5ndGg7XG5cdFx0XHR2YXIgYyA9IHVzZU91dGVyID8gdGhpcy5zdGFydCA6IHRoaXMuYm9keVswXS5zdGFydDtcblxuXHRcdFx0d2hpbGUgKGMgJiYgc291cmNlW2NdICE9PSAnXFxuJykgeyBjIC09IDE7IH1cblxuXHRcdFx0dGhpcy5pbmRlbnRhdGlvbiA9ICcnO1xuXG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG5cdFx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0XHRjICs9IDE7XG5cdFx0XHRcdHZhciBjaGFyID0gc291cmNlW2NdO1xuXG5cdFx0XHRcdGlmIChjaGFyICE9PSAnICcgJiYgY2hhciAhPT0gJ1xcdCcpIHsgYnJlYWs7IH1cblxuXHRcdFx0XHR0aGlzJDEuaW5kZW50YXRpb24gKz0gY2hhcjtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGluZGVudFN0cmluZyA9IHRoaXMucHJvZ3JhbS5tYWdpY1N0cmluZy5nZXRJbmRlbnRTdHJpbmcoKTtcblxuXHRcdFx0Ly8gYWNjb3VudCBmb3IgZGVkZW50ZWQgY2xhc3MgY29uc3RydWN0b3JzXG5cdFx0XHR2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XG5cdFx0XHR3aGlsZSAocGFyZW50KSB7XG5cdFx0XHRcdGlmIChwYXJlbnQua2luZCA9PT0gJ2NvbnN0cnVjdG9yJyAmJiAhcGFyZW50LnBhcmVudC5wYXJlbnQuc3VwZXJDbGFzcykge1xuXHRcdFx0XHRcdHRoaXMkMS5pbmRlbnRhdGlvbiA9IHRoaXMkMS5pbmRlbnRhdGlvbi5yZXBsYWNlKGluZGVudFN0cmluZywgJycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cGFyZW50ID0gcGFyZW50LnBhcmVudDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHVzZU91dGVyKSB7IHRoaXMuaW5kZW50YXRpb24gKz0gaW5kZW50U3RyaW5nOyB9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuaW5kZW50YXRpb247XG5cdH07XG5cblx0QmxvY2tTdGF0ZW1lbnQucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdHZhciB0aGlzJDEgPSB0aGlzO1xuXG5cdFx0dmFyIGluZGVudGF0aW9uID0gdGhpcy5nZXRJbmRlbnRhdGlvbigpO1xuXG5cdFx0dmFyIGludHJvU3RhdGVtZW50R2VuZXJhdG9ycyA9IFtdO1xuXG5cdFx0aWYgKHRoaXMuYXJndW1lbnRzQWxpYXMpIHtcblx0XHRcdGludHJvU3RhdGVtZW50R2VuZXJhdG9ycy5wdXNoKGZ1bmN0aW9uIChzdGFydCwgcHJlZml4LCBzdWZmaXgpIHtcblx0XHRcdFx0dmFyIGFzc2lnbm1lbnQgPSBwcmVmaXggKyBcInZhciBcIiArICh0aGlzJDEuYXJndW1lbnRzQWxpYXMpICsgXCIgPSBhcmd1bWVudHNcIiArIHN1ZmZpeDtcblx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHN0YXJ0LCBhc3NpZ25tZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnRoaXNBbGlhcykge1xuXHRcdFx0aW50cm9TdGF0ZW1lbnRHZW5lcmF0b3JzLnB1c2goZnVuY3Rpb24gKHN0YXJ0LCBwcmVmaXgsIHN1ZmZpeCkge1xuXHRcdFx0XHR2YXIgYXNzaWdubWVudCA9IHByZWZpeCArIFwidmFyIFwiICsgKHRoaXMkMS50aGlzQWxpYXMpICsgXCIgPSB0aGlzXCIgKyBzdWZmaXg7XG5cdFx0XHRcdGNvZGUuYXBwZW5kTGVmdChzdGFydCwgYXNzaWdubWVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5hcmd1bWVudHNBcnJheUFsaWFzKSB7XG5cdFx0XHRpbnRyb1N0YXRlbWVudEdlbmVyYXRvcnMucHVzaChmdW5jdGlvbiAoc3RhcnQsIHByZWZpeCwgc3VmZml4KSB7XG5cdFx0XHRcdHZhciBpID0gdGhpcyQxLnNjb3BlLmNyZWF0ZUlkZW50aWZpZXIoJ2knKTtcblx0XHRcdFx0dmFyIGFzc2lnbm1lbnQgPSBwcmVmaXggKyBcInZhciBcIiArIGkgKyBcIiA9IGFyZ3VtZW50cy5sZW5ndGgsIFwiICsgKHRoaXMkMS5hcmd1bWVudHNBcnJheUFsaWFzKSArIFwiID0gQXJyYXkoXCIgKyBpICsgXCIpO1xcblwiICsgaW5kZW50YXRpb24gKyBcIndoaWxlICggXCIgKyBpICsgXCItLSApIFwiICsgKHRoaXMkMS5hcmd1bWVudHNBcnJheUFsaWFzKSArIFwiW1wiICsgaSArIFwiXSA9IGFyZ3VtZW50c1tcIiArIGkgKyBcIl1cIiArIHN1ZmZpeDtcblx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHN0YXJ0LCBhc3NpZ25tZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICgvRnVuY3Rpb24vLnRlc3QodGhpcy5wYXJlbnQudHlwZSkpIHtcblx0XHRcdHRoaXMudHJhbnNwaWxlUGFyYW1ldGVycyhcblx0XHRcdFx0dGhpcy5wYXJlbnQucGFyYW1zLFxuXHRcdFx0XHRjb2RlLFxuXHRcdFx0XHR0cmFuc2Zvcm1zLFxuXHRcdFx0XHRpbmRlbnRhdGlvbixcblx0XHRcdFx0aW50cm9TdGF0ZW1lbnRHZW5lcmF0b3JzXG5cdFx0XHQpO1xuXHRcdH0gZWxzZSBpZiAoJ0NhdGNoQ2xhdXNlJyA9PT0gdGhpcy5wYXJlbnQudHlwZSkge1xuXHRcdFx0dGhpcy50cmFuc3BpbGVQYXJhbWV0ZXJzKFxuXHRcdFx0XHRbdGhpcy5wYXJlbnQucGFyYW1dLFxuXHRcdFx0XHRjb2RlLFxuXHRcdFx0XHR0cmFuc2Zvcm1zLFxuXHRcdFx0XHRpbmRlbnRhdGlvbixcblx0XHRcdFx0aW50cm9TdGF0ZW1lbnRHZW5lcmF0b3JzXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGlmICh0cmFuc2Zvcm1zLmxldENvbnN0ICYmIHRoaXMuaXNGdW5jdGlvbkJsb2NrKSB7XG5cdFx0XHR0aGlzLnRyYW5zcGlsZUJsb2NrU2NvcGVkSWRlbnRpZmllcnMoY29kZSk7XG5cdFx0fVxuXG5cdFx0Tm9kZSQkMS5wcm90b3R5cGUudHJhbnNwaWxlLmNhbGwodGhpcywgY29kZSwgdHJhbnNmb3Jtcyk7XG5cblx0XHRpZiAodGhpcy5jcmVhdGVkRGVjbGFyYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0aW50cm9TdGF0ZW1lbnRHZW5lcmF0b3JzLnB1c2goZnVuY3Rpb24gKHN0YXJ0LCBwcmVmaXgsIHN1ZmZpeCkge1xuXHRcdFx0XHR2YXIgYXNzaWdubWVudCA9IHByZWZpeCArIFwidmFyIFwiICsgKHRoaXMkMS5jcmVhdGVkRGVjbGFyYXRpb25zLmpvaW4oJywgJykpICsgc3VmZml4O1xuXHRcdFx0XHRjb2RlLmFwcGVuZExlZnQoc3RhcnQsIGFzc2lnbm1lbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuc3ludGhldGljKSB7XG5cdFx0XHRpZiAodGhpcy5wYXJlbnQudHlwZSA9PT0gJ0Fycm93RnVuY3Rpb25FeHByZXNzaW9uJykge1xuXHRcdFx0XHR2YXIgZXhwciA9IHRoaXMuYm9keVswXTtcblxuXHRcdFx0XHRpZiAoaW50cm9TdGF0ZW1lbnRHZW5lcmF0b3JzLmxlbmd0aCkge1xuXHRcdFx0XHRcdGNvZGVcblx0XHRcdFx0XHRcdC5hcHBlbmRMZWZ0KHRoaXMuc3RhcnQsIFwie1wiKVxuXHRcdFx0XHRcdFx0LnByZXBlbmRSaWdodCh0aGlzLmVuZCwgKCh0aGlzLnBhcmVudC5nZXRJbmRlbnRhdGlvbigpKSArIFwifVwiKSk7XG5cblx0XHRcdFx0XHRjb2RlLnByZXBlbmRSaWdodChleHByLnN0YXJ0LCAoXCJcXG5cIiArIGluZGVudGF0aW9uICsgXCJyZXR1cm4gXCIpKTtcblx0XHRcdFx0XHRjb2RlLmFwcGVuZExlZnQoZXhwci5lbmQsIFwiO1xcblwiKTtcblx0XHRcdFx0fSBlbHNlIGlmICh0cmFuc2Zvcm1zLmFycm93KSB7XG5cdFx0XHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQoZXhwci5zdGFydCwgXCJ7IHJldHVybiBcIik7XG5cdFx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KGV4cHIuZW5kLCBcIjsgfVwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChpbnRyb1N0YXRlbWVudEdlbmVyYXRvcnMubGVuZ3RoKSB7XG5cdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KHRoaXMuc3RhcnQsIFwie1wiKS5hcHBlbmRMZWZ0KHRoaXMuZW5kLCBcIn1cIik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dmFyIHN0YXJ0O1xuXHRcdGlmIChpc1VzZVN0cmljdCh0aGlzLmJvZHlbMF0pKSB7XG5cdFx0XHRzdGFydCA9IHRoaXMuYm9keVswXS5lbmQ7XG5cdFx0fSBlbHNlIGlmICh0aGlzLnN5bnRoZXRpYyB8fCB0aGlzLnBhcmVudC50eXBlID09PSAnUm9vdCcpIHtcblx0XHRcdHN0YXJ0ID0gdGhpcy5zdGFydDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3RhcnQgPSB0aGlzLnN0YXJ0ICsgMTtcblx0XHR9XG5cblx0XHR2YXIgcHJlZml4ID0gXCJcXG5cIiArIGluZGVudGF0aW9uO1xuXHRcdHZhciBzdWZmaXggPSAnOyc7XG5cdFx0aW50cm9TdGF0ZW1lbnRHZW5lcmF0b3JzLmZvckVhY2goZnVuY3Rpb24gKGZuLCBpKSB7XG5cdFx0XHRpZiAoaSA9PT0gaW50cm9TdGF0ZW1lbnRHZW5lcmF0b3JzLmxlbmd0aCAtIDEpIHsgc3VmZml4ID0gXCI7XFxuXCI7IH1cblx0XHRcdGZuKHN0YXJ0LCBwcmVmaXgsIHN1ZmZpeCk7XG5cdFx0fSk7XG5cdH07XG5cblx0QmxvY2tTdGF0ZW1lbnQucHJvdG90eXBlLnRyYW5zcGlsZVBhcmFtZXRlcnMgPSBmdW5jdGlvbiB0cmFuc3BpbGVQYXJhbWV0ZXJzIChwYXJhbXMsIGNvZGUsIHRyYW5zZm9ybXMsIGluZGVudGF0aW9uLCBpbnRyb1N0YXRlbWVudEdlbmVyYXRvcnMpIHtcblx0XHR2YXIgdGhpcyQxID0gdGhpcztcblxuXHRcdHBhcmFtcy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbSkge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRwYXJhbS50eXBlID09PSAnQXNzaWdubWVudFBhdHRlcm4nICYmXG5cdFx0XHRcdHBhcmFtLmxlZnQudHlwZSA9PT0gJ0lkZW50aWZpZXInXG5cdFx0XHQpIHtcblx0XHRcdFx0aWYgKHRyYW5zZm9ybXMuZGVmYXVsdFBhcmFtZXRlcikge1xuXHRcdFx0XHRcdGludHJvU3RhdGVtZW50R2VuZXJhdG9ycy5wdXNoKGZ1bmN0aW9uIChzdGFydCwgcHJlZml4LCBzdWZmaXgpIHtcblx0XHRcdFx0XHRcdHZhciBsaHMgPSBwcmVmaXggKyBcImlmICggXCIgKyAocGFyYW0ubGVmdC5uYW1lKSArIFwiID09PSB2b2lkIDAgKSBcIiArIChwYXJhbS5sZWZ0Lm5hbWUpO1xuXG5cdFx0XHRcdFx0XHRjb2RlXG5cdFx0XHRcdFx0XHRcdC5wcmVwZW5kUmlnaHQocGFyYW0ubGVmdC5lbmQsIGxocylcblx0XHRcdFx0XHRcdFx0Lm1vdmUocGFyYW0ubGVmdC5lbmQsIHBhcmFtLnJpZ2h0LmVuZCwgc3RhcnQpXG5cdFx0XHRcdFx0XHRcdC5hcHBlbmRMZWZ0KHBhcmFtLnJpZ2h0LmVuZCwgc3VmZml4KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChwYXJhbS50eXBlID09PSAnUmVzdEVsZW1lbnQnKSB7XG5cdFx0XHRcdGlmICh0cmFuc2Zvcm1zLnNwcmVhZFJlc3QpIHtcblx0XHRcdFx0XHRpbnRyb1N0YXRlbWVudEdlbmVyYXRvcnMucHVzaChmdW5jdGlvbiAoc3RhcnQsIHByZWZpeCwgc3VmZml4KSB7XG5cdFx0XHRcdFx0XHR2YXIgcGVudWx0aW1hdGVQYXJhbSA9IHBhcmFtc1twYXJhbXMubGVuZ3RoIC0gMl07XG5cblx0XHRcdFx0XHRcdGlmIChwZW51bHRpbWF0ZVBhcmFtKSB7XG5cdFx0XHRcdFx0XHRcdGNvZGUucmVtb3ZlKFxuXHRcdFx0XHRcdFx0XHRcdHBlbnVsdGltYXRlUGFyYW0gPyBwZW51bHRpbWF0ZVBhcmFtLmVuZCA6IHBhcmFtLnN0YXJ0LFxuXHRcdFx0XHRcdFx0XHRcdHBhcmFtLmVuZFxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dmFyIHN0YXJ0JDEgPSBwYXJhbS5zdGFydCxcblx0XHRcdFx0XHRcdFx0XHRlbmQgPSBwYXJhbS5lbmQ7IC8vIFRPRE8gaHR0cHM6Ly9naXRsYWIuY29tL1JpY2gtSGFycmlzL2J1YmxlL2lzc3Vlcy84XG5cblx0XHRcdFx0XHRcdFx0d2hpbGUgKC9cXHMvLnRlc3QoY29kZS5vcmlnaW5hbFtzdGFydCQxIC0gMV0pKSB7IHN0YXJ0JDEgLT0gMTsgfVxuXHRcdFx0XHRcdFx0XHR3aGlsZSAoL1xccy8udGVzdChjb2RlLm9yaWdpbmFsW2VuZF0pKSB7IGVuZCArPSAxOyB9XG5cblx0XHRcdFx0XHRcdFx0Y29kZS5yZW1vdmUoc3RhcnQkMSwgZW5kKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIG5hbWUgPSBwYXJhbS5hcmd1bWVudC5uYW1lO1xuXHRcdFx0XHRcdFx0dmFyIGxlbiA9IHRoaXMkMS5zY29wZS5jcmVhdGVJZGVudGlmaWVyKCdsZW4nKTtcblx0XHRcdFx0XHRcdHZhciBjb3VudCA9IHBhcmFtcy5sZW5ndGggLSAxO1xuXG5cdFx0XHRcdFx0XHRpZiAoY291bnQpIHtcblx0XHRcdFx0XHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQoXG5cdFx0XHRcdFx0XHRcdFx0c3RhcnQsXG5cdFx0XHRcdFx0XHRcdFx0KHByZWZpeCArIFwidmFyIFwiICsgbmFtZSArIFwiID0gW10sIFwiICsgbGVuICsgXCIgPSBhcmd1bWVudHMubGVuZ3RoIC0gXCIgKyBjb3VudCArIFwiO1xcblwiICsgaW5kZW50YXRpb24gKyBcIndoaWxlICggXCIgKyBsZW4gKyBcIi0tID4gMCApIFwiICsgbmFtZSArIFwiWyBcIiArIGxlbiArIFwiIF0gPSBhcmd1bWVudHNbIFwiICsgbGVuICsgXCIgKyBcIiArIGNvdW50ICsgXCIgXVwiICsgc3VmZml4KVxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQoXG5cdFx0XHRcdFx0XHRcdFx0c3RhcnQsXG5cdFx0XHRcdFx0XHRcdFx0KHByZWZpeCArIFwidmFyIFwiICsgbmFtZSArIFwiID0gW10sIFwiICsgbGVuICsgXCIgPSBhcmd1bWVudHMubGVuZ3RoO1xcblwiICsgaW5kZW50YXRpb24gKyBcIndoaWxlICggXCIgKyBsZW4gKyBcIi0tICkgXCIgKyBuYW1lICsgXCJbIFwiICsgbGVuICsgXCIgXSA9IGFyZ3VtZW50c1sgXCIgKyBsZW4gKyBcIiBdXCIgKyBzdWZmaXgpXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAocGFyYW0udHlwZSAhPT0gJ0lkZW50aWZpZXInKSB7XG5cdFx0XHRcdGlmICh0cmFuc2Zvcm1zLnBhcmFtZXRlckRlc3RydWN0dXJpbmcpIHtcblx0XHRcdFx0XHR2YXIgcmVmID0gdGhpcyQxLnNjb3BlLmNyZWF0ZUlkZW50aWZpZXIoJ3JlZicpO1xuXHRcdFx0XHRcdGRlc3RydWN0dXJlKFxuXHRcdFx0XHRcdFx0Y29kZSxcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gdGhpcyQxLnNjb3BlLmNyZWF0ZUlkZW50aWZpZXIoaWQpOyB9LFxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gKHJlZikge1xuXHRcdFx0XHRcdFx0XHR2YXIgbmFtZSA9IHJlZi5uYW1lO1xuXG5cdFx0XHRcdFx0XHRcdHJldHVybiB0aGlzJDEuc2NvcGUucmVzb2x2ZU5hbWUobmFtZSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHBhcmFtLFxuXHRcdFx0XHRcdFx0cmVmLFxuXHRcdFx0XHRcdFx0ZmFsc2UsXG5cdFx0XHRcdFx0XHRpbnRyb1N0YXRlbWVudEdlbmVyYXRvcnNcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KHBhcmFtLnN0YXJ0LCByZWYpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0QmxvY2tTdGF0ZW1lbnQucHJvdG90eXBlLnRyYW5zcGlsZUJsb2NrU2NvcGVkSWRlbnRpZmllcnMgPSBmdW5jdGlvbiB0cmFuc3BpbGVCbG9ja1Njb3BlZElkZW50aWZpZXJzIChjb2RlKSB7XG5cdFx0dmFyIHRoaXMkMSA9IHRoaXM7XG5cblx0XHRPYmplY3Qua2V5cyh0aGlzLnNjb3BlLmJsb2NrU2NvcGVkRGVjbGFyYXRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG5cdFx0XHR2YXIgZGVjbGFyYXRpb25zID0gdGhpcyQxLnNjb3BlLmJsb2NrU2NvcGVkRGVjbGFyYXRpb25zW25hbWVdO1xuXG5cdFx0XHRmb3IgKHZhciBpJDIgPSAwLCBsaXN0JDIgPSBkZWNsYXJhdGlvbnM7IGkkMiA8IGxpc3QkMi5sZW5ndGg7IGkkMiArPSAxKSB7XG5cdFx0XHRcdHZhciBkZWNsYXJhdGlvbiA9IGxpc3QkMltpJDJdO1xuXG5cdFx0XHRcdHZhciBjb250ID0gZmFsc2U7IC8vIFRPRE8gaW1wbGVtZW50IHByb3BlciBjb250aW51ZS4uLlxuXG5cdFx0XHRcdGlmIChkZWNsYXJhdGlvbi5raW5kID09PSAnZm9yLmxldCcpIHtcblx0XHRcdFx0XHQvLyBzcGVjaWFsIGNhc2Vcblx0XHRcdFx0XHR2YXIgZm9yU3RhdGVtZW50ID0gZGVjbGFyYXRpb24ubm9kZS5maW5kTmVhcmVzdCgnRm9yU3RhdGVtZW50Jyk7XG5cblx0XHRcdFx0XHRpZiAoZm9yU3RhdGVtZW50LnNob3VsZFJld3JpdGVBc0Z1bmN0aW9uKSB7XG5cdFx0XHRcdFx0XHR2YXIgb3V0ZXJBbGlhcyA9IHRoaXMkMS5zY29wZS5jcmVhdGVJZGVudGlmaWVyKG5hbWUpO1xuXHRcdFx0XHRcdFx0dmFyIGlubmVyQWxpYXMgPSBmb3JTdGF0ZW1lbnQucmVhc3NpZ25lZFtuYW1lXVxuXHRcdFx0XHRcdFx0XHQ/IHRoaXMkMS5zY29wZS5jcmVhdGVJZGVudGlmaWVyKG5hbWUpXG5cdFx0XHRcdFx0XHRcdDogbmFtZTtcblxuXHRcdFx0XHRcdFx0ZGVjbGFyYXRpb24ubmFtZSA9IG91dGVyQWxpYXM7XG5cdFx0XHRcdFx0XHRjb2RlLm92ZXJ3cml0ZShcblx0XHRcdFx0XHRcdFx0ZGVjbGFyYXRpb24ubm9kZS5zdGFydCxcblx0XHRcdFx0XHRcdFx0ZGVjbGFyYXRpb24ubm9kZS5lbmQsXG5cdFx0XHRcdFx0XHRcdG91dGVyQWxpYXMsXG5cdFx0XHRcdFx0XHRcdHsgc3RvcmVOYW1lOiB0cnVlIH1cblx0XHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRcdGZvclN0YXRlbWVudC5hbGlhc2VzW25hbWVdID0ge1xuXHRcdFx0XHRcdFx0XHRvdXRlcjogb3V0ZXJBbGlhcyxcblx0XHRcdFx0XHRcdFx0aW5uZXI6IGlubmVyQWxpYXNcblx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwLCBsaXN0ID0gZGVjbGFyYXRpb24uaW5zdGFuY2VzOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0XHRcdFx0XHR2YXIgaWRlbnRpZmllciA9IGxpc3RbaV07XG5cblx0XHRcdFx0XHRcdFx0dmFyIGFsaWFzID0gZm9yU3RhdGVtZW50LmJvZHkuY29udGFpbnMoaWRlbnRpZmllcilcblx0XHRcdFx0XHRcdFx0XHQ/IGlubmVyQWxpYXNcblx0XHRcdFx0XHRcdFx0XHQ6IG91dGVyQWxpYXM7XG5cblx0XHRcdFx0XHRcdFx0aWYgKG5hbWUgIT09IGFsaWFzKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29kZS5vdmVyd3JpdGUoaWRlbnRpZmllci5zdGFydCwgaWRlbnRpZmllci5lbmQsIGFsaWFzLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzdG9yZU5hbWU6IHRydWVcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRjb250ID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIWNvbnQpIHtcblx0XHRcdFx0XHR2YXIgYWxpYXMkMSA9IHRoaXMkMS5zY29wZS5jcmVhdGVJZGVudGlmaWVyKG5hbWUpO1xuXG5cdFx0XHRcdFx0aWYgKG5hbWUgIT09IGFsaWFzJDEpIHtcblx0XHRcdFx0XHRcdGRlY2xhcmF0aW9uLm5hbWUgPSBhbGlhcyQxO1xuXHRcdFx0XHRcdFx0Y29kZS5vdmVyd3JpdGUoXG5cdFx0XHRcdFx0XHRcdGRlY2xhcmF0aW9uLm5vZGUuc3RhcnQsXG5cdFx0XHRcdFx0XHRcdGRlY2xhcmF0aW9uLm5vZGUuZW5kLFxuXHRcdFx0XHRcdFx0XHRhbGlhcyQxLFxuXHRcdFx0XHRcdFx0XHR7IHN0b3JlTmFtZTogdHJ1ZSB9XG5cdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBpJDEgPSAwLCBsaXN0JDEgPSBkZWNsYXJhdGlvbi5pbnN0YW5jZXM7IGkkMSA8IGxpc3QkMS5sZW5ndGg7IGkkMSArPSAxKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBpZGVudGlmaWVyJDEgPSBsaXN0JDFbaSQxXTtcblxuXHRcdFx0XHRcdFx0XHRpZGVudGlmaWVyJDEucmV3cml0dGVuID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0Y29kZS5vdmVyd3JpdGUoaWRlbnRpZmllciQxLnN0YXJ0LCBpZGVudGlmaWVyJDEuZW5kLCBhbGlhcyQxLCB7XG5cdFx0XHRcdFx0XHRcdFx0c3RvcmVOYW1lOiB0cnVlXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdHJldHVybiBCbG9ja1N0YXRlbWVudDtcbn0oTm9kZSkpO1xuXG5mdW5jdGlvbiBpc0FyZ3VtZW50cyhub2RlKSB7XG5cdHJldHVybiBub2RlLnR5cGUgPT09ICdJZGVudGlmaWVyJyAmJiBub2RlLm5hbWUgPT09ICdhcmd1bWVudHMnO1xufVxuXG5mdW5jdGlvbiBzcHJlYWQoXG5cdGNvZGUsXG5cdGVsZW1lbnRzLFxuXHRzdGFydCxcblx0YXJndW1lbnRzQXJyYXlBbGlhcyxcblx0aXNOZXdcbikge1xuXHR2YXIgaSA9IGVsZW1lbnRzLmxlbmd0aDtcblx0dmFyIGZpcnN0U3ByZWFkSW5kZXggPSAtMTtcblxuXHR3aGlsZSAoaS0tKSB7XG5cdFx0dmFyIGVsZW1lbnQkMSA9IGVsZW1lbnRzW2ldO1xuXHRcdGlmIChlbGVtZW50JDEgJiYgZWxlbWVudCQxLnR5cGUgPT09ICdTcHJlYWRFbGVtZW50Jykge1xuXHRcdFx0aWYgKGlzQXJndW1lbnRzKGVsZW1lbnQkMS5hcmd1bWVudCkpIHtcblx0XHRcdFx0Y29kZS5vdmVyd3JpdGUoXG5cdFx0XHRcdFx0ZWxlbWVudCQxLmFyZ3VtZW50LnN0YXJ0LFxuXHRcdFx0XHRcdGVsZW1lbnQkMS5hcmd1bWVudC5lbmQsXG5cdFx0XHRcdFx0YXJndW1lbnRzQXJyYXlBbGlhc1xuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHRmaXJzdFNwcmVhZEluZGV4ID0gaTtcblx0XHR9XG5cdH1cblxuXHRpZiAoZmlyc3RTcHJlYWRJbmRleCA9PT0gLTEpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIGZhbHNlIGluZGljYXRlcyBubyBzcHJlYWQgZWxlbWVudHNcblxuXHRpZiAoaXNOZXcpIHtcblx0XHRmb3IgKGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpICs9IDEpIHtcblx0XHRcdHZhciBlbGVtZW50JDIgPSBlbGVtZW50c1tpXTtcblx0XHRcdGlmIChlbGVtZW50JDIudHlwZSA9PT0gJ1NwcmVhZEVsZW1lbnQnKSB7XG5cdFx0XHRcdGNvZGUucmVtb3ZlKGVsZW1lbnQkMi5zdGFydCwgZWxlbWVudCQyLmFyZ3VtZW50LnN0YXJ0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KGVsZW1lbnQkMi5zdGFydCwgJ1snKTtcblx0XHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQoZWxlbWVudCQyLmVuZCwgJ10nKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTsgLy8gdHJ1ZSBpbmRpY2F0ZXMgc29tZSBzcHJlYWQgZWxlbWVudHNcblx0fVxuXG5cdHZhciBlbGVtZW50ID0gZWxlbWVudHNbZmlyc3RTcHJlYWRJbmRleF07XG5cdHZhciBwcmV2aW91c0VsZW1lbnQgPSBlbGVtZW50c1tmaXJzdFNwcmVhZEluZGV4IC0gMV07XG5cblx0aWYgKCFwcmV2aW91c0VsZW1lbnQpIHtcblx0XHRjb2RlLnJlbW92ZShzdGFydCwgZWxlbWVudC5zdGFydCk7XG5cdFx0Y29kZS5vdmVyd3JpdGUoZWxlbWVudC5lbmQsIGVsZW1lbnRzWzFdLnN0YXJ0LCAnLmNvbmNhdCggJyk7XG5cdH0gZWxzZSB7XG5cdFx0Y29kZS5vdmVyd3JpdGUocHJldmlvdXNFbGVtZW50LmVuZCwgZWxlbWVudC5zdGFydCwgJyBdLmNvbmNhdCggJyk7XG5cdH1cblxuXHRmb3IgKGkgPSBmaXJzdFNwcmVhZEluZGV4OyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpICs9IDEpIHtcblx0XHRlbGVtZW50ID0gZWxlbWVudHNbaV07XG5cblx0XHRpZiAoZWxlbWVudCkge1xuXHRcdFx0aWYgKGVsZW1lbnQudHlwZSA9PT0gJ1NwcmVhZEVsZW1lbnQnKSB7XG5cdFx0XHRcdGNvZGUucmVtb3ZlKGVsZW1lbnQuc3RhcnQsIGVsZW1lbnQuYXJndW1lbnQuc3RhcnQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KGVsZW1lbnQuc3RhcnQsICdbJyk7XG5cdFx0XHRcdGNvZGUuYXBwZW5kTGVmdChlbGVtZW50LmVuZCwgJ10nKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdHJ1ZTsgLy8gdHJ1ZSBpbmRpY2F0ZXMgc29tZSBzcHJlYWQgZWxlbWVudHNcbn1cblxudmFyIEFycmF5RXhwcmVzc2lvbiA9IChmdW5jdGlvbiAoTm9kZSQkMSkge1xuXHRmdW5jdGlvbiBBcnJheUV4cHJlc3Npb24gKCkge1xuXHRcdE5vZGUkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTm9kZSQkMSApIEFycmF5RXhwcmVzc2lvbi5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRBcnJheUV4cHJlc3Npb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTm9kZSQkMSAmJiBOb2RlJCQxLnByb3RvdHlwZSApO1xuXHRBcnJheUV4cHJlc3Npb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQXJyYXlFeHByZXNzaW9uO1xuXG5cdEFycmF5RXhwcmVzc2lvbi5wcm90b3R5cGUuaW5pdGlhbGlzZSA9IGZ1bmN0aW9uIGluaXRpYWxpc2UgKHRyYW5zZm9ybXMpIHtcblx0XHR2YXIgdGhpcyQxID0gdGhpcztcblxuXHRcdGlmICh0cmFuc2Zvcm1zLnNwcmVhZFJlc3QgJiYgdGhpcy5lbGVtZW50cy5sZW5ndGgpIHtcblx0XHRcdHZhciBsZXhpY2FsQm91bmRhcnkgPSB0aGlzLmZpbmRMZXhpY2FsQm91bmRhcnkoKTtcblxuXHRcdFx0dmFyIGkgPSB0aGlzLmVsZW1lbnRzLmxlbmd0aDtcblx0XHRcdHdoaWxlIChpLS0pIHtcblx0XHRcdFx0dmFyIGVsZW1lbnQgPSB0aGlzJDEuZWxlbWVudHNbaV07XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHRlbGVtZW50ICYmXG5cdFx0XHRcdFx0ZWxlbWVudC50eXBlID09PSAnU3ByZWFkRWxlbWVudCcgJiZcblx0XHRcdFx0XHRpc0FyZ3VtZW50cyhlbGVtZW50LmFyZ3VtZW50KVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHR0aGlzJDEuYXJndW1lbnRzQXJyYXlBbGlhcyA9IGxleGljYWxCb3VuZGFyeS5nZXRBcmd1bWVudHNBcnJheUFsaWFzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHROb2RlJCQxLnByb3RvdHlwZS5pbml0aWFsaXNlLmNhbGwodGhpcywgdHJhbnNmb3Jtcyk7XG5cdH07XG5cblx0QXJyYXlFeHByZXNzaW9uLnByb3RvdHlwZS50cmFuc3BpbGUgPSBmdW5jdGlvbiB0cmFuc3BpbGUgKGNvZGUsIHRyYW5zZm9ybXMpIHtcblx0XHROb2RlJCQxLnByb3RvdHlwZS50cmFuc3BpbGUuY2FsbCh0aGlzLCBjb2RlLCB0cmFuc2Zvcm1zKTtcblxuXHRcdGlmICh0cmFuc2Zvcm1zLnNwcmVhZFJlc3QpIHtcblx0XHRcdC8vIGVyYXNlIHRyYWlsaW5nIGNvbW1hIGFmdGVyIGxhc3QgYXJyYXkgZWxlbWVudCBpZiBub3QgYW4gYXJyYXkgaG9sZVxuXHRcdFx0aWYgKHRoaXMuZWxlbWVudHMubGVuZ3RoKSB7XG5cdFx0XHRcdHZhciBsYXN0RWxlbWVudCA9IHRoaXMuZWxlbWVudHNbdGhpcy5lbGVtZW50cy5sZW5ndGggLSAxXTtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdGxhc3RFbGVtZW50ICYmXG5cdFx0XHRcdFx0L1xccyosLy50ZXN0KGNvZGUub3JpZ2luYWwuc2xpY2UobGFzdEVsZW1lbnQuZW5kLCB0aGlzLmVuZCkpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdGNvZGUub3ZlcndyaXRlKGxhc3RFbGVtZW50LmVuZCwgdGhpcy5lbmQgLSAxLCAnICcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0aGlzLmVsZW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHR2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudHNbMF07XG5cblx0XHRcdFx0aWYgKGVsZW1lbnQgJiYgZWxlbWVudC50eXBlID09PSAnU3ByZWFkRWxlbWVudCcpIHtcblx0XHRcdFx0XHQvLyBzcGVjaWFsIGNhc2Ug4oCTIFsgLi4uYXJndW1lbnRzIF1cblx0XHRcdFx0XHRpZiAoaXNBcmd1bWVudHMoZWxlbWVudC5hcmd1bWVudCkpIHtcblx0XHRcdFx0XHRcdGNvZGUub3ZlcndyaXRlKFxuXHRcdFx0XHRcdFx0XHR0aGlzLnN0YXJ0LFxuXHRcdFx0XHRcdFx0XHR0aGlzLmVuZCxcblx0XHRcdFx0XHRcdFx0KFwiW10uY29uY2F0KCBcIiArICh0aGlzLmFyZ3VtZW50c0FycmF5QWxpYXMpICsgXCIgKVwiKVxuXHRcdFx0XHRcdFx0KTsgLy8gVE9ETyBpZiB0aGlzIGlzIHRoZSBvbmx5IHVzZSBvZiBhcmdzQXJyYXksIGRvbid0IGJvdGhlciBjb25jYXRpbmdcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29kZS5vdmVyd3JpdGUodGhpcy5zdGFydCwgZWxlbWVudC5hcmd1bWVudC5zdGFydCwgJ1tdLmNvbmNhdCggJyk7XG5cdFx0XHRcdFx0XHRjb2RlLm92ZXJ3cml0ZShlbGVtZW50LmVuZCwgdGhpcy5lbmQsICcgKScpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFyIGhhc1NwcmVhZEVsZW1lbnRzID0gc3ByZWFkKFxuXHRcdFx0XHRcdGNvZGUsXG5cdFx0XHRcdFx0dGhpcy5lbGVtZW50cyxcblx0XHRcdFx0XHR0aGlzLnN0YXJ0LFxuXHRcdFx0XHRcdHRoaXMuYXJndW1lbnRzQXJyYXlBbGlhc1xuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGlmIChoYXNTcHJlYWRFbGVtZW50cykge1xuXHRcdFx0XHRcdGNvZGUub3ZlcndyaXRlKHRoaXMuZW5kIC0gMSwgdGhpcy5lbmQsICcpJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIEFycmF5RXhwcmVzc2lvbjtcbn0oTm9kZSkpO1xuXG5mdW5jdGlvbiByZW1vdmVUcmFpbGluZ0NvbW1hKGNvZGUsIGMpIHtcblx0d2hpbGUgKGNvZGUub3JpZ2luYWxbY10gIT09ICcpJykge1xuXHRcdGlmIChjb2RlLm9yaWdpbmFsW2NdID09PSAnLCcpIHtcblx0XHRcdGNvZGUucmVtb3ZlKGMsIGMgKyAxKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoY29kZS5vcmlnaW5hbFtjXSA9PT0gJy8nKSB7XG5cdFx0XHRjID0gY29kZS5vcmlnaW5hbC5pbmRleE9mKGNvZGUub3JpZ2luYWxbYyArIDFdID09PSAnLycgPyAnXFxuJyA6ICcqLycsIGMpICsgMTtcblx0XHR9XG5cdFx0YyArPSAxO1xuXHR9XG59XG5cbnZhciBBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbiA9IChmdW5jdGlvbiAoTm9kZSQkMSkge1xuXHRmdW5jdGlvbiBBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbiAoKSB7XG5cdFx0Tm9kZSQkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0aWYgKCBOb2RlJCQxICkgQXJyb3dGdW5jdGlvbkV4cHJlc3Npb24uX19wcm90b19fID0gTm9kZSQkMTtcblx0QXJyb3dGdW5jdGlvbkV4cHJlc3Npb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTm9kZSQkMSAmJiBOb2RlJCQxLnByb3RvdHlwZSApO1xuXHRBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbjtcblxuXHRBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbi5wcm90b3R5cGUuaW5pdGlhbGlzZSA9IGZ1bmN0aW9uIGluaXRpYWxpc2UgKHRyYW5zZm9ybXMpIHtcblx0XHR0aGlzLmJvZHkuY3JlYXRlU2NvcGUoKTtcblx0XHROb2RlJCQxLnByb3RvdHlwZS5pbml0aWFsaXNlLmNhbGwodGhpcywgdHJhbnNmb3Jtcyk7XG5cdH07XG5cblx0QXJyb3dGdW5jdGlvbkV4cHJlc3Npb24ucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdHZhciBuYWtlZCA9IHRoaXMucGFyYW1zLmxlbmd0aCA9PT0gMSAmJiB0aGlzLnN0YXJ0ID09PSB0aGlzLnBhcmFtc1swXS5zdGFydDtcblxuXHRcdGlmICh0cmFuc2Zvcm1zLmFycm93IHx8IHRoaXMubmVlZHNBcmd1bWVudHModHJhbnNmb3JtcykpIHtcblx0XHRcdC8vIHJlbW92ZSBhcnJvd1xuXHRcdFx0dmFyIGNoYXJJbmRleCA9IHRoaXMuYm9keS5zdGFydDtcblx0XHRcdHdoaWxlIChjb2RlLm9yaWdpbmFsW2NoYXJJbmRleF0gIT09ICc9Jykge1xuXHRcdFx0XHRjaGFySW5kZXggLT0gMTtcblx0XHRcdH1cblx0XHRcdGNvZGUucmVtb3ZlKGNoYXJJbmRleCwgdGhpcy5ib2R5LnN0YXJ0KTtcblxuXHRcdFx0Tm9kZSQkMS5wcm90b3R5cGUudHJhbnNwaWxlLmNhbGwodGhpcywgY29kZSwgdHJhbnNmb3Jtcyk7XG5cblx0XHRcdC8vIHdyYXAgbmFrZWQgcGFyYW1ldGVyXG5cdFx0XHRpZiAobmFrZWQpIHtcblx0XHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQodGhpcy5wYXJhbXNbMF0uc3RhcnQsICcoJyk7XG5cdFx0XHRcdGNvZGUuYXBwZW5kTGVmdCh0aGlzLnBhcmFtc1swXS5lbmQsICcpJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGFkZCBmdW5jdGlvblxuXHRcdFx0aWYgKHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LnR5cGUgPT09ICdFeHByZXNzaW9uU3RhdGVtZW50Jykge1xuXHRcdFx0XHQvLyBzdGFuZGFsb25lIGV4cHJlc3Npb24gc3RhdGVtZW50XG5cdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KHRoaXMuc3RhcnQsICchZnVuY3Rpb24nKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KHRoaXMuc3RhcnQsICdmdW5jdGlvbiAnKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Tm9kZSQkMS5wcm90b3R5cGUudHJhbnNwaWxlLmNhbGwodGhpcywgY29kZSwgdHJhbnNmb3Jtcyk7XG5cdFx0fVxuXG5cdFx0aWYgKHRyYW5zZm9ybXMudHJhaWxpbmdGdW5jdGlvbkNvbW1hcyAmJiB0aGlzLnBhcmFtcy5sZW5ndGggJiYgIW5ha2VkKSB7XG5cdFx0XHRyZW1vdmVUcmFpbGluZ0NvbW1hKGNvZGUsIHRoaXMucGFyYW1zW3RoaXMucGFyYW1zLmxlbmd0aCAtIDFdLmVuZCk7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIFJldHVybnMgd2hldGhlciBhbnkgdHJhbnNmb3JtcyB0aGF0IHdpbGwgaGFwcGVuIHVzZSBgYXJndW1lbnRzYFxuXHRBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbi5wcm90b3R5cGUubmVlZHNBcmd1bWVudHMgPSBmdW5jdGlvbiBuZWVkc0FyZ3VtZW50cyAodHJhbnNmb3Jtcykge1xuXHRcdHJldHVybiAoXG5cdFx0XHR0cmFuc2Zvcm1zLnNwcmVhZFJlc3QgJiZcblx0XHRcdHRoaXMucGFyYW1zLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHsgcmV0dXJuIHBhcmFtLnR5cGUgPT09ICdSZXN0RWxlbWVudCc7IH0pLmxlbmd0aCA+IDBcblx0XHQpO1xuXHR9O1xuXG5cdHJldHVybiBBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbjtcbn0oTm9kZSkpO1xuXG5mdW5jdGlvbiBjaGVja0NvbnN0KGlkZW50aWZpZXIsIHNjb3BlKSB7XG5cdHZhciBkZWNsYXJhdGlvbiA9IHNjb3BlLmZpbmREZWNsYXJhdGlvbihpZGVudGlmaWVyLm5hbWUpO1xuXHRpZiAoZGVjbGFyYXRpb24gJiYgZGVjbGFyYXRpb24ua2luZCA9PT0gJ2NvbnN0Jykge1xuXHRcdHRocm93IG5ldyBDb21waWxlRXJyb3IoKChpZGVudGlmaWVyLm5hbWUpICsgXCIgaXMgcmVhZC1vbmx5XCIpLCBpZGVudGlmaWVyKTtcblx0fVxufVxuXG52YXIgQXNzaWdubWVudEV4cHJlc3Npb24gPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gQXNzaWdubWVudEV4cHJlc3Npb24gKCkge1xuXHRcdE5vZGUkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTm9kZSQkMSApIEFzc2lnbm1lbnRFeHByZXNzaW9uLl9fcHJvdG9fXyA9IE5vZGUkJDE7XG5cdEFzc2lnbm1lbnRFeHByZXNzaW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0QXNzaWdubWVudEV4cHJlc3Npb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQXNzaWdubWVudEV4cHJlc3Npb247XG5cblx0QXNzaWdubWVudEV4cHJlc3Npb24ucHJvdG90eXBlLmluaXRpYWxpc2UgPSBmdW5jdGlvbiBpbml0aWFsaXNlICh0cmFuc2Zvcm1zKSB7XG5cdFx0aWYgKHRoaXMubGVmdC50eXBlID09PSAnSWRlbnRpZmllcicpIHtcblx0XHRcdHZhciBkZWNsYXJhdGlvbiA9IHRoaXMuZmluZFNjb3BlKGZhbHNlKS5maW5kRGVjbGFyYXRpb24odGhpcy5sZWZ0Lm5hbWUpO1xuXHRcdFx0Ly8gc3BlY2lhbCBjYXNlIOKAkyBodHRwczovL2dpdGxhYi5jb20vUmljaC1IYXJyaXMvYnVibGUvaXNzdWVzLzExXG5cdFx0XHR2YXIgc3RhdGVtZW50ID0gZGVjbGFyYXRpb24gJiYgZGVjbGFyYXRpb24ubm9kZS5hbmNlc3RvcigzKTtcblx0XHRcdGlmIChcblx0XHRcdFx0c3RhdGVtZW50ICYmXG5cdFx0XHRcdHN0YXRlbWVudC50eXBlID09PSAnRm9yU3RhdGVtZW50JyAmJlxuXHRcdFx0XHRzdGF0ZW1lbnQuYm9keS5jb250YWlucyh0aGlzKVxuXHRcdFx0KSB7XG5cdFx0XHRcdHN0YXRlbWVudC5yZWFzc2lnbmVkW3RoaXMubGVmdC5uYW1lXSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Tm9kZSQkMS5wcm90b3R5cGUuaW5pdGlhbGlzZS5jYWxsKHRoaXMsIHRyYW5zZm9ybXMpO1xuXHR9O1xuXG5cdEFzc2lnbm1lbnRFeHByZXNzaW9uLnByb3RvdHlwZS50cmFuc3BpbGUgPSBmdW5jdGlvbiB0cmFuc3BpbGUgKGNvZGUsIHRyYW5zZm9ybXMpIHtcblx0XHRpZiAodGhpcy5sZWZ0LnR5cGUgPT09ICdJZGVudGlmaWVyJykge1xuXHRcdFx0Ly8gRG8gdGhpcyBjaGVjayBhZnRlciBldmVyeXRoaW5nIGhhcyBiZWVuIGluaXRpYWxpemVkIHRvIGZpbmRcblx0XHRcdC8vIHNoYWRvd2luZyBkZWNsYXJhdGlvbnMgYWZ0ZXIgdGhpcyBleHByZXNzaW9uXG5cdFx0XHRjaGVja0NvbnN0KHRoaXMubGVmdCwgdGhpcy5maW5kU2NvcGUoZmFsc2UpKTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5vcGVyYXRvciA9PT0gJyoqPScgJiYgdHJhbnNmb3Jtcy5leHBvbmVudGlhdGlvbikge1xuXHRcdFx0dGhpcy50cmFuc3BpbGVFeHBvbmVudGlhdGlvbihjb2RlLCB0cmFuc2Zvcm1zKTtcblx0XHR9IGVsc2UgaWYgKC9QYXR0ZXJuLy50ZXN0KHRoaXMubGVmdC50eXBlKSAmJiB0cmFuc2Zvcm1zLmRlc3RydWN0dXJpbmcpIHtcblx0XHRcdHRoaXMudHJhbnNwaWxlRGVzdHJ1Y3R1cmluZyhjb2RlLCB0cmFuc2Zvcm1zKTtcblx0XHR9XG5cblx0XHROb2RlJCQxLnByb3RvdHlwZS50cmFuc3BpbGUuY2FsbCh0aGlzLCBjb2RlLCB0cmFuc2Zvcm1zKTtcblx0fTtcblxuXHRBc3NpZ25tZW50RXhwcmVzc2lvbi5wcm90b3R5cGUudHJhbnNwaWxlRGVzdHJ1Y3R1cmluZyA9IGZ1bmN0aW9uIHRyYW5zcGlsZURlc3RydWN0dXJpbmcgKGNvZGUpIHtcblx0XHR2YXIgdGhpcyQxID0gdGhpcztcblxuXHRcdHZhciB3cml0ZVNjb3BlID0gdGhpcy5maW5kU2NvcGUodHJ1ZSk7XG5cdFx0dmFyIGxvb2t1cFNjb3BlID0gdGhpcy5maW5kU2NvcGUoZmFsc2UpO1xuXHRcdHZhciBhc3NpZ24gPSB3cml0ZVNjb3BlLmNyZWF0ZURlY2xhcmF0aW9uKCdhc3NpZ24nKTtcblx0XHRjb2RlLmFwcGVuZFJpZ2h0KHRoaXMubGVmdC5lbmQsIChcIihcIiArIGFzc2lnbikpO1xuXG5cdFx0Y29kZS5hcHBlbmRMZWZ0KHRoaXMucmlnaHQuZW5kLCAnLCAnKTtcblx0XHR2YXIgc3RhdGVtZW50R2VuZXJhdG9ycyA9IFtdO1xuXHRcdGRlc3RydWN0dXJlKFxuXHRcdFx0Y29kZSxcblx0XHRcdGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gd3JpdGVTY29wZS5jcmVhdGVEZWNsYXJhdGlvbihpZCk7IH0sXG5cdFx0XHRmdW5jdGlvbiAobm9kZSkge1xuXHRcdFx0XHR2YXIgbmFtZSA9IGxvb2t1cFNjb3BlLnJlc29sdmVOYW1lKG5vZGUubmFtZSk7XG5cdFx0XHRcdGNoZWNrQ29uc3Qobm9kZSwgbG9va3VwU2NvcGUpO1xuXHRcdFx0XHRyZXR1cm4gbmFtZTtcblx0XHRcdH0sXG5cdFx0XHR0aGlzLmxlZnQsXG5cdFx0XHRhc3NpZ24sXG5cdFx0XHR0cnVlLFxuXHRcdFx0c3RhdGVtZW50R2VuZXJhdG9yc1xuXHRcdCk7XG5cblx0XHR2YXIgc3VmZml4ID0gJywgJztcblx0XHRzdGF0ZW1lbnRHZW5lcmF0b3JzLmZvckVhY2goZnVuY3Rpb24gKGZuLCBqKSB7XG5cdFx0XHRpZiAoaiA9PT0gc3RhdGVtZW50R2VuZXJhdG9ycy5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdHN1ZmZpeCA9ICcnO1xuXHRcdFx0fVxuXG5cdFx0XHRmbih0aGlzJDEuZW5kLCAnJywgc3VmZml4KTtcblx0XHR9KTtcblxuXHRcdGlmICh0aGlzLnVucGFyZW50aGVzaXplZFBhcmVudCgpLnR5cGUgPT09ICdFeHByZXNzaW9uU3RhdGVtZW50Jykge1xuXHRcdFx0Ly8gbm8gcnZhbHVlIG5lZWRlZCBmb3IgZXhwcmVzc2lvbiBzdGF0ZW1lbnRcblx0XHRcdGNvZGUuYXBwZW5kUmlnaHQodGhpcy5lbmQsIFwiKVwiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gZGVzdHJ1Y3R1cmluZyBpcyBwYXJ0IG9mIGFuIGV4cHJlc3Npb24gLSBuZWVkIGFuIHJ2YWx1ZVxuXHRcdFx0Y29kZS5hcHBlbmRSaWdodCh0aGlzLmVuZCwgKFwiLCBcIiArIGFzc2lnbiArIFwiKVwiKSk7XG5cdFx0fVxuXHR9O1xuXG5cdEFzc2lnbm1lbnRFeHByZXNzaW9uLnByb3RvdHlwZS50cmFuc3BpbGVFeHBvbmVudGlhdGlvbiA9IGZ1bmN0aW9uIHRyYW5zcGlsZUV4cG9uZW50aWF0aW9uIChjb2RlKSB7XG5cdFx0dmFyIHNjb3BlID0gdGhpcy5maW5kU2NvcGUoZmFsc2UpO1xuXG5cdFx0Ly8gZmlyc3QsIHRoZSBlYXN5IHBhcnQg4oCTIGAqKj1gIC0+IGA9YFxuXHRcdHZhciBjaGFySW5kZXggPSB0aGlzLmxlZnQuZW5kO1xuXHRcdHdoaWxlIChjb2RlLm9yaWdpbmFsW2NoYXJJbmRleF0gIT09ICcqJykgeyBjaGFySW5kZXggKz0gMTsgfVxuXHRcdGNvZGUucmVtb3ZlKGNoYXJJbmRleCwgY2hhckluZGV4ICsgMik7XG5cblx0XHQvLyBob3cgd2UgZG8gdGhlIG5leHQgcGFydCBkZXBlbmRzIG9uIGEgbnVtYmVyIG9mIGZhY3RvcnMg4oCTIHdoZXRoZXJcblx0XHQvLyB0aGlzIGlzIGEgdG9wLWxldmVsIHN0YXRlbWVudCwgYW5kIHdoZXRoZXIgd2UncmUgdXBkYXRpbmcgYVxuXHRcdC8vIHNpbXBsZSBvciBjb21wbGV4IHJlZmVyZW5jZVxuXHRcdHZhciBiYXNlO1xuXG5cdFx0dmFyIGxlZnQgPSB0aGlzLmxlZnQudW5wYXJlbnRoZXNpemUoKTtcblxuXHRcdGlmIChsZWZ0LnR5cGUgPT09ICdJZGVudGlmaWVyJykge1xuXHRcdFx0YmFzZSA9IHNjb3BlLnJlc29sdmVOYW1lKGxlZnQubmFtZSk7XG5cdFx0fSBlbHNlIGlmIChsZWZ0LnR5cGUgPT09ICdNZW1iZXJFeHByZXNzaW9uJykge1xuXHRcdFx0dmFyIG9iamVjdDtcblx0XHRcdHZhciBuZWVkc09iamVjdFZhciA9IGZhbHNlO1xuXHRcdFx0dmFyIHByb3BlcnR5O1xuXHRcdFx0dmFyIG5lZWRzUHJvcGVydHlWYXIgPSBmYWxzZTtcblxuXHRcdFx0dmFyIHN0YXRlbWVudCA9IHRoaXMuZmluZE5lYXJlc3QoLyg/OlN0YXRlbWVudHxEZWNsYXJhdGlvbikkLyk7XG5cdFx0XHR2YXIgaTAgPSBzdGF0ZW1lbnQuZ2V0SW5kZW50YXRpb24oKTtcblxuXHRcdFx0aWYgKGxlZnQucHJvcGVydHkudHlwZSA9PT0gJ0lkZW50aWZpZXInKSB7XG5cdFx0XHRcdHByb3BlcnR5ID0gbGVmdC5jb21wdXRlZFxuXHRcdFx0XHRcdD8gc2NvcGUucmVzb2x2ZU5hbWUobGVmdC5wcm9wZXJ0eS5uYW1lKVxuXHRcdFx0XHRcdDogbGVmdC5wcm9wZXJ0eS5uYW1lO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cHJvcGVydHkgPSBzY29wZS5jcmVhdGVEZWNsYXJhdGlvbigncHJvcGVydHknKTtcblx0XHRcdFx0bmVlZHNQcm9wZXJ0eVZhciA9IHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChsZWZ0Lm9iamVjdC50eXBlID09PSAnSWRlbnRpZmllcicpIHtcblx0XHRcdFx0b2JqZWN0ID0gc2NvcGUucmVzb2x2ZU5hbWUobGVmdC5vYmplY3QubmFtZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRvYmplY3QgPSBzY29wZS5jcmVhdGVEZWNsYXJhdGlvbignb2JqZWN0Jyk7XG5cdFx0XHRcdG5lZWRzT2JqZWN0VmFyID0gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGxlZnQuc3RhcnQgPT09IHN0YXRlbWVudC5zdGFydCkge1xuXHRcdFx0XHRpZiAobmVlZHNPYmplY3RWYXIgJiYgbmVlZHNQcm9wZXJ0eVZhcikge1xuXHRcdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KHN0YXRlbWVudC5zdGFydCwgKG9iamVjdCArIFwiID0gXCIpKTtcblx0XHRcdFx0XHRjb2RlLm92ZXJ3cml0ZShcblx0XHRcdFx0XHRcdGxlZnQub2JqZWN0LmVuZCxcblx0XHRcdFx0XHRcdGxlZnQucHJvcGVydHkuc3RhcnQsXG5cdFx0XHRcdFx0XHQoXCI7XFxuXCIgKyBpMCArIHByb3BlcnR5ICsgXCIgPSBcIilcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGNvZGUub3ZlcndyaXRlKFxuXHRcdFx0XHRcdFx0bGVmdC5wcm9wZXJ0eS5lbmQsXG5cdFx0XHRcdFx0XHRsZWZ0LmVuZCxcblx0XHRcdFx0XHRcdChcIjtcXG5cIiArIGkwICsgb2JqZWN0ICsgXCJbXCIgKyBwcm9wZXJ0eSArIFwiXVwiKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAobmVlZHNPYmplY3RWYXIpIHtcblx0XHRcdFx0XHRjb2RlLnByZXBlbmRSaWdodChzdGF0ZW1lbnQuc3RhcnQsIChvYmplY3QgKyBcIiA9IFwiKSk7XG5cdFx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KGxlZnQub2JqZWN0LmVuZCwgKFwiO1xcblwiICsgaTApKTtcblx0XHRcdFx0XHRjb2RlLmFwcGVuZExlZnQobGVmdC5vYmplY3QuZW5kLCBvYmplY3QpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKG5lZWRzUHJvcGVydHlWYXIpIHtcblx0XHRcdFx0XHRjb2RlLnByZXBlbmRSaWdodChsZWZ0LnByb3BlcnR5LnN0YXJ0LCAocHJvcGVydHkgKyBcIiA9IFwiKSk7XG5cdFx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KGxlZnQucHJvcGVydHkuZW5kLCAoXCI7XFxuXCIgKyBpMCkpO1xuXHRcdFx0XHRcdGNvZGUubW92ZShsZWZ0LnByb3BlcnR5LnN0YXJ0LCBsZWZ0LnByb3BlcnR5LmVuZCwgdGhpcy5zdGFydCk7XG5cblx0XHRcdFx0XHRjb2RlLmFwcGVuZExlZnQobGVmdC5vYmplY3QuZW5kLCAoXCJbXCIgKyBwcm9wZXJ0eSArIFwiXVwiKSk7XG5cdFx0XHRcdFx0Y29kZS5yZW1vdmUobGVmdC5vYmplY3QuZW5kLCBsZWZ0LnByb3BlcnR5LnN0YXJ0KTtcblx0XHRcdFx0XHRjb2RlLnJlbW92ZShsZWZ0LnByb3BlcnR5LmVuZCwgbGVmdC5lbmQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAobmVlZHNPYmplY3RWYXIgJiYgbmVlZHNQcm9wZXJ0eVZhcikge1xuXHRcdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KGxlZnQuc3RhcnQsIChcIiggXCIgKyBvYmplY3QgKyBcIiA9IFwiKSk7XG5cdFx0XHRcdFx0Y29kZS5vdmVyd3JpdGUoXG5cdFx0XHRcdFx0XHRsZWZ0Lm9iamVjdC5lbmQsXG5cdFx0XHRcdFx0XHRsZWZ0LnByb3BlcnR5LnN0YXJ0LFxuXHRcdFx0XHRcdFx0KFwiLCBcIiArIHByb3BlcnR5ICsgXCIgPSBcIilcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGNvZGUub3ZlcndyaXRlKFxuXHRcdFx0XHRcdFx0bGVmdC5wcm9wZXJ0eS5lbmQsXG5cdFx0XHRcdFx0XHRsZWZ0LmVuZCxcblx0XHRcdFx0XHRcdChcIiwgXCIgKyBvYmplY3QgKyBcIltcIiArIHByb3BlcnR5ICsgXCJdXCIpXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fSBlbHNlIGlmIChuZWVkc09iamVjdFZhcikge1xuXHRcdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KGxlZnQuc3RhcnQsIChcIiggXCIgKyBvYmplY3QgKyBcIiA9IFwiKSk7XG5cdFx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KGxlZnQub2JqZWN0LmVuZCwgKFwiLCBcIiArIG9iamVjdCkpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKG5lZWRzUHJvcGVydHlWYXIpIHtcblx0XHRcdFx0XHRjb2RlLnByZXBlbmRSaWdodChsZWZ0LnByb3BlcnR5LnN0YXJ0LCAoXCIoIFwiICsgcHJvcGVydHkgKyBcIiA9IFwiKSk7XG5cdFx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KGxlZnQucHJvcGVydHkuZW5kLCBcIiwgXCIpO1xuXHRcdFx0XHRcdGNvZGUubW92ZShsZWZ0LnByb3BlcnR5LnN0YXJ0LCBsZWZ0LnByb3BlcnR5LmVuZCwgbGVmdC5zdGFydCk7XG5cblx0XHRcdFx0XHRjb2RlLm92ZXJ3cml0ZShsZWZ0Lm9iamVjdC5lbmQsIGxlZnQucHJvcGVydHkuc3RhcnQsIChcIltcIiArIHByb3BlcnR5ICsgXCJdXCIpKTtcblx0XHRcdFx0XHRjb2RlLnJlbW92ZShsZWZ0LnByb3BlcnR5LmVuZCwgbGVmdC5lbmQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKG5lZWRzUHJvcGVydHlWYXIpIHtcblx0XHRcdFx0XHRjb2RlLmFwcGVuZExlZnQodGhpcy5lbmQsIFwiIClcIik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0YmFzZSA9XG5cdFx0XHRcdG9iamVjdCArXG5cdFx0XHRcdChsZWZ0LmNvbXB1dGVkIHx8IG5lZWRzUHJvcGVydHlWYXIgPyAoXCJbXCIgKyBwcm9wZXJ0eSArIFwiXVwiKSA6IChcIi5cIiArIHByb3BlcnR5KSk7XG5cdFx0fVxuXG5cdFx0Y29kZS5wcmVwZW5kUmlnaHQodGhpcy5yaWdodC5zdGFydCwgKFwiTWF0aC5wb3coIFwiICsgYmFzZSArIFwiLCBcIikpO1xuXHRcdGNvZGUuYXBwZW5kTGVmdCh0aGlzLnJpZ2h0LmVuZCwgXCIgKVwiKTtcblx0fTtcblxuXHRyZXR1cm4gQXNzaWdubWVudEV4cHJlc3Npb247XG59KE5vZGUpKTtcblxudmFyIEJpbmFyeUV4cHJlc3Npb24gPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gQmluYXJ5RXhwcmVzc2lvbiAoKSB7XG5cdFx0Tm9kZSQkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0aWYgKCBOb2RlJCQxICkgQmluYXJ5RXhwcmVzc2lvbi5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRCaW5hcnlFeHByZXNzaW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0QmluYXJ5RXhwcmVzc2lvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCaW5hcnlFeHByZXNzaW9uO1xuXG5cdEJpbmFyeUV4cHJlc3Npb24ucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdGlmICh0aGlzLm9wZXJhdG9yID09PSAnKionICYmIHRyYW5zZm9ybXMuZXhwb25lbnRpYXRpb24pIHtcblx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KHRoaXMuc3RhcnQsIFwiTWF0aC5wb3coIFwiKTtcblx0XHRcdGNvZGUub3ZlcndyaXRlKHRoaXMubGVmdC5lbmQsIHRoaXMucmlnaHQuc3RhcnQsIFwiLCBcIik7XG5cdFx0XHRjb2RlLmFwcGVuZExlZnQodGhpcy5lbmQsIFwiIClcIik7XG5cdFx0fVxuXHRcdE5vZGUkJDEucHJvdG90eXBlLnRyYW5zcGlsZS5jYWxsKHRoaXMsIGNvZGUsIHRyYW5zZm9ybXMpO1xuXHR9O1xuXG5cdHJldHVybiBCaW5hcnlFeHByZXNzaW9uO1xufShOb2RlKSk7XG5cbnZhciBsb29wU3RhdGVtZW50ID0gLyg/OkZvcig/OklufE9mKT98V2hpbGUpU3RhdGVtZW50LztcblxudmFyIEJyZWFrU3RhdGVtZW50ID0gKGZ1bmN0aW9uIChOb2RlJCQxKSB7XG5cdGZ1bmN0aW9uIEJyZWFrU3RhdGVtZW50ICgpIHtcblx0XHROb2RlJCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAoIE5vZGUkJDEgKSBCcmVha1N0YXRlbWVudC5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRCcmVha1N0YXRlbWVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBOb2RlJCQxICYmIE5vZGUkJDEucHJvdG90eXBlICk7XG5cdEJyZWFrU3RhdGVtZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJyZWFrU3RhdGVtZW50O1xuXG5cdEJyZWFrU3RhdGVtZW50LnByb3RvdHlwZS5pbml0aWFsaXNlID0gZnVuY3Rpb24gaW5pdGlhbGlzZSAoKSB7XG5cdFx0dmFyIGxvb3AgPSB0aGlzLmZpbmROZWFyZXN0KGxvb3BTdGF0ZW1lbnQpO1xuXHRcdHZhciBzd2l0Y2hDYXNlID0gdGhpcy5maW5kTmVhcmVzdCgnU3dpdGNoQ2FzZScpO1xuXG5cdFx0aWYgKGxvb3AgJiYgKCFzd2l0Y2hDYXNlIHx8IGxvb3AuZGVwdGggPiBzd2l0Y2hDYXNlLmRlcHRoKSkge1xuXHRcdFx0bG9vcC5jYW5CcmVhayA9IHRydWU7XG5cdFx0XHR0aGlzLmxvb3AgPSBsb29wO1xuXHRcdH1cblx0fTtcblxuXHRCcmVha1N0YXRlbWVudC5wcm90b3R5cGUudHJhbnNwaWxlID0gZnVuY3Rpb24gdHJhbnNwaWxlIChjb2RlKSB7XG5cdFx0aWYgKHRoaXMubG9vcCAmJiB0aGlzLmxvb3Auc2hvdWxkUmV3cml0ZUFzRnVuY3Rpb24pIHtcblx0XHRcdGlmICh0aGlzLmxhYmVsKVxuXHRcdFx0XHR7IHRocm93IG5ldyBDb21waWxlRXJyb3IoXG5cdFx0XHRcdFx0J0xhYmVscyBhcmUgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW4gYSBsb29wIHdpdGggbG9jYWxseS1zY29wZWQgdmFyaWFibGVzJyxcblx0XHRcdFx0XHR0aGlzXG5cdFx0XHRcdCk7IH1cblx0XHRcdGNvZGUub3ZlcndyaXRlKHRoaXMuc3RhcnQsIHRoaXMuc3RhcnQgKyA1LCBcInJldHVybiAnYnJlYWsnXCIpO1xuXHRcdH1cblx0fTtcblxuXHRyZXR1cm4gQnJlYWtTdGF0ZW1lbnQ7XG59KE5vZGUpKTtcblxudmFyIENhbGxFeHByZXNzaW9uID0gKGZ1bmN0aW9uIChOb2RlJCQxKSB7XG5cdGZ1bmN0aW9uIENhbGxFeHByZXNzaW9uICgpIHtcblx0XHROb2RlJCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAoIE5vZGUkJDEgKSBDYWxsRXhwcmVzc2lvbi5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRDYWxsRXhwcmVzc2lvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBOb2RlJCQxICYmIE5vZGUkJDEucHJvdG90eXBlICk7XG5cdENhbGxFeHByZXNzaW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbGxFeHByZXNzaW9uO1xuXG5cdENhbGxFeHByZXNzaW9uLnByb3RvdHlwZS5pbml0aWFsaXNlID0gZnVuY3Rpb24gaW5pdGlhbGlzZSAodHJhbnNmb3Jtcykge1xuXHRcdHZhciB0aGlzJDEgPSB0aGlzO1xuXG5cdFx0aWYgKHRyYW5zZm9ybXMuc3ByZWFkUmVzdCAmJiB0aGlzLmFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdFx0XHR2YXIgbGV4aWNhbEJvdW5kYXJ5ID0gdGhpcy5maW5kTGV4aWNhbEJvdW5kYXJ5KCk7XG5cblx0XHRcdHZhciBpID0gdGhpcy5hcmd1bWVudHMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKGktLSkge1xuXHRcdFx0XHR2YXIgYXJnID0gdGhpcyQxLmFyZ3VtZW50c1tpXTtcblx0XHRcdFx0aWYgKGFyZy50eXBlID09PSAnU3ByZWFkRWxlbWVudCcgJiYgaXNBcmd1bWVudHMoYXJnLmFyZ3VtZW50KSkge1xuXHRcdFx0XHRcdHRoaXMkMS5hcmd1bWVudHNBcnJheUFsaWFzID0gbGV4aWNhbEJvdW5kYXJ5LmdldEFyZ3VtZW50c0FycmF5QWxpYXMoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdE5vZGUkJDEucHJvdG90eXBlLmluaXRpYWxpc2UuY2FsbCh0aGlzLCB0cmFuc2Zvcm1zKTtcblx0fTtcblxuXHRDYWxsRXhwcmVzc2lvbi5wcm90b3R5cGUudHJhbnNwaWxlID0gZnVuY3Rpb24gdHJhbnNwaWxlIChjb2RlLCB0cmFuc2Zvcm1zKSB7XG5cdFx0aWYgKHRyYW5zZm9ybXMuc3ByZWFkUmVzdCAmJiB0aGlzLmFyZ3VtZW50cy5sZW5ndGgpIHtcblx0XHRcdHZhciBoYXNTcHJlYWRFbGVtZW50cyA9IGZhbHNlO1xuXHRcdFx0dmFyIGNvbnRleHQ7XG5cblx0XHRcdHZhciBmaXJzdEFyZ3VtZW50ID0gdGhpcy5hcmd1bWVudHNbMF07XG5cblx0XHRcdGlmICh0aGlzLmFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0aWYgKGZpcnN0QXJndW1lbnQudHlwZSA9PT0gJ1NwcmVhZEVsZW1lbnQnKSB7XG5cdFx0XHRcdFx0Y29kZS5yZW1vdmUoZmlyc3RBcmd1bWVudC5zdGFydCwgZmlyc3RBcmd1bWVudC5hcmd1bWVudC5zdGFydCk7XG5cdFx0XHRcdFx0aGFzU3ByZWFkRWxlbWVudHMgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRoYXNTcHJlYWRFbGVtZW50cyA9IHNwcmVhZChcblx0XHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRcdHRoaXMuYXJndW1lbnRzLFxuXHRcdFx0XHRcdGZpcnN0QXJndW1lbnQuc3RhcnQsXG5cdFx0XHRcdFx0dGhpcy5hcmd1bWVudHNBcnJheUFsaWFzXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChoYXNTcHJlYWRFbGVtZW50cykge1xuXHRcdFx0XHQvLyB3ZSBuZWVkIHRvIGhhbmRsZSBzdXBlcigpIGFuZCBzdXBlci5tZXRob2QoKSBkaWZmZXJlbnRseVxuXHRcdFx0XHQvLyBkdWUgdG8gaXRzIGluc3RhbmNlXG5cdFx0XHRcdHZhciBfc3VwZXIgPSBudWxsO1xuXHRcdFx0XHRpZiAodGhpcy5jYWxsZWUudHlwZSA9PT0gJ1N1cGVyJykge1xuXHRcdFx0XHRcdF9zdXBlciA9IHRoaXMuY2FsbGVlO1xuXHRcdFx0XHR9IGVsc2UgaWYgKFxuXHRcdFx0XHRcdHRoaXMuY2FsbGVlLnR5cGUgPT09ICdNZW1iZXJFeHByZXNzaW9uJyAmJlxuXHRcdFx0XHRcdHRoaXMuY2FsbGVlLm9iamVjdC50eXBlID09PSAnU3VwZXInXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdF9zdXBlciA9IHRoaXMuY2FsbGVlLm9iamVjdDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghX3N1cGVyICYmIHRoaXMuY2FsbGVlLnR5cGUgPT09ICdNZW1iZXJFeHByZXNzaW9uJykge1xuXHRcdFx0XHRcdGlmICh0aGlzLmNhbGxlZS5vYmplY3QudHlwZSA9PT0gJ0lkZW50aWZpZXInKSB7XG5cdFx0XHRcdFx0XHRjb250ZXh0ID0gdGhpcy5jYWxsZWUub2JqZWN0Lm5hbWU7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnRleHQgPSB0aGlzLmZpbmRTY29wZSh0cnVlKS5jcmVhdGVEZWNsYXJhdGlvbigncmVmJyk7XG5cdFx0XHRcdFx0XHR2YXIgY2FsbEV4cHJlc3Npb24gPSB0aGlzLmNhbGxlZS5vYmplY3Q7XG5cdFx0XHRcdFx0XHRjb2RlLnByZXBlbmRSaWdodChjYWxsRXhwcmVzc2lvbi5zdGFydCwgKFwiKFwiICsgY29udGV4dCArIFwiID0gXCIpKTtcblx0XHRcdFx0XHRcdGNvZGUuYXBwZW5kTGVmdChjYWxsRXhwcmVzc2lvbi5lbmQsIFwiKVwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29udGV4dCA9ICd2b2lkIDAnO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHRoaXMuY2FsbGVlLmVuZCwgJy5hcHBseScpO1xuXG5cdFx0XHRcdGlmIChfc3VwZXIpIHtcblx0XHRcdFx0XHRfc3VwZXIubm9DYWxsID0gdHJ1ZTsgLy8gYml0IGhhY2t5Li4uXG5cblx0XHRcdFx0XHRpZiAodGhpcy5hcmd1bWVudHMubGVuZ3RoID4gMSkge1xuXHRcdFx0XHRcdFx0aWYgKGZpcnN0QXJndW1lbnQudHlwZSAhPT0gJ1NwcmVhZEVsZW1lbnQnKSB7XG5cdFx0XHRcdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KGZpcnN0QXJndW1lbnQuc3RhcnQsIFwiWyBcIik7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGNvZGUuYXBwZW5kTGVmdChcblx0XHRcdFx0XHRcdFx0dGhpcy5hcmd1bWVudHNbdGhpcy5hcmd1bWVudHMubGVuZ3RoIC0gMV0uZW5kLFxuXHRcdFx0XHRcdFx0XHQnICknXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLmFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0XHRjb2RlLnByZXBlbmRSaWdodChmaXJzdEFyZ3VtZW50LnN0YXJ0LCAoY29udGV4dCArIFwiLCBcIikpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChmaXJzdEFyZ3VtZW50LnR5cGUgPT09ICdTcHJlYWRFbGVtZW50Jykge1xuXHRcdFx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KGZpcnN0QXJndW1lbnQuc3RhcnQsIChjb250ZXh0ICsgXCIsIFwiKSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvZGUuYXBwZW5kTGVmdChmaXJzdEFyZ3VtZW50LnN0YXJ0LCAoY29udGV4dCArIFwiLCBbIFwiKSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHRoaXMuYXJndW1lbnRzW3RoaXMuYXJndW1lbnRzLmxlbmd0aCAtIDFdLmVuZCwgJyApJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAodHJhbnNmb3Jtcy50cmFpbGluZ0Z1bmN0aW9uQ29tbWFzICYmIHRoaXMuYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0cmVtb3ZlVHJhaWxpbmdDb21tYShjb2RlLCB0aGlzLmFyZ3VtZW50c1t0aGlzLmFyZ3VtZW50cy5sZW5ndGggLSAxXS5lbmQpO1xuXHRcdH1cblxuXHRcdE5vZGUkJDEucHJvdG90eXBlLnRyYW5zcGlsZS5jYWxsKHRoaXMsIGNvZGUsIHRyYW5zZm9ybXMpO1xuXHR9O1xuXG5cdHJldHVybiBDYWxsRXhwcmVzc2lvbjtcbn0oTm9kZSkpO1xuXG4vLyBUT0RPIHRoaXMgY29kZSBpcyBwcmV0dHkgd2lsZCwgdGlkeSBpdCB1cFxudmFyIENsYXNzQm9keSA9IChmdW5jdGlvbiAoTm9kZSQkMSkge1xuXHRmdW5jdGlvbiBDbGFzc0JvZHkgKCkge1xuXHRcdE5vZGUkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTm9kZSQkMSApIENsYXNzQm9keS5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRDbGFzc0JvZHkucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTm9kZSQkMSAmJiBOb2RlJCQxLnByb3RvdHlwZSApO1xuXHRDbGFzc0JvZHkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2xhc3NCb2R5O1xuXG5cdENsYXNzQm9keS5wcm90b3R5cGUudHJhbnNwaWxlID0gZnVuY3Rpb24gdHJhbnNwaWxlIChjb2RlLCB0cmFuc2Zvcm1zLCBpbkZ1bmN0aW9uRXhwcmVzc2lvbiwgc3VwZXJOYW1lKSB7XG5cdFx0dmFyIHRoaXMkMSA9IHRoaXM7XG5cblx0XHRpZiAodHJhbnNmb3Jtcy5jbGFzc2VzKSB7XG5cdFx0XHR2YXIgbmFtZSA9IHRoaXMucGFyZW50Lm5hbWU7XG5cblx0XHRcdHZhciBpbmRlbnRTdHIgPSBjb2RlLmdldEluZGVudFN0cmluZygpO1xuXHRcdFx0dmFyIGkwID1cblx0XHRcdFx0dGhpcy5nZXRJbmRlbnRhdGlvbigpICsgKGluRnVuY3Rpb25FeHByZXNzaW9uID8gaW5kZW50U3RyIDogJycpO1xuXHRcdFx0dmFyIGkxID0gaTAgKyBpbmRlbnRTdHI7XG5cblx0XHRcdHZhciBjb25zdHJ1Y3RvckluZGV4ID0gZmluZEluZGV4KFxuXHRcdFx0XHR0aGlzLmJvZHksXG5cdFx0XHRcdGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBub2RlLmtpbmQgPT09ICdjb25zdHJ1Y3Rvcic7IH1cblx0XHRcdCk7XG5cdFx0XHR2YXIgY29uc3RydWN0b3IgPSB0aGlzLmJvZHlbY29uc3RydWN0b3JJbmRleF07XG5cblx0XHRcdHZhciBpbnRyb0Jsb2NrID0gJyc7XG5cdFx0XHR2YXIgb3V0cm9CbG9jayA9ICcnO1xuXG5cdFx0XHRpZiAodGhpcy5ib2R5Lmxlbmd0aCkge1xuXHRcdFx0XHRjb2RlLnJlbW92ZSh0aGlzLnN0YXJ0LCB0aGlzLmJvZHlbMF0uc3RhcnQpO1xuXHRcdFx0XHRjb2RlLnJlbW92ZSh0aGlzLmJvZHlbdGhpcy5ib2R5Lmxlbmd0aCAtIDFdLmVuZCwgdGhpcy5lbmQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29kZS5yZW1vdmUodGhpcy5zdGFydCwgdGhpcy5lbmQpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoY29uc3RydWN0b3IpIHtcblx0XHRcdFx0Y29uc3RydWN0b3IudmFsdWUuYm9keS5pc0NvbnN0cnVjdG9yQm9keSA9IHRydWU7XG5cblx0XHRcdFx0dmFyIHByZXZpb3VzTWV0aG9kID0gdGhpcy5ib2R5W2NvbnN0cnVjdG9ySW5kZXggLSAxXTtcblx0XHRcdFx0dmFyIG5leHRNZXRob2QgPSB0aGlzLmJvZHlbY29uc3RydWN0b3JJbmRleCArIDFdO1xuXG5cdFx0XHRcdC8vIGVuc3VyZSBjb25zdHJ1Y3RvciBpcyBmaXJzdFxuXHRcdFx0XHRpZiAoY29uc3RydWN0b3JJbmRleCA+IDApIHtcblx0XHRcdFx0XHRjb2RlLnJlbW92ZShwcmV2aW91c01ldGhvZC5lbmQsIGNvbnN0cnVjdG9yLnN0YXJ0KTtcblx0XHRcdFx0XHRjb2RlLm1vdmUoXG5cdFx0XHRcdFx0XHRjb25zdHJ1Y3Rvci5zdGFydCxcblx0XHRcdFx0XHRcdG5leHRNZXRob2QgPyBuZXh0TWV0aG9kLnN0YXJ0IDogdGhpcy5lbmQgLSAxLFxuXHRcdFx0XHRcdFx0dGhpcy5ib2R5WzBdLnN0YXJ0XG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghaW5GdW5jdGlvbkV4cHJlc3Npb24pIHsgY29kZS5hcHBlbmRMZWZ0KGNvbnN0cnVjdG9yLmVuZCwgJzsnKTsgfVxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgbmFtZWRGdW5jdGlvbnMgPVxuXHRcdFx0XHR0aGlzLnByb2dyYW0ub3B0aW9ucy5uYW1lZEZ1bmN0aW9uRXhwcmVzc2lvbnMgIT09IGZhbHNlO1xuXHRcdFx0dmFyIG5hbWVkQ29uc3RydWN0b3IgPVxuXHRcdFx0XHRuYW1lZEZ1bmN0aW9ucyB8fFxuXHRcdFx0XHR0aGlzLnBhcmVudC5zdXBlckNsYXNzIHx8XG5cdFx0XHRcdHRoaXMucGFyZW50LnR5cGUgIT09ICdDbGFzc0RlY2xhcmF0aW9uJztcblx0XHRcdGlmICh0aGlzLnBhcmVudC5zdXBlckNsYXNzKSB7XG5cdFx0XHRcdHZhciBpbmhlcml0YW5jZUJsb2NrID0gXCJpZiAoIFwiICsgc3VwZXJOYW1lICsgXCIgKSBcIiArIG5hbWUgKyBcIi5fX3Byb3RvX18gPSBcIiArIHN1cGVyTmFtZSArIFwiO1xcblwiICsgaTAgKyBuYW1lICsgXCIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggXCIgKyBzdXBlck5hbWUgKyBcIiAmJiBcIiArIHN1cGVyTmFtZSArIFwiLnByb3RvdHlwZSApO1xcblwiICsgaTAgKyBuYW1lICsgXCIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gXCIgKyBuYW1lICsgXCI7XCI7XG5cblx0XHRcdFx0aWYgKGNvbnN0cnVjdG9yKSB7XG5cdFx0XHRcdFx0aW50cm9CbG9jayArPSBcIlxcblxcblwiICsgaTAgKyBpbmhlcml0YW5jZUJsb2NrO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZhciBmbiA9XG5cdFx0XHRcdFx0XHRcImZ1bmN0aW9uIFwiICsgbmFtZSArIFwiICgpIHtcIiArXG5cdFx0XHRcdFx0XHQoc3VwZXJOYW1lXG5cdFx0XHRcdFx0XHRcdD8gKFwiXFxuXCIgKyBpMSArIHN1cGVyTmFtZSArIFwiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XFxuXCIgKyBpMCArIFwifVwiKVxuXHRcdFx0XHRcdFx0XHQ6IFwifVwiKSArXG5cdFx0XHRcdFx0XHQoaW5GdW5jdGlvbkV4cHJlc3Npb24gPyAnJyA6ICc7JykgK1xuXHRcdFx0XHRcdFx0KHRoaXMuYm9keS5sZW5ndGggPyAoXCJcXG5cXG5cIiArIGkwKSA6ICcnKTtcblxuXHRcdFx0XHRcdGluaGVyaXRhbmNlQmxvY2sgPSBmbiArIGluaGVyaXRhbmNlQmxvY2s7XG5cdFx0XHRcdFx0aW50cm9CbG9jayArPSBpbmhlcml0YW5jZUJsb2NrICsgXCJcXG5cXG5cIiArIGkwO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKCFjb25zdHJ1Y3Rvcikge1xuXHRcdFx0XHR2YXIgZm4kMSA9ICdmdW5jdGlvbiAnICsgKG5hbWVkQ29uc3RydWN0b3IgPyBuYW1lICsgJyAnIDogJycpICsgJygpIHt9Jztcblx0XHRcdFx0aWYgKHRoaXMucGFyZW50LnR5cGUgPT09ICdDbGFzc0RlY2xhcmF0aW9uJykgeyBmbiQxICs9ICc7JzsgfVxuXHRcdFx0XHRpZiAodGhpcy5ib2R5Lmxlbmd0aCkgeyBmbiQxICs9IFwiXFxuXFxuXCIgKyBpMDsgfVxuXG5cdFx0XHRcdGludHJvQmxvY2sgKz0gZm4kMTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHNjb3BlID0gdGhpcy5maW5kU2NvcGUoZmFsc2UpO1xuXG5cdFx0XHR2YXIgcHJvdG90eXBlR2V0dGVyc0FuZFNldHRlcnMgPSBbXTtcblx0XHRcdHZhciBzdGF0aWNHZXR0ZXJzQW5kU2V0dGVycyA9IFtdO1xuXHRcdFx0dmFyIHByb3RvdHlwZUFjY2Vzc29ycztcblx0XHRcdHZhciBzdGF0aWNBY2Nlc3NvcnM7XG5cblx0XHRcdHRoaXMuYm9keS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QsIGkpIHtcblx0XHRcdFx0aWYgKG1ldGhvZC5raW5kID09PSAnY29uc3RydWN0b3InKSB7XG5cdFx0XHRcdFx0dmFyIGNvbnN0cnVjdG9yTmFtZSA9IG5hbWVkQ29uc3RydWN0b3IgPyAnICcgKyBuYW1lIDogJyc7XG5cdFx0XHRcdFx0Y29kZS5vdmVyd3JpdGUoXG5cdFx0XHRcdFx0XHRtZXRob2Qua2V5LnN0YXJ0LFxuXHRcdFx0XHRcdFx0bWV0aG9kLmtleS5lbmQsXG5cdFx0XHRcdFx0XHQoXCJmdW5jdGlvblwiICsgY29uc3RydWN0b3JOYW1lKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKG1ldGhvZC5zdGF0aWMpIHtcblx0XHRcdFx0XHR2YXIgbGVuID0gY29kZS5vcmlnaW5hbFttZXRob2Quc3RhcnQgKyA2XSA9PSAnICcgPyA3IDogNjtcblx0XHRcdFx0XHRjb2RlLnJlbW92ZShtZXRob2Quc3RhcnQsIG1ldGhvZC5zdGFydCArIGxlbik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgaXNBY2Nlc3NvciA9IG1ldGhvZC5raW5kICE9PSAnbWV0aG9kJztcblx0XHRcdFx0dmFyIGxocztcblxuXHRcdFx0XHR2YXIgbWV0aG9kTmFtZSA9IG1ldGhvZC5rZXkubmFtZTtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdHJlc2VydmVkW21ldGhvZE5hbWVdIHx8XG5cdFx0XHRcdFx0bWV0aG9kLnZhbHVlLmJvZHkuc2NvcGUucmVmZXJlbmNlc1ttZXRob2ROYW1lXVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRtZXRob2ROYW1lID0gc2NvcGUuY3JlYXRlSWRlbnRpZmllcihtZXRob2ROYW1lKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIHdoZW4gbWV0aG9kIG5hbWUgaXMgYSBzdHJpbmcgb3IgYSBudW1iZXIgbGV0J3MgcHJldGVuZCBpdCdzIGEgY29tcHV0ZWQgbWV0aG9kXG5cblx0XHRcdFx0dmFyIGZha2VfY29tcHV0ZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYgKCFtZXRob2QuY29tcHV0ZWQgJiYgbWV0aG9kLmtleS50eXBlID09PSAnTGl0ZXJhbCcpIHtcblx0XHRcdFx0XHRmYWtlX2NvbXB1dGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRtZXRob2QuY29tcHV0ZWQgPSB0cnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGlzQWNjZXNzb3IpIHtcblx0XHRcdFx0XHRpZiAobWV0aG9kLmNvbXB1dGVkKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFx0XHRcdCdDb21wdXRlZCBhY2Nlc3NvciBwcm9wZXJ0aWVzIGFyZSBub3QgY3VycmVudGx5IHN1cHBvcnRlZCdcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y29kZS5yZW1vdmUobWV0aG9kLnN0YXJ0LCBtZXRob2Qua2V5LnN0YXJ0KTtcblxuXHRcdFx0XHRcdGlmIChtZXRob2Quc3RhdGljKSB7XG5cdFx0XHRcdFx0XHRpZiAoIX5zdGF0aWNHZXR0ZXJzQW5kU2V0dGVycy5pbmRleE9mKG1ldGhvZC5rZXkubmFtZSkpXG5cdFx0XHRcdFx0XHRcdHsgc3RhdGljR2V0dGVyc0FuZFNldHRlcnMucHVzaChtZXRob2Qua2V5Lm5hbWUpOyB9XG5cdFx0XHRcdFx0XHRpZiAoIXN0YXRpY0FjY2Vzc29ycylcblx0XHRcdFx0XHRcdFx0eyBzdGF0aWNBY2Nlc3NvcnMgPSBzY29wZS5jcmVhdGVJZGVudGlmaWVyKCdzdGF0aWNBY2Nlc3NvcnMnKTsgfVxuXG5cdFx0XHRcdFx0XHRsaHMgPSBcIlwiICsgc3RhdGljQWNjZXNzb3JzO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRpZiAoIX5wcm90b3R5cGVHZXR0ZXJzQW5kU2V0dGVycy5pbmRleE9mKG1ldGhvZC5rZXkubmFtZSkpXG5cdFx0XHRcdFx0XHRcdHsgcHJvdG90eXBlR2V0dGVyc0FuZFNldHRlcnMucHVzaChtZXRob2Qua2V5Lm5hbWUpOyB9XG5cdFx0XHRcdFx0XHRpZiAoIXByb3RvdHlwZUFjY2Vzc29ycylcblx0XHRcdFx0XHRcdFx0eyBwcm90b3R5cGVBY2Nlc3NvcnMgPSBzY29wZS5jcmVhdGVJZGVudGlmaWVyKCdwcm90b3R5cGVBY2Nlc3NvcnMnKTsgfVxuXG5cdFx0XHRcdFx0XHRsaHMgPSBcIlwiICsgcHJvdG90eXBlQWNjZXNzb3JzO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsaHMgPSBtZXRob2Quc3RhdGljID8gKFwiXCIgKyBuYW1lKSA6IChuYW1lICsgXCIucHJvdG90eXBlXCIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCFtZXRob2QuY29tcHV0ZWQpIHsgbGhzICs9ICcuJzsgfVxuXG5cdFx0XHRcdHZhciBpbnNlcnROZXdsaW5lcyA9XG5cdFx0XHRcdFx0KGNvbnN0cnVjdG9ySW5kZXggPiAwICYmIGkgPT09IGNvbnN0cnVjdG9ySW5kZXggKyAxKSB8fFxuXHRcdFx0XHRcdChpID09PSAwICYmIGNvbnN0cnVjdG9ySW5kZXggPT09IHRoaXMkMS5ib2R5Lmxlbmd0aCAtIDEpO1xuXG5cdFx0XHRcdGlmIChpbnNlcnROZXdsaW5lcykgeyBsaHMgPSBcIlxcblxcblwiICsgaTAgKyBsaHM7IH1cblxuXHRcdFx0XHR2YXIgYyA9IG1ldGhvZC5rZXkuZW5kO1xuXHRcdFx0XHRpZiAobWV0aG9kLmNvbXB1dGVkKSB7XG5cdFx0XHRcdFx0aWYgKGZha2VfY29tcHV0ZWQpIHtcblx0XHRcdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KG1ldGhvZC5rZXkuc3RhcnQsICdbJyk7XG5cdFx0XHRcdFx0XHRjb2RlLmFwcGVuZExlZnQobWV0aG9kLmtleS5lbmQsICddJyk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHdoaWxlIChjb2RlLm9yaWdpbmFsW2NdICE9PSAnXScpIHsgYyArPSAxOyB9XG5cdFx0XHRcdFx0XHRjICs9IDE7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIGZ1bmNOYW1lID1cblx0XHRcdFx0XHRtZXRob2QuY29tcHV0ZWQgfHwgaXNBY2Nlc3NvciB8fCAhbmFtZWRGdW5jdGlvbnNcblx0XHRcdFx0XHRcdD8gJydcblx0XHRcdFx0XHRcdDogKG1ldGhvZE5hbWUgKyBcIiBcIik7XG5cdFx0XHRcdHZhciByaHMgPVxuXHRcdFx0XHRcdChpc0FjY2Vzc29yID8gKFwiLlwiICsgKG1ldGhvZC5raW5kKSkgOiAnJykgK1xuXHRcdFx0XHRcdFwiID0gZnVuY3Rpb25cIiArXG5cdFx0XHRcdFx0KG1ldGhvZC52YWx1ZS5nZW5lcmF0b3IgPyAnKiAnIDogJyAnKSArXG5cdFx0XHRcdFx0ZnVuY05hbWU7XG5cdFx0XHRcdGNvZGUucmVtb3ZlKGMsIG1ldGhvZC52YWx1ZS5zdGFydCk7XG5cdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KG1ldGhvZC52YWx1ZS5zdGFydCwgcmhzKTtcblx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KG1ldGhvZC5lbmQsICc7Jyk7XG5cblx0XHRcdFx0aWYgKG1ldGhvZC52YWx1ZS5nZW5lcmF0b3IpIHsgY29kZS5yZW1vdmUobWV0aG9kLnN0YXJ0LCBtZXRob2Qua2V5LnN0YXJ0KTsgfVxuXG5cdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KG1ldGhvZC5zdGFydCwgbGhzKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAocHJvdG90eXBlR2V0dGVyc0FuZFNldHRlcnMubGVuZ3RoIHx8IHN0YXRpY0dldHRlcnNBbmRTZXR0ZXJzLmxlbmd0aCkge1xuXHRcdFx0XHR2YXIgaW50cm8gPSBbXTtcblx0XHRcdFx0dmFyIG91dHJvID0gW107XG5cblx0XHRcdFx0aWYgKHByb3RvdHlwZUdldHRlcnNBbmRTZXR0ZXJzLmxlbmd0aCkge1xuXHRcdFx0XHRcdGludHJvLnB1c2goXG5cdFx0XHRcdFx0XHQoXCJ2YXIgXCIgKyBwcm90b3R5cGVBY2Nlc3NvcnMgKyBcIiA9IHsgXCIgKyAocHJvdG90eXBlR2V0dGVyc0FuZFNldHRlcnNcblx0XHRcdFx0XHRcdFx0Lm1hcChmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gKG5hbWUgKyBcIjogeyBjb25maWd1cmFibGU6IHRydWUgfVwiKTsgfSlcblx0XHRcdFx0XHRcdFx0LmpvaW4oJywnKSkgKyBcIiB9O1wiKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0b3V0cm8ucHVzaChcblx0XHRcdFx0XHRcdChcIk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCBcIiArIG5hbWUgKyBcIi5wcm90b3R5cGUsIFwiICsgcHJvdG90eXBlQWNjZXNzb3JzICsgXCIgKTtcIilcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHN0YXRpY0dldHRlcnNBbmRTZXR0ZXJzLmxlbmd0aCkge1xuXHRcdFx0XHRcdGludHJvLnB1c2goXG5cdFx0XHRcdFx0XHQoXCJ2YXIgXCIgKyBzdGF0aWNBY2Nlc3NvcnMgKyBcIiA9IHsgXCIgKyAoc3RhdGljR2V0dGVyc0FuZFNldHRlcnNcblx0XHRcdFx0XHRcdFx0Lm1hcChmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gKG5hbWUgKyBcIjogeyBjb25maWd1cmFibGU6IHRydWUgfVwiKTsgfSlcblx0XHRcdFx0XHRcdFx0LmpvaW4oJywnKSkgKyBcIiB9O1wiKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0b3V0cm8ucHVzaCgoXCJPYmplY3QuZGVmaW5lUHJvcGVydGllcyggXCIgKyBuYW1lICsgXCIsIFwiICsgc3RhdGljQWNjZXNzb3JzICsgXCIgKTtcIikpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGNvbnN0cnVjdG9yKSB7IGludHJvQmxvY2sgKz0gXCJcXG5cXG5cIiArIGkwOyB9XG5cdFx0XHRcdGludHJvQmxvY2sgKz0gaW50cm8uam9pbigoXCJcXG5cIiArIGkwKSk7XG5cdFx0XHRcdGlmICghY29uc3RydWN0b3IpIHsgaW50cm9CbG9jayArPSBcIlxcblxcblwiICsgaTA7IH1cblxuXHRcdFx0XHRvdXRyb0Jsb2NrICs9IFwiXFxuXFxuXCIgKyBpMCArIG91dHJvLmpvaW4oKFwiXFxuXCIgKyBpMCkpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoY29uc3RydWN0b3IpIHtcblx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KGNvbnN0cnVjdG9yLmVuZCwgaW50cm9CbG9jayk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb2RlLnByZXBlbmRSaWdodCh0aGlzLnN0YXJ0LCBpbnRyb0Jsb2NrKTtcblx0XHRcdH1cblxuXHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHRoaXMuZW5kLCBvdXRyb0Jsb2NrKTtcblx0XHR9XG5cblx0XHROb2RlJCQxLnByb3RvdHlwZS50cmFuc3BpbGUuY2FsbCh0aGlzLCBjb2RlLCB0cmFuc2Zvcm1zKTtcblx0fTtcblxuXHRyZXR1cm4gQ2xhc3NCb2R5O1xufShOb2RlKSk7XG5cbi8vIFRPRE8gdGhpcyBmdW5jdGlvbiBpcyBzbGlnaHRseSBmbGF3ZWQg4oCTIGl0IHdvcmtzIG9uIHRoZSBvcmlnaW5hbCBzdHJpbmcsXG4vLyBub3QgaXRzIGN1cnJlbnQgZWRpdGVkIHN0YXRlLlxuLy8gVGhhdCdzIG5vdCBhIHByb2JsZW0gZm9yIHRoZSB3YXkgdGhhdCBpdCdzIGN1cnJlbnRseSB1c2VkLCBidXQgaXQgY291bGRcbi8vIGJlIGluIGZ1dHVyZS4uLlxuZnVuY3Rpb24gZGVpbmRlbnQobm9kZSwgY29kZSkge1xuXHR2YXIgc3RhcnQgPSBub2RlLnN0YXJ0O1xuXHR2YXIgZW5kID0gbm9kZS5lbmQ7XG5cblx0dmFyIGluZGVudFN0ciA9IGNvZGUuZ2V0SW5kZW50U3RyaW5nKCk7XG5cdHZhciBpbmRlbnRTdHJMZW4gPSBpbmRlbnRTdHIubGVuZ3RoO1xuXHR2YXIgaW5kZW50U3RhcnQgPSBzdGFydCAtIGluZGVudFN0ckxlbjtcblxuXHRpZiAoXG5cdFx0IW5vZGUucHJvZ3JhbS5pbmRlbnRFeGNsdXNpb25zW2luZGVudFN0YXJ0XSAmJlxuXHRcdGNvZGUub3JpZ2luYWwuc2xpY2UoaW5kZW50U3RhcnQsIHN0YXJ0KSA9PT0gaW5kZW50U3RyXG5cdCkge1xuXHRcdGNvZGUucmVtb3ZlKGluZGVudFN0YXJ0LCBzdGFydCk7XG5cdH1cblxuXHR2YXIgcGF0dGVybiA9IG5ldyBSZWdFeHAoaW5kZW50U3RyICsgJ1xcXFxTJywgJ2cnKTtcblx0dmFyIHNsaWNlID0gY29kZS5vcmlnaW5hbC5zbGljZShzdGFydCwgZW5kKTtcblx0dmFyIG1hdGNoO1xuXG5cdHdoaWxlICgobWF0Y2ggPSBwYXR0ZXJuLmV4ZWMoc2xpY2UpKSkge1xuXHRcdHZhciByZW1vdmVTdGFydCA9IHN0YXJ0ICsgbWF0Y2guaW5kZXg7XG5cdFx0aWYgKCFub2RlLnByb2dyYW0uaW5kZW50RXhjbHVzaW9uc1tyZW1vdmVTdGFydF0pIHtcblx0XHRcdGNvZGUucmVtb3ZlKHJlbW92ZVN0YXJ0LCByZW1vdmVTdGFydCArIGluZGVudFN0ckxlbik7XG5cdFx0fVxuXHR9XG59XG5cbnZhciBDbGFzc0RlY2xhcmF0aW9uID0gKGZ1bmN0aW9uIChOb2RlJCQxKSB7XG5cdGZ1bmN0aW9uIENsYXNzRGVjbGFyYXRpb24gKCkge1xuXHRcdE5vZGUkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTm9kZSQkMSApIENsYXNzRGVjbGFyYXRpb24uX19wcm90b19fID0gTm9kZSQkMTtcblx0Q2xhc3NEZWNsYXJhdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBOb2RlJCQxICYmIE5vZGUkJDEucHJvdG90eXBlICk7XG5cdENsYXNzRGVjbGFyYXRpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2xhc3NEZWNsYXJhdGlvbjtcblxuXHRDbGFzc0RlY2xhcmF0aW9uLnByb3RvdHlwZS5pbml0aWFsaXNlID0gZnVuY3Rpb24gaW5pdGlhbGlzZSAodHJhbnNmb3Jtcykge1xuXHRcdGlmICh0aGlzLmlkKSB7XG5cdFx0XHR0aGlzLm5hbWUgPSB0aGlzLmlkLm5hbWU7XG5cdFx0XHR0aGlzLmZpbmRTY29wZSh0cnVlKS5hZGREZWNsYXJhdGlvbih0aGlzLmlkLCAnY2xhc3MnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5uYW1lID0gdGhpcy5maW5kU2NvcGUodHJ1ZSkuY3JlYXRlSWRlbnRpZmllcihcImRlZmF1bHRFeHBvcnRcIik7XG5cdFx0fVxuXG5cdFx0Tm9kZSQkMS5wcm90b3R5cGUuaW5pdGlhbGlzZS5jYWxsKHRoaXMsIHRyYW5zZm9ybXMpO1xuXHR9O1xuXG5cdENsYXNzRGVjbGFyYXRpb24ucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdGlmICh0cmFuc2Zvcm1zLmNsYXNzZXMpIHtcblx0XHRcdGlmICghdGhpcy5zdXBlckNsYXNzKSB7IGRlaW5kZW50KHRoaXMuYm9keSwgY29kZSk7IH1cblxuXHRcdFx0dmFyIHN1cGVyTmFtZSA9XG5cdFx0XHRcdHRoaXMuc3VwZXJDbGFzcyAmJiAodGhpcy5zdXBlckNsYXNzLm5hbWUgfHwgJ3N1cGVyY2xhc3MnKTtcblxuXHRcdFx0dmFyIGkwID0gdGhpcy5nZXRJbmRlbnRhdGlvbigpO1xuXHRcdFx0dmFyIGkxID0gaTAgKyBjb2RlLmdldEluZGVudFN0cmluZygpO1xuXG5cdFx0XHQvLyBpZiB0aGlzIGlzIGFuIGV4cG9ydCBkZWZhdWx0IHN0YXRlbWVudCwgd2UgaGF2ZSB0byBtb3ZlIHRoZSBleHBvcnQgdG9cblx0XHRcdC8vIGFmdGVyIHRoZSBkZWNsYXJhdGlvbiwgYmVjYXVzZSBgZXhwb3J0IGRlZmF1bHQgdmFyIEZvbyA9IC4uLmAgaXMgaWxsZWdhbFxuXHRcdFx0dmFyIGlzRXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uID0gdGhpcy5wYXJlbnQudHlwZSA9PT0gJ0V4cG9ydERlZmF1bHREZWNsYXJhdGlvbic7XG5cblx0XHRcdGlmIChpc0V4cG9ydERlZmF1bHREZWNsYXJhdGlvbikge1xuXHRcdFx0XHRjb2RlLnJlbW92ZSh0aGlzLnBhcmVudC5zdGFydCwgdGhpcy5zdGFydCk7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBjID0gdGhpcy5zdGFydDtcblx0XHRcdGlmICh0aGlzLmlkKSB7XG5cdFx0XHRcdGNvZGUub3ZlcndyaXRlKGMsIHRoaXMuaWQuc3RhcnQsICd2YXIgJyk7XG5cdFx0XHRcdGMgPSB0aGlzLmlkLmVuZDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvZGUucHJlcGVuZExlZnQoYywgKFwidmFyIFwiICsgKHRoaXMubmFtZSkpKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHRoaXMuc3VwZXJDbGFzcykge1xuXHRcdFx0XHRpZiAodGhpcy5zdXBlckNsYXNzLmVuZCA9PT0gdGhpcy5ib2R5LnN0YXJ0KSB7XG5cdFx0XHRcdFx0Y29kZS5yZW1vdmUoYywgdGhpcy5zdXBlckNsYXNzLnN0YXJ0KTtcblx0XHRcdFx0XHRjb2RlLmFwcGVuZExlZnQoYywgKFwiID0gKGZ1bmN0aW9uIChcIiArIHN1cGVyTmFtZSArIFwiKSB7XFxuXCIgKyBpMSkpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvZGUub3ZlcndyaXRlKGMsIHRoaXMuc3VwZXJDbGFzcy5zdGFydCwgJyA9ICcpO1xuXHRcdFx0XHRcdGNvZGUub3ZlcndyaXRlKFxuXHRcdFx0XHRcdFx0dGhpcy5zdXBlckNsYXNzLmVuZCxcblx0XHRcdFx0XHRcdHRoaXMuYm9keS5zdGFydCxcblx0XHRcdFx0XHRcdChcIihmdW5jdGlvbiAoXCIgKyBzdXBlck5hbWUgKyBcIikge1xcblwiICsgaTEpXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKGMgPT09IHRoaXMuYm9keS5zdGFydCkge1xuXHRcdFx0XHRcdGNvZGUuYXBwZW5kTGVmdChjLCAnID0gJyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29kZS5vdmVyd3JpdGUoYywgdGhpcy5ib2R5LnN0YXJ0LCAnID0gJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0dGhpcy5ib2R5LnRyYW5zcGlsZShjb2RlLCB0cmFuc2Zvcm1zLCAhIXRoaXMuc3VwZXJDbGFzcywgc3VwZXJOYW1lKTtcblxuXHRcdFx0dmFyIHN5bnRoZXRpY0RlZmF1bHRFeHBvcnQgPVxuXHRcdFx0XHRpc0V4cG9ydERlZmF1bHREZWNsYXJhdGlvblxuXHRcdFx0XHRcdD8gKFwiXFxuXFxuXCIgKyBpMCArIFwiZXhwb3J0IGRlZmF1bHQgXCIgKyAodGhpcy5uYW1lKSArIFwiO1wiKVxuXHRcdFx0XHRcdDogJyc7XG5cdFx0XHRpZiAodGhpcy5zdXBlckNsYXNzKSB7XG5cdFx0XHRcdGNvZGUuYXBwZW5kTGVmdCh0aGlzLmVuZCwgKFwiXFxuXFxuXCIgKyBpMSArIFwicmV0dXJuIFwiICsgKHRoaXMubmFtZSkgKyBcIjtcXG5cIiArIGkwICsgXCJ9KFwiKSk7XG5cdFx0XHRcdGNvZGUubW92ZSh0aGlzLnN1cGVyQ2xhc3Muc3RhcnQsIHRoaXMuc3VwZXJDbGFzcy5lbmQsIHRoaXMuZW5kKTtcblx0XHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQodGhpcy5lbmQsIChcIikpO1wiICsgc3ludGhldGljRGVmYXVsdEV4cG9ydCkpO1xuXHRcdFx0fSBlbHNlIGlmIChzeW50aGV0aWNEZWZhdWx0RXhwb3J0KSB7XG5cdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KHRoaXMuZW5kLCBzeW50aGV0aWNEZWZhdWx0RXhwb3J0KTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5ib2R5LnRyYW5zcGlsZShjb2RlLCB0cmFuc2Zvcm1zLCBmYWxzZSwgbnVsbCk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBDbGFzc0RlY2xhcmF0aW9uO1xufShOb2RlKSk7XG5cbnZhciBDbGFzc0V4cHJlc3Npb24gPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gQ2xhc3NFeHByZXNzaW9uICgpIHtcblx0XHROb2RlJCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAoIE5vZGUkJDEgKSBDbGFzc0V4cHJlc3Npb24uX19wcm90b19fID0gTm9kZSQkMTtcblx0Q2xhc3NFeHByZXNzaW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0Q2xhc3NFeHByZXNzaW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENsYXNzRXhwcmVzc2lvbjtcblxuXHRDbGFzc0V4cHJlc3Npb24ucHJvdG90eXBlLmluaXRpYWxpc2UgPSBmdW5jdGlvbiBpbml0aWFsaXNlICh0cmFuc2Zvcm1zKSB7XG5cdFx0dGhpcy5uYW1lID0gKCB0aGlzLmlkXG5cdFx0XHQ/IHRoaXMuaWQubmFtZVxuXHRcdFx0OiB0aGlzLnBhcmVudC50eXBlID09PSAnVmFyaWFibGVEZWNsYXJhdG9yJ1xuXHRcdFx0XHQ/IHRoaXMucGFyZW50LmlkLm5hbWVcblx0XHRcdFx0OiB0aGlzLnBhcmVudC50eXBlICE9PSAnQXNzaWdubWVudEV4cHJlc3Npb24nXG5cdFx0XHRcdFx0PyBudWxsXG5cdFx0XHRcdFx0OiB0aGlzLnBhcmVudC5sZWZ0LnR5cGUgPT09ICdJZGVudGlmaWVyJ1xuXHRcdFx0XHRcdFx0PyB0aGlzLnBhcmVudC5sZWZ0Lm5hbWVcblx0XHRcdFx0XHRcdDogdGhpcy5wYXJlbnQubGVmdC50eXBlID09PSAnTWVtYmVyRXhwcmVzc2lvbidcblx0XHRcdFx0XHRcdFx0PyB0aGlzLnBhcmVudC5sZWZ0LnByb3BlcnR5Lm5hbWVcblx0XHRcdFx0XHRcdFx0OiBudWxsICkgfHwgdGhpcy5maW5kU2NvcGUodHJ1ZSkuY3JlYXRlSWRlbnRpZmllcignYW5vbnltb3VzJyk7XG5cblx0XHROb2RlJCQxLnByb3RvdHlwZS5pbml0aWFsaXNlLmNhbGwodGhpcywgdHJhbnNmb3Jtcyk7XG5cdH07XG5cblx0Q2xhc3NFeHByZXNzaW9uLnByb3RvdHlwZS50cmFuc3BpbGUgPSBmdW5jdGlvbiB0cmFuc3BpbGUgKGNvZGUsIHRyYW5zZm9ybXMpIHtcblx0XHRpZiAodHJhbnNmb3Jtcy5jbGFzc2VzKSB7XG5cdFx0XHR2YXIgc3VwZXJOYW1lID1cblx0XHRcdFx0dGhpcy5zdXBlckNsYXNzICYmICh0aGlzLnN1cGVyQ2xhc3MubmFtZSB8fCAnc3VwZXJjbGFzcycpO1xuXG5cdFx0XHR2YXIgaTAgPSB0aGlzLmdldEluZGVudGF0aW9uKCk7XG5cdFx0XHR2YXIgaTEgPSBpMCArIGNvZGUuZ2V0SW5kZW50U3RyaW5nKCk7XG5cblx0XHRcdGlmICh0aGlzLnN1cGVyQ2xhc3MpIHtcblx0XHRcdFx0Y29kZS5yZW1vdmUodGhpcy5zdGFydCwgdGhpcy5zdXBlckNsYXNzLnN0YXJ0KTtcblx0XHRcdFx0Y29kZS5yZW1vdmUodGhpcy5zdXBlckNsYXNzLmVuZCwgdGhpcy5ib2R5LnN0YXJ0KTtcblx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHRoaXMuc3RhcnQsIChcIihmdW5jdGlvbiAoXCIgKyBzdXBlck5hbWUgKyBcIikge1xcblwiICsgaTEpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvZGUub3ZlcndyaXRlKHRoaXMuc3RhcnQsIHRoaXMuYm9keS5zdGFydCwgKFwiKGZ1bmN0aW9uICgpIHtcXG5cIiArIGkxKSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuYm9keS50cmFuc3BpbGUoY29kZSwgdHJhbnNmb3JtcywgdHJ1ZSwgc3VwZXJOYW1lKTtcblxuXHRcdFx0dmFyIG91dHJvID0gXCJcXG5cXG5cIiArIGkxICsgXCJyZXR1cm4gXCIgKyAodGhpcy5uYW1lKSArIFwiO1xcblwiICsgaTAgKyBcIn0oXCI7XG5cblx0XHRcdGlmICh0aGlzLnN1cGVyQ2xhc3MpIHtcblx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHRoaXMuZW5kLCBvdXRybyk7XG5cdFx0XHRcdGNvZGUubW92ZSh0aGlzLnN1cGVyQ2xhc3Muc3RhcnQsIHRoaXMuc3VwZXJDbGFzcy5lbmQsIHRoaXMuZW5kKTtcblx0XHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQodGhpcy5lbmQsICcpKScpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHRoaXMuZW5kLCAoXCJcXG5cXG5cIiArIGkxICsgXCJyZXR1cm4gXCIgKyAodGhpcy5uYW1lKSArIFwiO1xcblwiICsgaTAgKyBcIn0oKSlcIikpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmJvZHkudHJhbnNwaWxlKGNvZGUsIHRyYW5zZm9ybXMsIGZhbHNlKTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIENsYXNzRXhwcmVzc2lvbjtcbn0oTm9kZSkpO1xuXG52YXIgQ29udGludWVTdGF0ZW1lbnQgPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gQ29udGludWVTdGF0ZW1lbnQgKCkge1xuXHRcdE5vZGUkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTm9kZSQkMSApIENvbnRpbnVlU3RhdGVtZW50Ll9fcHJvdG9fXyA9IE5vZGUkJDE7XG5cdENvbnRpbnVlU3RhdGVtZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0Q29udGludWVTdGF0ZW1lbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ29udGludWVTdGF0ZW1lbnQ7XG5cblx0Q29udGludWVTdGF0ZW1lbnQucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSkge1xuXHRcdHZhciBsb29wID0gdGhpcy5maW5kTmVhcmVzdChsb29wU3RhdGVtZW50KTtcblx0XHRpZiAobG9vcC5zaG91bGRSZXdyaXRlQXNGdW5jdGlvbikge1xuXHRcdFx0aWYgKHRoaXMubGFiZWwpXG5cdFx0XHRcdHsgdGhyb3cgbmV3IENvbXBpbGVFcnJvcihcblx0XHRcdFx0XHQnTGFiZWxzIGFyZSBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBpbiBhIGxvb3Agd2l0aCBsb2NhbGx5LXNjb3BlZCB2YXJpYWJsZXMnLFxuXHRcdFx0XHRcdHRoaXNcblx0XHRcdFx0KTsgfVxuXHRcdFx0Y29kZS5vdmVyd3JpdGUodGhpcy5zdGFydCwgdGhpcy5zdGFydCArIDgsICdyZXR1cm4nKTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIENvbnRpbnVlU3RhdGVtZW50O1xufShOb2RlKSk7XG5cbnZhciBFeHBvcnREZWZhdWx0RGVjbGFyYXRpb24gPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gRXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uICgpIHtcblx0XHROb2RlJCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAoIE5vZGUkJDEgKSBFeHBvcnREZWZhdWx0RGVjbGFyYXRpb24uX19wcm90b19fID0gTm9kZSQkMTtcblx0RXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0RXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEV4cG9ydERlZmF1bHREZWNsYXJhdGlvbjtcblxuXHRFeHBvcnREZWZhdWx0RGVjbGFyYXRpb24ucHJvdG90eXBlLmluaXRpYWxpc2UgPSBmdW5jdGlvbiBpbml0aWFsaXNlICh0cmFuc2Zvcm1zKSB7XG5cdFx0aWYgKHRyYW5zZm9ybXMubW9kdWxlRXhwb3J0KVxuXHRcdFx0eyB0aHJvdyBuZXcgQ29tcGlsZUVycm9yKCdleHBvcnQgaXMgbm90IHN1cHBvcnRlZCcsIHRoaXMpOyB9XG5cdFx0Tm9kZSQkMS5wcm90b3R5cGUuaW5pdGlhbGlzZS5jYWxsKHRoaXMsIHRyYW5zZm9ybXMpO1xuXHR9O1xuXG5cdHJldHVybiBFeHBvcnREZWZhdWx0RGVjbGFyYXRpb247XG59KE5vZGUpKTtcblxudmFyIEV4cG9ydE5hbWVkRGVjbGFyYXRpb24gPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gRXhwb3J0TmFtZWREZWNsYXJhdGlvbiAoKSB7XG5cdFx0Tm9kZSQkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0aWYgKCBOb2RlJCQxICkgRXhwb3J0TmFtZWREZWNsYXJhdGlvbi5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRFeHBvcnROYW1lZERlY2xhcmF0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0RXhwb3J0TmFtZWREZWNsYXJhdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBFeHBvcnROYW1lZERlY2xhcmF0aW9uO1xuXG5cdEV4cG9ydE5hbWVkRGVjbGFyYXRpb24ucHJvdG90eXBlLmluaXRpYWxpc2UgPSBmdW5jdGlvbiBpbml0aWFsaXNlICh0cmFuc2Zvcm1zKSB7XG5cdFx0aWYgKHRyYW5zZm9ybXMubW9kdWxlRXhwb3J0KVxuXHRcdFx0eyB0aHJvdyBuZXcgQ29tcGlsZUVycm9yKCdleHBvcnQgaXMgbm90IHN1cHBvcnRlZCcsIHRoaXMpOyB9XG5cdFx0Tm9kZSQkMS5wcm90b3R5cGUuaW5pdGlhbGlzZS5jYWxsKHRoaXMsIHRyYW5zZm9ybXMpO1xuXHR9O1xuXG5cdHJldHVybiBFeHBvcnROYW1lZERlY2xhcmF0aW9uO1xufShOb2RlKSk7XG5cbnZhciBMb29wU3RhdGVtZW50ID0gKGZ1bmN0aW9uIChOb2RlJCQxKSB7XG5cdGZ1bmN0aW9uIExvb3BTdGF0ZW1lbnQgKCkge1xuXHRcdE5vZGUkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTm9kZSQkMSApIExvb3BTdGF0ZW1lbnQuX19wcm90b19fID0gTm9kZSQkMTtcblx0TG9vcFN0YXRlbWVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBOb2RlJCQxICYmIE5vZGUkJDEucHJvdG90eXBlICk7XG5cdExvb3BTdGF0ZW1lbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTG9vcFN0YXRlbWVudDtcblxuXHRMb29wU3RhdGVtZW50LnByb3RvdHlwZS5maW5kU2NvcGUgPSBmdW5jdGlvbiBmaW5kU2NvcGUgKGZ1bmN0aW9uU2NvcGUpIHtcblx0XHRyZXR1cm4gZnVuY3Rpb25TY29wZSB8fCAhdGhpcy5jcmVhdGVkU2NvcGVcblx0XHRcdD8gdGhpcy5wYXJlbnQuZmluZFNjb3BlKGZ1bmN0aW9uU2NvcGUpXG5cdFx0XHQ6IHRoaXMuYm9keS5zY29wZTtcblx0fTtcblxuXHRMb29wU3RhdGVtZW50LnByb3RvdHlwZS5pbml0aWFsaXNlID0gZnVuY3Rpb24gaW5pdGlhbGlzZSAodHJhbnNmb3Jtcykge1xuXHRcdHZhciB0aGlzJDEgPSB0aGlzO1xuXG5cdFx0dGhpcy5ib2R5LmNyZWF0ZVNjb3BlKCk7XG5cdFx0dGhpcy5jcmVhdGVkU2NvcGUgPSB0cnVlO1xuXG5cdFx0Ly8gdGhpcyBpcyBwb3B1bGF0ZWQgYXMgYW5kIHdoZW4gcmVhc3NpZ25tZW50cyBvY2N1clxuXHRcdHRoaXMucmVhc3NpZ25lZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFx0dGhpcy5hbGlhc2VzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuXHRcdE5vZGUkJDEucHJvdG90eXBlLmluaXRpYWxpc2UuY2FsbCh0aGlzLCB0cmFuc2Zvcm1zKTtcblxuXHRcdGlmICh0cmFuc2Zvcm1zLmxldENvbnN0KSB7XG5cdFx0XHQvLyBzZWUgaWYgYW55IGJsb2NrLXNjb3BlZCBkZWNsYXJhdGlvbnMgYXJlIHJlZmVyZW5jZWRcblx0XHRcdC8vIGluc2lkZSBmdW5jdGlvbiBleHByZXNzaW9uc1xuXHRcdFx0dmFyIG5hbWVzID0gT2JqZWN0LmtleXModGhpcy5ib2R5LnNjb3BlLmRlY2xhcmF0aW9ucyk7XG5cblx0XHRcdHZhciBpID0gbmFtZXMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKGktLSkge1xuXHRcdFx0XHR2YXIgbmFtZSA9IG5hbWVzW2ldO1xuXHRcdFx0XHR2YXIgZGVjbGFyYXRpb24gPSB0aGlzJDEuYm9keS5zY29wZS5kZWNsYXJhdGlvbnNbbmFtZV07XG5cblx0XHRcdFx0dmFyIGogPSBkZWNsYXJhdGlvbi5pbnN0YW5jZXMubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoai0tKSB7XG5cdFx0XHRcdFx0dmFyIGluc3RhbmNlID0gZGVjbGFyYXRpb24uaW5zdGFuY2VzW2pdO1xuXHRcdFx0XHRcdHZhciBuZWFyZXN0RnVuY3Rpb25FeHByZXNzaW9uID0gaW5zdGFuY2UuZmluZE5lYXJlc3QoL0Z1bmN0aW9uLyk7XG5cblx0XHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0XHRuZWFyZXN0RnVuY3Rpb25FeHByZXNzaW9uICYmXG5cdFx0XHRcdFx0XHRuZWFyZXN0RnVuY3Rpb25FeHByZXNzaW9uLmRlcHRoID4gdGhpcyQxLmRlcHRoXG5cdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHR0aGlzJDEuc2hvdWxkUmV3cml0ZUFzRnVuY3Rpb24gPSB0cnVlO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHRoaXMkMS5zaG91bGRSZXdyaXRlQXNGdW5jdGlvbikgeyBicmVhazsgfVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRMb29wU3RhdGVtZW50LnByb3RvdHlwZS50cmFuc3BpbGUgPSBmdW5jdGlvbiB0cmFuc3BpbGUgKGNvZGUsIHRyYW5zZm9ybXMpIHtcblx0XHR2YXIgbmVlZHNCbG9jayA9XG5cdFx0XHR0aGlzLnR5cGUgIT0gJ0Zvck9mU3RhdGVtZW50JyAmJlxuXHRcdFx0KHRoaXMuYm9keS50eXBlICE9PSAnQmxvY2tTdGF0ZW1lbnQnIHx8XG5cdFx0XHRcdCh0aGlzLmJvZHkudHlwZSA9PT0gJ0Jsb2NrU3RhdGVtZW50JyAmJiB0aGlzLmJvZHkuc3ludGhldGljKSk7XG5cblx0XHRpZiAodGhpcy5zaG91bGRSZXdyaXRlQXNGdW5jdGlvbikge1xuXHRcdFx0dmFyIGkwID0gdGhpcy5nZXRJbmRlbnRhdGlvbigpO1xuXHRcdFx0dmFyIGkxID0gaTAgKyBjb2RlLmdldEluZGVudFN0cmluZygpO1xuXG5cdFx0XHR2YXIgYXJnU3RyaW5nID0gdGhpcy5hcmdzID8gKFwiIFwiICsgKHRoaXMuYXJncy5qb2luKCcsICcpKSArIFwiIFwiKSA6ICcnO1xuXHRcdFx0dmFyIHBhcmFtU3RyaW5nID0gdGhpcy5wYXJhbXMgPyAoXCIgXCIgKyAodGhpcy5wYXJhbXMuam9pbignLCAnKSkgKyBcIiBcIikgOiAnJztcblxuXHRcdFx0dmFyIGZ1bmN0aW9uU2NvcGUgPSB0aGlzLmZpbmRTY29wZSh0cnVlKTtcblx0XHRcdHZhciBsb29wID0gZnVuY3Rpb25TY29wZS5jcmVhdGVJZGVudGlmaWVyKCdsb29wJyk7XG5cblx0XHRcdHZhciBiZWZvcmUgPVxuXHRcdFx0XHRcInZhciBcIiArIGxvb3AgKyBcIiA9IGZ1bmN0aW9uIChcIiArIHBhcmFtU3RyaW5nICsgXCIpIFwiICtcblx0XHRcdFx0KHRoaXMuYm9keS5zeW50aGV0aWMgPyAoXCJ7XFxuXCIgKyBpMCArIChjb2RlLmdldEluZGVudFN0cmluZygpKSkgOiAnJyk7XG5cdFx0XHR2YXIgYWZ0ZXIgPSAodGhpcy5ib2R5LnN5bnRoZXRpYyA/IChcIlxcblwiICsgaTAgKyBcIn1cIikgOiAnJykgKyBcIjtcXG5cXG5cIiArIGkwO1xuXG5cdFx0XHRjb2RlLnByZXBlbmRSaWdodCh0aGlzLmJvZHkuc3RhcnQsIGJlZm9yZSk7XG5cdFx0XHRjb2RlLmFwcGVuZExlZnQodGhpcy5ib2R5LmVuZCwgYWZ0ZXIpO1xuXHRcdFx0Y29kZS5tb3ZlKHRoaXMuc3RhcnQsIHRoaXMuYm9keS5zdGFydCwgdGhpcy5ib2R5LmVuZCk7XG5cblx0XHRcdGlmICh0aGlzLmNhbkJyZWFrIHx8IHRoaXMuY2FuUmV0dXJuKSB7XG5cdFx0XHRcdHZhciByZXR1cm5lZCA9IGZ1bmN0aW9uU2NvcGUuY3JlYXRlSWRlbnRpZmllcigncmV0dXJuZWQnKTtcblxuXHRcdFx0XHR2YXIgaW5zZXJ0ID0gXCJ7XFxuXCIgKyBpMSArIFwidmFyIFwiICsgcmV0dXJuZWQgKyBcIiA9IFwiICsgbG9vcCArIFwiKFwiICsgYXJnU3RyaW5nICsgXCIpO1xcblwiO1xuXHRcdFx0XHRpZiAodGhpcy5jYW5CcmVhaylcblx0XHRcdFx0XHR7IGluc2VydCArPSBcIlxcblwiICsgaTEgKyBcImlmICggXCIgKyByZXR1cm5lZCArIFwiID09PSAnYnJlYWsnICkgYnJlYWs7XCI7IH1cblx0XHRcdFx0aWYgKHRoaXMuY2FuUmV0dXJuKVxuXHRcdFx0XHRcdHsgaW5zZXJ0ICs9IFwiXFxuXCIgKyBpMSArIFwiaWYgKCBcIiArIHJldHVybmVkICsgXCIgKSByZXR1cm4gXCIgKyByZXR1cm5lZCArIFwiLnY7XCI7IH1cblx0XHRcdFx0aW5zZXJ0ICs9IFwiXFxuXCIgKyBpMCArIFwifVwiO1xuXG5cdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KHRoaXMuYm9keS5lbmQsIGluc2VydCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YXIgY2FsbEV4cHJlc3Npb24gPSBsb29wICsgXCIoXCIgKyBhcmdTdHJpbmcgKyBcIik7XCI7XG5cblx0XHRcdFx0aWYgKHRoaXMudHlwZSA9PT0gJ0RvV2hpbGVTdGF0ZW1lbnQnKSB7XG5cdFx0XHRcdFx0Y29kZS5vdmVyd3JpdGUoXG5cdFx0XHRcdFx0XHR0aGlzLnN0YXJ0LFxuXHRcdFx0XHRcdFx0dGhpcy5ib2R5LnN0YXJ0LFxuXHRcdFx0XHRcdFx0KFwiZG8ge1xcblwiICsgaTEgKyBjYWxsRXhwcmVzc2lvbiArIFwiXFxuXCIgKyBpMCArIFwifVwiKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQodGhpcy5ib2R5LmVuZCwgY2FsbEV4cHJlc3Npb24pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChuZWVkc0Jsb2NrKSB7XG5cdFx0XHRjb2RlLmFwcGVuZExlZnQodGhpcy5ib2R5LnN0YXJ0LCAneyAnKTtcblx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KHRoaXMuYm9keS5lbmQsICcgfScpO1xuXHRcdH1cblxuXHRcdE5vZGUkJDEucHJvdG90eXBlLnRyYW5zcGlsZS5jYWxsKHRoaXMsIGNvZGUsIHRyYW5zZm9ybXMpO1xuXHR9O1xuXG5cdHJldHVybiBMb29wU3RhdGVtZW50O1xufShOb2RlKSk7XG5cbnZhciBGb3JTdGF0ZW1lbnQgPSAoZnVuY3Rpb24gKExvb3BTdGF0ZW1lbnQkJDEpIHtcblx0ZnVuY3Rpb24gRm9yU3RhdGVtZW50ICgpIHtcblx0XHRMb29wU3RhdGVtZW50JCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAoIExvb3BTdGF0ZW1lbnQkJDEgKSBGb3JTdGF0ZW1lbnQuX19wcm90b19fID0gTG9vcFN0YXRlbWVudCQkMTtcblx0Rm9yU3RhdGVtZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIExvb3BTdGF0ZW1lbnQkJDEgJiYgTG9vcFN0YXRlbWVudCQkMS5wcm90b3R5cGUgKTtcblx0Rm9yU3RhdGVtZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEZvclN0YXRlbWVudDtcblxuXHRGb3JTdGF0ZW1lbnQucHJvdG90eXBlLmZpbmRTY29wZSA9IGZ1bmN0aW9uIGZpbmRTY29wZSAoZnVuY3Rpb25TY29wZSkge1xuXHRcdHJldHVybiBmdW5jdGlvblNjb3BlIHx8ICF0aGlzLmNyZWF0ZWRTY29wZVxuXHRcdFx0PyB0aGlzLnBhcmVudC5maW5kU2NvcGUoZnVuY3Rpb25TY29wZSlcblx0XHRcdDogdGhpcy5ib2R5LnNjb3BlO1xuXHR9O1xuXG5cdEZvclN0YXRlbWVudC5wcm90b3R5cGUudHJhbnNwaWxlID0gZnVuY3Rpb24gdHJhbnNwaWxlIChjb2RlLCB0cmFuc2Zvcm1zKSB7XG5cdFx0dmFyIHRoaXMkMSA9IHRoaXM7XG5cblx0XHR2YXIgaTEgPSB0aGlzLmdldEluZGVudGF0aW9uKCkgKyBjb2RlLmdldEluZGVudFN0cmluZygpO1xuXG5cdFx0aWYgKHRoaXMuc2hvdWxkUmV3cml0ZUFzRnVuY3Rpb24pIHtcblx0XHRcdC8vIHdoaWNoIHZhcmlhYmxlcyBhcmUgZGVjbGFyZWQgaW4gdGhlIGluaXQgc3RhdGVtZW50P1xuXHRcdFx0dmFyIG5hbWVzID1cblx0XHRcdFx0dGhpcy5pbml0LnR5cGUgPT09ICdWYXJpYWJsZURlY2xhcmF0aW9uJ1xuXHRcdFx0XHRcdD8gW10uY29uY2F0LmFwcGx5KFxuXHRcdFx0XHRcdFx0XHRbXSxcblx0XHRcdFx0XHRcdFx0dGhpcy5pbml0LmRlY2xhcmF0aW9ucy5tYXAoZnVuY3Rpb24gKGRlY2xhcmF0b3IpIHsgcmV0dXJuIGV4dHJhY3ROYW1lcyhkZWNsYXJhdG9yLmlkKTsgfVxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0OiBbXTtcblxuXHRcdFx0dmFyIGFsaWFzZXMgPSB0aGlzLmFsaWFzZXM7XG5cblx0XHRcdHRoaXMuYXJncyA9IG5hbWVzLm1hcChcblx0XHRcdFx0ZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIChuYW1lIGluIHRoaXMkMS5hbGlhc2VzID8gdGhpcyQxLmFsaWFzZXNbbmFtZV0ub3V0ZXIgOiBuYW1lKTsgfVxuXHRcdFx0KTtcblx0XHRcdHRoaXMucGFyYW1zID0gbmFtZXMubWFwKFxuXHRcdFx0XHRmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gKG5hbWUgaW4gdGhpcyQxLmFsaWFzZXMgPyB0aGlzJDEuYWxpYXNlc1tuYW1lXS5pbm5lciA6IG5hbWUpOyB9XG5cdFx0XHQpO1xuXG5cdFx0XHR2YXIgdXBkYXRlcyA9IE9iamVjdC5rZXlzKHRoaXMucmVhc3NpZ25lZCkubWFwKFxuXHRcdFx0XHRmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gKChhbGlhc2VzW25hbWVdLm91dGVyKSArIFwiID0gXCIgKyAoYWxpYXNlc1tuYW1lXS5pbm5lcikgKyBcIjtcIik7IH1cblx0XHRcdCk7XG5cblx0XHRcdGlmICh1cGRhdGVzLmxlbmd0aCkge1xuXHRcdFx0XHRpZiAodGhpcy5ib2R5LnN5bnRoZXRpYykge1xuXHRcdFx0XHRcdGNvZGUuYXBwZW5kTGVmdCh0aGlzLmJvZHkuYm9keVswXS5lbmQsIChcIjsgXCIgKyAodXBkYXRlcy5qb2luKFwiIFwiKSkpKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR2YXIgbGFzdFN0YXRlbWVudCA9IHRoaXMuYm9keS5ib2R5W3RoaXMuYm9keS5ib2R5Lmxlbmd0aCAtIDFdO1xuXHRcdFx0XHRcdGNvZGUuYXBwZW5kTGVmdChcblx0XHRcdFx0XHRcdGxhc3RTdGF0ZW1lbnQuZW5kLFxuXHRcdFx0XHRcdFx0KFwiXFxuXFxuXCIgKyBpMSArICh1cGRhdGVzLmpvaW4oKFwiXFxuXCIgKyBpMSkpKSlcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0TG9vcFN0YXRlbWVudCQkMS5wcm90b3R5cGUudHJhbnNwaWxlLmNhbGwodGhpcywgY29kZSwgdHJhbnNmb3Jtcyk7XG5cdH07XG5cblx0cmV0dXJuIEZvclN0YXRlbWVudDtcbn0oTG9vcFN0YXRlbWVudCkpO1xuXG52YXIgRm9ySW5TdGF0ZW1lbnQgPSAoZnVuY3Rpb24gKExvb3BTdGF0ZW1lbnQkJDEpIHtcblx0ZnVuY3Rpb24gRm9ySW5TdGF0ZW1lbnQgKCkge1xuXHRcdExvb3BTdGF0ZW1lbnQkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTG9vcFN0YXRlbWVudCQkMSApIEZvckluU3RhdGVtZW50Ll9fcHJvdG9fXyA9IExvb3BTdGF0ZW1lbnQkJDE7XG5cdEZvckluU3RhdGVtZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIExvb3BTdGF0ZW1lbnQkJDEgJiYgTG9vcFN0YXRlbWVudCQkMS5wcm90b3R5cGUgKTtcblx0Rm9ySW5TdGF0ZW1lbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRm9ySW5TdGF0ZW1lbnQ7XG5cblx0Rm9ySW5TdGF0ZW1lbnQucHJvdG90eXBlLmZpbmRTY29wZSA9IGZ1bmN0aW9uIGZpbmRTY29wZSAoZnVuY3Rpb25TY29wZSkge1xuXHRcdHJldHVybiBmdW5jdGlvblNjb3BlIHx8ICF0aGlzLmNyZWF0ZWRTY29wZVxuXHRcdFx0PyB0aGlzLnBhcmVudC5maW5kU2NvcGUoZnVuY3Rpb25TY29wZSlcblx0XHRcdDogdGhpcy5ib2R5LnNjb3BlO1xuXHR9O1xuXG5cdEZvckluU3RhdGVtZW50LnByb3RvdHlwZS50cmFuc3BpbGUgPSBmdW5jdGlvbiB0cmFuc3BpbGUgKGNvZGUsIHRyYW5zZm9ybXMpIHtcblx0XHR2YXIgdGhpcyQxID0gdGhpcztcblxuXHRcdHZhciBoYXNEZWNsYXJhdGlvbiA9IHRoaXMubGVmdC50eXBlID09PSAnVmFyaWFibGVEZWNsYXJhdGlvbic7XG5cblx0XHRpZiAodGhpcy5zaG91bGRSZXdyaXRlQXNGdW5jdGlvbikge1xuXHRcdFx0Ly8gd2hpY2ggdmFyaWFibGVzIGFyZSBkZWNsYXJlZCBpbiB0aGUgaW5pdCBzdGF0ZW1lbnQ/XG5cdFx0XHR2YXIgbmFtZXMgPVxuXHRcdFx0XHRoYXNEZWNsYXJhdGlvblxuXHRcdFx0XHRcdD8gW10uY29uY2F0LmFwcGx5KFxuXHRcdFx0XHRcdFx0XHRbXSxcblx0XHRcdFx0XHRcdFx0dGhpcy5sZWZ0LmRlY2xhcmF0aW9ucy5tYXAoZnVuY3Rpb24gKGRlY2xhcmF0b3IpIHsgcmV0dXJuIGV4dHJhY3ROYW1lcyhkZWNsYXJhdG9yLmlkKTsgfVxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0OiBbXTtcblxuXHRcdFx0dGhpcy5hcmdzID0gbmFtZXMubWFwKFxuXHRcdFx0XHRmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gKG5hbWUgaW4gdGhpcyQxLmFsaWFzZXMgPyB0aGlzJDEuYWxpYXNlc1tuYW1lXS5vdXRlciA6IG5hbWUpOyB9XG5cdFx0XHQpO1xuXHRcdFx0dGhpcy5wYXJhbXMgPSBuYW1lcy5tYXAoXG5cdFx0XHRcdGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiAobmFtZSBpbiB0aGlzJDEuYWxpYXNlcyA/IHRoaXMkMS5hbGlhc2VzW25hbWVdLmlubmVyIDogbmFtZSk7IH1cblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0TG9vcFN0YXRlbWVudCQkMS5wcm90b3R5cGUudHJhbnNwaWxlLmNhbGwodGhpcywgY29kZSwgdHJhbnNmb3Jtcyk7XG5cblx0XHR2YXIgbWF5YmVQYXR0ZXJuID0gaGFzRGVjbGFyYXRpb24gPyB0aGlzLmxlZnQuZGVjbGFyYXRpb25zWzBdLmlkIDogdGhpcy5sZWZ0O1xuXHRcdGlmIChtYXliZVBhdHRlcm4udHlwZSAhPT0gJ0lkZW50aWZpZXInKSB7XG5cdFx0XHR0aGlzLmRlc3RydWN0dXJlUGF0dGVybihjb2RlLCBtYXliZVBhdHRlcm4sIGhhc0RlY2xhcmF0aW9uKTtcblx0XHR9XG5cdH07XG5cblx0Rm9ySW5TdGF0ZW1lbnQucHJvdG90eXBlLmRlc3RydWN0dXJlUGF0dGVybiA9IGZ1bmN0aW9uIGRlc3RydWN0dXJlUGF0dGVybiAoY29kZSwgcGF0dGVybiwgaXNEZWNsYXJhdGlvbikge1xuXHRcdHZhciBzY29wZSA9IHRoaXMuZmluZFNjb3BlKHRydWUpO1xuXHRcdHZhciBpMCA9IHRoaXMuZ2V0SW5kZW50YXRpb24oKTtcblx0XHR2YXIgaTEgPSBpMCArIGNvZGUuZ2V0SW5kZW50U3RyaW5nKCk7XG5cblx0XHR2YXIgcmVmID0gc2NvcGUuY3JlYXRlSWRlbnRpZmllcigncmVmJyk7XG5cblx0XHR2YXIgYm9keVN0YXJ0ID0gdGhpcy5ib2R5LmJvZHkubGVuZ3RoID8gdGhpcy5ib2R5LmJvZHlbMF0uc3RhcnQgOiB0aGlzLmJvZHkuc3RhcnQgKyAxO1xuXG5cdFx0Y29kZS5tb3ZlKHBhdHRlcm4uc3RhcnQsIHBhdHRlcm4uZW5kLCBib2R5U3RhcnQpO1xuXG5cdFx0Y29kZS5wcmVwZW5kUmlnaHQocGF0dGVybi5lbmQsIGlzRGVjbGFyYXRpb24gPyByZWYgOiAoXCJ2YXIgXCIgKyByZWYpKTtcblxuXHRcdHZhciBzdGF0ZW1lbnRHZW5lcmF0b3JzID0gW107XG5cdFx0ZGVzdHJ1Y3R1cmUoXG5cdFx0XHRjb2RlLFxuXHRcdFx0ZnVuY3Rpb24gKGlkKSB7IHJldHVybiBzY29wZS5jcmVhdGVJZGVudGlmaWVyKGlkKTsgfSxcblx0XHRcdGZ1bmN0aW9uIChyZWYpIHtcblx0XHRcdFx0dmFyIG5hbWUgPSByZWYubmFtZTtcblxuXHRcdFx0XHRyZXR1cm4gc2NvcGUucmVzb2x2ZU5hbWUobmFtZSk7XG5cdFx0fSxcblx0XHRcdHBhdHRlcm4sXG5cdFx0XHRyZWYsXG5cdFx0XHRmYWxzZSxcblx0XHRcdHN0YXRlbWVudEdlbmVyYXRvcnNcblx0XHQpO1xuXG5cdFx0dmFyIHN1ZmZpeCA9IFwiO1xcblwiICsgaTE7XG5cdFx0c3RhdGVtZW50R2VuZXJhdG9ycy5mb3JFYWNoKGZ1bmN0aW9uIChmbiwgaSkge1xuXHRcdFx0aWYgKGkgPT09IHN0YXRlbWVudEdlbmVyYXRvcnMubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRzdWZmaXggPSBcIjtcXG5cXG5cIiArIGkxO1xuXHRcdFx0fVxuXG5cdFx0XHRmbihib2R5U3RhcnQsICcnLCBzdWZmaXgpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHJldHVybiBGb3JJblN0YXRlbWVudDtcbn0oTG9vcFN0YXRlbWVudCkpO1xuXG52YXIgRm9yT2ZTdGF0ZW1lbnQgPSAoZnVuY3Rpb24gKExvb3BTdGF0ZW1lbnQkJDEpIHtcblx0ZnVuY3Rpb24gRm9yT2ZTdGF0ZW1lbnQgKCkge1xuXHRcdExvb3BTdGF0ZW1lbnQkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTG9vcFN0YXRlbWVudCQkMSApIEZvck9mU3RhdGVtZW50Ll9fcHJvdG9fXyA9IExvb3BTdGF0ZW1lbnQkJDE7XG5cdEZvck9mU3RhdGVtZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIExvb3BTdGF0ZW1lbnQkJDEgJiYgTG9vcFN0YXRlbWVudCQkMS5wcm90b3R5cGUgKTtcblx0Rm9yT2ZTdGF0ZW1lbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRm9yT2ZTdGF0ZW1lbnQ7XG5cblx0Rm9yT2ZTdGF0ZW1lbnQucHJvdG90eXBlLmluaXRpYWxpc2UgPSBmdW5jdGlvbiBpbml0aWFsaXNlICh0cmFuc2Zvcm1zKSB7XG5cdFx0aWYgKHRyYW5zZm9ybXMuZm9yT2YgJiYgIXRyYW5zZm9ybXMuZGFuZ2Vyb3VzRm9yT2YpXG5cdFx0XHR7IHRocm93IG5ldyBDb21waWxlRXJyb3IoXG5cdFx0XHRcdFwiZm9yLi4ub2Ygc3RhdGVtZW50cyBhcmUgbm90IHN1cHBvcnRlZC4gVXNlIGB0cmFuc2Zvcm1zOiB7IGZvck9mOiBmYWxzZSB9YCB0byBza2lwIHRyYW5zZm9ybWF0aW9uIGFuZCBkaXNhYmxlIHRoaXMgZXJyb3IsIG9yIGB0cmFuc2Zvcm1zOiB7IGRhbmdlcm91c0Zvck9mOiB0cnVlIH1gIGlmIHlvdSBrbm93IHdoYXQgeW91J3JlIGRvaW5nXCIsXG5cdFx0XHRcdHRoaXNcblx0XHRcdCk7IH1cblx0XHRMb29wU3RhdGVtZW50JCQxLnByb3RvdHlwZS5pbml0aWFsaXNlLmNhbGwodGhpcywgdHJhbnNmb3Jtcyk7XG5cdH07XG5cblx0Rm9yT2ZTdGF0ZW1lbnQucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdExvb3BTdGF0ZW1lbnQkJDEucHJvdG90eXBlLnRyYW5zcGlsZS5jYWxsKHRoaXMsIGNvZGUsIHRyYW5zZm9ybXMpO1xuXHRcdGlmICghdHJhbnNmb3Jtcy5kYW5nZXJvdXNGb3JPZikgeyByZXR1cm47IH1cblxuXHRcdC8vIGVkZ2UgY2FzZSAoIzgwKVxuXHRcdGlmICghdGhpcy5ib2R5LmJvZHlbMF0pIHtcblx0XHRcdGlmIChcblx0XHRcdFx0dGhpcy5sZWZ0LnR5cGUgPT09ICdWYXJpYWJsZURlY2xhcmF0aW9uJyAmJlxuXHRcdFx0XHR0aGlzLmxlZnQua2luZCA9PT0gJ3Zhcidcblx0XHRcdCkge1xuXHRcdFx0XHRjb2RlLnJlbW92ZSh0aGlzLnN0YXJ0LCB0aGlzLmxlZnQuc3RhcnQpO1xuXHRcdFx0XHRjb2RlLmFwcGVuZExlZnQodGhpcy5sZWZ0LmVuZCwgJzsnKTtcblx0XHRcdFx0Y29kZS5yZW1vdmUodGhpcy5sZWZ0LmVuZCwgdGhpcy5lbmQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29kZS5yZW1vdmUodGhpcy5zdGFydCwgdGhpcy5lbmQpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFyIHNjb3BlID0gdGhpcy5maW5kU2NvcGUodHJ1ZSk7XG5cdFx0dmFyIGkwID0gdGhpcy5nZXRJbmRlbnRhdGlvbigpO1xuXHRcdHZhciBpMSA9IGkwICsgY29kZS5nZXRJbmRlbnRTdHJpbmcoKTtcblxuXHRcdHZhciBrZXkgPSBzY29wZS5jcmVhdGVJZGVudGlmaWVyKCdpJyk7XG5cdFx0dmFyIGxpc3QgPSBzY29wZS5jcmVhdGVJZGVudGlmaWVyKCdsaXN0Jyk7XG5cblx0XHRpZiAodGhpcy5ib2R5LnN5bnRoZXRpYykge1xuXHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQodGhpcy5sZWZ0LnN0YXJ0LCAoXCJ7XFxuXCIgKyBpMSkpO1xuXHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHRoaXMuYm9keS5ib2R5WzBdLmVuZCwgKFwiXFxuXCIgKyBpMCArIFwifVwiKSk7XG5cdFx0fVxuXG5cdFx0dmFyIGJvZHlTdGFydCA9IHRoaXMuYm9keS5ib2R5WzBdLnN0YXJ0O1xuXG5cdFx0Y29kZS5yZW1vdmUodGhpcy5sZWZ0LmVuZCwgdGhpcy5yaWdodC5zdGFydCk7XG5cdFx0Y29kZS5tb3ZlKHRoaXMubGVmdC5zdGFydCwgdGhpcy5sZWZ0LmVuZCwgYm9keVN0YXJ0KTtcblxuXHRcdGNvZGUucHJlcGVuZFJpZ2h0KHRoaXMucmlnaHQuc3RhcnQsIChcInZhciBcIiArIGtleSArIFwiID0gMCwgXCIgKyBsaXN0ICsgXCIgPSBcIikpO1xuXHRcdGNvZGUuYXBwZW5kTGVmdCh0aGlzLnJpZ2h0LmVuZCwgKFwiOyBcIiArIGtleSArIFwiIDwgXCIgKyBsaXN0ICsgXCIubGVuZ3RoOyBcIiArIGtleSArIFwiICs9IDFcIikpO1xuXG5cdFx0dmFyIGlzRGVjbGFyYXRpb24gPSB0aGlzLmxlZnQudHlwZSA9PT0gJ1ZhcmlhYmxlRGVjbGFyYXRpb24nO1xuXHRcdHZhciBtYXliZURlc3RydWN0dXJpbmcgPSBpc0RlY2xhcmF0aW9uID8gdGhpcy5sZWZ0LmRlY2xhcmF0aW9uc1swXS5pZCA6IHRoaXMubGVmdDtcblx0XHRpZiAobWF5YmVEZXN0cnVjdHVyaW5nLnR5cGUgIT09ICdJZGVudGlmaWVyJykge1xuXHRcdFx0dmFyIHN0YXRlbWVudEdlbmVyYXRvcnMgPSBbXTtcblx0XHRcdHZhciByZWYgPSBzY29wZS5jcmVhdGVJZGVudGlmaWVyKCdyZWYnKTtcblx0XHRcdGRlc3RydWN0dXJlKFxuXHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIHNjb3BlLmNyZWF0ZUlkZW50aWZpZXIoaWQpOyB9LFxuXHRcdFx0XHRmdW5jdGlvbiAocmVmKSB7XG5cdFx0XHRcdFx0dmFyIG5hbWUgPSByZWYubmFtZTtcblxuXHRcdFx0XHRcdHJldHVybiBzY29wZS5yZXNvbHZlTmFtZShuYW1lKTtcblx0XHRcdH0sXG5cdFx0XHRcdG1heWJlRGVzdHJ1Y3R1cmluZyxcblx0XHRcdFx0cmVmLFxuXHRcdFx0XHQhaXNEZWNsYXJhdGlvbixcblx0XHRcdFx0c3RhdGVtZW50R2VuZXJhdG9yc1xuXHRcdFx0KTtcblxuXHRcdFx0dmFyIHN1ZmZpeCA9IFwiO1xcblwiICsgaTE7XG5cdFx0XHRzdGF0ZW1lbnRHZW5lcmF0b3JzLmZvckVhY2goZnVuY3Rpb24gKGZuLCBpKSB7XG5cdFx0XHRcdGlmIChpID09PSBzdGF0ZW1lbnRHZW5lcmF0b3JzLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHRzdWZmaXggPSBcIjtcXG5cXG5cIiArIGkxO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Zm4oYm9keVN0YXJ0LCAnJywgc3VmZml4KTtcblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAoaXNEZWNsYXJhdGlvbikge1xuXHRcdFx0XHRjb2RlLmFwcGVuZExlZnQodGhpcy5sZWZ0LnN0YXJ0ICsgdGhpcy5sZWZ0LmtpbmQubGVuZ3RoICsgMSwgcmVmKTtcblx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHRoaXMubGVmdC5lbmQsIChcIiA9IFwiICsgbGlzdCArIFwiW1wiICsga2V5ICsgXCJdO1xcblwiICsgaTEpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvZGUuYXBwZW5kTGVmdCh0aGlzLmxlZnQuZW5kLCAoXCJ2YXIgXCIgKyByZWYgKyBcIiA9IFwiICsgbGlzdCArIFwiW1wiICsga2V5ICsgXCJdO1xcblwiICsgaTEpKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHRoaXMubGVmdC5lbmQsIChcIiA9IFwiICsgbGlzdCArIFwiW1wiICsga2V5ICsgXCJdO1xcblxcblwiICsgaTEpKTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIEZvck9mU3RhdGVtZW50O1xufShMb29wU3RhdGVtZW50KSk7XG5cbnZhciBGdW5jdGlvbkRlY2xhcmF0aW9uID0gKGZ1bmN0aW9uIChOb2RlJCQxKSB7XG5cdGZ1bmN0aW9uIEZ1bmN0aW9uRGVjbGFyYXRpb24gKCkge1xuXHRcdE5vZGUkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTm9kZSQkMSApIEZ1bmN0aW9uRGVjbGFyYXRpb24uX19wcm90b19fID0gTm9kZSQkMTtcblx0RnVuY3Rpb25EZWNsYXJhdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBOb2RlJCQxICYmIE5vZGUkJDEucHJvdG90eXBlICk7XG5cdEZ1bmN0aW9uRGVjbGFyYXRpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRnVuY3Rpb25EZWNsYXJhdGlvbjtcblxuXHRGdW5jdGlvbkRlY2xhcmF0aW9uLnByb3RvdHlwZS5pbml0aWFsaXNlID0gZnVuY3Rpb24gaW5pdGlhbGlzZSAodHJhbnNmb3Jtcykge1xuXHRcdGlmICh0aGlzLmdlbmVyYXRvciAmJiB0cmFuc2Zvcm1zLmdlbmVyYXRvcikge1xuXHRcdFx0dGhyb3cgbmV3IENvbXBpbGVFcnJvcignR2VuZXJhdG9ycyBhcmUgbm90IHN1cHBvcnRlZCcsIHRoaXMpO1xuXHRcdH1cblxuXHRcdHRoaXMuYm9keS5jcmVhdGVTY29wZSgpO1xuXG5cdFx0aWYgKHRoaXMuaWQpIHtcblx0XHRcdHRoaXMuZmluZFNjb3BlKHRydWUpLmFkZERlY2xhcmF0aW9uKHRoaXMuaWQsICdmdW5jdGlvbicpO1xuXHRcdH1cblx0XHROb2RlJCQxLnByb3RvdHlwZS5pbml0aWFsaXNlLmNhbGwodGhpcywgdHJhbnNmb3Jtcyk7XG5cdH07XG5cblx0RnVuY3Rpb25EZWNsYXJhdGlvbi5wcm90b3R5cGUudHJhbnNwaWxlID0gZnVuY3Rpb24gdHJhbnNwaWxlIChjb2RlLCB0cmFuc2Zvcm1zKSB7XG5cdFx0Tm9kZSQkMS5wcm90b3R5cGUudHJhbnNwaWxlLmNhbGwodGhpcywgY29kZSwgdHJhbnNmb3Jtcyk7XG5cdFx0aWYgKHRyYW5zZm9ybXMudHJhaWxpbmdGdW5jdGlvbkNvbW1hcyAmJiB0aGlzLnBhcmFtcy5sZW5ndGgpIHtcblx0XHRcdHJlbW92ZVRyYWlsaW5nQ29tbWEoY29kZSwgdGhpcy5wYXJhbXNbdGhpcy5wYXJhbXMubGVuZ3RoIC0gMV0uZW5kKTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIEZ1bmN0aW9uRGVjbGFyYXRpb247XG59KE5vZGUpKTtcblxudmFyIEZ1bmN0aW9uRXhwcmVzc2lvbiA9IChmdW5jdGlvbiAoTm9kZSQkMSkge1xuXHRmdW5jdGlvbiBGdW5jdGlvbkV4cHJlc3Npb24gKCkge1xuXHRcdE5vZGUkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTm9kZSQkMSApIEZ1bmN0aW9uRXhwcmVzc2lvbi5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRGdW5jdGlvbkV4cHJlc3Npb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTm9kZSQkMSAmJiBOb2RlJCQxLnByb3RvdHlwZSApO1xuXHRGdW5jdGlvbkV4cHJlc3Npb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRnVuY3Rpb25FeHByZXNzaW9uO1xuXG5cdEZ1bmN0aW9uRXhwcmVzc2lvbi5wcm90b3R5cGUuaW5pdGlhbGlzZSA9IGZ1bmN0aW9uIGluaXRpYWxpc2UgKHRyYW5zZm9ybXMpIHtcblx0XHR2YXIgdGhpcyQxID0gdGhpcztcblxuXHRcdGlmICh0aGlzLmdlbmVyYXRvciAmJiB0cmFuc2Zvcm1zLmdlbmVyYXRvcikge1xuXHRcdFx0dGhyb3cgbmV3IENvbXBpbGVFcnJvcignR2VuZXJhdG9ycyBhcmUgbm90IHN1cHBvcnRlZCcsIHRoaXMpO1xuXHRcdH1cblxuXHRcdHRoaXMuYm9keS5jcmVhdGVTY29wZSgpO1xuXG5cdFx0aWYgKHRoaXMuaWQpIHtcblx0XHRcdC8vIGZ1bmN0aW9uIGV4cHJlc3Npb24gSURzIGJlbG9uZyB0byB0aGUgY2hpbGQgc2NvcGUuLi5cblx0XHRcdHRoaXMuYm9keS5zY29wZS5hZGREZWNsYXJhdGlvbih0aGlzLmlkLCAnZnVuY3Rpb24nKTtcblx0XHR9XG5cblx0XHROb2RlJCQxLnByb3RvdHlwZS5pbml0aWFsaXNlLmNhbGwodGhpcywgdHJhbnNmb3Jtcyk7XG5cblx0XHR2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XG5cdFx0dmFyIG1ldGhvZE5hbWU7XG5cblx0XHRpZiAoXG5cdFx0XHR0cmFuc2Zvcm1zLmNvbmNpc2VNZXRob2RQcm9wZXJ0eSAmJlxuXHRcdFx0cGFyZW50LnR5cGUgPT09ICdQcm9wZXJ0eScgJiZcblx0XHRcdHBhcmVudC5raW5kID09PSAnaW5pdCcgJiZcblx0XHRcdHBhcmVudC5tZXRob2QgJiZcblx0XHRcdHBhcmVudC5rZXkudHlwZSA9PT0gJ0lkZW50aWZpZXInXG5cdFx0KSB7XG5cdFx0XHQvLyBvYmplY3QgbGl0ZXJhbCBjb25jaXNlIG1ldGhvZFxuXHRcdFx0bWV0aG9kTmFtZSA9IHBhcmVudC5rZXkubmFtZTtcblx0XHR9IGVsc2UgaWYgKFxuXHRcdFx0dHJhbnNmb3Jtcy5jbGFzc2VzICYmXG5cdFx0XHRwYXJlbnQudHlwZSA9PT0gJ01ldGhvZERlZmluaXRpb24nICYmXG5cdFx0XHRwYXJlbnQua2luZCA9PT0gJ21ldGhvZCcgJiZcblx0XHRcdHBhcmVudC5rZXkudHlwZSA9PT0gJ0lkZW50aWZpZXInXG5cdFx0KSB7XG5cdFx0XHQvLyBtZXRob2QgZGVmaW5pdGlvbiBpbiBhIGNsYXNzXG5cdFx0XHRtZXRob2ROYW1lID0gcGFyZW50LmtleS5uYW1lO1xuXHRcdH0gZWxzZSBpZiAodGhpcy5pZCAmJiB0aGlzLmlkLnR5cGUgPT09ICdJZGVudGlmaWVyJykge1xuXHRcdFx0Ly8gbmFrZWQgZnVuY3Rpb24gZXhwcmVzc2lvblxuXHRcdFx0bWV0aG9kTmFtZSA9IHRoaXMuaWQuYWxpYXMgfHwgdGhpcy5pZC5uYW1lO1xuXHRcdH1cblxuXHRcdGlmIChtZXRob2ROYW1lKSB7XG5cdFx0XHRmb3IgKHZhciBpJDEgPSAwLCBsaXN0JDEgPSB0aGlzJDEucGFyYW1zOyBpJDEgPCBsaXN0JDEubGVuZ3RoOyBpJDEgKz0gMSkge1xuXHRcdFx0XHR2YXIgcGFyYW0gPSBsaXN0JDFbaSQxXTtcblxuXHRcdFx0XHRpZiAocGFyYW0udHlwZSA9PT0gJ0lkZW50aWZpZXInICYmIG1ldGhvZE5hbWUgPT09IHBhcmFtLm5hbWUpIHtcblx0XHRcdFx0XHQvLyB3b3JrYXJvdW5kIGZvciBTYWZhcmkgOS9XZWJLaXQgYnVnOlxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vZ2l0bGFiLmNvbS9SaWNoLUhhcnJpcy9idWJsZS9pc3N1ZXMvMTU0XG5cdFx0XHRcdFx0Ly8gY2hhbmdlIHBhcmFtZXRlciBuYW1lIHdoZW4gc2FtZSBhcyBtZXRob2QgbmFtZVxuXG5cdFx0XHRcdFx0dmFyIHNjb3BlID0gdGhpcyQxLmJvZHkuc2NvcGU7XG5cdFx0XHRcdFx0dmFyIGRlY2xhcmF0aW9uID0gc2NvcGUuZGVjbGFyYXRpb25zW21ldGhvZE5hbWVdO1xuXG5cdFx0XHRcdFx0dmFyIGFsaWFzID0gc2NvcGUuY3JlYXRlSWRlbnRpZmllcihtZXRob2ROYW1lKTtcblx0XHRcdFx0XHRwYXJhbS5hbGlhcyA9IGFsaWFzO1xuXG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDAsIGxpc3QgPSBkZWNsYXJhdGlvbi5pbnN0YW5jZXM7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHRcdFx0XHR2YXIgaWRlbnRpZmllciA9IGxpc3RbaV07XG5cblx0XHRcdFx0XHRcdGlkZW50aWZpZXIuYWxpYXMgPSBhbGlhcztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRGdW5jdGlvbkV4cHJlc3Npb24ucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdE5vZGUkJDEucHJvdG90eXBlLnRyYW5zcGlsZS5jYWxsKHRoaXMsIGNvZGUsIHRyYW5zZm9ybXMpO1xuXHRcdGlmICh0cmFuc2Zvcm1zLnRyYWlsaW5nRnVuY3Rpb25Db21tYXMgJiYgdGhpcy5wYXJhbXMubGVuZ3RoKSB7XG5cdFx0XHRyZW1vdmVUcmFpbGluZ0NvbW1hKGNvZGUsIHRoaXMucGFyYW1zW3RoaXMucGFyYW1zLmxlbmd0aCAtIDFdLmVuZCk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBGdW5jdGlvbkV4cHJlc3Npb247XG59KE5vZGUpKTtcblxuZnVuY3Rpb24gaXNSZWZlcmVuY2Uobm9kZSwgcGFyZW50KSB7XG5cdGlmIChub2RlLnR5cGUgPT09ICdNZW1iZXJFeHByZXNzaW9uJykge1xuXHRcdHJldHVybiAhbm9kZS5jb21wdXRlZCAmJiBpc1JlZmVyZW5jZShub2RlLm9iamVjdCwgbm9kZSk7XG5cdH1cblxuXHRpZiAobm9kZS50eXBlID09PSAnSWRlbnRpZmllcicpIHtcblx0XHQvLyB0aGUgb25seSB0aW1lIHdlIGNvdWxkIGhhdmUgYW4gaWRlbnRpZmllciBub2RlIHdpdGhvdXQgYSBwYXJlbnQgaXNcblx0XHQvLyBpZiBpdCdzIHRoZSBlbnRpcmUgYm9keSBvZiBhIGZ1bmN0aW9uIHdpdGhvdXQgYSBibG9jayBzdGF0ZW1lbnQg4oCTXG5cdFx0Ly8gaS5lLiBhbiBhcnJvdyBmdW5jdGlvbiBleHByZXNzaW9uIGxpa2UgYGEgPT4gYWBcblx0XHRpZiAoIXBhcmVudCkgeyByZXR1cm4gdHJ1ZTsgfVxuXG5cdFx0aWYgKC8oRnVuY3Rpb258Q2xhc3MpRXhwcmVzc2lvbi8udGVzdChwYXJlbnQudHlwZSkpIHsgcmV0dXJuIGZhbHNlOyB9XG5cblx0XHRpZiAocGFyZW50LnR5cGUgPT09ICdWYXJpYWJsZURlY2xhcmF0b3InKSB7IHJldHVybiBub2RlID09PSBwYXJlbnQuaW5pdDsgfVxuXG5cdFx0Ly8gVE9ETyBpcyB0aGlzIHJpZ2h0P1xuXHRcdGlmIChcblx0XHRcdHBhcmVudC50eXBlID09PSAnTWVtYmVyRXhwcmVzc2lvbicgfHxcblx0XHRcdHBhcmVudC50eXBlID09PSAnTWV0aG9kRGVmaW5pdGlvbidcblx0XHQpIHtcblx0XHRcdHJldHVybiBwYXJlbnQuY29tcHV0ZWQgfHwgbm9kZSA9PT0gcGFyZW50Lm9iamVjdDtcblx0XHR9XG5cblx0XHRpZiAocGFyZW50LnR5cGUgPT09ICdBcnJheVBhdHRlcm4nKSB7IHJldHVybiBmYWxzZTsgfVxuXG5cdFx0Ly8gZGlzcmVnYXJkIHRoZSBgYmFyYCBpbiBgeyBiYXI6IGZvbyB9YCwgYnV0IGtlZXAgaXQgaW4gYHsgW2Jhcl06IGZvbyB9YFxuXHRcdGlmIChwYXJlbnQudHlwZSA9PT0gJ1Byb3BlcnR5Jykge1xuXHRcdFx0aWYgKHBhcmVudC5wYXJlbnQudHlwZSA9PT0gJ09iamVjdFBhdHRlcm4nKSB7IHJldHVybiBmYWxzZTsgfVxuXHRcdFx0cmV0dXJuIHBhcmVudC5jb21wdXRlZCB8fCBub2RlID09PSBwYXJlbnQudmFsdWU7XG5cdFx0fVxuXG5cdFx0Ly8gZGlzcmVnYXJkIHRoZSBgYmFyYCBpbiBgY2xhc3MgRm9vIHsgYmFyICgpIHsuLi59IH1gXG5cdFx0aWYgKHBhcmVudC50eXBlID09PSAnTWV0aG9kRGVmaW5pdGlvbicpIHsgcmV0dXJuIGZhbHNlOyB9XG5cblx0XHQvLyBkaXNyZWdhcmQgdGhlIGBiYXJgIGluIGBleHBvcnQgeyBmb28gYXMgYmFyIH1gXG5cdFx0aWYgKHBhcmVudC50eXBlID09PSAnRXhwb3J0U3BlY2lmaWVyJyAmJiBub2RlICE9PSBwYXJlbnQubG9jYWwpXG5cdFx0XHR7IHJldHVybiBmYWxzZTsgfVxuXG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cbn1cblxudmFyIElkZW50aWZpZXIgPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gSWRlbnRpZmllciAoKSB7XG5cdFx0Tm9kZSQkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0aWYgKCBOb2RlJCQxICkgSWRlbnRpZmllci5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRJZGVudGlmaWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0SWRlbnRpZmllci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBJZGVudGlmaWVyO1xuXG5cdElkZW50aWZpZXIucHJvdG90eXBlLmZpbmRTY29wZSA9IGZ1bmN0aW9uIGZpbmRTY29wZSAoZnVuY3Rpb25TY29wZSkge1xuXHRcdGlmICh0aGlzLnBhcmVudC5wYXJhbXMgJiYgfnRoaXMucGFyZW50LnBhcmFtcy5pbmRleE9mKHRoaXMpKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wYXJlbnQuYm9keS5zY29wZTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5wYXJlbnQudHlwZSA9PT0gJ0Z1bmN0aW9uRXhwcmVzc2lvbicgJiYgdGhpcyA9PT0gdGhpcy5wYXJlbnQuaWQpIHtcblx0XHRcdHJldHVybiB0aGlzLnBhcmVudC5ib2R5LnNjb3BlO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnBhcmVudC5maW5kU2NvcGUoZnVuY3Rpb25TY29wZSk7XG5cdH07XG5cblx0SWRlbnRpZmllci5wcm90b3R5cGUuaW5pdGlhbGlzZSA9IGZ1bmN0aW9uIGluaXRpYWxpc2UgKHRyYW5zZm9ybXMpIHtcblx0XHRpZiAoaXNSZWZlcmVuY2UodGhpcywgdGhpcy5wYXJlbnQpKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdHRyYW5zZm9ybXMuYXJyb3cgJiZcblx0XHRcdFx0dGhpcy5uYW1lID09PSAnYXJndW1lbnRzJyAmJlxuXHRcdFx0XHQhdGhpcy5maW5kU2NvcGUoZmFsc2UpLmNvbnRhaW5zKHRoaXMubmFtZSlcblx0XHRcdCkge1xuXHRcdFx0XHR2YXIgbGV4aWNhbEJvdW5kYXJ5ID0gdGhpcy5maW5kTGV4aWNhbEJvdW5kYXJ5KCk7XG5cdFx0XHRcdHZhciBhcnJvd0Z1bmN0aW9uID0gdGhpcy5maW5kTmVhcmVzdCgnQXJyb3dGdW5jdGlvbkV4cHJlc3Npb24nKTtcblx0XHRcdFx0dmFyIGxvb3AgPSB0aGlzLmZpbmROZWFyZXN0KGxvb3BTdGF0ZW1lbnQpO1xuXG5cdFx0XHRcdGlmIChhcnJvd0Z1bmN0aW9uICYmIGFycm93RnVuY3Rpb24uZGVwdGggPiBsZXhpY2FsQm91bmRhcnkuZGVwdGgpIHtcblx0XHRcdFx0XHR0aGlzLmFsaWFzID0gbGV4aWNhbEJvdW5kYXJ5LmdldEFyZ3VtZW50c0FsaWFzKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0bG9vcCAmJlxuXHRcdFx0XHRcdGxvb3AuYm9keS5jb250YWlucyh0aGlzKSAmJlxuXHRcdFx0XHRcdGxvb3AuZGVwdGggPiBsZXhpY2FsQm91bmRhcnkuZGVwdGhcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0dGhpcy5hbGlhcyA9IGxleGljYWxCb3VuZGFyeS5nZXRBcmd1bWVudHNBbGlhcygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuZmluZFNjb3BlKGZhbHNlKS5hZGRSZWZlcmVuY2UodGhpcyk7XG5cdFx0fVxuXHR9O1xuXG5cdElkZW50aWZpZXIucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSkge1xuXHRcdGlmICh0aGlzLmFsaWFzKSB7XG5cdFx0XHRjb2RlLm92ZXJ3cml0ZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCwgdGhpcy5hbGlhcywge1xuXHRcdFx0XHRzdG9yZU5hbWU6IHRydWUsXG5cdFx0XHRcdGNvbnRlbnRPbmx5OiB0cnVlXG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIElkZW50aWZpZXI7XG59KE5vZGUpKTtcblxudmFyIElmU3RhdGVtZW50ID0gKGZ1bmN0aW9uIChOb2RlJCQxKSB7XG5cdGZ1bmN0aW9uIElmU3RhdGVtZW50ICgpIHtcblx0XHROb2RlJCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAoIE5vZGUkJDEgKSBJZlN0YXRlbWVudC5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRJZlN0YXRlbWVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBOb2RlJCQxICYmIE5vZGUkJDEucHJvdG90eXBlICk7XG5cdElmU3RhdGVtZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IElmU3RhdGVtZW50O1xuXG5cdElmU3RhdGVtZW50LnByb3RvdHlwZS5pbml0aWFsaXNlID0gZnVuY3Rpb24gaW5pdGlhbGlzZSAodHJhbnNmb3Jtcykge1xuXHRcdE5vZGUkJDEucHJvdG90eXBlLmluaXRpYWxpc2UuY2FsbCh0aGlzLCB0cmFuc2Zvcm1zKTtcblx0fTtcblxuXHRJZlN0YXRlbWVudC5wcm90b3R5cGUudHJhbnNwaWxlID0gZnVuY3Rpb24gdHJhbnNwaWxlIChjb2RlLCB0cmFuc2Zvcm1zKSB7XG5cdFx0aWYgKFxuXHRcdFx0dGhpcy5jb25zZXF1ZW50LnR5cGUgIT09ICdCbG9ja1N0YXRlbWVudCcgfHxcblx0XHRcdCh0aGlzLmNvbnNlcXVlbnQudHlwZSA9PT0gJ0Jsb2NrU3RhdGVtZW50JyAmJiB0aGlzLmNvbnNlcXVlbnQuc3ludGhldGljKVxuXHRcdCkge1xuXHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHRoaXMuY29uc2VxdWVudC5zdGFydCwgJ3sgJyk7XG5cdFx0XHRjb2RlLnByZXBlbmRSaWdodCh0aGlzLmNvbnNlcXVlbnQuZW5kLCAnIH0nKTtcblx0XHR9XG5cblx0XHRpZiAoXG5cdFx0XHR0aGlzLmFsdGVybmF0ZSAmJlxuXHRcdFx0dGhpcy5hbHRlcm5hdGUudHlwZSAhPT0gJ0lmU3RhdGVtZW50JyAmJlxuXHRcdFx0KHRoaXMuYWx0ZXJuYXRlLnR5cGUgIT09ICdCbG9ja1N0YXRlbWVudCcgfHxcblx0XHRcdFx0KHRoaXMuYWx0ZXJuYXRlLnR5cGUgPT09ICdCbG9ja1N0YXRlbWVudCcgJiYgdGhpcy5hbHRlcm5hdGUuc3ludGhldGljKSlcblx0XHQpIHtcblx0XHRcdGNvZGUuYXBwZW5kTGVmdCh0aGlzLmFsdGVybmF0ZS5zdGFydCwgJ3sgJyk7XG5cdFx0XHRjb2RlLnByZXBlbmRSaWdodCh0aGlzLmFsdGVybmF0ZS5lbmQsICcgfScpO1xuXHRcdH1cblxuXHRcdE5vZGUkJDEucHJvdG90eXBlLnRyYW5zcGlsZS5jYWxsKHRoaXMsIGNvZGUsIHRyYW5zZm9ybXMpO1xuXHR9O1xuXG5cdHJldHVybiBJZlN0YXRlbWVudDtcbn0oTm9kZSkpO1xuXG52YXIgSW1wb3J0RGVjbGFyYXRpb24gPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gSW1wb3J0RGVjbGFyYXRpb24gKCkge1xuXHRcdE5vZGUkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTm9kZSQkMSApIEltcG9ydERlY2xhcmF0aW9uLl9fcHJvdG9fXyA9IE5vZGUkJDE7XG5cdEltcG9ydERlY2xhcmF0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0SW1wb3J0RGVjbGFyYXRpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSW1wb3J0RGVjbGFyYXRpb247XG5cblx0SW1wb3J0RGVjbGFyYXRpb24ucHJvdG90eXBlLmluaXRpYWxpc2UgPSBmdW5jdGlvbiBpbml0aWFsaXNlICh0cmFuc2Zvcm1zKSB7XG5cdFx0aWYgKHRyYW5zZm9ybXMubW9kdWxlSW1wb3J0KVxuXHRcdFx0eyB0aHJvdyBuZXcgQ29tcGlsZUVycm9yKCdpbXBvcnQgaXMgbm90IHN1cHBvcnRlZCcsIHRoaXMpOyB9XG5cdFx0Tm9kZSQkMS5wcm90b3R5cGUuaW5pdGlhbGlzZS5jYWxsKHRoaXMsIHRyYW5zZm9ybXMpO1xuXHR9O1xuXG5cdHJldHVybiBJbXBvcnREZWNsYXJhdGlvbjtcbn0oTm9kZSkpO1xuXG52YXIgSW1wb3J0RGVmYXVsdFNwZWNpZmllciA9IChmdW5jdGlvbiAoTm9kZSQkMSkge1xuXHRmdW5jdGlvbiBJbXBvcnREZWZhdWx0U3BlY2lmaWVyICgpIHtcblx0XHROb2RlJCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAoIE5vZGUkJDEgKSBJbXBvcnREZWZhdWx0U3BlY2lmaWVyLl9fcHJvdG9fXyA9IE5vZGUkJDE7XG5cdEltcG9ydERlZmF1bHRTcGVjaWZpZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTm9kZSQkMSAmJiBOb2RlJCQxLnByb3RvdHlwZSApO1xuXHRJbXBvcnREZWZhdWx0U3BlY2lmaWVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEltcG9ydERlZmF1bHRTcGVjaWZpZXI7XG5cblx0SW1wb3J0RGVmYXVsdFNwZWNpZmllci5wcm90b3R5cGUuaW5pdGlhbGlzZSA9IGZ1bmN0aW9uIGluaXRpYWxpc2UgKHRyYW5zZm9ybXMpIHtcblx0XHR0aGlzLmZpbmRTY29wZSh0cnVlKS5hZGREZWNsYXJhdGlvbih0aGlzLmxvY2FsLCAnaW1wb3J0Jyk7XG5cdFx0Tm9kZSQkMS5wcm90b3R5cGUuaW5pdGlhbGlzZS5jYWxsKHRoaXMsIHRyYW5zZm9ybXMpO1xuXHR9O1xuXG5cdHJldHVybiBJbXBvcnREZWZhdWx0U3BlY2lmaWVyO1xufShOb2RlKSk7XG5cbnZhciBJbXBvcnRTcGVjaWZpZXIgPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gSW1wb3J0U3BlY2lmaWVyICgpIHtcblx0XHROb2RlJCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAoIE5vZGUkJDEgKSBJbXBvcnRTcGVjaWZpZXIuX19wcm90b19fID0gTm9kZSQkMTtcblx0SW1wb3J0U3BlY2lmaWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0SW1wb3J0U3BlY2lmaWVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEltcG9ydFNwZWNpZmllcjtcblxuXHRJbXBvcnRTcGVjaWZpZXIucHJvdG90eXBlLmluaXRpYWxpc2UgPSBmdW5jdGlvbiBpbml0aWFsaXNlICh0cmFuc2Zvcm1zKSB7XG5cdFx0dGhpcy5maW5kU2NvcGUodHJ1ZSkuYWRkRGVjbGFyYXRpb24odGhpcy5sb2NhbCwgJ2ltcG9ydCcpO1xuXHRcdE5vZGUkJDEucHJvdG90eXBlLmluaXRpYWxpc2UuY2FsbCh0aGlzLCB0cmFuc2Zvcm1zKTtcblx0fTtcblxuXHRyZXR1cm4gSW1wb3J0U3BlY2lmaWVyO1xufShOb2RlKSk7XG5cbnZhciBoYXNEYXNoZXMgPSBmdW5jdGlvbiAodmFsKSB7IHJldHVybiAvLS8udGVzdCh2YWwpOyB9O1xuXG52YXIgZm9ybWF0S2V5ID0gZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKGhhc0Rhc2hlcyhrZXkpID8gKFwiJ1wiICsga2V5ICsgXCInXCIpIDoga2V5KTsgfTtcblxudmFyIGZvcm1hdFZhbCA9IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuICh2YWwgPyAnJyA6ICd0cnVlJyk7IH07XG5cbnZhciBKU1hBdHRyaWJ1dGUgPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gSlNYQXR0cmlidXRlICgpIHtcblx0XHROb2RlJCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAoIE5vZGUkJDEgKSBKU1hBdHRyaWJ1dGUuX19wcm90b19fID0gTm9kZSQkMTtcblx0SlNYQXR0cmlidXRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0SlNYQXR0cmlidXRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEpTWEF0dHJpYnV0ZTtcblxuXHRKU1hBdHRyaWJ1dGUucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdHZhciByZWYgPSB0aGlzLm5hbWU7XG5cdFx0dmFyIHN0YXJ0ID0gcmVmLnN0YXJ0O1xuXHRcdHZhciBuYW1lID0gcmVmLm5hbWU7XG5cblx0XHQvLyBPdmVyd3JpdGUgZXF1YWxzIHNpZ24gaWYgdmFsdWUgaXMgcHJlc2VudC5cblx0XHR2YXIgZW5kID0gdGhpcy52YWx1ZSA/IHRoaXMudmFsdWUuc3RhcnQgOiB0aGlzLm5hbWUuZW5kO1xuXG5cdFx0Y29kZS5vdmVyd3JpdGUoc3RhcnQsIGVuZCwgKChmb3JtYXRLZXkobmFtZSkpICsgXCI6IFwiICsgKGZvcm1hdFZhbCh0aGlzLnZhbHVlKSkpKTtcblxuXHRcdE5vZGUkJDEucHJvdG90eXBlLnRyYW5zcGlsZS5jYWxsKHRoaXMsIGNvZGUsIHRyYW5zZm9ybXMpO1xuXHR9O1xuXG5cdHJldHVybiBKU1hBdHRyaWJ1dGU7XG59KE5vZGUpKTtcblxuZnVuY3Rpb24gY29udGFpbnNOZXdMaW5lKG5vZGUpIHtcblx0cmV0dXJuIChcblx0XHRub2RlLnR5cGUgPT09ICdKU1hUZXh0JyAmJiAhL1xcUy8udGVzdChub2RlLnZhbHVlKSAmJiAvXFxuLy50ZXN0KG5vZGUudmFsdWUpXG5cdCk7XG59XG5cbnZhciBKU1hDbG9zaW5nRWxlbWVudCA9IChmdW5jdGlvbiAoTm9kZSQkMSkge1xuXHRmdW5jdGlvbiBKU1hDbG9zaW5nRWxlbWVudCAoKSB7XG5cdFx0Tm9kZSQkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0aWYgKCBOb2RlJCQxICkgSlNYQ2xvc2luZ0VsZW1lbnQuX19wcm90b19fID0gTm9kZSQkMTtcblx0SlNYQ2xvc2luZ0VsZW1lbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTm9kZSQkMSAmJiBOb2RlJCQxLnByb3RvdHlwZSApO1xuXHRKU1hDbG9zaW5nRWxlbWVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBKU1hDbG9zaW5nRWxlbWVudDtcblxuXHRKU1hDbG9zaW5nRWxlbWVudC5wcm90b3R5cGUudHJhbnNwaWxlID0gZnVuY3Rpb24gdHJhbnNwaWxlIChjb2RlKSB7XG5cdFx0dmFyIHNwYWNlQmVmb3JlUGFyZW4gPSB0cnVlO1xuXG5cdFx0dmFyIGxhc3RDaGlsZCA9IHRoaXMucGFyZW50LmNoaWxkcmVuW3RoaXMucGFyZW50LmNoaWxkcmVuLmxlbmd0aCAtIDFdO1xuXG5cdFx0Ly8gb21pdCBzcGFjZSBiZWZvcmUgY2xvc2luZyBwYXJlbiBpZlxuXHRcdC8vICAgYSkgdGhpcyBpcyBvbiBhIHNlcGFyYXRlIGxpbmUsIG9yXG5cdFx0Ly8gICBiKSB0aGVyZSBhcmUgbm8gY2hpbGRyZW4gYnV0IHRoZXJlIGFyZSBhdHRyaWJ1dGVzXG5cdFx0aWYgKFxuXHRcdFx0KGxhc3RDaGlsZCAmJiBjb250YWluc05ld0xpbmUobGFzdENoaWxkKSkgfHxcblx0XHRcdHRoaXMucGFyZW50Lm9wZW5pbmdFbGVtZW50LmF0dHJpYnV0ZXMubGVuZ3RoXG5cdFx0KSB7XG5cdFx0XHRzcGFjZUJlZm9yZVBhcmVuID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Y29kZS5vdmVyd3JpdGUodGhpcy5zdGFydCwgdGhpcy5lbmQsIHNwYWNlQmVmb3JlUGFyZW4gPyAnICknIDogJyknKTtcblx0fTtcblxuXHRyZXR1cm4gSlNYQ2xvc2luZ0VsZW1lbnQ7XG59KE5vZGUpKTtcblxuZnVuY3Rpb24gY29udGFpbnNOZXdMaW5lJDEobm9kZSkge1xuXHRyZXR1cm4gKFxuXHRcdG5vZGUudHlwZSA9PT0gJ0pTWFRleHQnICYmICEvXFxTLy50ZXN0KG5vZGUudmFsdWUpICYmIC9cXG4vLnRlc3Qobm9kZS52YWx1ZSlcblx0KTtcbn1cblxudmFyIEpTWENsb3NpbmdGcmFnbWVudCA9IChmdW5jdGlvbiAoTm9kZSQkMSkge1xuXHRmdW5jdGlvbiBKU1hDbG9zaW5nRnJhZ21lbnQgKCkge1xuXHRcdE5vZGUkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTm9kZSQkMSApIEpTWENsb3NpbmdGcmFnbWVudC5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRKU1hDbG9zaW5nRnJhZ21lbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTm9kZSQkMSAmJiBOb2RlJCQxLnByb3RvdHlwZSApO1xuXHRKU1hDbG9zaW5nRnJhZ21lbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSlNYQ2xvc2luZ0ZyYWdtZW50O1xuXG5cdEpTWENsb3NpbmdGcmFnbWVudC5wcm90b3R5cGUudHJhbnNwaWxlID0gZnVuY3Rpb24gdHJhbnNwaWxlIChjb2RlKSB7XG5cdFx0dmFyIHNwYWNlQmVmb3JlUGFyZW4gPSB0cnVlO1xuXG5cdFx0dmFyIGxhc3RDaGlsZCA9IHRoaXMucGFyZW50LmNoaWxkcmVuW3RoaXMucGFyZW50LmNoaWxkcmVuLmxlbmd0aCAtIDFdO1xuXG5cdFx0Ly8gb21pdCBzcGFjZSBiZWZvcmUgY2xvc2luZyBwYXJlbiBpZiB0aGlzIGlzIG9uIGEgc2VwYXJhdGUgbGluZVxuXHRcdGlmIChsYXN0Q2hpbGQgJiYgY29udGFpbnNOZXdMaW5lJDEobGFzdENoaWxkKSkge1xuXHRcdFx0c3BhY2VCZWZvcmVQYXJlbiA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdGNvZGUub3ZlcndyaXRlKHRoaXMuc3RhcnQsIHRoaXMuZW5kLCBzcGFjZUJlZm9yZVBhcmVuID8gJyApJyA6ICcpJyk7XG5cdH07XG5cblx0cmV0dXJuIEpTWENsb3NpbmdGcmFnbWVudDtcbn0oTm9kZSkpO1xuXG5mdW5jdGlvbiBub3JtYWxpc2Uoc3RyLCByZW1vdmVUcmFpbGluZ1doaXRlc3BhY2UpIHtcblxuXHRzdHIgPSBzdHIucmVwbGFjZSgvXFx1MDBhMC9nLCAnJm5ic3A7Jyk7XG5cblx0aWYgKHJlbW92ZVRyYWlsaW5nV2hpdGVzcGFjZSAmJiAvXFxuLy50ZXN0KHN0cikpIHtcblx0XHRzdHIgPSBzdHIucmVwbGFjZSgvXFxzKyQvLCAnJyk7XG5cdH1cblxuXHRzdHIgPSBzdHJcblx0XHQucmVwbGFjZSgvXlxcblxccj9cXHMrLywgJycpIC8vIHJlbW92ZSBsZWFkaW5nIG5ld2xpbmUgKyBzcGFjZVxuXHRcdC5yZXBsYWNlKC9cXHMqXFxuXFxyP1xccyovZ20sICcgJyk7IC8vIHJlcGxhY2UgbmV3bGluZXMgd2l0aCBzcGFjZXNcblxuXHQvLyBUT0RPIHByZWZlciBzaW5nbGUgcXVvdGVzP1xuXHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkoc3RyKTtcbn1cblxudmFyIEpTWEVsZW1lbnQgPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gSlNYRWxlbWVudCAoKSB7XG5cdFx0Tm9kZSQkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0aWYgKCBOb2RlJCQxICkgSlNYRWxlbWVudC5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRKU1hFbGVtZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0SlNYRWxlbWVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBKU1hFbGVtZW50O1xuXG5cdEpTWEVsZW1lbnQucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdE5vZGUkJDEucHJvdG90eXBlLnRyYW5zcGlsZS5jYWxsKHRoaXMsIGNvZGUsIHRyYW5zZm9ybXMpO1xuXG5cdFx0dmFyIGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKGNoaWxkKSB7XG5cdFx0XHRpZiAoY2hpbGQudHlwZSAhPT0gJ0pTWFRleHQnKSB7IHJldHVybiB0cnVlOyB9XG5cblx0XHRcdC8vIHJlbW92ZSB3aGl0ZXNwYWNlLW9ubHkgbGl0ZXJhbHMsIHVubGVzcyBvbiBhIHNpbmdsZSBsaW5lXG5cdFx0XHRyZXR1cm4gL1xcUy8udGVzdChjaGlsZC5yYXcpIHx8ICEvXFxuLy50ZXN0KGNoaWxkLnJhdyk7XG5cdFx0fSk7XG5cblx0XHRpZiAoY2hpbGRyZW4ubGVuZ3RoKSB7XG5cdFx0XHR2YXIgYyA9IHRoaXMub3BlbmluZ0VsZW1lbnQuZW5kO1xuXG5cdFx0XHR2YXIgaTtcblx0XHRcdGZvciAoaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0XHR2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcblxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0Y2hpbGQudHlwZSA9PT0gJ0pTWEV4cHJlc3Npb25Db250YWluZXInICYmXG5cdFx0XHRcdFx0Y2hpbGQuZXhwcmVzc2lvbi50eXBlID09PSAnSlNYRW1wdHlFeHByZXNzaW9uJ1xuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHQvLyBlbXB0eSBibG9jayBpcyBhIG5vIG9wXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dmFyIHRhaWwgPVxuXHRcdFx0XHRcdFx0Y29kZS5vcmlnaW5hbFtjXSA9PT0gJ1xcbicgJiYgY2hpbGQudHlwZSAhPT0gJ0pTWFRleHQnID8gJycgOiAnICc7XG5cdFx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KGMsIChcIixcIiArIHRhaWwpKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjaGlsZC50eXBlID09PSAnSlNYVGV4dCcpIHtcblx0XHRcdFx0XHR2YXIgc3RyID0gbm9ybWFsaXNlKGNoaWxkLnZhbHVlLCBpID09PSBjaGlsZHJlbi5sZW5ndGggLSAxKTtcblx0XHRcdFx0XHRjb2RlLm92ZXJ3cml0ZShjaGlsZC5zdGFydCwgY2hpbGQuZW5kLCBzdHIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YyA9IGNoaWxkLmVuZDtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIEpTWEVsZW1lbnQ7XG59KE5vZGUpKTtcblxudmFyIEpTWEV4cHJlc3Npb25Db250YWluZXIgPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gSlNYRXhwcmVzc2lvbkNvbnRhaW5lciAoKSB7XG5cdFx0Tm9kZSQkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0aWYgKCBOb2RlJCQxICkgSlNYRXhwcmVzc2lvbkNvbnRhaW5lci5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRKU1hFeHByZXNzaW9uQ29udGFpbmVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0SlNYRXhwcmVzc2lvbkNvbnRhaW5lci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBKU1hFeHByZXNzaW9uQ29udGFpbmVyO1xuXG5cdEpTWEV4cHJlc3Npb25Db250YWluZXIucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdGNvZGUucmVtb3ZlKHRoaXMuc3RhcnQsIHRoaXMuZXhwcmVzc2lvbi5zdGFydCk7XG5cdFx0Y29kZS5yZW1vdmUodGhpcy5leHByZXNzaW9uLmVuZCwgdGhpcy5lbmQpO1xuXG5cdFx0Tm9kZSQkMS5wcm90b3R5cGUudHJhbnNwaWxlLmNhbGwodGhpcywgY29kZSwgdHJhbnNmb3Jtcyk7XG5cdH07XG5cblx0cmV0dXJuIEpTWEV4cHJlc3Npb25Db250YWluZXI7XG59KE5vZGUpKTtcblxudmFyIEpTWEZyYWdtZW50ID0gKGZ1bmN0aW9uIChKU1hFbGVtZW50JCQxKSB7XG5cdGZ1bmN0aW9uIEpTWEZyYWdtZW50ICgpIHtcblx0XHRKU1hFbGVtZW50JCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1pZiAoIEpTWEVsZW1lbnQkJDEgKSBKU1hGcmFnbWVudC5fX3Byb3RvX18gPSBKU1hFbGVtZW50JCQxO1xuXHRKU1hGcmFnbWVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBKU1hFbGVtZW50JCQxICYmIEpTWEVsZW1lbnQkJDEucHJvdG90eXBlICk7XG5cdEpTWEZyYWdtZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEpTWEZyYWdtZW50O1xuXG5cdFxuXG5cdHJldHVybiBKU1hGcmFnbWVudDtcbn0oSlNYRWxlbWVudCkpO1xuXG52YXIgSlNYT3BlbmluZ0VsZW1lbnQgPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gSlNYT3BlbmluZ0VsZW1lbnQgKCkge1xuXHRcdE5vZGUkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTm9kZSQkMSApIEpTWE9wZW5pbmdFbGVtZW50Ll9fcHJvdG9fXyA9IE5vZGUkJDE7XG5cdEpTWE9wZW5pbmdFbGVtZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0SlNYT3BlbmluZ0VsZW1lbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSlNYT3BlbmluZ0VsZW1lbnQ7XG5cblx0SlNYT3BlbmluZ0VsZW1lbnQucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdHZhciB0aGlzJDEgPSB0aGlzO1xuXG5cdFx0Tm9kZSQkMS5wcm90b3R5cGUudHJhbnNwaWxlLmNhbGwodGhpcywgY29kZSwgdHJhbnNmb3Jtcyk7XG5cblx0XHRjb2RlLm92ZXJ3cml0ZSh0aGlzLnN0YXJ0LCB0aGlzLm5hbWUuc3RhcnQsICgodGhpcy5wcm9ncmFtLmpzeCkgKyBcIiggXCIpKTtcblxuXHRcdHZhciBodG1sID1cblx0XHRcdHRoaXMubmFtZS50eXBlID09PSAnSlNYSWRlbnRpZmllcicgJiZcblx0XHRcdHRoaXMubmFtZS5uYW1lWzBdID09PSB0aGlzLm5hbWUubmFtZVswXS50b0xvd2VyQ2FzZSgpO1xuXHRcdGlmIChodG1sKSB7IGNvZGUucHJlcGVuZFJpZ2h0KHRoaXMubmFtZS5zdGFydCwgXCInXCIpOyB9XG5cblx0XHR2YXIgbGVuID0gdGhpcy5hdHRyaWJ1dGVzLmxlbmd0aDtcblx0XHR2YXIgYyA9IHRoaXMubmFtZS5lbmQ7XG5cblx0XHRpZiAobGVuKSB7XG5cdFx0XHR2YXIgaTtcblxuXHRcdFx0dmFyIGhhc1NwcmVhZCA9IGZhbHNlO1xuXHRcdFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG5cdFx0XHRcdGlmICh0aGlzJDEuYXR0cmlidXRlc1tpXS50eXBlID09PSAnSlNYU3ByZWFkQXR0cmlidXRlJykge1xuXHRcdFx0XHRcdGhhc1NwcmVhZCA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0YyA9IHRoaXMuYXR0cmlidXRlc1swXS5lbmQ7XG5cblx0XHRcdGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuXHRcdFx0XHR2YXIgYXR0ciA9IHRoaXMkMS5hdHRyaWJ1dGVzW2ldO1xuXG5cdFx0XHRcdGlmIChpID4gMCkge1xuXHRcdFx0XHRcdGlmIChhdHRyLnN0YXJ0ID09PSBjKSB7IGNvZGUucHJlcGVuZFJpZ2h0KGMsICcsICcpOyB9XG5cdFx0XHRcdFx0ZWxzZSB7IGNvZGUub3ZlcndyaXRlKGMsIGF0dHIuc3RhcnQsICcsICcpOyB9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoaGFzU3ByZWFkICYmIGF0dHIudHlwZSAhPT0gJ0pTWFNwcmVhZEF0dHJpYnV0ZScpIHtcblx0XHRcdFx0XHR2YXIgbGFzdEF0dHIgPSB0aGlzJDEuYXR0cmlidXRlc1tpIC0gMV07XG5cdFx0XHRcdFx0dmFyIG5leHRBdHRyID0gdGhpcyQxLmF0dHJpYnV0ZXNbaSArIDFdO1xuXG5cdFx0XHRcdFx0aWYgKCFsYXN0QXR0ciB8fCBsYXN0QXR0ci50eXBlID09PSAnSlNYU3ByZWFkQXR0cmlidXRlJykge1xuXHRcdFx0XHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQoYXR0ci5zdGFydCwgJ3sgJyk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCFuZXh0QXR0ciB8fCBuZXh0QXR0ci50eXBlID09PSAnSlNYU3ByZWFkQXR0cmlidXRlJykge1xuXHRcdFx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KGF0dHIuZW5kLCAnIH0nKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjID0gYXR0ci5lbmQ7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBhZnRlcjtcblx0XHRcdHZhciBiZWZvcmU7XG5cdFx0XHRpZiAoaGFzU3ByZWFkKSB7XG5cdFx0XHRcdGlmIChsZW4gPT09IDEpIHtcblx0XHRcdFx0XHRiZWZvcmUgPSBodG1sID8gXCInLFwiIDogJywnO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmICghdGhpcy5wcm9ncmFtLm9wdGlvbnMub2JqZWN0QXNzaWduKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgQ29tcGlsZUVycm9yKFxuXHRcdFx0XHRcdFx0XHRcIk1peGVkIEpTWCBhdHRyaWJ1dGVzIGVuZGluZyBpbiBzcHJlYWQgcmVxdWlyZXMgc3BlY2lmaWVkIG9iamVjdEFzc2lnbiBvcHRpb24gd2l0aCAnT2JqZWN0LmFzc2lnbicgb3IgcG9seWZpbGwgaGVscGVyLlwiLFxuXHRcdFx0XHRcdFx0XHR0aGlzXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRiZWZvcmUgPSBodG1sXG5cdFx0XHRcdFx0XHQ/IChcIicsIFwiICsgKHRoaXMucHJvZ3JhbS5vcHRpb25zLm9iamVjdEFzc2lnbikgKyBcIih7fSxcIilcblx0XHRcdFx0XHRcdDogKFwiLCBcIiArICh0aGlzLnByb2dyYW0ub3B0aW9ucy5vYmplY3RBc3NpZ24pICsgXCIoe30sXCIpO1xuXHRcdFx0XHRcdGFmdGVyID0gJyknO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRiZWZvcmUgPSBodG1sID8gXCInLCB7XCIgOiAnLCB7Jztcblx0XHRcdFx0YWZ0ZXIgPSAnIH0nO1xuXHRcdFx0fVxuXG5cdFx0XHRjb2RlLnByZXBlbmRSaWdodCh0aGlzLm5hbWUuZW5kLCBiZWZvcmUpO1xuXG5cdFx0XHRpZiAoYWZ0ZXIpIHtcblx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHRoaXMuYXR0cmlidXRlc1tsZW4gLSAxXS5lbmQsIGFmdGVyKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHRoaXMubmFtZS5lbmQsIGh0bWwgPyBcIicsIG51bGxcIiA6IFwiLCBudWxsXCIpO1xuXHRcdFx0YyA9IHRoaXMubmFtZS5lbmQ7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuc2VsZkNsb3NpbmcpIHtcblx0XHRcdGNvZGUub3ZlcndyaXRlKGMsIHRoaXMuZW5kLCB0aGlzLmF0dHJpYnV0ZXMubGVuZ3RoID8gXCIpXCIgOiBcIiApXCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb2RlLnJlbW92ZShjLCB0aGlzLmVuZCk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBKU1hPcGVuaW5nRWxlbWVudDtcbn0oTm9kZSkpO1xuXG52YXIgSlNYT3BlbmluZ0ZyYWdtZW50ID0gKGZ1bmN0aW9uIChOb2RlJCQxKSB7XG5cdGZ1bmN0aW9uIEpTWE9wZW5pbmdGcmFnbWVudCAoKSB7XG5cdFx0Tm9kZSQkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0aWYgKCBOb2RlJCQxICkgSlNYT3BlbmluZ0ZyYWdtZW50Ll9fcHJvdG9fXyA9IE5vZGUkJDE7XG5cdEpTWE9wZW5pbmdGcmFnbWVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBOb2RlJCQxICYmIE5vZGUkJDEucHJvdG90eXBlICk7XG5cdEpTWE9wZW5pbmdGcmFnbWVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBKU1hPcGVuaW5nRnJhZ21lbnQ7XG5cblx0SlNYT3BlbmluZ0ZyYWdtZW50LnByb3RvdHlwZS50cmFuc3BpbGUgPSBmdW5jdGlvbiB0cmFuc3BpbGUgKGNvZGUsIHRyYW5zZm9ybXMpIHtcblx0XHRjb2RlLm92ZXJ3cml0ZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCwgKCh0aGlzLnByb2dyYW0uanN4KSArIFwiKCBSZWFjdC5GcmFnbWVudCwgbnVsbFwiKSk7XG5cdH07XG5cblx0cmV0dXJuIEpTWE9wZW5pbmdGcmFnbWVudDtcbn0oTm9kZSkpO1xuXG52YXIgSlNYU3ByZWFkQXR0cmlidXRlID0gKGZ1bmN0aW9uIChOb2RlJCQxKSB7XG5cdGZ1bmN0aW9uIEpTWFNwcmVhZEF0dHJpYnV0ZSAoKSB7XG5cdFx0Tm9kZSQkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0aWYgKCBOb2RlJCQxICkgSlNYU3ByZWFkQXR0cmlidXRlLl9fcHJvdG9fXyA9IE5vZGUkJDE7XG5cdEpTWFNwcmVhZEF0dHJpYnV0ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBOb2RlJCQxICYmIE5vZGUkJDEucHJvdG90eXBlICk7XG5cdEpTWFNwcmVhZEF0dHJpYnV0ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBKU1hTcHJlYWRBdHRyaWJ1dGU7XG5cblx0SlNYU3ByZWFkQXR0cmlidXRlLnByb3RvdHlwZS50cmFuc3BpbGUgPSBmdW5jdGlvbiB0cmFuc3BpbGUgKGNvZGUsIHRyYW5zZm9ybXMpIHtcblx0XHRjb2RlLnJlbW92ZSh0aGlzLnN0YXJ0LCB0aGlzLmFyZ3VtZW50LnN0YXJ0KTtcblx0XHRjb2RlLnJlbW92ZSh0aGlzLmFyZ3VtZW50LmVuZCwgdGhpcy5lbmQpO1xuXG5cdFx0Tm9kZSQkMS5wcm90b3R5cGUudHJhbnNwaWxlLmNhbGwodGhpcywgY29kZSwgdHJhbnNmb3Jtcyk7XG5cdH07XG5cblx0cmV0dXJuIEpTWFNwcmVhZEF0dHJpYnV0ZTtcbn0oTm9kZSkpO1xuXG52YXIgcmVnanNnZW4gPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7XG4vKiFcclxuICogcmVnanNnZW4gMC4zLjBcclxuICogQ29weXJpZ2h0IDIwMTQtMjAxNiBCZW5qYW1pbiBUYW4gPGh0dHBzOi8vZGVtb25lYXV4LmdpdGh1Yi5pby8+XHJcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9naXRodWIuY29tL2RlbW9uZWF1eC9yZWdqc2dlbi9ibG9iL21hc3Rlci9MSUNFTlNFPlxyXG4gKi9cclxuKGZ1bmN0aW9uKCkge1xyXG4gIHZhciBvYmplY3RUeXBlcyA9IHtcclxuICAgICdmdW5jdGlvbic6IHRydWUsXHJcbiAgICAnb2JqZWN0JzogdHJ1ZVxyXG4gIH07XHJcblxyXG4gIC8vIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuXHJcbiAgdmFyIHJvb3QgPSAob2JqZWN0VHlwZXNbdHlwZW9mIHdpbmRvd10gJiYgd2luZG93KSB8fCB0aGlzO1xyXG5cclxuICAvLyBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZXhwb3J0c2AuXHJcbiAgdmFyIGZyZWVFeHBvcnRzID0gb2JqZWN0VHlwZXNbJ29iamVjdCddICYmIGV4cG9ydHM7XHJcblxyXG4gIC8vIERldGVjdCBmcmVlIHZhcmlhYmxlIGBtb2R1bGVgLlxyXG4gIHZhciBmcmVlTW9kdWxlID0gb2JqZWN0VHlwZXNbJ29iamVjdCddICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTtcclxuXHJcbiAgLy8gRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzIG9yIEJyb3dzZXJpZmllZCBjb2RlIGFuZCB1c2UgaXQgYXMgYHJvb3RgLlxyXG4gIHZhciBmcmVlR2xvYmFsID0gZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSAmJiB0eXBlb2YgY29tbW9uanNHbG9iYWwgPT0gJ29iamVjdCcgJiYgY29tbW9uanNHbG9iYWw7XHJcbiAgaWYgKGZyZWVHbG9iYWwgJiYgKGZyZWVHbG9iYWwuZ2xvYmFsID09PSBmcmVlR2xvYmFsIHx8IGZyZWVHbG9iYWwud2luZG93ID09PSBmcmVlR2xvYmFsIHx8IGZyZWVHbG9iYWwuc2VsZiA9PT0gZnJlZUdsb2JhbCkpIHtcclxuICAgIHJvb3QgPSBmcmVlR2xvYmFsO1xyXG4gIH1cclxuXHJcbiAgLy8gVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy5cclxuICB2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xyXG5cclxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgLy8gR2VuZXJhdGVzIHN0cmluZ3MgYmFzZWQgb24gdGhlIGdpdmVuIGNvZGUgcG9pbnRzLlxyXG4gIC8vIEJhc2VkIG9uIGh0dHBzOi8vbXRocy5iZS9mcm9tY29kZXBvaW50IHYwLjIuMCBieSBAbWF0aGlhcy5cclxuICB2YXIgc3RyaW5nRnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZTtcclxuICB2YXIgZmxvb3IgPSBNYXRoLmZsb29yO1xyXG4gIGZ1bmN0aW9uIGZyb21Db2RlUG9pbnQoKSB7XHJcbiAgICB2YXIgTUFYX1NJWkUgPSAweDQwMDA7XHJcbiAgICB2YXIgY29kZVVuaXRzID0gW107XHJcbiAgICB2YXIgaGlnaFN1cnJvZ2F0ZTtcclxuICAgIHZhciBsb3dTdXJyb2dhdGU7XHJcbiAgICB2YXIgaW5kZXggPSAtMTtcclxuICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xyXG4gICAgaWYgKCFsZW5ndGgpIHtcclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgdmFyIHJlc3VsdCA9ICcnO1xyXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgdmFyIGNvZGVQb2ludCA9IE51bWJlcihhcmd1bWVudHNbaW5kZXhdKTtcclxuICAgICAgaWYgKFxyXG4gICAgICAgICFpc0Zpbml0ZShjb2RlUG9pbnQpIHx8IC8vIGBOYU5gLCBgK0luZmluaXR5YCwgb3IgYC1JbmZpbml0eWBcclxuICAgICAgICBjb2RlUG9pbnQgPCAwIHx8IC8vIG5vdCBhIHZhbGlkIFVuaWNvZGUgY29kZSBwb2ludFxyXG4gICAgICAgIGNvZGVQb2ludCA+IDB4MTBGRkZGIHx8IC8vIG5vdCBhIHZhbGlkIFVuaWNvZGUgY29kZSBwb2ludFxyXG4gICAgICAgIGZsb29yKGNvZGVQb2ludCkgIT0gY29kZVBvaW50IC8vIG5vdCBhbiBpbnRlZ2VyXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRocm93IFJhbmdlRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludDogJyArIGNvZGVQb2ludCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNvZGVQb2ludCA8PSAweEZGRkYpIHtcclxuICAgICAgICAvLyBCTVAgY29kZSBwb2ludFxyXG4gICAgICAgIGNvZGVVbml0cy5wdXNoKGNvZGVQb2ludCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gQXN0cmFsIGNvZGUgcG9pbnQ7IHNwbGl0IGluIHN1cnJvZ2F0ZSBoYWx2ZXNcclxuICAgICAgICAvLyBodHRwOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nI3N1cnJvZ2F0ZS1mb3JtdWxhZVxyXG4gICAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwO1xyXG4gICAgICAgIGhpZ2hTdXJyb2dhdGUgPSAoY29kZVBvaW50ID4+IDEwKSArIDB4RDgwMDtcclxuICAgICAgICBsb3dTdXJyb2dhdGUgPSAoY29kZVBvaW50ICUgMHg0MDApICsgMHhEQzAwO1xyXG4gICAgICAgIGNvZGVVbml0cy5wdXNoKGhpZ2hTdXJyb2dhdGUsIGxvd1N1cnJvZ2F0ZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGluZGV4ICsgMSA9PSBsZW5ndGggfHwgY29kZVVuaXRzLmxlbmd0aCA+IE1BWF9TSVpFKSB7XHJcbiAgICAgICAgcmVzdWx0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZS5hcHBseShudWxsLCBjb2RlVW5pdHMpO1xyXG4gICAgICAgIGNvZGVVbml0cy5sZW5ndGggPSAwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gIC8vIEVuc3VyZXMgdGhhdCBub2RlcyBoYXZlIHRoZSBjb3JyZWN0IHR5cGVzLlxyXG4gIHZhciBhc3NlcnRUeXBlUmVnZXhNYXAgPSB7fTtcclxuICBmdW5jdGlvbiBhc3NlcnRUeXBlKHR5cGUsIGV4cGVjdGVkKSB7XHJcbiAgICBpZiAoZXhwZWN0ZWQuaW5kZXhPZignfCcpID09IC0xKSB7XHJcbiAgICAgIGlmICh0eXBlID09IGV4cGVjdGVkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aHJvdyBFcnJvcignSW52YWxpZCBub2RlIHR5cGU6ICcgKyB0eXBlICsgJzsgZXhwZWN0ZWQgdHlwZTogJyArIGV4cGVjdGVkKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBlY3RlZCA9IGhhc093blByb3BlcnR5LmNhbGwoYXNzZXJ0VHlwZVJlZ2V4TWFwLCBleHBlY3RlZClcclxuICAgICAgPyBhc3NlcnRUeXBlUmVnZXhNYXBbZXhwZWN0ZWRdXHJcbiAgICAgIDogKGFzc2VydFR5cGVSZWdleE1hcFtleHBlY3RlZF0gPSBSZWdFeHAoJ14oPzonICsgZXhwZWN0ZWQgKyAnKSQnKSk7XHJcblxyXG4gICAgaWYgKGV4cGVjdGVkLnRlc3QodHlwZSkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRocm93IEVycm9yKCdJbnZhbGlkIG5vZGUgdHlwZTogJyArIHR5cGUgKyAnOyBleHBlY3RlZCB0eXBlczogJyArIGV4cGVjdGVkKTtcclxuICB9XHJcblxyXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuICAvLyBHZW5lcmF0ZXMgYSByZWd1bGFyIGV4cHJlc3Npb24gc3RyaW5nIGJhc2VkIG9uIGFuIEFTVC5cclxuICBmdW5jdGlvbiBnZW5lcmF0ZShub2RlKSB7XHJcbiAgICB2YXIgdHlwZSA9IG5vZGUudHlwZTtcclxuXHJcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChnZW5lcmF0b3JzLCB0eXBlKSkge1xyXG4gICAgICByZXR1cm4gZ2VuZXJhdG9yc1t0eXBlXShub2RlKTtcclxuICAgIH1cclxuXHJcbiAgICB0aHJvdyBFcnJvcignSW52YWxpZCBub2RlIHR5cGU6ICcgKyB0eXBlKTtcclxuICB9XHJcblxyXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuICBmdW5jdGlvbiBnZW5lcmF0ZUFsdGVybmF0aXZlKG5vZGUpIHtcclxuICAgIGFzc2VydFR5cGUobm9kZS50eXBlLCAnYWx0ZXJuYXRpdmUnKTtcclxuXHJcbiAgICB2YXIgdGVybXMgPSBub2RlLmJvZHksXHJcbiAgICAgICAgaSA9IC0xLFxyXG4gICAgICAgIGxlbmd0aCA9IHRlcm1zLmxlbmd0aCxcclxuICAgICAgICByZXN1bHQgPSAnJztcclxuXHJcbiAgICB3aGlsZSAoKytpIDwgbGVuZ3RoKSB7XHJcbiAgICAgIHJlc3VsdCArPSBnZW5lcmF0ZVRlcm0odGVybXNbaV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZW5lcmF0ZUFuY2hvcihub2RlKSB7XHJcbiAgICBhc3NlcnRUeXBlKG5vZGUudHlwZSwgJ2FuY2hvcicpO1xyXG5cclxuICAgIHN3aXRjaCAobm9kZS5raW5kKSB7XHJcbiAgICAgIGNhc2UgJ3N0YXJ0JzpcclxuICAgICAgICByZXR1cm4gJ14nO1xyXG4gICAgICBjYXNlICdlbmQnOlxyXG4gICAgICAgIHJldHVybiAnJCc7XHJcbiAgICAgIGNhc2UgJ2JvdW5kYXJ5JzpcclxuICAgICAgICByZXR1cm4gJ1xcXFxiJztcclxuICAgICAgY2FzZSAnbm90LWJvdW5kYXJ5JzpcclxuICAgICAgICByZXR1cm4gJ1xcXFxCJztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0aHJvdyBFcnJvcignSW52YWxpZCBhc3NlcnRpb24nKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdlbmVyYXRlQXRvbShub2RlKSB7XHJcbiAgICBhc3NlcnRUeXBlKG5vZGUudHlwZSwgJ2FuY2hvcnxjaGFyYWN0ZXJDbGFzc3xjaGFyYWN0ZXJDbGFzc0VzY2FwZXxkb3R8Z3JvdXB8cmVmZXJlbmNlfHZhbHVlJyk7XHJcblxyXG4gICAgcmV0dXJuIGdlbmVyYXRlKG5vZGUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2VuZXJhdGVDaGFyYWN0ZXJDbGFzcyhub2RlKSB7XHJcbiAgICBhc3NlcnRUeXBlKG5vZGUudHlwZSwgJ2NoYXJhY3RlckNsYXNzJyk7XHJcblxyXG4gICAgdmFyIGNsYXNzUmFuZ2VzID0gbm9kZS5ib2R5LFxyXG4gICAgICAgIGkgPSAtMSxcclxuICAgICAgICBsZW5ndGggPSBjbGFzc1Jhbmdlcy5sZW5ndGgsXHJcbiAgICAgICAgcmVzdWx0ID0gJyc7XHJcblxyXG4gICAgaWYgKG5vZGUubmVnYXRpdmUpIHtcclxuICAgICAgcmVzdWx0ICs9ICdeJztcclxuICAgIH1cclxuXHJcbiAgICB3aGlsZSAoKytpIDwgbGVuZ3RoKSB7XHJcbiAgICAgIHJlc3VsdCArPSBnZW5lcmF0ZUNsYXNzQXRvbShjbGFzc1Jhbmdlc1tpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICdbJyArIHJlc3VsdCArICddJztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdlbmVyYXRlQ2hhcmFjdGVyQ2xhc3NFc2NhcGUobm9kZSkge1xyXG4gICAgYXNzZXJ0VHlwZShub2RlLnR5cGUsICdjaGFyYWN0ZXJDbGFzc0VzY2FwZScpO1xyXG5cclxuICAgIHJldHVybiAnXFxcXCcgKyBub2RlLnZhbHVlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2VuZXJhdGVVbmljb2RlUHJvcGVydHlFc2NhcGUobm9kZSkge1xyXG4gICAgYXNzZXJ0VHlwZShub2RlLnR5cGUsICd1bmljb2RlUHJvcGVydHlFc2NhcGUnKTtcclxuXHJcbiAgICByZXR1cm4gJ1xcXFwnICsgKG5vZGUubmVnYXRpdmUgPyAnUCcgOiAncCcpICsgJ3snICsgbm9kZS52YWx1ZSArICd9JztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdlbmVyYXRlQ2hhcmFjdGVyQ2xhc3NSYW5nZShub2RlKSB7XHJcbiAgICBhc3NlcnRUeXBlKG5vZGUudHlwZSwgJ2NoYXJhY3RlckNsYXNzUmFuZ2UnKTtcclxuXHJcbiAgICB2YXIgbWluID0gbm9kZS5taW4sXHJcbiAgICAgICAgbWF4ID0gbm9kZS5tYXg7XHJcblxyXG4gICAgaWYgKG1pbi50eXBlID09ICdjaGFyYWN0ZXJDbGFzc1JhbmdlJyB8fCBtYXgudHlwZSA9PSAnY2hhcmFjdGVyQ2xhc3NSYW5nZScpIHtcclxuICAgICAgdGhyb3cgRXJyb3IoJ0ludmFsaWQgY2hhcmFjdGVyIGNsYXNzIHJhbmdlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGdlbmVyYXRlQ2xhc3NBdG9tKG1pbikgKyAnLScgKyBnZW5lcmF0ZUNsYXNzQXRvbShtYXgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2VuZXJhdGVDbGFzc0F0b20obm9kZSkge1xyXG4gICAgYXNzZXJ0VHlwZShub2RlLnR5cGUsICdhbmNob3J8Y2hhcmFjdGVyQ2xhc3NFc2NhcGV8Y2hhcmFjdGVyQ2xhc3NSYW5nZXxkb3R8dmFsdWUnKTtcclxuXHJcbiAgICByZXR1cm4gZ2VuZXJhdGUobm9kZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZW5lcmF0ZURpc2p1bmN0aW9uKG5vZGUpIHtcclxuICAgIGFzc2VydFR5cGUobm9kZS50eXBlLCAnZGlzanVuY3Rpb24nKTtcclxuXHJcbiAgICB2YXIgYm9keSA9IG5vZGUuYm9keSxcclxuICAgICAgICBpID0gLTEsXHJcbiAgICAgICAgbGVuZ3RoID0gYm9keS5sZW5ndGgsXHJcbiAgICAgICAgcmVzdWx0ID0gJyc7XHJcblxyXG4gICAgd2hpbGUgKCsraSA8IGxlbmd0aCkge1xyXG4gICAgICBpZiAoaSAhPSAwKSB7XHJcbiAgICAgICAgcmVzdWx0ICs9ICd8JztcclxuICAgICAgfVxyXG4gICAgICByZXN1bHQgKz0gZ2VuZXJhdGUoYm9keVtpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdlbmVyYXRlRG90KG5vZGUpIHtcclxuICAgIGFzc2VydFR5cGUobm9kZS50eXBlLCAnZG90Jyk7XHJcblxyXG4gICAgcmV0dXJuICcuJztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdlbmVyYXRlR3JvdXAobm9kZSkge1xyXG4gICAgYXNzZXJ0VHlwZShub2RlLnR5cGUsICdncm91cCcpO1xyXG5cclxuICAgIHZhciByZXN1bHQgPSAnJztcclxuXHJcbiAgICBzd2l0Y2ggKG5vZGUuYmVoYXZpb3IpIHtcclxuICAgICAgY2FzZSAnbm9ybWFsJzpcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnaWdub3JlJzpcclxuICAgICAgICByZXN1bHQgKz0gJz86JztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbG9va2FoZWFkJzpcclxuICAgICAgICByZXN1bHQgKz0gJz89JztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbmVnYXRpdmVMb29rYWhlYWQnOlxyXG4gICAgICAgIHJlc3VsdCArPSAnPyEnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRocm93IEVycm9yKCdJbnZhbGlkIGJlaGF2aW91cjogJyArIG5vZGUuYmVoYXZpb3VyKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgYm9keSA9IG5vZGUuYm9keSxcclxuICAgICAgICBpID0gLTEsXHJcbiAgICAgICAgbGVuZ3RoID0gYm9keS5sZW5ndGg7XHJcblxyXG4gICAgd2hpbGUgKCsraSA8IGxlbmd0aCkge1xyXG4gICAgICByZXN1bHQgKz0gZ2VuZXJhdGUoYm9keVtpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICcoJyArIHJlc3VsdCArICcpJztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdlbmVyYXRlUXVhbnRpZmllcihub2RlKSB7XHJcbiAgICBhc3NlcnRUeXBlKG5vZGUudHlwZSwgJ3F1YW50aWZpZXInKTtcclxuXHJcbiAgICB2YXIgcXVhbnRpZmllciA9ICcnLFxyXG4gICAgICAgIG1pbiA9IG5vZGUubWluLFxyXG4gICAgICAgIG1heCA9IG5vZGUubWF4O1xyXG5cclxuICAgIGlmIChtYXggPT0gbnVsbCkge1xyXG4gICAgICBpZiAobWluID09IDApIHtcclxuICAgICAgICBxdWFudGlmaWVyID0gJyonO1xyXG4gICAgICB9IGVsc2UgaWYgKG1pbiA9PSAxKSB7XHJcbiAgICAgICAgcXVhbnRpZmllciA9ICcrJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBxdWFudGlmaWVyID0gJ3snICsgbWluICsgJyx9JztcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChtaW4gPT0gbWF4KSB7XHJcbiAgICAgIHF1YW50aWZpZXIgPSAneycgKyBtaW4gKyAnfSc7XHJcbiAgICB9IGVsc2UgaWYgKG1pbiA9PSAwICYmIG1heCA9PSAxKSB7XHJcbiAgICAgIHF1YW50aWZpZXIgPSAnPyc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBxdWFudGlmaWVyID0gJ3snICsgbWluICsgJywnICsgbWF4ICsgJ30nO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghbm9kZS5ncmVlZHkpIHtcclxuICAgICAgcXVhbnRpZmllciArPSAnPyc7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGdlbmVyYXRlQXRvbShub2RlLmJvZHlbMF0pICsgcXVhbnRpZmllcjtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdlbmVyYXRlUmVmZXJlbmNlKG5vZGUpIHtcclxuICAgIGFzc2VydFR5cGUobm9kZS50eXBlLCAncmVmZXJlbmNlJyk7XHJcblxyXG4gICAgcmV0dXJuICdcXFxcJyArIG5vZGUubWF0Y2hJbmRleDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdlbmVyYXRlVGVybShub2RlKSB7XHJcbiAgICBhc3NlcnRUeXBlKG5vZGUudHlwZSwgJ2FuY2hvcnxjaGFyYWN0ZXJDbGFzc3xjaGFyYWN0ZXJDbGFzc0VzY2FwZXxlbXB0eXxncm91cHxxdWFudGlmaWVyfHJlZmVyZW5jZXx1bmljb2RlUHJvcGVydHlFc2NhcGV8dmFsdWUnKTtcclxuXHJcbiAgICByZXR1cm4gZ2VuZXJhdGUobm9kZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZW5lcmF0ZVZhbHVlKG5vZGUpIHtcclxuICAgIGFzc2VydFR5cGUobm9kZS50eXBlLCAndmFsdWUnKTtcclxuXHJcbiAgICB2YXIga2luZCA9IG5vZGUua2luZCxcclxuICAgICAgICBjb2RlUG9pbnQgPSBub2RlLmNvZGVQb2ludDtcclxuXHJcbiAgICBzd2l0Y2ggKGtpbmQpIHtcclxuICAgICAgY2FzZSAnY29udHJvbExldHRlcic6XHJcbiAgICAgICAgcmV0dXJuICdcXFxcYycgKyBmcm9tQ29kZVBvaW50KGNvZGVQb2ludCArIDY0KTtcclxuICAgICAgY2FzZSAnaGV4YWRlY2ltYWxFc2NhcGUnOlxyXG4gICAgICAgIHJldHVybiAnXFxcXHgnICsgKCcwMCcgKyBjb2RlUG9pbnQudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkpLnNsaWNlKC0yKTtcclxuICAgICAgY2FzZSAnaWRlbnRpZmllcic6XHJcbiAgICAgICAgcmV0dXJuICdcXFxcJyArIGZyb21Db2RlUG9pbnQoY29kZVBvaW50KTtcclxuICAgICAgY2FzZSAnbnVsbCc6XHJcbiAgICAgICAgcmV0dXJuICdcXFxcJyArIGNvZGVQb2ludDtcclxuICAgICAgY2FzZSAnb2N0YWwnOlxyXG4gICAgICAgIHJldHVybiAnXFxcXCcgKyBjb2RlUG9pbnQudG9TdHJpbmcoOCk7XHJcbiAgICAgIGNhc2UgJ3NpbmdsZUVzY2FwZSc6XHJcbiAgICAgICAgc3dpdGNoIChjb2RlUG9pbnQpIHtcclxuICAgICAgICAgIGNhc2UgMHgwMDA4OlxyXG4gICAgICAgICAgICByZXR1cm4gJ1xcXFxiJztcclxuICAgICAgICAgIGNhc2UgMHgwMDA5OlxyXG4gICAgICAgICAgICByZXR1cm4gJ1xcXFx0JztcclxuICAgICAgICAgIGNhc2UgMHgwMDBBOlxyXG4gICAgICAgICAgICByZXR1cm4gJ1xcXFxuJztcclxuICAgICAgICAgIGNhc2UgMHgwMDBCOlxyXG4gICAgICAgICAgICByZXR1cm4gJ1xcXFx2JztcclxuICAgICAgICAgIGNhc2UgMHgwMDBDOlxyXG4gICAgICAgICAgICByZXR1cm4gJ1xcXFxmJztcclxuICAgICAgICAgIGNhc2UgMHgwMDBEOlxyXG4gICAgICAgICAgICByZXR1cm4gJ1xcXFxyJztcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdJbnZhbGlkIGNvZGVwb2ludDogJyArIGNvZGVQb2ludCk7XHJcbiAgICAgICAgfVxyXG4gICAgICBjYXNlICdzeW1ib2wnOlxyXG4gICAgICAgIHJldHVybiBmcm9tQ29kZVBvaW50KGNvZGVQb2ludCk7XHJcbiAgICAgIGNhc2UgJ3VuaWNvZGVFc2NhcGUnOlxyXG4gICAgICAgIHJldHVybiAnXFxcXHUnICsgKCcwMDAwJyArIGNvZGVQb2ludC50b1N0cmluZygxNikudG9VcHBlckNhc2UoKSkuc2xpY2UoLTQpO1xyXG4gICAgICBjYXNlICd1bmljb2RlQ29kZVBvaW50RXNjYXBlJzpcclxuICAgICAgICByZXR1cm4gJ1xcXFx1eycgKyBjb2RlUG9pbnQudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkgKyAnfSc7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhyb3cgRXJyb3IoJ1Vuc3VwcG9ydGVkIG5vZGUga2luZDogJyArIGtpbmQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gIC8vIFVzZWQgdG8gZ2VuZXJhdGUgc3RyaW5ncyBmb3IgZWFjaCBub2RlIHR5cGUuXHJcbiAgdmFyIGdlbmVyYXRvcnMgPSB7XHJcbiAgICAnYWx0ZXJuYXRpdmUnOiBnZW5lcmF0ZUFsdGVybmF0aXZlLFxyXG4gICAgJ2FuY2hvcic6IGdlbmVyYXRlQW5jaG9yLFxyXG4gICAgJ2NoYXJhY3RlckNsYXNzJzogZ2VuZXJhdGVDaGFyYWN0ZXJDbGFzcyxcclxuICAgICdjaGFyYWN0ZXJDbGFzc0VzY2FwZSc6IGdlbmVyYXRlQ2hhcmFjdGVyQ2xhc3NFc2NhcGUsXHJcbiAgICAnY2hhcmFjdGVyQ2xhc3NSYW5nZSc6IGdlbmVyYXRlQ2hhcmFjdGVyQ2xhc3NSYW5nZSxcclxuICAgICd1bmljb2RlUHJvcGVydHlFc2NhcGUnOiBnZW5lcmF0ZVVuaWNvZGVQcm9wZXJ0eUVzY2FwZSxcclxuICAgICdkaXNqdW5jdGlvbic6IGdlbmVyYXRlRGlzanVuY3Rpb24sXHJcbiAgICAnZG90JzogZ2VuZXJhdGVEb3QsXHJcbiAgICAnZ3JvdXAnOiBnZW5lcmF0ZUdyb3VwLFxyXG4gICAgJ3F1YW50aWZpZXInOiBnZW5lcmF0ZVF1YW50aWZpZXIsXHJcbiAgICAncmVmZXJlbmNlJzogZ2VuZXJhdGVSZWZlcmVuY2UsXHJcbiAgICAndmFsdWUnOiBnZW5lcmF0ZVZhbHVlXHJcbiAgfTtcclxuXHJcbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gIC8vIEV4cG9ydCByZWdqc2dlbi5cclxuICAvLyBTb21lIEFNRCBidWlsZCBvcHRpbWl6ZXJzLCBsaWtlIHIuanMsIGNoZWNrIGZvciBjb25kaXRpb24gcGF0dGVybnMgbGlrZSB0aGUgZm9sbG93aW5nOlxyXG4gIGlmICh0eXBlb2YgdW5kZWZpbmVkID09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHVuZGVmaW5lZC5hbWQgPT0gJ29iamVjdCcgJiYgdW5kZWZpbmVkLmFtZCkge1xyXG4gICAgLy8gRGVmaW5lIGFzIGFuIGFub255bW91cyBtb2R1bGUgc28gaXQgY2FuIGJlIGFsaWFzZWQgdGhyb3VnaCBwYXRoIG1hcHBpbmcuXHJcbiAgICB1bmRlZmluZWQoZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgJ2dlbmVyYXRlJzogZ2VuZXJhdGVcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvLyBDaGVjayBmb3IgYGV4cG9ydHNgIGFmdGVyIGBkZWZpbmVgIGluIGNhc2UgYSBidWlsZCBvcHRpbWl6ZXIgYWRkcyBhbiBgZXhwb3J0c2Agb2JqZWN0LlxyXG4gIGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUpIHtcclxuICAgIC8vIEV4cG9ydCBmb3IgQ29tbW9uSlMgc3VwcG9ydC5cclxuICAgIGZyZWVFeHBvcnRzLmdlbmVyYXRlID0gZ2VuZXJhdGU7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgLy8gRXhwb3J0IHRvIHRoZSBnbG9iYWwgb2JqZWN0LlxyXG4gICAgcm9vdC5yZWdqc2dlbiA9IHtcclxuICAgICAgJ2dlbmVyYXRlJzogZ2VuZXJhdGVcclxuICAgIH07XHJcbiAgfVxyXG59LmNhbGwoY29tbW9uanNHbG9iYWwpKTtcbn0pO1xuXG52YXIgcGFyc2VyID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSkge1xuLy8gcmVnanNwYXJzZXJcbi8vXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vXG4vLyBTZWUgRUNNQS0yNjIgU3RhbmRhcmQ6IDE1LjEwLjFcbi8vXG4vLyBOT1RFOiBUaGUgRUNNQS0yNjIgc3RhbmRhcmQgdXNlcyB0aGUgdGVybSBcIkFzc2VydGlvblwiIGZvciAvXi8uIEhlcmUgdGhlXG4vLyAgIHRlcm0gXCJBbmNob3JcIiBpcyB1c2VkLlxuLy9cbi8vIFBhdHRlcm4gOjpcbi8vICAgICAgRGlzanVuY3Rpb25cbi8vXG4vLyBEaXNqdW5jdGlvbiA6OlxuLy8gICAgICBBbHRlcm5hdGl2ZVxuLy8gICAgICBBbHRlcm5hdGl2ZSB8IERpc2p1bmN0aW9uXG4vL1xuLy8gQWx0ZXJuYXRpdmUgOjpcbi8vICAgICAgW2VtcHR5XVxuLy8gICAgICBBbHRlcm5hdGl2ZSBUZXJtXG4vL1xuLy8gVGVybSA6OlxuLy8gICAgICBBbmNob3Jcbi8vICAgICAgQXRvbVxuLy8gICAgICBBdG9tIFF1YW50aWZpZXJcbi8vXG4vLyBBbmNob3IgOjpcbi8vICAgICAgXlxuLy8gICAgICAkXG4vLyAgICAgIFxcIGJcbi8vICAgICAgXFwgQlxuLy8gICAgICAoID8gPSBEaXNqdW5jdGlvbiApXG4vLyAgICAgICggPyAhIERpc2p1bmN0aW9uIClcbi8vXG4vLyBRdWFudGlmaWVyIDo6XG4vLyAgICAgIFF1YW50aWZpZXJQcmVmaXhcbi8vICAgICAgUXVhbnRpZmllclByZWZpeCA/XG4vL1xuLy8gUXVhbnRpZmllclByZWZpeCA6OlxuLy8gICAgICAqXG4vLyAgICAgICtcbi8vICAgICAgP1xuLy8gICAgICB7IERlY2ltYWxEaWdpdHMgfVxuLy8gICAgICB7IERlY2ltYWxEaWdpdHMgLCB9XG4vLyAgICAgIHsgRGVjaW1hbERpZ2l0cyAsIERlY2ltYWxEaWdpdHMgfVxuLy9cbi8vIEF0b20gOjpcbi8vICAgICAgUGF0dGVybkNoYXJhY3RlclxuLy8gICAgICAuXG4vLyAgICAgIFxcIEF0b21Fc2NhcGVcbi8vICAgICAgQ2hhcmFjdGVyQ2xhc3Ncbi8vICAgICAgKCBEaXNqdW5jdGlvbiApXG4vLyAgICAgICggPyA6IERpc2p1bmN0aW9uIClcbi8vXG4vLyBQYXR0ZXJuQ2hhcmFjdGVyIDo6XG4vLyAgICAgIFNvdXJjZUNoYXJhY3RlciBidXQgbm90IGFueSBvZjogXiAkIFxcIC4gKiArID8gKCApIFsgXSB7IH0gfFxuLy9cbi8vIEF0b21Fc2NhcGUgOjpcbi8vICAgICAgRGVjaW1hbEVzY2FwZVxuLy8gICAgICBDaGFyYWN0ZXJFc2NhcGVcbi8vICAgICAgQ2hhcmFjdGVyQ2xhc3NFc2NhcGVcbi8vXG4vLyBDaGFyYWN0ZXJFc2NhcGVbVV0gOjpcbi8vICAgICAgQ29udHJvbEVzY2FwZVxuLy8gICAgICBjIENvbnRyb2xMZXR0ZXJcbi8vICAgICAgSGV4RXNjYXBlU2VxdWVuY2Vcbi8vICAgICAgUmVnRXhwVW5pY29kZUVzY2FwZVNlcXVlbmNlWz9VXSAoRVM2KVxuLy8gICAgICBJZGVudGl0eUVzY2FwZVs/VV1cbi8vXG4vLyBDb250cm9sRXNjYXBlIDo6XG4vLyAgICAgIG9uZSBvZiBmIG4gciB0IHZcbi8vIENvbnRyb2xMZXR0ZXIgOjpcbi8vICAgICAgb25lIG9mXG4vLyAgICAgICAgICBhIGIgYyBkIGUgZiBnIGggaSBqIGsgbCBtIG4gbyBwIHEgciBzIHQgdSB2IHcgeCB5IHpcbi8vICAgICAgICAgIEEgQiBDIEQgRSBGIEcgSCBJIEogSyBMIE0gTiBPIFAgUSBSIFMgVCBVIFYgVyBYIFkgWlxuLy9cbi8vIElkZW50aXR5RXNjYXBlIDo6XG4vLyAgICAgIFNvdXJjZUNoYXJhY3RlciBidXQgbm90IElkZW50aWZpZXJQYXJ0XG4vLyAgICAgIDxaV0o+XG4vLyAgICAgIDxaV05KPlxuLy9cbi8vIERlY2ltYWxFc2NhcGUgOjpcbi8vICAgICAgRGVjaW1hbEludGVnZXJMaXRlcmFsIFtsb29rYWhlYWQg4oiJIERlY2ltYWxEaWdpdF1cbi8vXG4vLyBDaGFyYWN0ZXJDbGFzc0VzY2FwZSA6OlxuLy8gICAgICBvbmUgb2YgZCBEIHMgUyB3IFdcbi8vXG4vLyBDaGFyYWN0ZXJDbGFzcyA6OlxuLy8gICAgICBbIFtsb29rYWhlYWQg4oiJIHtefV0gQ2xhc3NSYW5nZXMgXVxuLy8gICAgICBbIF4gQ2xhc3NSYW5nZXMgXVxuLy9cbi8vIENsYXNzUmFuZ2VzIDo6XG4vLyAgICAgIFtlbXB0eV1cbi8vICAgICAgTm9uZW1wdHlDbGFzc1Jhbmdlc1xuLy9cbi8vIE5vbmVtcHR5Q2xhc3NSYW5nZXMgOjpcbi8vICAgICAgQ2xhc3NBdG9tXG4vLyAgICAgIENsYXNzQXRvbSBOb25lbXB0eUNsYXNzUmFuZ2VzTm9EYXNoXG4vLyAgICAgIENsYXNzQXRvbSAtIENsYXNzQXRvbSBDbGFzc1Jhbmdlc1xuLy9cbi8vIE5vbmVtcHR5Q2xhc3NSYW5nZXNOb0Rhc2ggOjpcbi8vICAgICAgQ2xhc3NBdG9tXG4vLyAgICAgIENsYXNzQXRvbU5vRGFzaCBOb25lbXB0eUNsYXNzUmFuZ2VzTm9EYXNoXG4vLyAgICAgIENsYXNzQXRvbU5vRGFzaCAtIENsYXNzQXRvbSBDbGFzc1Jhbmdlc1xuLy9cbi8vIENsYXNzQXRvbSA6OlxuLy8gICAgICAtXG4vLyAgICAgIENsYXNzQXRvbU5vRGFzaFxuLy9cbi8vIENsYXNzQXRvbU5vRGFzaCA6OlxuLy8gICAgICBTb3VyY2VDaGFyYWN0ZXIgYnV0IG5vdCBvbmUgb2YgXFwgb3IgXSBvciAtXG4vLyAgICAgIFxcIENsYXNzRXNjYXBlXG4vL1xuLy8gQ2xhc3NFc2NhcGUgOjpcbi8vICAgICAgRGVjaW1hbEVzY2FwZVxuLy8gICAgICBiXG4vLyAgICAgIENoYXJhY3RlckVzY2FwZVxuLy8gICAgICBDaGFyYWN0ZXJDbGFzc0VzY2FwZVxuXG4oZnVuY3Rpb24oKSB7XG5cbiAgZnVuY3Rpb24gcGFyc2Uoc3RyLCBmbGFncywgZmVhdHVyZXMpIHtcbiAgICBpZiAoIWZlYXR1cmVzKSB7XG4gICAgICBmZWF0dXJlcyA9IHt9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRSYXcobm9kZSkge1xuICAgICAgbm9kZS5yYXcgPSBzdHIuc3Vic3RyaW5nKG5vZGUucmFuZ2VbMF0sIG5vZGUucmFuZ2VbMV0pO1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlUmF3U3RhcnQobm9kZSwgc3RhcnQpIHtcbiAgICAgIG5vZGUucmFuZ2VbMF0gPSBzdGFydDtcbiAgICAgIHJldHVybiBhZGRSYXcobm9kZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQW5jaG9yKGtpbmQsIHJhd0xlbmd0aCkge1xuICAgICAgcmV0dXJuIGFkZFJhdyh7XG4gICAgICAgIHR5cGU6ICdhbmNob3InLFxuICAgICAgICBraW5kOiBraW5kLFxuICAgICAgICByYW5nZTogW1xuICAgICAgICAgIHBvcyAtIHJhd0xlbmd0aCxcbiAgICAgICAgICBwb3NcbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlVmFsdWUoa2luZCwgY29kZVBvaW50LCBmcm9tLCB0bykge1xuICAgICAgcmV0dXJuIGFkZFJhdyh7XG4gICAgICAgIHR5cGU6ICd2YWx1ZScsXG4gICAgICAgIGtpbmQ6IGtpbmQsXG4gICAgICAgIGNvZGVQb2ludDogY29kZVBvaW50LFxuICAgICAgICByYW5nZTogW2Zyb20sIHRvXVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRXNjYXBlZChraW5kLCBjb2RlUG9pbnQsIHZhbHVlLCBmcm9tT2Zmc2V0KSB7XG4gICAgICBmcm9tT2Zmc2V0ID0gZnJvbU9mZnNldCB8fCAwO1xuICAgICAgcmV0dXJuIGNyZWF0ZVZhbHVlKGtpbmQsIGNvZGVQb2ludCwgcG9zIC0gKHZhbHVlLmxlbmd0aCArIGZyb21PZmZzZXQpLCBwb3MpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNoYXJhY3RlcihtYXRjaGVzKSB7XG4gICAgICB2YXIgX2NoYXIgPSBtYXRjaGVzWzBdO1xuICAgICAgdmFyIGZpcnN0ID0gX2NoYXIuY2hhckNvZGVBdCgwKTtcbiAgICAgIGlmIChoYXNVbmljb2RlRmxhZykge1xuICAgICAgICB2YXIgc2Vjb25kO1xuICAgICAgICBpZiAoX2NoYXIubGVuZ3RoID09PSAxICYmIGZpcnN0ID49IDB4RDgwMCAmJiBmaXJzdCA8PSAweERCRkYpIHtcbiAgICAgICAgICBzZWNvbmQgPSBsb29rYWhlYWQoKS5jaGFyQ29kZUF0KDApO1xuICAgICAgICAgIGlmIChzZWNvbmQgPj0gMHhEQzAwICYmIHNlY29uZCA8PSAweERGRkYpIHtcbiAgICAgICAgICAgIC8vIFVuaWNvZGUgc3Vycm9nYXRlIHBhaXJcbiAgICAgICAgICAgIHBvcysrO1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVZhbHVlKFxuICAgICAgICAgICAgICAgICdzeW1ib2wnLFxuICAgICAgICAgICAgICAgIChmaXJzdCAtIDB4RDgwMCkgKiAweDQwMCArIHNlY29uZCAtIDB4REMwMCArIDB4MTAwMDAsXG4gICAgICAgICAgICAgICAgcG9zIC0gMiwgcG9zKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjcmVhdGVWYWx1ZSgnc3ltYm9sJywgZmlyc3QsIHBvcyAtIDEsIHBvcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRGlzanVuY3Rpb24oYWx0ZXJuYXRpdmVzLCBmcm9tLCB0bykge1xuICAgICAgcmV0dXJuIGFkZFJhdyh7XG4gICAgICAgIHR5cGU6ICdkaXNqdW5jdGlvbicsXG4gICAgICAgIGJvZHk6IGFsdGVybmF0aXZlcyxcbiAgICAgICAgcmFuZ2U6IFtcbiAgICAgICAgICBmcm9tLFxuICAgICAgICAgIHRvXG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZURvdCgpIHtcbiAgICAgIHJldHVybiBhZGRSYXcoe1xuICAgICAgICB0eXBlOiAnZG90JyxcbiAgICAgICAgcmFuZ2U6IFtcbiAgICAgICAgICBwb3MgLSAxLFxuICAgICAgICAgIHBvc1xuICAgICAgICBdXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVDaGFyYWN0ZXJDbGFzc0VzY2FwZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGFkZFJhdyh7XG4gICAgICAgIHR5cGU6ICdjaGFyYWN0ZXJDbGFzc0VzY2FwZScsXG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgcmFuZ2U6IFtcbiAgICAgICAgICBwb3MgLSAyLFxuICAgICAgICAgIHBvc1xuICAgICAgICBdXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVSZWZlcmVuY2UobWF0Y2hJbmRleCkge1xuICAgICAgcmV0dXJuIGFkZFJhdyh7XG4gICAgICAgIHR5cGU6ICdyZWZlcmVuY2UnLFxuICAgICAgICBtYXRjaEluZGV4OiBwYXJzZUludChtYXRjaEluZGV4LCAxMCksXG4gICAgICAgIHJhbmdlOiBbXG4gICAgICAgICAgcG9zIC0gMSAtIG1hdGNoSW5kZXgubGVuZ3RoLFxuICAgICAgICAgIHBvc1xuICAgICAgICBdXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVHcm91cChiZWhhdmlvciwgZGlzanVuY3Rpb24sIGZyb20sIHRvKSB7XG4gICAgICByZXR1cm4gYWRkUmF3KHtcbiAgICAgICAgdHlwZTogJ2dyb3VwJyxcbiAgICAgICAgYmVoYXZpb3I6IGJlaGF2aW9yLFxuICAgICAgICBib2R5OiBkaXNqdW5jdGlvbixcbiAgICAgICAgcmFuZ2U6IFtcbiAgICAgICAgICBmcm9tLFxuICAgICAgICAgIHRvXG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVF1YW50aWZpZXIobWluLCBtYXgsIGZyb20sIHRvKSB7XG4gICAgICBpZiAodG8gPT0gbnVsbCkge1xuICAgICAgICBmcm9tID0gcG9zIC0gMTtcbiAgICAgICAgdG8gPSBwb3M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhZGRSYXcoe1xuICAgICAgICB0eXBlOiAncXVhbnRpZmllcicsXG4gICAgICAgIG1pbjogbWluLFxuICAgICAgICBtYXg6IG1heCxcbiAgICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgICBib2R5OiBudWxsLCAvLyBzZXQgbGF0ZXIgb25cbiAgICAgICAgcmFuZ2U6IFtcbiAgICAgICAgICBmcm9tLFxuICAgICAgICAgIHRvXG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUFsdGVybmF0aXZlKHRlcm1zLCBmcm9tLCB0bykge1xuICAgICAgcmV0dXJuIGFkZFJhdyh7XG4gICAgICAgIHR5cGU6ICdhbHRlcm5hdGl2ZScsXG4gICAgICAgIGJvZHk6IHRlcm1zLFxuICAgICAgICByYW5nZTogW1xuICAgICAgICAgIGZyb20sXG4gICAgICAgICAgdG9cbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2hhcmFjdGVyQ2xhc3MoY2xhc3NSYW5nZXMsIG5lZ2F0aXZlLCBmcm9tLCB0bykge1xuICAgICAgcmV0dXJuIGFkZFJhdyh7XG4gICAgICAgIHR5cGU6ICdjaGFyYWN0ZXJDbGFzcycsXG4gICAgICAgIGJvZHk6IGNsYXNzUmFuZ2VzLFxuICAgICAgICBuZWdhdGl2ZTogbmVnYXRpdmUsXG4gICAgICAgIHJhbmdlOiBbXG4gICAgICAgICAgZnJvbSxcbiAgICAgICAgICB0b1xuICAgICAgICBdXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVDbGFzc1JhbmdlKG1pbiwgbWF4LCBmcm9tLCB0bykge1xuICAgICAgLy8gU2VlIDE1LjEwLjIuMTU6XG4gICAgICBpZiAobWluLmNvZGVQb2ludCA+IG1heC5jb2RlUG9pbnQpIHtcbiAgICAgICAgYmFpbCgnaW52YWxpZCByYW5nZSBpbiBjaGFyYWN0ZXIgY2xhc3MnLCBtaW4ucmF3ICsgJy0nICsgbWF4LnJhdywgZnJvbSwgdG8pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYWRkUmF3KHtcbiAgICAgICAgdHlwZTogJ2NoYXJhY3RlckNsYXNzUmFuZ2UnLFxuICAgICAgICBtaW46IG1pbixcbiAgICAgICAgbWF4OiBtYXgsXG4gICAgICAgIHJhbmdlOiBbXG4gICAgICAgICAgZnJvbSxcbiAgICAgICAgICB0b1xuICAgICAgICBdXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmbGF0dGVuQm9keShib2R5KSB7XG4gICAgICBpZiAoYm9keS50eXBlID09PSAnYWx0ZXJuYXRpdmUnKSB7XG4gICAgICAgIHJldHVybiBib2R5LmJvZHk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW2JvZHldO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluY3IoYW1vdW50KSB7XG4gICAgICBhbW91bnQgPSAoYW1vdW50IHx8IDEpO1xuICAgICAgdmFyIHJlcyA9IHN0ci5zdWJzdHJpbmcocG9zLCBwb3MgKyBhbW91bnQpO1xuICAgICAgcG9zICs9IChhbW91bnQgfHwgMSk7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNraXAodmFsdWUpIHtcbiAgICAgIGlmICghbWF0Y2godmFsdWUpKSB7XG4gICAgICAgIGJhaWwoJ2NoYXJhY3RlcicsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXRjaCh2YWx1ZSkge1xuICAgICAgaWYgKHN0ci5pbmRleE9mKHZhbHVlLCBwb3MpID09PSBwb3MpIHtcbiAgICAgICAgcmV0dXJuIGluY3IodmFsdWUubGVuZ3RoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb29rYWhlYWQoKSB7XG4gICAgICByZXR1cm4gc3RyW3Bvc107XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3VycmVudCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHN0ci5pbmRleE9mKHZhbHVlLCBwb3MpID09PSBwb3M7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbmV4dCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHN0cltwb3MgKyAxXSA9PT0gdmFsdWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWF0Y2hSZWcocmVnRXhwKSB7XG4gICAgICB2YXIgc3ViU3RyID0gc3RyLnN1YnN0cmluZyhwb3MpO1xuICAgICAgdmFyIHJlcyA9IHN1YlN0ci5tYXRjaChyZWdFeHApO1xuICAgICAgaWYgKHJlcykge1xuICAgICAgICByZXMucmFuZ2UgPSBbXTtcbiAgICAgICAgcmVzLnJhbmdlWzBdID0gcG9zO1xuICAgICAgICBpbmNyKHJlc1swXS5sZW5ndGgpO1xuICAgICAgICByZXMucmFuZ2VbMV0gPSBwb3M7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlRGlzanVuY3Rpb24oKSB7XG4gICAgICAvLyBEaXNqdW5jdGlvbiA6OlxuICAgICAgLy8gICAgICBBbHRlcm5hdGl2ZVxuICAgICAgLy8gICAgICBBbHRlcm5hdGl2ZSB8IERpc2p1bmN0aW9uXG4gICAgICB2YXIgcmVzID0gW10sIGZyb20gPSBwb3M7XG4gICAgICByZXMucHVzaChwYXJzZUFsdGVybmF0aXZlKCkpO1xuXG4gICAgICB3aGlsZSAobWF0Y2goJ3wnKSkge1xuICAgICAgICByZXMucHVzaChwYXJzZUFsdGVybmF0aXZlKCkpO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gcmVzWzBdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3JlYXRlRGlzanVuY3Rpb24ocmVzLCBmcm9tLCBwb3MpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlQWx0ZXJuYXRpdmUoKSB7XG4gICAgICB2YXIgcmVzID0gW10sIGZyb20gPSBwb3M7XG4gICAgICB2YXIgdGVybTtcblxuICAgICAgLy8gQWx0ZXJuYXRpdmUgOjpcbiAgICAgIC8vICAgICAgW2VtcHR5XVxuICAgICAgLy8gICAgICBBbHRlcm5hdGl2ZSBUZXJtXG4gICAgICB3aGlsZSAodGVybSA9IHBhcnNlVGVybSgpKSB7XG4gICAgICAgIHJlcy5wdXNoKHRlcm0pO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gcmVzWzBdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3JlYXRlQWx0ZXJuYXRpdmUocmVzLCBmcm9tLCBwb3MpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlVGVybSgpIHtcbiAgICAgIC8vIFRlcm0gOjpcbiAgICAgIC8vICAgICAgQW5jaG9yXG4gICAgICAvLyAgICAgIEF0b21cbiAgICAgIC8vICAgICAgQXRvbSBRdWFudGlmaWVyXG5cbiAgICAgIGlmIChwb3MgPj0gc3RyLmxlbmd0aCB8fCBjdXJyZW50KCd8JykgfHwgY3VycmVudCgnKScpKSB7XG4gICAgICAgIHJldHVybiBudWxsOyAvKiBNZWFuczogVGhlIHRlcm0gaXMgZW1wdHkgKi9cbiAgICAgIH1cblxuICAgICAgdmFyIGFuY2hvciA9IHBhcnNlQW5jaG9yKCk7XG5cbiAgICAgIGlmIChhbmNob3IpIHtcbiAgICAgICAgcmV0dXJuIGFuY2hvcjtcbiAgICAgIH1cblxuICAgICAgdmFyIGF0b20gPSBwYXJzZUF0b20oKTtcbiAgICAgIGlmICghYXRvbSkge1xuICAgICAgICBiYWlsKCdFeHBlY3RlZCBhdG9tJyk7XG4gICAgICB9XG4gICAgICB2YXIgcXVhbnRpZmllciA9IHBhcnNlUXVhbnRpZmllcigpIHx8IGZhbHNlO1xuICAgICAgaWYgKHF1YW50aWZpZXIpIHtcbiAgICAgICAgcXVhbnRpZmllci5ib2R5ID0gZmxhdHRlbkJvZHkoYXRvbSk7XG4gICAgICAgIC8vIFRoZSBxdWFudGlmaWVyIGNvbnRhaW5zIHRoZSBhdG9tLiBUaGVyZWZvcmUsIHRoZSBiZWdpbm5pbmcgb2YgdGhlXG4gICAgICAgIC8vIHF1YW50aWZpZXIgcmFuZ2UgaXMgZ2l2ZW4gYnkgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXRvbS5cbiAgICAgICAgdXBkYXRlUmF3U3RhcnQocXVhbnRpZmllciwgYXRvbS5yYW5nZVswXSk7XG4gICAgICAgIHJldHVybiBxdWFudGlmaWVyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGF0b207XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VHcm91cChtYXRjaEEsIHR5cGVBLCBtYXRjaEIsIHR5cGVCKSB7XG4gICAgICB2YXIgdHlwZSA9IG51bGwsIGZyb20gPSBwb3M7XG5cbiAgICAgIGlmIChtYXRjaChtYXRjaEEpKSB7XG4gICAgICAgIHR5cGUgPSB0eXBlQTtcbiAgICAgIH0gZWxzZSBpZiAobWF0Y2gobWF0Y2hCKSkge1xuICAgICAgICB0eXBlID0gdHlwZUI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBib2R5ID0gcGFyc2VEaXNqdW5jdGlvbigpO1xuICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgIGJhaWwoJ0V4cGVjdGVkIGRpc2p1bmN0aW9uJyk7XG4gICAgICB9XG4gICAgICBza2lwKCcpJyk7XG4gICAgICB2YXIgZ3JvdXAgPSBjcmVhdGVHcm91cCh0eXBlLCBmbGF0dGVuQm9keShib2R5KSwgZnJvbSwgcG9zKTtcblxuICAgICAgaWYgKHR5cGUgPT0gJ25vcm1hbCcpIHtcbiAgICAgICAgLy8gS2VlcCB0cmFjayBvZiB0aGUgbnVtYmVyIG9mIGNsb3NlZCBncm91cHMuIFRoaXMgaXMgcmVxdWlyZWQgZm9yXG4gICAgICAgIC8vIHBhcnNlRGVjaW1hbEVzY2FwZSgpLiBJbiBjYXNlIHRoZSBzdHJpbmcgaXMgcGFyc2VkIGEgc2Vjb25kIHRpbWUgdGhlXG4gICAgICAgIC8vIHZhbHVlIGFscmVhZHkgaG9sZHMgdGhlIHRvdGFsIGNvdW50IGFuZCBubyBpbmNyZW1lbnRhdGlvbiBpcyByZXF1aXJlZC5cbiAgICAgICAgaWYgKGZpcnN0SXRlcmF0aW9uKSB7XG4gICAgICAgICAgY2xvc2VkQ2FwdHVyZUNvdW50ZXIrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGdyb3VwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlQW5jaG9yKCkge1xuICAgICAgLy8gQW5jaG9yIDo6XG4gICAgICAvLyAgICAgIF5cbiAgICAgIC8vICAgICAgJFxuICAgICAgLy8gICAgICBcXCBiXG4gICAgICAvLyAgICAgIFxcIEJcbiAgICAgIC8vICAgICAgKCA/ID0gRGlzanVuY3Rpb24gKVxuICAgICAgLy8gICAgICAoID8gISBEaXNqdW5jdGlvbiApXG4gICAgICBpZiAobWF0Y2goJ14nKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlQW5jaG9yKCdzdGFydCcsIDEgLyogcmF3TGVuZ3RoICovKTtcbiAgICAgIH0gZWxzZSBpZiAobWF0Y2goJyQnKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlQW5jaG9yKCdlbmQnLCAxIC8qIHJhd0xlbmd0aCAqLyk7XG4gICAgICB9IGVsc2UgaWYgKG1hdGNoKCdcXFxcYicpKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVBbmNob3IoJ2JvdW5kYXJ5JywgMiAvKiByYXdMZW5ndGggKi8pO1xuICAgICAgfSBlbHNlIGlmIChtYXRjaCgnXFxcXEInKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlQW5jaG9yKCdub3QtYm91bmRhcnknLCAyIC8qIHJhd0xlbmd0aCAqLyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcGFyc2VHcm91cCgnKD89JywgJ2xvb2thaGVhZCcsICcoPyEnLCAnbmVnYXRpdmVMb29rYWhlYWQnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZVF1YW50aWZpZXIoKSB7XG4gICAgICAvLyBRdWFudGlmaWVyIDo6XG4gICAgICAvLyAgICAgIFF1YW50aWZpZXJQcmVmaXhcbiAgICAgIC8vICAgICAgUXVhbnRpZmllclByZWZpeCA/XG4gICAgICAvL1xuICAgICAgLy8gUXVhbnRpZmllclByZWZpeCA6OlxuICAgICAgLy8gICAgICAqXG4gICAgICAvLyAgICAgICtcbiAgICAgIC8vICAgICAgP1xuICAgICAgLy8gICAgICB7IERlY2ltYWxEaWdpdHMgfVxuICAgICAgLy8gICAgICB7IERlY2ltYWxEaWdpdHMgLCB9XG4gICAgICAvLyAgICAgIHsgRGVjaW1hbERpZ2l0cyAsIERlY2ltYWxEaWdpdHMgfVxuXG4gICAgICB2YXIgcmVzLCBmcm9tID0gcG9zO1xuICAgICAgdmFyIHF1YW50aWZpZXI7XG4gICAgICB2YXIgbWluLCBtYXg7XG5cbiAgICAgIGlmIChtYXRjaCgnKicpKSB7XG4gICAgICAgIHF1YW50aWZpZXIgPSBjcmVhdGVRdWFudGlmaWVyKDApO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAobWF0Y2goJysnKSkge1xuICAgICAgICBxdWFudGlmaWVyID0gY3JlYXRlUXVhbnRpZmllcigxKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG1hdGNoKCc/JykpIHtcbiAgICAgICAgcXVhbnRpZmllciA9IGNyZWF0ZVF1YW50aWZpZXIoMCwgMSk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChyZXMgPSBtYXRjaFJlZygvXlxceyhbMC05XSspXFx9LykpIHtcbiAgICAgICAgbWluID0gcGFyc2VJbnQocmVzWzFdLCAxMCk7XG4gICAgICAgIHF1YW50aWZpZXIgPSBjcmVhdGVRdWFudGlmaWVyKG1pbiwgbWluLCByZXMucmFuZ2VbMF0sIHJlcy5yYW5nZVsxXSk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChyZXMgPSBtYXRjaFJlZygvXlxceyhbMC05XSspLFxcfS8pKSB7XG4gICAgICAgIG1pbiA9IHBhcnNlSW50KHJlc1sxXSwgMTApO1xuICAgICAgICBxdWFudGlmaWVyID0gY3JlYXRlUXVhbnRpZmllcihtaW4sIHVuZGVmaW5lZCwgcmVzLnJhbmdlWzBdLCByZXMucmFuZ2VbMV0pO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAocmVzID0gbWF0Y2hSZWcoL15cXHsoWzAtOV0rKSwoWzAtOV0rKVxcfS8pKSB7XG4gICAgICAgIG1pbiA9IHBhcnNlSW50KHJlc1sxXSwgMTApO1xuICAgICAgICBtYXggPSBwYXJzZUludChyZXNbMl0sIDEwKTtcbiAgICAgICAgaWYgKG1pbiA+IG1heCkge1xuICAgICAgICAgIGJhaWwoJ251bWJlcnMgb3V0IG9mIG9yZGVyIGluIHt9IHF1YW50aWZpZXInLCAnJywgZnJvbSwgcG9zKTtcbiAgICAgICAgfVxuICAgICAgICBxdWFudGlmaWVyID0gY3JlYXRlUXVhbnRpZmllcihtaW4sIG1heCwgcmVzLnJhbmdlWzBdLCByZXMucmFuZ2VbMV0pO1xuICAgICAgfVxuXG4gICAgICBpZiAocXVhbnRpZmllcikge1xuICAgICAgICBpZiAobWF0Y2goJz8nKSkge1xuICAgICAgICAgIHF1YW50aWZpZXIuZ3JlZWR5ID0gZmFsc2U7XG4gICAgICAgICAgcXVhbnRpZmllci5yYW5nZVsxXSArPSAxO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBxdWFudGlmaWVyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlQXRvbSgpIHtcbiAgICAgIC8vIEF0b20gOjpcbiAgICAgIC8vICAgICAgUGF0dGVybkNoYXJhY3RlclxuICAgICAgLy8gICAgICAuXG4gICAgICAvLyAgICAgIFxcIEF0b21Fc2NhcGVcbiAgICAgIC8vICAgICAgQ2hhcmFjdGVyQ2xhc3NcbiAgICAgIC8vICAgICAgKCBEaXNqdW5jdGlvbiApXG4gICAgICAvLyAgICAgICggPyA6IERpc2p1bmN0aW9uIClcblxuICAgICAgdmFyIHJlcztcblxuICAgICAgLy8ganZpZXJlY2s6IGFsbG93ICddJywgJ30nIGhlcmUgYXMgd2VsbCB0byBiZSBjb21wYXRpYmxlIHdpdGggYnJvd3NlcidzXG4gICAgICAvLyAgIGltcGxlbWVudGF0aW9uczogJ10nLm1hdGNoKC9dLyk7XG4gICAgICAvLyBpZiAocmVzID0gbWF0Y2hSZWcoL15bXl4kXFxcXC4qKz8oKVtcXF17fXxdLykpIHtcbiAgICAgIGlmIChyZXMgPSBtYXRjaFJlZygvXlteXiRcXFxcLiorPygpe1t8XS8pKSB7XG4gICAgICAgIC8vICAgICAgUGF0dGVybkNoYXJhY3RlclxuICAgICAgICByZXR1cm4gY3JlYXRlQ2hhcmFjdGVyKHJlcyk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChtYXRjaCgnLicpKSB7XG4gICAgICAgIC8vICAgICAgLlxuICAgICAgICByZXR1cm4gY3JlYXRlRG90KCk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChtYXRjaCgnXFxcXCcpKSB7XG4gICAgICAgIC8vICAgICAgXFwgQXRvbUVzY2FwZVxuICAgICAgICByZXMgPSBwYXJzZUF0b21Fc2NhcGUoKTtcbiAgICAgICAgaWYgKCFyZXMpIHtcbiAgICAgICAgICBiYWlsKCdhdG9tRXNjYXBlJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHJlcyA9IHBhcnNlQ2hhcmFjdGVyQ2xhc3MoKSkge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vICAgICAgKCBEaXNqdW5jdGlvbiApXG4gICAgICAgIC8vICAgICAgKCA/IDogRGlzanVuY3Rpb24gKVxuICAgICAgICByZXR1cm4gcGFyc2VHcm91cCgnKD86JywgJ2lnbm9yZScsICcoJywgJ25vcm1hbCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlVW5pY29kZVN1cnJvZ2F0ZVBhaXJFc2NhcGUoZmlyc3RFc2NhcGUpIHtcbiAgICAgIGlmIChoYXNVbmljb2RlRmxhZykge1xuICAgICAgICB2YXIgZmlyc3QsIHNlY29uZDtcbiAgICAgICAgaWYgKGZpcnN0RXNjYXBlLmtpbmQgPT0gJ3VuaWNvZGVFc2NhcGUnICYmXG4gICAgICAgICAgKGZpcnN0ID0gZmlyc3RFc2NhcGUuY29kZVBvaW50KSA+PSAweEQ4MDAgJiYgZmlyc3QgPD0gMHhEQkZGICYmXG4gICAgICAgICAgY3VycmVudCgnXFxcXCcpICYmIG5leHQoJ3UnKSApIHtcbiAgICAgICAgICB2YXIgcHJldlBvcyA9IHBvcztcbiAgICAgICAgICBwb3MrKztcbiAgICAgICAgICB2YXIgc2Vjb25kRXNjYXBlID0gcGFyc2VDbGFzc0VzY2FwZSgpO1xuICAgICAgICAgIGlmIChzZWNvbmRFc2NhcGUua2luZCA9PSAndW5pY29kZUVzY2FwZScgJiZcbiAgICAgICAgICAgIChzZWNvbmQgPSBzZWNvbmRFc2NhcGUuY29kZVBvaW50KSA+PSAweERDMDAgJiYgc2Vjb25kIDw9IDB4REZGRikge1xuICAgICAgICAgICAgLy8gVW5pY29kZSBzdXJyb2dhdGUgcGFpclxuICAgICAgICAgICAgZmlyc3RFc2NhcGUucmFuZ2VbMV0gPSBzZWNvbmRFc2NhcGUucmFuZ2VbMV07XG4gICAgICAgICAgICBmaXJzdEVzY2FwZS5jb2RlUG9pbnQgPSAoZmlyc3QgLSAweEQ4MDApICogMHg0MDAgKyBzZWNvbmQgLSAweERDMDAgKyAweDEwMDAwO1xuICAgICAgICAgICAgZmlyc3RFc2NhcGUudHlwZSA9ICd2YWx1ZSc7XG4gICAgICAgICAgICBmaXJzdEVzY2FwZS5raW5kID0gJ3VuaWNvZGVDb2RlUG9pbnRFc2NhcGUnO1xuICAgICAgICAgICAgYWRkUmF3KGZpcnN0RXNjYXBlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwb3MgPSBwcmV2UG9zO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZpcnN0RXNjYXBlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlQ2xhc3NFc2NhcGUoKSB7XG4gICAgICByZXR1cm4gcGFyc2VBdG9tRXNjYXBlKHRydWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlQXRvbUVzY2FwZShpbnNpZGVDaGFyYWN0ZXJDbGFzcykge1xuICAgICAgLy8gQXRvbUVzY2FwZSA6OlxuICAgICAgLy8gICAgICBEZWNpbWFsRXNjYXBlXG4gICAgICAvLyAgICAgIENoYXJhY3RlckVzY2FwZVxuICAgICAgLy8gICAgICBDaGFyYWN0ZXJDbGFzc0VzY2FwZVxuXG4gICAgICB2YXIgcmVzLCBmcm9tID0gcG9zO1xuXG4gICAgICByZXMgPSBwYXJzZURlY2ltYWxFc2NhcGUoKTtcbiAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH1cblxuICAgICAgLy8gRm9yIENsYXNzRXNjYXBlXG4gICAgICBpZiAoaW5zaWRlQ2hhcmFjdGVyQ2xhc3MpIHtcbiAgICAgICAgaWYgKG1hdGNoKCdiJykpIHtcbiAgICAgICAgICAvLyAxNS4xMC4yLjE5XG4gICAgICAgICAgLy8gVGhlIHByb2R1Y3Rpb24gQ2xhc3NFc2NhcGUgOjogYiBldmFsdWF0ZXMgYnkgcmV0dXJuaW5nIHRoZVxuICAgICAgICAgIC8vIENoYXJTZXQgY29udGFpbmluZyB0aGUgb25lIGNoYXJhY3RlciA8QlM+IChVbmljb2RlIHZhbHVlIDAwMDgpLlxuICAgICAgICAgIHJldHVybiBjcmVhdGVFc2NhcGVkKCdzaW5nbGVFc2NhcGUnLCAweDAwMDgsICdcXFxcYicpO1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoKCdCJykpIHtcbiAgICAgICAgICBiYWlsKCdcXFxcQiBub3QgcG9zc2libGUgaW5zaWRlIG9mIENoYXJhY3RlckNsYXNzJywgJycsIGZyb20pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJlcyA9IHBhcnNlQ2hhcmFjdGVyRXNjYXBlKCk7XG5cbiAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBwYXJzZURlY2ltYWxFc2NhcGUoKSB7XG4gICAgICAvLyBEZWNpbWFsRXNjYXBlIDo6XG4gICAgICAvLyAgICAgIERlY2ltYWxJbnRlZ2VyTGl0ZXJhbCBbbG9va2FoZWFkIOKIiSBEZWNpbWFsRGlnaXRdXG4gICAgICAvLyAgICAgIENoYXJhY3RlckNsYXNzRXNjYXBlIDo6IG9uZSBvZiBkIEQgcyBTIHcgV1xuXG4gICAgICB2YXIgcmVzLCBtYXRjaDtcblxuICAgICAgaWYgKHJlcyA9IG1hdGNoUmVnKC9eKD8hMClcXGQrLykpIHtcbiAgICAgICAgbWF0Y2ggPSByZXNbMF07XG4gICAgICAgIHZhciByZWZJZHggPSBwYXJzZUludChyZXNbMF0sIDEwKTtcbiAgICAgICAgaWYgKHJlZklkeCA8PSBjbG9zZWRDYXB0dXJlQ291bnRlcikge1xuICAgICAgICAgIC8vIElmIHRoZSBudW1iZXIgaXMgc21hbGxlciB0aGFuIHRoZSBub3JtYWwtZ3JvdXBzIGZvdW5kIHNvXG4gICAgICAgICAgLy8gZmFyLCB0aGVuIGl0IGlzIGEgcmVmZXJlbmNlLi4uXG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZVJlZmVyZW5jZShyZXNbMF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIC4uLiBvdGhlcndpc2UgaXQgbmVlZHMgdG8gYmUgaW50ZXJwcmV0ZWQgYXMgYSBvY3RhbCAoaWYgdGhlXG4gICAgICAgICAgLy8gbnVtYmVyIGlzIGluIGFuIG9jdGFsIGZvcm1hdCkuIElmIGl0IGlzIE5PVCBvY3RhbCBmb3JtYXQsXG4gICAgICAgICAgLy8gdGhlbiB0aGUgc2xhc2ggaXMgaWdub3JlZCBhbmQgdGhlIG51bWJlciBpcyBtYXRjaGVkIGxhdGVyXG4gICAgICAgICAgLy8gYXMgbm9ybWFsIGNoYXJhY3RlcnMuXG5cbiAgICAgICAgICAvLyBSZWNhbGwgdGhlIG5lZ2F0aXZlIGRlY2lzaW9uIHRvIGRlY2lkZSBpZiB0aGUgaW5wdXQgbXVzdCBiZSBwYXJzZWRcbiAgICAgICAgICAvLyBhIHNlY29uZCB0aW1lIHdpdGggdGhlIHRvdGFsIG5vcm1hbC1ncm91cHMuXG4gICAgICAgICAgYmFja3JlZkRlbmllZC5wdXNoKHJlZklkeCk7XG5cbiAgICAgICAgICAvLyBSZXNldCB0aGUgcG9zaXRpb24gYWdhaW4sIGFzIG1heWJlIG9ubHkgcGFydHMgb2YgdGhlIHByZXZpb3VzXG4gICAgICAgICAgLy8gbWF0Y2hlZCBudW1iZXJzIGFyZSBhY3R1YWwgb2N0YWwgbnVtYmVycy4gRS5nLiBpbiAnMDE5JyBvbmx5XG4gICAgICAgICAgLy8gdGhlICcwMScgc2hvdWxkIGJlIG1hdGNoZWQuXG4gICAgICAgICAgaW5jcigtcmVzWzBdLmxlbmd0aCk7XG4gICAgICAgICAgaWYgKHJlcyA9IG1hdGNoUmVnKC9eWzAtN117MSwzfS8pKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlRXNjYXBlZCgnb2N0YWwnLCBwYXJzZUludChyZXNbMF0sIDgpLCByZXNbMF0sIDEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBlbmQgdXAgaGVyZSwgd2UgaGF2ZSBhIGNhc2UgbGlrZSAvXFw5MS8uIFRoZW4gdGhlXG4gICAgICAgICAgICAvLyBmaXJzdCBzbGFzaCBpcyB0byBiZSBpZ25vcmVkIGFuZCB0aGUgOSAmIDEgdG8gYmUgdHJlYXRlZFxuICAgICAgICAgICAgLy8gbGlrZSBvcmRpbmFyeSBjaGFyYWN0ZXJzLiBDcmVhdGUgYSBjaGFyYWN0ZXIgZm9yIHRoZVxuICAgICAgICAgICAgLy8gZmlyc3QgbnVtYmVyIG9ubHkgaGVyZSAtIG90aGVyIG51bWJlci1jaGFyYWN0ZXJzXG4gICAgICAgICAgICAvLyAoaWYgYXZhaWxhYmxlKSB3aWxsIGJlIG1hdGNoZWQgbGF0ZXIuXG4gICAgICAgICAgICByZXMgPSBjcmVhdGVDaGFyYWN0ZXIobWF0Y2hSZWcoL15bODldLykpO1xuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZVJhd1N0YXJ0KHJlcywgcmVzLnJhbmdlWzBdIC0gMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBPbmx5IGFsbG93IG9jdGFsIG51bWJlcnMgaW4gdGhlIGZvbGxvd2luZy4gQWxsIG1hdGNoZWQgbnVtYmVycyBzdGFydFxuICAgICAgLy8gd2l0aCBhIHplcm8gKGlmIHRoZSBkbyBub3QsIHRoZSBwcmV2aW91cyBpZi1icmFuY2ggaXMgZXhlY3V0ZWQpLlxuICAgICAgLy8gSWYgdGhlIG51bWJlciBpcyBub3Qgb2N0YWwgZm9ybWF0IGFuZCBzdGFydHMgd2l0aCB6ZXJvIChlLmcuIGAwOTFgKVxuICAgICAgLy8gdGhlbiBvbmx5IHRoZSB6ZXJvcyBgMGAgaXMgdHJlYXRlZCBoZXJlIGFuZCB0aGUgYDkxYCBhcmUgb3JkaW5hcnlcbiAgICAgIC8vIGNoYXJhY3RlcnMuXG4gICAgICAvLyBFeGFtcGxlOlxuICAgICAgLy8gICAvXFwwOTEvLmV4ZWMoJ1xcMDkxJylbMF0ubGVuZ3RoID09PSAzXG4gICAgICBlbHNlIGlmIChyZXMgPSBtYXRjaFJlZygvXlswLTddezEsM30vKSkge1xuICAgICAgICBtYXRjaCA9IHJlc1swXTtcbiAgICAgICAgaWYgKC9eMHsxLDN9JC8udGVzdChtYXRjaCkpIHtcbiAgICAgICAgICAvLyBJZiB0aGV5IGFyZSBhbGwgemVyb3MsIHRoZW4gb25seSB0YWtlIHRoZSBmaXJzdCBvbmUuXG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUVzY2FwZWQoJ251bGwnLCAweDAwMDAsICcwJywgbWF0Y2gubGVuZ3RoICsgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUVzY2FwZWQoJ29jdGFsJywgcGFyc2VJbnQobWF0Y2gsIDgpLCBtYXRjaCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocmVzID0gbWF0Y2hSZWcoL15bZERzU3dXXS8pKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVDaGFyYWN0ZXJDbGFzc0VzY2FwZShyZXNbMF0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlQ2hhcmFjdGVyRXNjYXBlKCkge1xuICAgICAgLy8gQ2hhcmFjdGVyRXNjYXBlIDo6XG4gICAgICAvLyAgICAgIENvbnRyb2xFc2NhcGVcbiAgICAgIC8vICAgICAgYyBDb250cm9sTGV0dGVyXG4gICAgICAvLyAgICAgIEhleEVzY2FwZVNlcXVlbmNlXG4gICAgICAvLyAgICAgIFVuaWNvZGVFc2NhcGVTZXF1ZW5jZVxuICAgICAgLy8gICAgICBJZGVudGl0eUVzY2FwZVxuXG4gICAgICB2YXIgcmVzO1xuICAgICAgaWYgKHJlcyA9IG1hdGNoUmVnKC9eW2ZucnR2XS8pKSB7XG4gICAgICAgIC8vIENvbnRyb2xFc2NhcGVcbiAgICAgICAgdmFyIGNvZGVQb2ludCA9IDA7XG4gICAgICAgIHN3aXRjaCAocmVzWzBdKSB7XG4gICAgICAgICAgY2FzZSAndCc6IGNvZGVQb2ludCA9IDB4MDA5OyBicmVhaztcbiAgICAgICAgICBjYXNlICduJzogY29kZVBvaW50ID0gMHgwMEE7IGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3YnOiBjb2RlUG9pbnQgPSAweDAwQjsgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZic6IGNvZGVQb2ludCA9IDB4MDBDOyBicmVhaztcbiAgICAgICAgICBjYXNlICdyJzogY29kZVBvaW50ID0gMHgwMEQ7IGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjcmVhdGVFc2NhcGVkKCdzaW5nbGVFc2NhcGUnLCBjb2RlUG9pbnQsICdcXFxcJyArIHJlc1swXSk7XG4gICAgICB9IGVsc2UgaWYgKHJlcyA9IG1hdGNoUmVnKC9eYyhbYS16QS1aXSkvKSkge1xuICAgICAgICAvLyBjIENvbnRyb2xMZXR0ZXJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVzY2FwZWQoJ2NvbnRyb2xMZXR0ZXInLCByZXNbMV0uY2hhckNvZGVBdCgwKSAlIDMyLCByZXNbMV0sIDIpO1xuICAgICAgfSBlbHNlIGlmIChyZXMgPSBtYXRjaFJlZygvXngoWzAtOWEtZkEtRl17Mn0pLykpIHtcbiAgICAgICAgLy8gSGV4RXNjYXBlU2VxdWVuY2VcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVzY2FwZWQoJ2hleGFkZWNpbWFsRXNjYXBlJywgcGFyc2VJbnQocmVzWzFdLCAxNiksIHJlc1sxXSwgMik7XG4gICAgICB9IGVsc2UgaWYgKHJlcyA9IG1hdGNoUmVnKC9edShbMC05YS1mQS1GXXs0fSkvKSkge1xuICAgICAgICAvLyBVbmljb2RlRXNjYXBlU2VxdWVuY2VcbiAgICAgICAgcmV0dXJuIHBhcnNlVW5pY29kZVN1cnJvZ2F0ZVBhaXJFc2NhcGUoXG4gICAgICAgICAgY3JlYXRlRXNjYXBlZCgndW5pY29kZUVzY2FwZScsIHBhcnNlSW50KHJlc1sxXSwgMTYpLCByZXNbMV0sIDIpXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKGhhc1VuaWNvZGVGbGFnICYmIChyZXMgPSBtYXRjaFJlZygvXnVcXHsoWzAtOWEtZkEtRl0rKVxcfS8pKSkge1xuICAgICAgICAvLyBSZWdFeHBVbmljb2RlRXNjYXBlU2VxdWVuY2UgKEVTNiBVbmljb2RlIGNvZGUgcG9pbnQgZXNjYXBlKVxuICAgICAgICByZXR1cm4gY3JlYXRlRXNjYXBlZCgndW5pY29kZUNvZGVQb2ludEVzY2FwZScsIHBhcnNlSW50KHJlc1sxXSwgMTYpLCByZXNbMV0sIDQpO1xuICAgICAgfSBlbHNlIGlmIChmZWF0dXJlcy51bmljb2RlUHJvcGVydHlFc2NhcGUgJiYgaGFzVW5pY29kZUZsYWcgJiYgKHJlcyA9IG1hdGNoUmVnKC9eKFtwUF0pXFx7KFteXFx9XSspXFx9LykpKSB7XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qdmllcmVjay9yZWdqc3BhcnNlci9pc3N1ZXMvNzdcbiAgICAgICAgcmV0dXJuIGFkZFJhdyh7XG4gICAgICAgICAgdHlwZTogJ3VuaWNvZGVQcm9wZXJ0eUVzY2FwZScsXG4gICAgICAgICAgbmVnYXRpdmU6IHJlc1sxXSA9PT0gJ1AnLFxuICAgICAgICAgIHZhbHVlOiByZXNbMl0sXG4gICAgICAgICAgcmFuZ2U6IFtyZXMucmFuZ2VbMF0gLSAxLCByZXMucmFuZ2VbMV1dLFxuICAgICAgICAgIHJhdzogcmVzWzBdXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWRlbnRpdHlFc2NhcGVcbiAgICAgICAgcmV0dXJuIHBhcnNlSWRlbnRpdHlFc2NhcGUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUYWtlbiBmcm9tIHRoZSBFc3ByaW1hIHBhcnNlci5cbiAgICBmdW5jdGlvbiBpc0lkZW50aWZpZXJQYXJ0KGNoKSB7XG4gICAgICAvLyBHZW5lcmF0ZWQgYnkgYHRvb2xzL2dlbmVyYXRlLWlkZW50aWZpZXItcmVnZXguanNgLlxuICAgICAgdmFyIE5vbkFzY2lpSWRlbnRpZmllclBhcnQgPSBuZXcgUmVnRXhwKCdbXFx4QUFcXHhCNVxceEJBXFx4QzAtXFx4RDZcXHhEOC1cXHhGNlxceEY4LVxcdTAyQzFcXHUwMkM2LVxcdTAyRDFcXHUwMkUwLVxcdTAyRTRcXHUwMkVDXFx1MDJFRVxcdTAzMDAtXFx1MDM3NFxcdTAzNzZcXHUwMzc3XFx1MDM3QS1cXHUwMzdEXFx1MDM3RlxcdTAzODZcXHUwMzg4LVxcdTAzOEFcXHUwMzhDXFx1MDM4RS1cXHUwM0ExXFx1MDNBMy1cXHUwM0Y1XFx1MDNGNy1cXHUwNDgxXFx1MDQ4My1cXHUwNDg3XFx1MDQ4QS1cXHUwNTJGXFx1MDUzMS1cXHUwNTU2XFx1MDU1OVxcdTA1NjEtXFx1MDU4N1xcdTA1OTEtXFx1MDVCRFxcdTA1QkZcXHUwNUMxXFx1MDVDMlxcdTA1QzRcXHUwNUM1XFx1MDVDN1xcdTA1RDAtXFx1MDVFQVxcdTA1RjAtXFx1MDVGMlxcdTA2MTAtXFx1MDYxQVxcdTA2MjAtXFx1MDY2OVxcdTA2NkUtXFx1MDZEM1xcdTA2RDUtXFx1MDZEQ1xcdTA2REYtXFx1MDZFOFxcdTA2RUEtXFx1MDZGQ1xcdTA2RkZcXHUwNzEwLVxcdTA3NEFcXHUwNzRELVxcdTA3QjFcXHUwN0MwLVxcdTA3RjVcXHUwN0ZBXFx1MDgwMC1cXHUwODJEXFx1MDg0MC1cXHUwODVCXFx1MDhBMC1cXHUwOEIyXFx1MDhFNC1cXHUwOTYzXFx1MDk2Ni1cXHUwOTZGXFx1MDk3MS1cXHUwOTgzXFx1MDk4NS1cXHUwOThDXFx1MDk4RlxcdTA5OTBcXHUwOTkzLVxcdTA5QThcXHUwOUFBLVxcdTA5QjBcXHUwOUIyXFx1MDlCNi1cXHUwOUI5XFx1MDlCQy1cXHUwOUM0XFx1MDlDN1xcdTA5QzhcXHUwOUNCLVxcdTA5Q0VcXHUwOUQ3XFx1MDlEQ1xcdTA5RERcXHUwOURGLVxcdTA5RTNcXHUwOUU2LVxcdTA5RjFcXHUwQTAxLVxcdTBBMDNcXHUwQTA1LVxcdTBBMEFcXHUwQTBGXFx1MEExMFxcdTBBMTMtXFx1MEEyOFxcdTBBMkEtXFx1MEEzMFxcdTBBMzJcXHUwQTMzXFx1MEEzNVxcdTBBMzZcXHUwQTM4XFx1MEEzOVxcdTBBM0NcXHUwQTNFLVxcdTBBNDJcXHUwQTQ3XFx1MEE0OFxcdTBBNEItXFx1MEE0RFxcdTBBNTFcXHUwQTU5LVxcdTBBNUNcXHUwQTVFXFx1MEE2Ni1cXHUwQTc1XFx1MEE4MS1cXHUwQTgzXFx1MEE4NS1cXHUwQThEXFx1MEE4Ri1cXHUwQTkxXFx1MEE5My1cXHUwQUE4XFx1MEFBQS1cXHUwQUIwXFx1MEFCMlxcdTBBQjNcXHUwQUI1LVxcdTBBQjlcXHUwQUJDLVxcdTBBQzVcXHUwQUM3LVxcdTBBQzlcXHUwQUNCLVxcdTBBQ0RcXHUwQUQwXFx1MEFFMC1cXHUwQUUzXFx1MEFFNi1cXHUwQUVGXFx1MEIwMS1cXHUwQjAzXFx1MEIwNS1cXHUwQjBDXFx1MEIwRlxcdTBCMTBcXHUwQjEzLVxcdTBCMjhcXHUwQjJBLVxcdTBCMzBcXHUwQjMyXFx1MEIzM1xcdTBCMzUtXFx1MEIzOVxcdTBCM0MtXFx1MEI0NFxcdTBCNDdcXHUwQjQ4XFx1MEI0Qi1cXHUwQjREXFx1MEI1NlxcdTBCNTdcXHUwQjVDXFx1MEI1RFxcdTBCNUYtXFx1MEI2M1xcdTBCNjYtXFx1MEI2RlxcdTBCNzFcXHUwQjgyXFx1MEI4M1xcdTBCODUtXFx1MEI4QVxcdTBCOEUtXFx1MEI5MFxcdTBCOTItXFx1MEI5NVxcdTBCOTlcXHUwQjlBXFx1MEI5Q1xcdTBCOUVcXHUwQjlGXFx1MEJBM1xcdTBCQTRcXHUwQkE4LVxcdTBCQUFcXHUwQkFFLVxcdTBCQjlcXHUwQkJFLVxcdTBCQzJcXHUwQkM2LVxcdTBCQzhcXHUwQkNBLVxcdTBCQ0RcXHUwQkQwXFx1MEJEN1xcdTBCRTYtXFx1MEJFRlxcdTBDMDAtXFx1MEMwM1xcdTBDMDUtXFx1MEMwQ1xcdTBDMEUtXFx1MEMxMFxcdTBDMTItXFx1MEMyOFxcdTBDMkEtXFx1MEMzOVxcdTBDM0QtXFx1MEM0NFxcdTBDNDYtXFx1MEM0OFxcdTBDNEEtXFx1MEM0RFxcdTBDNTVcXHUwQzU2XFx1MEM1OFxcdTBDNTlcXHUwQzYwLVxcdTBDNjNcXHUwQzY2LVxcdTBDNkZcXHUwQzgxLVxcdTBDODNcXHUwQzg1LVxcdTBDOENcXHUwQzhFLVxcdTBDOTBcXHUwQzkyLVxcdTBDQThcXHUwQ0FBLVxcdTBDQjNcXHUwQ0I1LVxcdTBDQjlcXHUwQ0JDLVxcdTBDQzRcXHUwQ0M2LVxcdTBDQzhcXHUwQ0NBLVxcdTBDQ0RcXHUwQ0Q1XFx1MENENlxcdTBDREVcXHUwQ0UwLVxcdTBDRTNcXHUwQ0U2LVxcdTBDRUZcXHUwQ0YxXFx1MENGMlxcdTBEMDEtXFx1MEQwM1xcdTBEMDUtXFx1MEQwQ1xcdTBEMEUtXFx1MEQxMFxcdTBEMTItXFx1MEQzQVxcdTBEM0QtXFx1MEQ0NFxcdTBENDYtXFx1MEQ0OFxcdTBENEEtXFx1MEQ0RVxcdTBENTdcXHUwRDYwLVxcdTBENjNcXHUwRDY2LVxcdTBENkZcXHUwRDdBLVxcdTBEN0ZcXHUwRDgyXFx1MEQ4M1xcdTBEODUtXFx1MEQ5NlxcdTBEOUEtXFx1MERCMVxcdTBEQjMtXFx1MERCQlxcdTBEQkRcXHUwREMwLVxcdTBEQzZcXHUwRENBXFx1MERDRi1cXHUwREQ0XFx1MERENlxcdTBERDgtXFx1MERERlxcdTBERTYtXFx1MERFRlxcdTBERjJcXHUwREYzXFx1MEUwMS1cXHUwRTNBXFx1MEU0MC1cXHUwRTRFXFx1MEU1MC1cXHUwRTU5XFx1MEU4MVxcdTBFODJcXHUwRTg0XFx1MEU4N1xcdTBFODhcXHUwRThBXFx1MEU4RFxcdTBFOTQtXFx1MEU5N1xcdTBFOTktXFx1MEU5RlxcdTBFQTEtXFx1MEVBM1xcdTBFQTVcXHUwRUE3XFx1MEVBQVxcdTBFQUJcXHUwRUFELVxcdTBFQjlcXHUwRUJCLVxcdTBFQkRcXHUwRUMwLVxcdTBFQzRcXHUwRUM2XFx1MEVDOC1cXHUwRUNEXFx1MEVEMC1cXHUwRUQ5XFx1MEVEQy1cXHUwRURGXFx1MEYwMFxcdTBGMThcXHUwRjE5XFx1MEYyMC1cXHUwRjI5XFx1MEYzNVxcdTBGMzdcXHUwRjM5XFx1MEYzRS1cXHUwRjQ3XFx1MEY0OS1cXHUwRjZDXFx1MEY3MS1cXHUwRjg0XFx1MEY4Ni1cXHUwRjk3XFx1MEY5OS1cXHUwRkJDXFx1MEZDNlxcdTEwMDAtXFx1MTA0OVxcdTEwNTAtXFx1MTA5RFxcdTEwQTAtXFx1MTBDNVxcdTEwQzdcXHUxMENEXFx1MTBEMC1cXHUxMEZBXFx1MTBGQy1cXHUxMjQ4XFx1MTI0QS1cXHUxMjREXFx1MTI1MC1cXHUxMjU2XFx1MTI1OFxcdTEyNUEtXFx1MTI1RFxcdTEyNjAtXFx1MTI4OFxcdTEyOEEtXFx1MTI4RFxcdTEyOTAtXFx1MTJCMFxcdTEyQjItXFx1MTJCNVxcdTEyQjgtXFx1MTJCRVxcdTEyQzBcXHUxMkMyLVxcdTEyQzVcXHUxMkM4LVxcdTEyRDZcXHUxMkQ4LVxcdTEzMTBcXHUxMzEyLVxcdTEzMTVcXHUxMzE4LVxcdTEzNUFcXHUxMzVELVxcdTEzNUZcXHUxMzgwLVxcdTEzOEZcXHUxM0EwLVxcdTEzRjRcXHUxNDAxLVxcdTE2NkNcXHUxNjZGLVxcdTE2N0ZcXHUxNjgxLVxcdTE2OUFcXHUxNkEwLVxcdTE2RUFcXHUxNkVFLVxcdTE2RjhcXHUxNzAwLVxcdTE3MENcXHUxNzBFLVxcdTE3MTRcXHUxNzIwLVxcdTE3MzRcXHUxNzQwLVxcdTE3NTNcXHUxNzYwLVxcdTE3NkNcXHUxNzZFLVxcdTE3NzBcXHUxNzcyXFx1MTc3M1xcdTE3ODAtXFx1MTdEM1xcdTE3RDdcXHUxN0RDXFx1MTdERFxcdTE3RTAtXFx1MTdFOVxcdTE4MEItXFx1MTgwRFxcdTE4MTAtXFx1MTgxOVxcdTE4MjAtXFx1MTg3N1xcdTE4ODAtXFx1MThBQVxcdTE4QjAtXFx1MThGNVxcdTE5MDAtXFx1MTkxRVxcdTE5MjAtXFx1MTkyQlxcdTE5MzAtXFx1MTkzQlxcdTE5NDYtXFx1MTk2RFxcdTE5NzAtXFx1MTk3NFxcdTE5ODAtXFx1MTlBQlxcdTE5QjAtXFx1MTlDOVxcdTE5RDAtXFx1MTlEOVxcdTFBMDAtXFx1MUExQlxcdTFBMjAtXFx1MUE1RVxcdTFBNjAtXFx1MUE3Q1xcdTFBN0YtXFx1MUE4OVxcdTFBOTAtXFx1MUE5OVxcdTFBQTdcXHUxQUIwLVxcdTFBQkRcXHUxQjAwLVxcdTFCNEJcXHUxQjUwLVxcdTFCNTlcXHUxQjZCLVxcdTFCNzNcXHUxQjgwLVxcdTFCRjNcXHUxQzAwLVxcdTFDMzdcXHUxQzQwLVxcdTFDNDlcXHUxQzRELVxcdTFDN0RcXHUxQ0QwLVxcdTFDRDJcXHUxQ0Q0LVxcdTFDRjZcXHUxQ0Y4XFx1MUNGOVxcdTFEMDAtXFx1MURGNVxcdTFERkMtXFx1MUYxNVxcdTFGMTgtXFx1MUYxRFxcdTFGMjAtXFx1MUY0NVxcdTFGNDgtXFx1MUY0RFxcdTFGNTAtXFx1MUY1N1xcdTFGNTlcXHUxRjVCXFx1MUY1RFxcdTFGNUYtXFx1MUY3RFxcdTFGODAtXFx1MUZCNFxcdTFGQjYtXFx1MUZCQ1xcdTFGQkVcXHUxRkMyLVxcdTFGQzRcXHUxRkM2LVxcdTFGQ0NcXHUxRkQwLVxcdTFGRDNcXHUxRkQ2LVxcdTFGREJcXHUxRkUwLVxcdTFGRUNcXHUxRkYyLVxcdTFGRjRcXHUxRkY2LVxcdTFGRkNcXHUyMDBDXFx1MjAwRFxcdTIwM0ZcXHUyMDQwXFx1MjA1NFxcdTIwNzFcXHUyMDdGXFx1MjA5MC1cXHUyMDlDXFx1MjBEMC1cXHUyMERDXFx1MjBFMVxcdTIwRTUtXFx1MjBGMFxcdTIxMDJcXHUyMTA3XFx1MjEwQS1cXHUyMTEzXFx1MjExNVxcdTIxMTktXFx1MjExRFxcdTIxMjRcXHUyMTI2XFx1MjEyOFxcdTIxMkEtXFx1MjEyRFxcdTIxMkYtXFx1MjEzOVxcdTIxM0MtXFx1MjEzRlxcdTIxNDUtXFx1MjE0OVxcdTIxNEVcXHUyMTYwLVxcdTIxODhcXHUyQzAwLVxcdTJDMkVcXHUyQzMwLVxcdTJDNUVcXHUyQzYwLVxcdTJDRTRcXHUyQ0VCLVxcdTJDRjNcXHUyRDAwLVxcdTJEMjVcXHUyRDI3XFx1MkQyRFxcdTJEMzAtXFx1MkQ2N1xcdTJENkZcXHUyRDdGLVxcdTJEOTZcXHUyREEwLVxcdTJEQTZcXHUyREE4LVxcdTJEQUVcXHUyREIwLVxcdTJEQjZcXHUyREI4LVxcdTJEQkVcXHUyREMwLVxcdTJEQzZcXHUyREM4LVxcdTJEQ0VcXHUyREQwLVxcdTJERDZcXHUyREQ4LVxcdTJEREVcXHUyREUwLVxcdTJERkZcXHUyRTJGXFx1MzAwNS1cXHUzMDA3XFx1MzAyMS1cXHUzMDJGXFx1MzAzMS1cXHUzMDM1XFx1MzAzOC1cXHUzMDNDXFx1MzA0MS1cXHUzMDk2XFx1MzA5OVxcdTMwOUFcXHUzMDlELVxcdTMwOUZcXHUzMEExLVxcdTMwRkFcXHUzMEZDLVxcdTMwRkZcXHUzMTA1LVxcdTMxMkRcXHUzMTMxLVxcdTMxOEVcXHUzMUEwLVxcdTMxQkFcXHUzMUYwLVxcdTMxRkZcXHUzNDAwLVxcdTREQjVcXHU0RTAwLVxcdTlGQ0NcXHVBMDAwLVxcdUE0OENcXHVBNEQwLVxcdUE0RkRcXHVBNTAwLVxcdUE2MENcXHVBNjEwLVxcdUE2MkJcXHVBNjQwLVxcdUE2NkZcXHVBNjc0LVxcdUE2N0RcXHVBNjdGLVxcdUE2OURcXHVBNjlGLVxcdUE2RjFcXHVBNzE3LVxcdUE3MUZcXHVBNzIyLVxcdUE3ODhcXHVBNzhCLVxcdUE3OEVcXHVBNzkwLVxcdUE3QURcXHVBN0IwXFx1QTdCMVxcdUE3RjctXFx1QTgyN1xcdUE4NDAtXFx1QTg3M1xcdUE4ODAtXFx1QThDNFxcdUE4RDAtXFx1QThEOVxcdUE4RTAtXFx1QThGN1xcdUE4RkJcXHVBOTAwLVxcdUE5MkRcXHVBOTMwLVxcdUE5NTNcXHVBOTYwLVxcdUE5N0NcXHVBOTgwLVxcdUE5QzBcXHVBOUNGLVxcdUE5RDlcXHVBOUUwLVxcdUE5RkVcXHVBQTAwLVxcdUFBMzZcXHVBQTQwLVxcdUFBNERcXHVBQTUwLVxcdUFBNTlcXHVBQTYwLVxcdUFBNzZcXHVBQTdBLVxcdUFBQzJcXHVBQURCLVxcdUFBRERcXHVBQUUwLVxcdUFBRUZcXHVBQUYyLVxcdUFBRjZcXHVBQjAxLVxcdUFCMDZcXHVBQjA5LVxcdUFCMEVcXHVBQjExLVxcdUFCMTZcXHVBQjIwLVxcdUFCMjZcXHVBQjI4LVxcdUFCMkVcXHVBQjMwLVxcdUFCNUFcXHVBQjVDLVxcdUFCNUZcXHVBQjY0XFx1QUI2NVxcdUFCQzAtXFx1QUJFQVxcdUFCRUNcXHVBQkVEXFx1QUJGMC1cXHVBQkY5XFx1QUMwMC1cXHVEN0EzXFx1RDdCMC1cXHVEN0M2XFx1RDdDQi1cXHVEN0ZCXFx1RjkwMC1cXHVGQTZEXFx1RkE3MC1cXHVGQUQ5XFx1RkIwMC1cXHVGQjA2XFx1RkIxMy1cXHVGQjE3XFx1RkIxRC1cXHVGQjI4XFx1RkIyQS1cXHVGQjM2XFx1RkIzOC1cXHVGQjNDXFx1RkIzRVxcdUZCNDBcXHVGQjQxXFx1RkI0M1xcdUZCNDRcXHVGQjQ2LVxcdUZCQjFcXHVGQkQzLVxcdUZEM0RcXHVGRDUwLVxcdUZEOEZcXHVGRDkyLVxcdUZEQzdcXHVGREYwLVxcdUZERkJcXHVGRTAwLVxcdUZFMEZcXHVGRTIwLVxcdUZFMkRcXHVGRTMzXFx1RkUzNFxcdUZFNEQtXFx1RkU0RlxcdUZFNzAtXFx1RkU3NFxcdUZFNzYtXFx1RkVGQ1xcdUZGMTAtXFx1RkYxOVxcdUZGMjEtXFx1RkYzQVxcdUZGM0ZcXHVGRjQxLVxcdUZGNUFcXHVGRjY2LVxcdUZGQkVcXHVGRkMyLVxcdUZGQzdcXHVGRkNBLVxcdUZGQ0ZcXHVGRkQyLVxcdUZGRDdcXHVGRkRBLVxcdUZGRENdJyk7XG5cbiAgICAgIHJldHVybiAoY2ggPT09IDM2KSB8fCAoY2ggPT09IDk1KSB8fCAgLy8gJCAoZG9sbGFyKSBhbmQgXyAodW5kZXJzY29yZSlcbiAgICAgICAgKGNoID49IDY1ICYmIGNoIDw9IDkwKSB8fCAgICAgICAgIC8vIEEuLlpcbiAgICAgICAgKGNoID49IDk3ICYmIGNoIDw9IDEyMikgfHwgICAgICAgIC8vIGEuLnpcbiAgICAgICAgKGNoID49IDQ4ICYmIGNoIDw9IDU3KSB8fCAgICAgICAgIC8vIDAuLjlcbiAgICAgICAgKGNoID09PSA5MikgfHwgICAgICAgICAgICAgICAgICAgIC8vIFxcIChiYWNrc2xhc2gpXG4gICAgICAgICgoY2ggPj0gMHg4MCkgJiYgTm9uQXNjaWlJZGVudGlmaWVyUGFydC50ZXN0KFN0cmluZy5mcm9tQ2hhckNvZGUoY2gpKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VJZGVudGl0eUVzY2FwZSgpIHtcbiAgICAgIC8vIElkZW50aXR5RXNjYXBlIDo6XG4gICAgICAvLyAgICAgIFNvdXJjZUNoYXJhY3RlciBidXQgbm90IElkZW50aWZpZXJQYXJ0XG4gICAgICAvLyAgICAgIDxaV0o+XG4gICAgICAvLyAgICAgIDxaV05KPlxuXG4gICAgICB2YXIgWldKID0gJ1xcdTIwMEMnO1xuICAgICAgdmFyIFpXTkogPSAnXFx1MjAwRCc7XG5cbiAgICAgIHZhciB0bXA7XG5cbiAgICAgIGlmICghaXNJZGVudGlmaWVyUGFydChsb29rYWhlYWQoKSkpIHtcbiAgICAgICAgdG1wID0gaW5jcigpO1xuICAgICAgICByZXR1cm4gY3JlYXRlRXNjYXBlZCgnaWRlbnRpZmllcicsIHRtcC5jaGFyQ29kZUF0KDApLCB0bXAsIDEpO1xuICAgICAgfVxuXG4gICAgICBpZiAobWF0Y2goWldKKSkge1xuICAgICAgICAvLyA8WldKPlxuICAgICAgICByZXR1cm4gY3JlYXRlRXNjYXBlZCgnaWRlbnRpZmllcicsIDB4MjAwQywgWldKKTtcbiAgICAgIH0gZWxzZSBpZiAobWF0Y2goWldOSikpIHtcbiAgICAgICAgLy8gPFpXTko+XG4gICAgICAgIHJldHVybiBjcmVhdGVFc2NhcGVkKCdpZGVudGlmaWVyJywgMHgyMDBELCBaV05KKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VDaGFyYWN0ZXJDbGFzcygpIHtcbiAgICAgIC8vIENoYXJhY3RlckNsYXNzIDo6XG4gICAgICAvLyAgICAgIFsgW2xvb2thaGVhZCDiiIkge159XSBDbGFzc1JhbmdlcyBdXG4gICAgICAvLyAgICAgIFsgXiBDbGFzc1JhbmdlcyBdXG5cbiAgICAgIHZhciByZXMsIGZyb20gPSBwb3M7XG4gICAgICBpZiAocmVzID0gbWF0Y2hSZWcoL15cXFtcXF4vKSkge1xuICAgICAgICByZXMgPSBwYXJzZUNsYXNzUmFuZ2VzKCk7XG4gICAgICAgIHNraXAoJ10nKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUNoYXJhY3RlckNsYXNzKHJlcywgdHJ1ZSwgZnJvbSwgcG9zKTtcbiAgICAgIH0gZWxzZSBpZiAobWF0Y2goJ1snKSkge1xuICAgICAgICByZXMgPSBwYXJzZUNsYXNzUmFuZ2VzKCk7XG4gICAgICAgIHNraXAoJ10nKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUNoYXJhY3RlckNsYXNzKHJlcywgZmFsc2UsIGZyb20sIHBvcyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlQ2xhc3NSYW5nZXMoKSB7XG4gICAgICAvLyBDbGFzc1JhbmdlcyA6OlxuICAgICAgLy8gICAgICBbZW1wdHldXG4gICAgICAvLyAgICAgIE5vbmVtcHR5Q2xhc3NSYW5nZXNcblxuICAgICAgdmFyIHJlcztcbiAgICAgIGlmIChjdXJyZW50KCddJykpIHtcbiAgICAgICAgLy8gRW1wdHkgYXJyYXkgbWVhbnMgbm90aGluZyBpbnNpbmRlIG9mIHRoZSBDbGFzc1JhbmdlLlxuICAgICAgICByZXR1cm4gW107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXMgPSBwYXJzZU5vbmVtcHR5Q2xhc3NSYW5nZXMoKTtcbiAgICAgICAgaWYgKCFyZXMpIHtcbiAgICAgICAgICBiYWlsKCdub25FbXB0eUNsYXNzUmFuZ2VzJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUhlbHBlckNsYXNzUmFuZ2VzKGF0b20pIHtcbiAgICAgIHZhciBmcm9tLCB0bywgcmVzO1xuICAgICAgaWYgKGN1cnJlbnQoJy0nKSAmJiAhbmV4dCgnXScpKSB7XG4gICAgICAgIC8vIENsYXNzQXRvbSAtIENsYXNzQXRvbSBDbGFzc1Jhbmdlc1xuICAgICAgICBza2lwKCctJyk7XG5cbiAgICAgICAgcmVzID0gcGFyc2VDbGFzc0F0b20oKTtcbiAgICAgICAgaWYgKCFyZXMpIHtcbiAgICAgICAgICBiYWlsKCdjbGFzc0F0b20nKTtcbiAgICAgICAgfVxuICAgICAgICB0byA9IHBvcztcbiAgICAgICAgdmFyIGNsYXNzUmFuZ2VzID0gcGFyc2VDbGFzc1JhbmdlcygpO1xuICAgICAgICBpZiAoIWNsYXNzUmFuZ2VzKSB7XG4gICAgICAgICAgYmFpbCgnY2xhc3NSYW5nZXMnKTtcbiAgICAgICAgfVxuICAgICAgICBmcm9tID0gYXRvbS5yYW5nZVswXTtcbiAgICAgICAgaWYgKGNsYXNzUmFuZ2VzLnR5cGUgPT09ICdlbXB0eScpIHtcbiAgICAgICAgICByZXR1cm4gW2NyZWF0ZUNsYXNzUmFuZ2UoYXRvbSwgcmVzLCBmcm9tLCB0byldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbY3JlYXRlQ2xhc3NSYW5nZShhdG9tLCByZXMsIGZyb20sIHRvKV0uY29uY2F0KGNsYXNzUmFuZ2VzKTtcbiAgICAgIH1cblxuICAgICAgcmVzID0gcGFyc2VOb25lbXB0eUNsYXNzUmFuZ2VzTm9EYXNoKCk7XG4gICAgICBpZiAoIXJlcykge1xuICAgICAgICBiYWlsKCdub25FbXB0eUNsYXNzUmFuZ2VzTm9EYXNoJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbYXRvbV0uY29uY2F0KHJlcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VOb25lbXB0eUNsYXNzUmFuZ2VzKCkge1xuICAgICAgLy8gTm9uZW1wdHlDbGFzc1JhbmdlcyA6OlxuICAgICAgLy8gICAgICBDbGFzc0F0b21cbiAgICAgIC8vICAgICAgQ2xhc3NBdG9tIE5vbmVtcHR5Q2xhc3NSYW5nZXNOb0Rhc2hcbiAgICAgIC8vICAgICAgQ2xhc3NBdG9tIC0gQ2xhc3NBdG9tIENsYXNzUmFuZ2VzXG5cbiAgICAgIHZhciBhdG9tID0gcGFyc2VDbGFzc0F0b20oKTtcbiAgICAgIGlmICghYXRvbSkge1xuICAgICAgICBiYWlsKCdjbGFzc0F0b20nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJlbnQoJ10nKSkge1xuICAgICAgICAvLyBDbGFzc0F0b21cbiAgICAgICAgcmV0dXJuIFthdG9tXTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xhc3NBdG9tIE5vbmVtcHR5Q2xhc3NSYW5nZXNOb0Rhc2hcbiAgICAgIC8vIENsYXNzQXRvbSAtIENsYXNzQXRvbSBDbGFzc1Jhbmdlc1xuICAgICAgcmV0dXJuIHBhcnNlSGVscGVyQ2xhc3NSYW5nZXMoYXRvbSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VOb25lbXB0eUNsYXNzUmFuZ2VzTm9EYXNoKCkge1xuICAgICAgLy8gTm9uZW1wdHlDbGFzc1Jhbmdlc05vRGFzaCA6OlxuICAgICAgLy8gICAgICBDbGFzc0F0b21cbiAgICAgIC8vICAgICAgQ2xhc3NBdG9tTm9EYXNoIE5vbmVtcHR5Q2xhc3NSYW5nZXNOb0Rhc2hcbiAgICAgIC8vICAgICAgQ2xhc3NBdG9tTm9EYXNoIC0gQ2xhc3NBdG9tIENsYXNzUmFuZ2VzXG5cbiAgICAgIHZhciByZXMgPSBwYXJzZUNsYXNzQXRvbSgpO1xuICAgICAgaWYgKCFyZXMpIHtcbiAgICAgICAgYmFpbCgnY2xhc3NBdG9tJyk7XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudCgnXScpKSB7XG4gICAgICAgIC8vICAgICAgQ2xhc3NBdG9tXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9XG5cbiAgICAgIC8vIENsYXNzQXRvbU5vRGFzaCBOb25lbXB0eUNsYXNzUmFuZ2VzTm9EYXNoXG4gICAgICAvLyBDbGFzc0F0b21Ob0Rhc2ggLSBDbGFzc0F0b20gQ2xhc3NSYW5nZXNcbiAgICAgIHJldHVybiBwYXJzZUhlbHBlckNsYXNzUmFuZ2VzKHJlcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VDbGFzc0F0b20oKSB7XG4gICAgICAvLyBDbGFzc0F0b20gOjpcbiAgICAgIC8vICAgICAgLVxuICAgICAgLy8gICAgICBDbGFzc0F0b21Ob0Rhc2hcbiAgICAgIGlmIChtYXRjaCgnLScpKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVDaGFyYWN0ZXIoJy0nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwYXJzZUNsYXNzQXRvbU5vRGFzaCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlQ2xhc3NBdG9tTm9EYXNoKCkge1xuICAgICAgLy8gQ2xhc3NBdG9tTm9EYXNoIDo6XG4gICAgICAvLyAgICAgIFNvdXJjZUNoYXJhY3RlciBidXQgbm90IG9uZSBvZiBcXCBvciBdIG9yIC1cbiAgICAgIC8vICAgICAgXFwgQ2xhc3NFc2NhcGVcblxuICAgICAgdmFyIHJlcztcbiAgICAgIGlmIChyZXMgPSBtYXRjaFJlZygvXlteXFxcXFxcXS1dLykpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUNoYXJhY3RlcihyZXNbMF0pO1xuICAgICAgfSBlbHNlIGlmIChtYXRjaCgnXFxcXCcpKSB7XG4gICAgICAgIHJlcyA9IHBhcnNlQ2xhc3NFc2NhcGUoKTtcbiAgICAgICAgaWYgKCFyZXMpIHtcbiAgICAgICAgICBiYWlsKCdjbGFzc0VzY2FwZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBhcnNlVW5pY29kZVN1cnJvZ2F0ZVBhaXJFc2NhcGUocmVzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBiYWlsKG1lc3NhZ2UsIGRldGFpbHMsIGZyb20sIHRvKSB7XG4gICAgICBmcm9tID0gZnJvbSA9PSBudWxsID8gcG9zIDogZnJvbTtcbiAgICAgIHRvID0gdG8gPT0gbnVsbCA/IGZyb20gOiB0bztcblxuICAgICAgdmFyIGNvbnRleHRTdGFydCA9IE1hdGgubWF4KDAsIGZyb20gLSAxMCk7XG4gICAgICB2YXIgY29udGV4dEVuZCA9IE1hdGgubWluKHRvICsgMTAsIHN0ci5sZW5ndGgpO1xuXG4gICAgICAvLyBPdXRwdXQgYSBiaXQgb2YgY29udGV4dCBhbmQgYSBsaW5lIHBvaW50aW5nIHRvIHdoZXJlIG91ciBlcnJvciBpcy5cbiAgICAgIC8vXG4gICAgICAvLyBXZSBhcmUgYXNzdW1pbmcgdGhhdCB0aGVyZSBhcmUgbm8gYWN0dWFsIG5ld2xpbmVzIGluIHRoZSBjb250ZW50IGFzIHRoaXMgaXMgYSByZWd1bGFyIGV4cHJlc3Npb24uXG4gICAgICB2YXIgY29udGV4dCA9ICcgICAgJyArIHN0ci5zdWJzdHJpbmcoY29udGV4dFN0YXJ0LCBjb250ZXh0RW5kKTtcbiAgICAgIHZhciBwb2ludGVyID0gJyAgICAnICsgbmV3IEFycmF5KGZyb20gLSBjb250ZXh0U3RhcnQgKyAxKS5qb2luKCcgJykgKyAnXic7XG5cbiAgICAgIHRocm93IFN5bnRheEVycm9yKG1lc3NhZ2UgKyAnIGF0IHBvc2l0aW9uICcgKyBmcm9tICsgKGRldGFpbHMgPyAnOiAnICsgZGV0YWlscyA6ICcnKSArICdcXG4nICsgY29udGV4dCArICdcXG4nICsgcG9pbnRlcik7XG4gICAgfVxuXG4gICAgdmFyIGJhY2tyZWZEZW5pZWQgPSBbXTtcbiAgICB2YXIgY2xvc2VkQ2FwdHVyZUNvdW50ZXIgPSAwO1xuICAgIHZhciBmaXJzdEl0ZXJhdGlvbiA9IHRydWU7XG4gICAgdmFyIGhhc1VuaWNvZGVGbGFnID0gKGZsYWdzIHx8IFwiXCIpLmluZGV4T2YoXCJ1XCIpICE9PSAtMTtcbiAgICB2YXIgcG9zID0gMDtcblxuICAgIC8vIENvbnZlcnQgdGhlIGlucHV0IHRvIGEgc3RyaW5nIGFuZCB0cmVhdCB0aGUgZW1wdHkgc3RyaW5nIHNwZWNpYWwuXG4gICAgc3RyID0gU3RyaW5nKHN0cik7XG4gICAgaWYgKHN0ciA9PT0gJycpIHtcbiAgICAgIHN0ciA9ICcoPzopJztcbiAgICB9XG5cbiAgICB2YXIgcmVzdWx0ID0gcGFyc2VEaXNqdW5jdGlvbigpO1xuXG4gICAgaWYgKHJlc3VsdC5yYW5nZVsxXSAhPT0gc3RyLmxlbmd0aCkge1xuICAgICAgYmFpbCgnQ291bGQgbm90IHBhcnNlIGVudGlyZSBpbnB1dCAtIGdvdCBzdHVjaycsICcnLCByZXN1bHQucmFuZ2VbMV0pO1xuICAgIH1cblxuICAgIC8vIFRoZSBzcGVjIHJlcXVpcmVzIHRvIGludGVycHJldCB0aGUgYFxcMmAgaW4gYC9cXDIoKSgpL2AgYXMgYmFja3JlZmVyZW5jZS5cbiAgICAvLyBBcyB0aGUgcGFyc2VyIGNvbGxlY3RzIHRoZSBudW1iZXIgb2YgY2FwdHVyZSBncm91cHMgYXMgdGhlIHN0cmluZyBpc1xuICAgIC8vIHBhcnNlZCBpdCBpcyBpbXBvc3NpYmxlIHRvIG1ha2UgdGhlc2UgZGVjaXNpb25zIGF0IHRoZSBwb2ludCB3aGVuIHRoZVxuICAgIC8vIGBcXDJgIGlzIGhhbmRsZWQuIEluIGNhc2UgdGhlIGxvY2FsIGRlY2lzaW9uIHR1cm5zIG91dCB0byBiZSB3cm9uZyBhZnRlclxuICAgIC8vIHRoZSBwYXJzaW5nIGhhcyBmaW5pc2hlZCwgdGhlIGlucHV0IHN0cmluZyBpcyBwYXJzZWQgYSBzZWNvbmQgdGltZSB3aXRoXG4gICAgLy8gdGhlIHRvdGFsIG51bWJlciBvZiBjYXB0dXJlIGdyb3VwcyBzZXQuXG4gICAgLy9cbiAgICAvLyBTRUU6IGh0dHBzOi8vZ2l0aHViLmNvbS9qdmllcmVjay9yZWdqc3BhcnNlci9pc3N1ZXMvNzBcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJhY2tyZWZEZW5pZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChiYWNrcmVmRGVuaWVkW2ldIDw9IGNsb3NlZENhcHR1cmVDb3VudGVyKSB7XG4gICAgICAgIC8vIFBhcnNlIHRoZSBpbnB1dCBhIHNlY29uZCB0aW1lLlxuICAgICAgICBwb3MgPSAwO1xuICAgICAgICBmaXJzdEl0ZXJhdGlvbiA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gcGFyc2VEaXNqdW5jdGlvbigpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICB2YXIgcmVnanNwYXJzZXIgPSB7XG4gICAgcGFyc2U6IHBhcnNlXG4gIH07XG5cbiAgaWYgKCdvYmplY3QnICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gcmVnanNwYXJzZXI7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93LnJlZ2pzcGFyc2VyID0gcmVnanNwYXJzZXI7XG4gIH1cblxufSgpKTtcbn0pO1xuXG52YXIgcmVnZW5lcmF0ZSA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHtcbi8qISBodHRwczovL210aHMuYmUvcmVnZW5lcmF0ZSB2MS4zLjMgYnkgQG1hdGhpYXMgfCBNSVQgbGljZW5zZSAqL1xuKGZ1bmN0aW9uKHJvb3QpIHtcblxuXHQvLyBEZXRlY3QgZnJlZSB2YXJpYWJsZXMgYGV4cG9ydHNgLlxuXHR2YXIgZnJlZUV4cG9ydHMgPSAnb2JqZWN0JyA9PSAnb2JqZWN0JyAmJiBleHBvcnRzO1xuXG5cdC8vIERldGVjdCBmcmVlIHZhcmlhYmxlIGBtb2R1bGVgLlxuXHR2YXIgZnJlZU1vZHVsZSA9ICdvYmplY3QnID09ICdvYmplY3QnICYmIG1vZHVsZSAmJlxuXHRcdG1vZHVsZS5leHBvcnRzID09IGZyZWVFeHBvcnRzICYmIG1vZHVsZTtcblxuXHQvLyBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCwgZnJvbSBOb2RlLmpzL2lvLmpzIG9yIEJyb3dzZXJpZmllZCBjb2RlLFxuXHQvLyBhbmQgdXNlIGl0IGFzIGByb290YC5cblx0dmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgY29tbW9uanNHbG9iYWwgPT0gJ29iamVjdCcgJiYgY29tbW9uanNHbG9iYWw7XG5cdGlmIChmcmVlR2xvYmFsLmdsb2JhbCA9PT0gZnJlZUdsb2JhbCB8fCBmcmVlR2xvYmFsLndpbmRvdyA9PT0gZnJlZUdsb2JhbCkge1xuXHRcdHJvb3QgPSBmcmVlR2xvYmFsO1xuXHR9XG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0dmFyIEVSUk9SUyA9IHtcblx0XHQncmFuZ2VPcmRlcic6ICdBIHJhbmdlXFx1MjAxOXMgYHN0b3BgIHZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsICcgK1xuXHRcdFx0J3RvIHRoZSBgc3RhcnRgIHZhbHVlLicsXG5cdFx0J2NvZGVQb2ludFJhbmdlJzogJ0ludmFsaWQgY29kZSBwb2ludCB2YWx1ZS4gQ29kZSBwb2ludHMgcmFuZ2UgZnJvbSAnICtcblx0XHRcdCdVKzAwMDAwMCB0byBVKzEwRkZGRi4nXG5cdH07XG5cblx0Ly8gaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2Rpbmcjc3Vycm9nYXRlLXBhaXJzXG5cdHZhciBISUdIX1NVUlJPR0FURV9NSU4gPSAweEQ4MDA7XG5cdHZhciBISUdIX1NVUlJPR0FURV9NQVggPSAweERCRkY7XG5cdHZhciBMT1dfU1VSUk9HQVRFX01JTiA9IDB4REMwMDtcblx0dmFyIExPV19TVVJST0dBVEVfTUFYID0gMHhERkZGO1xuXG5cdC8vIEluIFJlZ2VuZXJhdGUgb3V0cHV0LCBgXFwwYCBpcyBuZXZlciBwcmVjZWRlZCBieSBgXFxgIGJlY2F1c2Ugd2Ugc29ydCBieVxuXHQvLyBjb2RlIHBvaW50IHZhbHVlLCBzbyBsZXTigJlzIGtlZXAgdGhpcyByZWd1bGFyIGV4cHJlc3Npb24gc2ltcGxlLlxuXHR2YXIgcmVnZXhOdWxsID0gL1xcXFx4MDAoW14wMTIzNDU2Nzg5XXwkKS9nO1xuXG5cdHZhciBvYmplY3QgPSB7fTtcblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0Lmhhc093blByb3BlcnR5O1xuXHR2YXIgZXh0ZW5kID0gZnVuY3Rpb24oZGVzdGluYXRpb24sIHNvdXJjZSkge1xuXHRcdHZhciBrZXk7XG5cdFx0Zm9yIChrZXkgaW4gc291cmNlKSB7XG5cdFx0XHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0XHRcdFx0ZGVzdGluYXRpb25ba2V5XSA9IHNvdXJjZVtrZXldO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZGVzdGluYXRpb247XG5cdH07XG5cblx0dmFyIGZvckVhY2ggPSBmdW5jdGlvbihhcnJheSwgY2FsbGJhY2spIHtcblx0XHR2YXIgaW5kZXggPSAtMTtcblx0XHR2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXHRcdHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdFx0XHRjYWxsYmFjayhhcnJheVtpbmRleF0sIGluZGV4KTtcblx0XHR9XG5cdH07XG5cblx0dmFyIHRvU3RyaW5nID0gb2JqZWN0LnRvU3RyaW5nO1xuXHR2YXIgaXNBcnJheSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0cmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsdWUpID09ICdbb2JqZWN0IEFycmF5XSc7XG5cdH07XG5cdHZhciBpc051bWJlciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fFxuXHRcdFx0dG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gJ1tvYmplY3QgTnVtYmVyXSc7XG5cdH07XG5cblx0Ly8gVGhpcyBhc3N1bWVzIHRoYXQgYG51bWJlcmAgaXMgYSBwb3NpdGl2ZSBpbnRlZ2VyIHRoYXQgYHRvU3RyaW5nKClgcyBuaWNlbHlcblx0Ly8gKHdoaWNoIGlzIHRoZSBjYXNlIGZvciBhbGwgY29kZSBwb2ludCB2YWx1ZXMpLlxuXHR2YXIgemVyb2VzID0gJzAwMDAnO1xuXHR2YXIgcGFkID0gZnVuY3Rpb24obnVtYmVyLCB0b3RhbENoYXJhY3RlcnMpIHtcblx0XHR2YXIgc3RyaW5nID0gU3RyaW5nKG51bWJlcik7XG5cdFx0cmV0dXJuIHN0cmluZy5sZW5ndGggPCB0b3RhbENoYXJhY3RlcnNcblx0XHRcdD8gKHplcm9lcyArIHN0cmluZykuc2xpY2UoLXRvdGFsQ2hhcmFjdGVycylcblx0XHRcdDogc3RyaW5nO1xuXHR9O1xuXG5cdHZhciBoZXggPSBmdW5jdGlvbihudW1iZXIpIHtcblx0XHRyZXR1cm4gTnVtYmVyKG51bWJlcikudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG5cdH07XG5cblx0dmFyIHNsaWNlID0gW10uc2xpY2U7XG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0dmFyIGRhdGFGcm9tQ29kZVBvaW50cyA9IGZ1bmN0aW9uKGNvZGVQb2ludHMpIHtcblx0XHR2YXIgaW5kZXggPSAtMTtcblx0XHR2YXIgbGVuZ3RoID0gY29kZVBvaW50cy5sZW5ndGg7XG5cdFx0dmFyIG1heCA9IGxlbmd0aCAtIDE7XG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xuXHRcdHZhciBpc1N0YXJ0ID0gdHJ1ZTtcblx0XHR2YXIgdG1wO1xuXHRcdHZhciBwcmV2aW91cyA9IDA7XG5cdFx0d2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0XHRcdHRtcCA9IGNvZGVQb2ludHNbaW5kZXhdO1xuXHRcdFx0aWYgKGlzU3RhcnQpIHtcblx0XHRcdFx0cmVzdWx0LnB1c2godG1wKTtcblx0XHRcdFx0cHJldmlvdXMgPSB0bXA7XG5cdFx0XHRcdGlzU3RhcnQgPSBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICh0bXAgPT0gcHJldmlvdXMgKyAxKSB7XG5cdFx0XHRcdFx0aWYgKGluZGV4ICE9IG1heCkge1xuXHRcdFx0XHRcdFx0cHJldmlvdXMgPSB0bXA7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0aXNTdGFydCA9IHRydWU7XG5cdFx0XHRcdFx0XHRyZXN1bHQucHVzaCh0bXAgKyAxKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gRW5kIHRoZSBwcmV2aW91cyByYW5nZSBhbmQgc3RhcnQgYSBuZXcgb25lLlxuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKHByZXZpb3VzICsgMSwgdG1wKTtcblx0XHRcdFx0XHRwcmV2aW91cyA9IHRtcDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIWlzU3RhcnQpIHtcblx0XHRcdHJlc3VsdC5wdXNoKHRtcCArIDEpO1xuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9O1xuXG5cdHZhciBkYXRhUmVtb3ZlID0gZnVuY3Rpb24oZGF0YSwgY29kZVBvaW50KSB7XG5cdFx0Ly8gSXRlcmF0ZSBvdmVyIHRoZSBkYXRhIHBlciBgKHN0YXJ0LCBlbmQpYCBwYWlyLlxuXHRcdHZhciBpbmRleCA9IDA7XG5cdFx0dmFyIHN0YXJ0O1xuXHRcdHZhciBlbmQ7XG5cdFx0dmFyIGxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuXHRcdHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuXHRcdFx0c3RhcnQgPSBkYXRhW2luZGV4XTtcblx0XHRcdGVuZCA9IGRhdGFbaW5kZXggKyAxXTtcblx0XHRcdGlmIChjb2RlUG9pbnQgPj0gc3RhcnQgJiYgY29kZVBvaW50IDwgZW5kKSB7XG5cdFx0XHRcdC8vIE1vZGlmeSB0aGlzIHBhaXIuXG5cdFx0XHRcdGlmIChjb2RlUG9pbnQgPT0gc3RhcnQpIHtcblx0XHRcdFx0XHRpZiAoZW5kID09IHN0YXJ0ICsgMSkge1xuXHRcdFx0XHRcdFx0Ly8gSnVzdCByZW1vdmUgYHN0YXJ0YCBhbmQgYGVuZGAuXG5cdFx0XHRcdFx0XHRkYXRhLnNwbGljZShpbmRleCwgMik7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gSnVzdCByZXBsYWNlIGBzdGFydGAgd2l0aCBhIG5ldyB2YWx1ZS5cblx0XHRcdFx0XHRcdGRhdGFbaW5kZXhdID0gY29kZVBvaW50ICsgMTtcblx0XHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmIChjb2RlUG9pbnQgPT0gZW5kIC0gMSkge1xuXHRcdFx0XHRcdC8vIEp1c3QgcmVwbGFjZSBgZW5kYCB3aXRoIGEgbmV3IHZhbHVlLlxuXHRcdFx0XHRcdGRhdGFbaW5kZXggKyAxXSA9IGNvZGVQb2ludDtcblx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBSZXBsYWNlIGBbc3RhcnQsIGVuZF1gIHdpdGggYFtzdGFydEEsIGVuZEEsIHN0YXJ0QiwgZW5kQl1gLlxuXHRcdFx0XHRcdGRhdGEuc3BsaWNlKGluZGV4LCAyLCBzdGFydCwgY29kZVBvaW50LCBjb2RlUG9pbnQgKyAxLCBlbmQpO1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpbmRleCArPSAyO1xuXHRcdH1cblx0XHRyZXR1cm4gZGF0YTtcblx0fTtcblxuXHR2YXIgZGF0YVJlbW92ZVJhbmdlID0gZnVuY3Rpb24oZGF0YSwgcmFuZ2VTdGFydCwgcmFuZ2VFbmQpIHtcblx0XHRpZiAocmFuZ2VFbmQgPCByYW5nZVN0YXJ0KSB7XG5cdFx0XHR0aHJvdyBFcnJvcihFUlJPUlMucmFuZ2VPcmRlcik7XG5cdFx0fVxuXHRcdC8vIEl0ZXJhdGUgb3ZlciB0aGUgZGF0YSBwZXIgYChzdGFydCwgZW5kKWAgcGFpci5cblx0XHR2YXIgaW5kZXggPSAwO1xuXHRcdHZhciBzdGFydDtcblx0XHR2YXIgZW5kO1xuXHRcdHdoaWxlIChpbmRleCA8IGRhdGEubGVuZ3RoKSB7XG5cdFx0XHRzdGFydCA9IGRhdGFbaW5kZXhdO1xuXHRcdFx0ZW5kID0gZGF0YVtpbmRleCArIDFdIC0gMTsgLy8gTm90ZTogdGhlIGAtIDFgIG1ha2VzIGBlbmRgIGluY2x1c2l2ZS5cblxuXHRcdFx0Ly8gRXhpdCBhcyBzb29uIGFzIG5vIG1vcmUgbWF0Y2hpbmcgcGFpcnMgY2FuIGJlIGZvdW5kLlxuXHRcdFx0aWYgKHN0YXJ0ID4gcmFuZ2VFbmQpIHtcblx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgcmFuZ2UgcGFpciBpcyBlcXVhbCB0bywgb3IgZm9ybXMgYSBzdWJzZXQgb2YsIHRoZSByYW5nZVxuXHRcdFx0Ly8gdG8gYmUgcmVtb3ZlZC5cblx0XHRcdC8vIEUuZy4gd2UgaGF2ZSBgWzAsIDExLCA0MCwgNTFdYCBhbmQgd2FudCB0byByZW1vdmUgMC0xMCDihpIgYFs0MCwgNTFdYC5cblx0XHRcdC8vIEUuZy4gd2UgaGF2ZSBgWzQwLCA1MV1gIGFuZCB3YW50IHRvIHJlbW92ZSAwLTEwMCDihpIgYFtdYC5cblx0XHRcdGlmIChyYW5nZVN0YXJ0IDw9IHN0YXJ0ICYmIHJhbmdlRW5kID49IGVuZCkge1xuXHRcdFx0XHQvLyBSZW1vdmUgdGhpcyBwYWlyLlxuXHRcdFx0XHRkYXRhLnNwbGljZShpbmRleCwgMik7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDaGVjayBpZiBib3RoIGByYW5nZVN0YXJ0YCBhbmQgYHJhbmdlRW5kYCBhcmUgd2l0aGluIHRoZSBib3VuZHMgb2Zcblx0XHRcdC8vIHRoaXMgcGFpci5cblx0XHRcdC8vIEUuZy4gd2UgaGF2ZSBgWzAsIDExXWAgYW5kIHdhbnQgdG8gcmVtb3ZlIDQtNiDihpIgYFswLCA0LCA3LCAxMV1gLlxuXHRcdFx0aWYgKHJhbmdlU3RhcnQgPj0gc3RhcnQgJiYgcmFuZ2VFbmQgPCBlbmQpIHtcblx0XHRcdFx0aWYgKHJhbmdlU3RhcnQgPT0gc3RhcnQpIHtcblx0XHRcdFx0XHQvLyBSZXBsYWNlIGBbc3RhcnQsIGVuZF1gIHdpdGggYFtzdGFydEIsIGVuZEJdYC5cblx0XHRcdFx0XHRkYXRhW2luZGV4XSA9IHJhbmdlRW5kICsgMTtcblx0XHRcdFx0XHRkYXRhW2luZGV4ICsgMV0gPSBlbmQgKyAxO1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIFJlcGxhY2UgYFtzdGFydCwgZW5kXWAgd2l0aCBgW3N0YXJ0QSwgZW5kQSwgc3RhcnRCLCBlbmRCXWAuXG5cdFx0XHRcdGRhdGEuc3BsaWNlKGluZGV4LCAyLCBzdGFydCwgcmFuZ2VTdGFydCwgcmFuZ2VFbmQgKyAxLCBlbmQgKyAxKTtcblx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENoZWNrIGlmIG9ubHkgYHJhbmdlU3RhcnRgIGlzIHdpdGhpbiB0aGUgYm91bmRzIG9mIHRoaXMgcGFpci5cblx0XHRcdC8vIEUuZy4gd2UgaGF2ZSBgWzAsIDExXWAgYW5kIHdhbnQgdG8gcmVtb3ZlIDQtMjAg4oaSIGBbMCwgNF1gLlxuXHRcdFx0aWYgKHJhbmdlU3RhcnQgPj0gc3RhcnQgJiYgcmFuZ2VTdGFydCA8PSBlbmQpIHtcblx0XHRcdFx0Ly8gUmVwbGFjZSBgZW5kYCB3aXRoIGByYW5nZVN0YXJ0YC5cblx0XHRcdFx0ZGF0YVtpbmRleCArIDFdID0gcmFuZ2VTdGFydDtcblx0XHRcdFx0Ly8gTm90ZTogd2UgY2Fubm90IGByZXR1cm5gIGp1c3QgeWV0LCBpbiBjYXNlIGFueSBmb2xsb3dpbmcgcGFpcnMgc3RpbGxcblx0XHRcdFx0Ly8gY29udGFpbiBtYXRjaGluZyBjb2RlIHBvaW50cy5cblx0XHRcdFx0Ly8gRS5nLiB3ZSBoYXZlIGBbMCwgMTEsIDE0LCAzMV1gIGFuZCB3YW50IHRvIHJlbW92ZSA0LTIwXG5cdFx0XHRcdC8vIOKGkiBgWzAsIDQsIDIxLCAzMV1gLlxuXHRcdFx0fVxuXG5cdFx0XHQvLyBDaGVjayBpZiBvbmx5IGByYW5nZUVuZGAgaXMgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhpcyBwYWlyLlxuXHRcdFx0Ly8gRS5nLiB3ZSBoYXZlIGBbMTQsIDMxXWAgYW5kIHdhbnQgdG8gcmVtb3ZlIDQtMjAg4oaSIGBbMjEsIDMxXWAuXG5cdFx0XHRlbHNlIGlmIChyYW5nZUVuZCA+PSBzdGFydCAmJiByYW5nZUVuZCA8PSBlbmQpIHtcblx0XHRcdFx0Ly8gSnVzdCByZXBsYWNlIGBzdGFydGAuXG5cdFx0XHRcdGRhdGFbaW5kZXhdID0gcmFuZ2VFbmQgKyAxO1xuXHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdH1cblxuXHRcdFx0aW5kZXggKz0gMjtcblx0XHR9XG5cdFx0cmV0dXJuIGRhdGE7XG5cdH07XG5cblx0IHZhciBkYXRhQWRkID0gZnVuY3Rpb24oZGF0YSwgY29kZVBvaW50KSB7XG5cdFx0Ly8gSXRlcmF0ZSBvdmVyIHRoZSBkYXRhIHBlciBgKHN0YXJ0LCBlbmQpYCBwYWlyLlxuXHRcdHZhciBpbmRleCA9IDA7XG5cdFx0dmFyIHN0YXJ0O1xuXHRcdHZhciBlbmQ7XG5cdFx0dmFyIGxhc3RJbmRleCA9IG51bGw7XG5cdFx0dmFyIGxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuXHRcdGlmIChjb2RlUG9pbnQgPCAweDAgfHwgY29kZVBvaW50ID4gMHgxMEZGRkYpIHtcblx0XHRcdHRocm93IFJhbmdlRXJyb3IoRVJST1JTLmNvZGVQb2ludFJhbmdlKTtcblx0XHR9XG5cdFx0d2hpbGUgKGluZGV4IDwgbGVuZ3RoKSB7XG5cdFx0XHRzdGFydCA9IGRhdGFbaW5kZXhdO1xuXHRcdFx0ZW5kID0gZGF0YVtpbmRleCArIDFdO1xuXG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgY29kZSBwb2ludCBpcyBhbHJlYWR5IGluIHRoZSBzZXQuXG5cdFx0XHRpZiAoY29kZVBvaW50ID49IHN0YXJ0ICYmIGNvZGVQb2ludCA8IGVuZCkge1xuXHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGNvZGVQb2ludCA9PSBzdGFydCAtIDEpIHtcblx0XHRcdFx0Ly8gSnVzdCByZXBsYWNlIGBzdGFydGAgd2l0aCBhIG5ldyB2YWx1ZS5cblx0XHRcdFx0ZGF0YVtpbmRleF0gPSBjb2RlUG9pbnQ7XG5cdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBpZiBgc3RhcnRgIGlzIGBncmVhdGVyYCB0aGFuIGBjb2RlUG9pbnRgLCBpbnNlcnQgYSBuZXdcblx0XHRcdC8vIGBbc3RhcnQsIGVuZF1gIHBhaXIgYmVmb3JlIHRoZSBjdXJyZW50IHBhaXIsIG9yIGFmdGVyIHRoZSBjdXJyZW50IHBhaXJcblx0XHRcdC8vIGlmIHRoZXJlIGlzIGEga25vd24gYGxhc3RJbmRleGAuXG5cdFx0XHRpZiAoc3RhcnQgPiBjb2RlUG9pbnQpIHtcblx0XHRcdFx0ZGF0YS5zcGxpY2UoXG5cdFx0XHRcdFx0bGFzdEluZGV4ICE9IG51bGwgPyBsYXN0SW5kZXggKyAyIDogMCxcblx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdGNvZGVQb2ludCxcblx0XHRcdFx0XHRjb2RlUG9pbnQgKyAxXG5cdFx0XHRcdCk7XG5cdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoY29kZVBvaW50ID09IGVuZCkge1xuXHRcdFx0XHQvLyBDaGVjayBpZiBhZGRpbmcgdGhpcyBjb2RlIHBvaW50IGNhdXNlcyB0d28gc2VwYXJhdGUgcmFuZ2VzIHRvIGJlY29tZVxuXHRcdFx0XHQvLyBhIHNpbmdsZSByYW5nZSwgZS5nLiBgZGF0YUFkZChbMCwgNCwgNSwgMTBdLCA0KWAg4oaSIGBbMCwgMTBdYC5cblx0XHRcdFx0aWYgKGNvZGVQb2ludCArIDEgPT0gZGF0YVtpbmRleCArIDJdKSB7XG5cdFx0XHRcdFx0ZGF0YS5zcGxpY2UoaW5kZXgsIDQsIHN0YXJ0LCBkYXRhW2luZGV4ICsgM10pO1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIEVsc2UsIGp1c3QgcmVwbGFjZSBgZW5kYCB3aXRoIGEgbmV3IHZhbHVlLlxuXHRcdFx0XHRkYXRhW2luZGV4ICsgMV0gPSBjb2RlUG9pbnQgKyAxO1xuXHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdH1cblx0XHRcdGxhc3RJbmRleCA9IGluZGV4O1xuXHRcdFx0aW5kZXggKz0gMjtcblx0XHR9XG5cdFx0Ly8gVGhlIGxvb3AgaGFzIGZpbmlzaGVkOyBhZGQgdGhlIG5ldyBwYWlyIHRvIHRoZSBlbmQgb2YgdGhlIGRhdGEgc2V0LlxuXHRcdGRhdGEucHVzaChjb2RlUG9pbnQsIGNvZGVQb2ludCArIDEpO1xuXHRcdHJldHVybiBkYXRhO1xuXHR9O1xuXG5cdHZhciBkYXRhQWRkRGF0YSA9IGZ1bmN0aW9uKGRhdGFBLCBkYXRhQikge1xuXHRcdC8vIEl0ZXJhdGUgb3ZlciB0aGUgZGF0YSBwZXIgYChzdGFydCwgZW5kKWAgcGFpci5cblx0XHR2YXIgaW5kZXggPSAwO1xuXHRcdHZhciBzdGFydDtcblx0XHR2YXIgZW5kO1xuXHRcdHZhciBkYXRhID0gZGF0YUEuc2xpY2UoKTtcblx0XHR2YXIgbGVuZ3RoID0gZGF0YUIubGVuZ3RoO1xuXHRcdHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuXHRcdFx0c3RhcnQgPSBkYXRhQltpbmRleF07XG5cdFx0XHRlbmQgPSBkYXRhQltpbmRleCArIDFdIC0gMTtcblx0XHRcdGlmIChzdGFydCA9PSBlbmQpIHtcblx0XHRcdFx0ZGF0YSA9IGRhdGFBZGQoZGF0YSwgc3RhcnQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGF0YSA9IGRhdGFBZGRSYW5nZShkYXRhLCBzdGFydCwgZW5kKTtcblx0XHRcdH1cblx0XHRcdGluZGV4ICs9IDI7XG5cdFx0fVxuXHRcdHJldHVybiBkYXRhO1xuXHR9O1xuXG5cdHZhciBkYXRhUmVtb3ZlRGF0YSA9IGZ1bmN0aW9uKGRhdGFBLCBkYXRhQikge1xuXHRcdC8vIEl0ZXJhdGUgb3ZlciB0aGUgZGF0YSBwZXIgYChzdGFydCwgZW5kKWAgcGFpci5cblx0XHR2YXIgaW5kZXggPSAwO1xuXHRcdHZhciBzdGFydDtcblx0XHR2YXIgZW5kO1xuXHRcdHZhciBkYXRhID0gZGF0YUEuc2xpY2UoKTtcblx0XHR2YXIgbGVuZ3RoID0gZGF0YUIubGVuZ3RoO1xuXHRcdHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuXHRcdFx0c3RhcnQgPSBkYXRhQltpbmRleF07XG5cdFx0XHRlbmQgPSBkYXRhQltpbmRleCArIDFdIC0gMTtcblx0XHRcdGlmIChzdGFydCA9PSBlbmQpIHtcblx0XHRcdFx0ZGF0YSA9IGRhdGFSZW1vdmUoZGF0YSwgc3RhcnQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGF0YSA9IGRhdGFSZW1vdmVSYW5nZShkYXRhLCBzdGFydCwgZW5kKTtcblx0XHRcdH1cblx0XHRcdGluZGV4ICs9IDI7XG5cdFx0fVxuXHRcdHJldHVybiBkYXRhO1xuXHR9O1xuXG5cdHZhciBkYXRhQWRkUmFuZ2UgPSBmdW5jdGlvbihkYXRhLCByYW5nZVN0YXJ0LCByYW5nZUVuZCkge1xuXHRcdGlmIChyYW5nZUVuZCA8IHJhbmdlU3RhcnQpIHtcblx0XHRcdHRocm93IEVycm9yKEVSUk9SUy5yYW5nZU9yZGVyKTtcblx0XHR9XG5cdFx0aWYgKFxuXHRcdFx0cmFuZ2VTdGFydCA8IDB4MCB8fCByYW5nZVN0YXJ0ID4gMHgxMEZGRkYgfHxcblx0XHRcdHJhbmdlRW5kIDwgMHgwIHx8IHJhbmdlRW5kID4gMHgxMEZGRkZcblx0XHQpIHtcblx0XHRcdHRocm93IFJhbmdlRXJyb3IoRVJST1JTLmNvZGVQb2ludFJhbmdlKTtcblx0XHR9XG5cdFx0Ly8gSXRlcmF0ZSBvdmVyIHRoZSBkYXRhIHBlciBgKHN0YXJ0LCBlbmQpYCBwYWlyLlxuXHRcdHZhciBpbmRleCA9IDA7XG5cdFx0dmFyIHN0YXJ0O1xuXHRcdHZhciBlbmQ7XG5cdFx0dmFyIGFkZGVkID0gZmFsc2U7XG5cdFx0dmFyIGxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuXHRcdHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuXHRcdFx0c3RhcnQgPSBkYXRhW2luZGV4XTtcblx0XHRcdGVuZCA9IGRhdGFbaW5kZXggKyAxXTtcblxuXHRcdFx0aWYgKGFkZGVkKSB7XG5cdFx0XHRcdC8vIFRoZSByYW5nZSBoYXMgYWxyZWFkeSBiZWVuIGFkZGVkIHRvIHRoZSBzZXQ7IGF0IHRoaXMgcG9pbnQsIHdlIGp1c3Rcblx0XHRcdFx0Ly8gbmVlZCB0byBnZXQgcmlkIG9mIHRoZSBmb2xsb3dpbmcgcmFuZ2VzIGluIGNhc2UgdGhleSBvdmVybGFwLlxuXG5cdFx0XHRcdC8vIENoZWNrIGlmIHRoaXMgcmFuZ2UgY2FuIGJlIGNvbWJpbmVkIHdpdGggdGhlIHByZXZpb3VzIHJhbmdlLlxuXHRcdFx0XHRpZiAoc3RhcnQgPT0gcmFuZ2VFbmQgKyAxKSB7XG5cdFx0XHRcdFx0ZGF0YS5zcGxpY2UoaW5kZXggLSAxLCAyKTtcblx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEV4aXQgYXMgc29vbiBhcyBubyBtb3JlIHBvc3NpYmx5IG92ZXJsYXBwaW5nIHBhaXJzIGNhbiBiZSBmb3VuZC5cblx0XHRcdFx0aWYgKHN0YXJ0ID4gcmFuZ2VFbmQpIHtcblx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEUuZy4gYFswLCAxMSwgMTIsIDE2XWAgYW5kIHdl4oCZdmUgYWRkZWQgNS0xNSwgc28gd2Ugbm93IGhhdmVcblx0XHRcdFx0Ly8gYFswLCAxNiwgMTIsIDE2XWAuIFJlbW92ZSB0aGUgYDEyLDE2YCBwYXJ0LCBhcyBpdCBsaWVzIHdpdGhpbiB0aGVcblx0XHRcdFx0Ly8gYDAsMTZgIHJhbmdlIHRoYXQgd2FzIHByZXZpb3VzbHkgYWRkZWQuXG5cdFx0XHRcdGlmIChzdGFydCA+PSByYW5nZVN0YXJ0ICYmIHN0YXJ0IDw9IHJhbmdlRW5kKSB7XG5cdFx0XHRcdFx0Ly8gYHN0YXJ0YCBsaWVzIHdpdGhpbiB0aGUgcmFuZ2UgdGhhdCB3YXMgcHJldmlvdXNseSBhZGRlZC5cblxuXHRcdFx0XHRcdGlmIChlbmQgPiByYW5nZVN0YXJ0ICYmIGVuZCAtIDEgPD0gcmFuZ2VFbmQpIHtcblx0XHRcdFx0XHRcdC8vIGBlbmRgIGxpZXMgd2l0aGluIHRoZSByYW5nZSB0aGF0IHdhcyBwcmV2aW91c2x5IGFkZGVkIGFzIHdlbGwsXG5cdFx0XHRcdFx0XHQvLyBzbyByZW1vdmUgdGhpcyBwYWlyLlxuXHRcdFx0XHRcdFx0ZGF0YS5zcGxpY2UoaW5kZXgsIDIpO1xuXHRcdFx0XHRcdFx0aW5kZXggLT0gMjtcblx0XHRcdFx0XHRcdC8vIE5vdGU6IHdlIGNhbm5vdCBgcmV0dXJuYCBqdXN0IHlldCwgYXMgdGhlcmUgbWF5IHN0aWxsIGJlIG90aGVyXG5cdFx0XHRcdFx0XHQvLyBvdmVybGFwcGluZyBwYWlycy5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gYHN0YXJ0YCBsaWVzIHdpdGhpbiB0aGUgcmFuZ2UgdGhhdCB3YXMgcHJldmlvdXNseSBhZGRlZCwgYnV0XG5cdFx0XHRcdFx0XHQvLyBgZW5kYCBkb2VzbuKAmXQuIEUuZy4gYFswLCAxMSwgMTIsIDMxXWAgYW5kIHdl4oCZdmUgYWRkZWQgNS0xNSwgc29cblx0XHRcdFx0XHRcdC8vIG5vdyB3ZSBoYXZlIGBbMCwgMTYsIDEyLCAzMV1gLiBUaGlzIG11c3QgYmUgd3JpdHRlbiBhcyBgWzAsIDMxXWAuXG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgdGhlIHByZXZpb3VzbHkgYWRkZWQgYGVuZGAgYW5kIHRoZSBjdXJyZW50IGBzdGFydGAuXG5cdFx0XHRcdFx0XHRkYXRhLnNwbGljZShpbmRleCAtIDEsIDIpO1xuXHRcdFx0XHRcdFx0aW5kZXggLT0gMjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBOb3RlOiB3ZSBjYW5ub3QgcmV0dXJuIHlldC5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdGVsc2UgaWYgKHN0YXJ0ID09IHJhbmdlRW5kICsgMSkge1xuXHRcdFx0XHRkYXRhW2luZGV4XSA9IHJhbmdlU3RhcnQ7XG5cdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDaGVjayBpZiBhIG5ldyBwYWlyIG11c3QgYmUgaW5zZXJ0ZWQgKmJlZm9yZSogdGhlIGN1cnJlbnQgb25lLlxuXHRcdFx0ZWxzZSBpZiAoc3RhcnQgPiByYW5nZUVuZCkge1xuXHRcdFx0XHRkYXRhLnNwbGljZShpbmRleCwgMCwgcmFuZ2VTdGFydCwgcmFuZ2VFbmQgKyAxKTtcblx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHR9XG5cblx0XHRcdGVsc2UgaWYgKHJhbmdlU3RhcnQgPj0gc3RhcnQgJiYgcmFuZ2VTdGFydCA8IGVuZCAmJiByYW5nZUVuZCArIDEgPD0gZW5kKSB7XG5cdFx0XHRcdC8vIFRoZSBuZXcgcmFuZ2UgbGllcyBlbnRpcmVseSB3aXRoaW4gYW4gZXhpc3RpbmcgcmFuZ2UgcGFpci4gTm8gYWN0aW9uXG5cdFx0XHRcdC8vIG5lZWRlZC5cblx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHR9XG5cblx0XHRcdGVsc2UgaWYgKFxuXHRcdFx0XHQvLyBFLmcuIGBbMCwgMTFdYCBhbmQgeW91IGFkZCA1LTE1IOKGkiBgWzAsIDE2XWAuXG5cdFx0XHRcdChyYW5nZVN0YXJ0ID49IHN0YXJ0ICYmIHJhbmdlU3RhcnQgPCBlbmQpIHx8XG5cdFx0XHRcdC8vIEUuZy4gYFswLCAzXWAgYW5kIHlvdSBhZGQgMy02IOKGkiBgWzAsIDddYC5cblx0XHRcdFx0ZW5kID09IHJhbmdlU3RhcnRcblx0XHRcdCkge1xuXHRcdFx0XHQvLyBSZXBsYWNlIGBlbmRgIHdpdGggdGhlIG5ldyB2YWx1ZS5cblx0XHRcdFx0ZGF0YVtpbmRleCArIDFdID0gcmFuZ2VFbmQgKyAxO1xuXHRcdFx0XHQvLyBNYWtlIHN1cmUgdGhlIG5leHQgcmFuZ2UgcGFpciBkb2VzbuKAmXQgb3ZlcmxhcCwgZS5nLiBgWzAsIDExLCAxMiwgMTRdYFxuXHRcdFx0XHQvLyBhbmQgeW91IGFkZCA1LTE1IOKGkiBgWzAsIDE2XWAsIGkuZS4gcmVtb3ZlIHRoZSBgMTIsMTRgIHBhcnQuXG5cdFx0XHRcdGFkZGVkID0gdHJ1ZTtcblx0XHRcdFx0Ly8gTm90ZTogd2UgY2Fubm90IGByZXR1cm5gIGp1c3QgeWV0LlxuXHRcdFx0fVxuXG5cdFx0XHRlbHNlIGlmIChyYW5nZVN0YXJ0IDw9IHN0YXJ0ICYmIHJhbmdlRW5kICsgMSA+PSBlbmQpIHtcblx0XHRcdFx0Ly8gVGhlIG5ldyByYW5nZSBpcyBhIHN1cGVyc2V0IG9mIHRoZSBvbGQgcmFuZ2UuXG5cdFx0XHRcdGRhdGFbaW5kZXhdID0gcmFuZ2VTdGFydDtcblx0XHRcdFx0ZGF0YVtpbmRleCArIDFdID0gcmFuZ2VFbmQgKyAxO1xuXHRcdFx0XHRhZGRlZCA9IHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdGluZGV4ICs9IDI7XG5cdFx0fVxuXHRcdC8vIFRoZSBsb29wIGhhcyBmaW5pc2hlZCB3aXRob3V0IGRvaW5nIGFueXRoaW5nOyBhZGQgdGhlIG5ldyBwYWlyIHRvIHRoZSBlbmRcblx0XHQvLyBvZiB0aGUgZGF0YSBzZXQuXG5cdFx0aWYgKCFhZGRlZCkge1xuXHRcdFx0ZGF0YS5wdXNoKHJhbmdlU3RhcnQsIHJhbmdlRW5kICsgMSk7XG5cdFx0fVxuXHRcdHJldHVybiBkYXRhO1xuXHR9O1xuXG5cdHZhciBkYXRhQ29udGFpbnMgPSBmdW5jdGlvbihkYXRhLCBjb2RlUG9pbnQpIHtcblx0XHR2YXIgaW5kZXggPSAwO1xuXHRcdHZhciBsZW5ndGggPSBkYXRhLmxlbmd0aDtcblx0XHQvLyBFeGl0IGVhcmx5IGlmIGBjb2RlUG9pbnRgIGlzIG5vdCB3aXRoaW4gYGRhdGFg4oCZcyBvdmVyYWxsIHJhbmdlLlxuXHRcdHZhciBzdGFydCA9IGRhdGFbaW5kZXhdO1xuXHRcdHZhciBlbmQgPSBkYXRhW2xlbmd0aCAtIDFdO1xuXHRcdGlmIChsZW5ndGggPj0gMikge1xuXHRcdFx0aWYgKGNvZGVQb2ludCA8IHN0YXJ0IHx8IGNvZGVQb2ludCA+IGVuZCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vIEl0ZXJhdGUgb3ZlciB0aGUgZGF0YSBwZXIgYChzdGFydCwgZW5kKWAgcGFpci5cblx0XHR3aGlsZSAoaW5kZXggPCBsZW5ndGgpIHtcblx0XHRcdHN0YXJ0ID0gZGF0YVtpbmRleF07XG5cdFx0XHRlbmQgPSBkYXRhW2luZGV4ICsgMV07XG5cdFx0XHRpZiAoY29kZVBvaW50ID49IHN0YXJ0ICYmIGNvZGVQb2ludCA8IGVuZCkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGluZGV4ICs9IDI7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fTtcblxuXHR2YXIgZGF0YUludGVyc2VjdGlvbiA9IGZ1bmN0aW9uKGRhdGEsIGNvZGVQb2ludHMpIHtcblx0XHR2YXIgaW5kZXggPSAwO1xuXHRcdHZhciBsZW5ndGggPSBjb2RlUG9pbnRzLmxlbmd0aDtcblx0XHR2YXIgY29kZVBvaW50O1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHR3aGlsZSAoaW5kZXggPCBsZW5ndGgpIHtcblx0XHRcdGNvZGVQb2ludCA9IGNvZGVQb2ludHNbaW5kZXhdO1xuXHRcdFx0aWYgKGRhdGFDb250YWlucyhkYXRhLCBjb2RlUG9pbnQpKSB7XG5cdFx0XHRcdHJlc3VsdC5wdXNoKGNvZGVQb2ludCk7XG5cdFx0XHR9XG5cdFx0XHQrK2luZGV4O1xuXHRcdH1cblx0XHRyZXR1cm4gZGF0YUZyb21Db2RlUG9pbnRzKHJlc3VsdCk7XG5cdH07XG5cblx0dmFyIGRhdGFJc0VtcHR5ID0gZnVuY3Rpb24oZGF0YSkge1xuXHRcdHJldHVybiAhZGF0YS5sZW5ndGg7XG5cdH07XG5cblx0dmFyIGRhdGFJc1NpbmdsZXRvbiA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHQvLyBDaGVjayBpZiB0aGUgc2V0IG9ubHkgcmVwcmVzZW50cyBhIHNpbmdsZSBjb2RlIHBvaW50LlxuXHRcdHJldHVybiBkYXRhLmxlbmd0aCA9PSAyICYmIGRhdGFbMF0gKyAxID09IGRhdGFbMV07XG5cdH07XG5cblx0dmFyIGRhdGFUb0FycmF5ID0gZnVuY3Rpb24oZGF0YSkge1xuXHRcdC8vIEl0ZXJhdGUgb3ZlciB0aGUgZGF0YSBwZXIgYChzdGFydCwgZW5kKWAgcGFpci5cblx0XHR2YXIgaW5kZXggPSAwO1xuXHRcdHZhciBzdGFydDtcblx0XHR2YXIgZW5kO1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHR2YXIgbGVuZ3RoID0gZGF0YS5sZW5ndGg7XG5cdFx0d2hpbGUgKGluZGV4IDwgbGVuZ3RoKSB7XG5cdFx0XHRzdGFydCA9IGRhdGFbaW5kZXhdO1xuXHRcdFx0ZW5kID0gZGF0YVtpbmRleCArIDFdO1xuXHRcdFx0d2hpbGUgKHN0YXJ0IDwgZW5kKSB7XG5cdFx0XHRcdHJlc3VsdC5wdXNoKHN0YXJ0KTtcblx0XHRcdFx0KytzdGFydDtcblx0XHRcdH1cblx0XHRcdGluZGV4ICs9IDI7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH07XG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0Ly8gaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2Rpbmcjc3Vycm9nYXRlLWZvcm11bGFlXG5cdHZhciBmbG9vciA9IE1hdGguZmxvb3I7XG5cdHZhciBoaWdoU3Vycm9nYXRlID0gZnVuY3Rpb24oY29kZVBvaW50KSB7XG5cdFx0cmV0dXJuIHBhcnNlSW50KFxuXHRcdFx0Zmxvb3IoKGNvZGVQb2ludCAtIDB4MTAwMDApIC8gMHg0MDApICsgSElHSF9TVVJST0dBVEVfTUlOLFxuXHRcdFx0MTBcblx0XHQpO1xuXHR9O1xuXG5cdHZhciBsb3dTdXJyb2dhdGUgPSBmdW5jdGlvbihjb2RlUG9pbnQpIHtcblx0XHRyZXR1cm4gcGFyc2VJbnQoXG5cdFx0XHQoY29kZVBvaW50IC0gMHgxMDAwMCkgJSAweDQwMCArIExPV19TVVJST0dBVEVfTUlOLFxuXHRcdFx0MTBcblx0XHQpO1xuXHR9O1xuXG5cdHZhciBzdHJpbmdGcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xuXHR2YXIgY29kZVBvaW50VG9TdHJpbmcgPSBmdW5jdGlvbihjb2RlUG9pbnQpIHtcblx0XHR2YXIgc3RyaW5nO1xuXHRcdC8vIGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVzY2FwZXMjc2luZ2xlXG5cdFx0Ly8gTm90ZTogdGhlIGBcXGJgIGVzY2FwZSBzZXF1ZW5jZSBmb3IgVSswMDA4IEJBQ0tTUEFDRSBpbiBzdHJpbmdzIGhhcyBhXG5cdFx0Ly8gZGlmZmVyZW50IG1lYW5pbmcgaW4gcmVndWxhciBleHByZXNzaW9ucyAod29yZCBib3VuZGFyeSksIHNvIGl0IGNhbm5vdFxuXHRcdC8vIGJlIHVzZWQgaGVyZS5cblx0XHRpZiAoY29kZVBvaW50ID09IDB4MDkpIHtcblx0XHRcdHN0cmluZyA9ICdcXFxcdCc7XG5cdFx0fVxuXHRcdC8vIE5vdGU6IElFIDwgOSB0cmVhdHMgYCdcXHYnYCBhcyBgJ3YnYCwgc28gYXZvaWQgdXNpbmcgaXQuXG5cdFx0Ly8gZWxzZSBpZiAoY29kZVBvaW50ID09IDB4MEIpIHtcblx0XHQvLyBcdHN0cmluZyA9ICdcXFxcdic7XG5cdFx0Ly8gfVxuXHRcdGVsc2UgaWYgKGNvZGVQb2ludCA9PSAweDBBKSB7XG5cdFx0XHRzdHJpbmcgPSAnXFxcXG4nO1xuXHRcdH1cblx0XHRlbHNlIGlmIChjb2RlUG9pbnQgPT0gMHgwQykge1xuXHRcdFx0c3RyaW5nID0gJ1xcXFxmJztcblx0XHR9XG5cdFx0ZWxzZSBpZiAoY29kZVBvaW50ID09IDB4MEQpIHtcblx0XHRcdHN0cmluZyA9ICdcXFxccic7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKGNvZGVQb2ludCA9PSAweDVDKSB7XG5cdFx0XHRzdHJpbmcgPSAnXFxcXFxcXFwnO1xuXHRcdH1cblx0XHRlbHNlIGlmIChcblx0XHRcdGNvZGVQb2ludCA9PSAweDI0IHx8XG5cdFx0XHQoY29kZVBvaW50ID49IDB4MjggJiYgY29kZVBvaW50IDw9IDB4MkIpIHx8XG5cdFx0XHQoY29kZVBvaW50ID49IDB4MkQgJiYgY29kZVBvaW50IDw9IDB4MkYpIHx8XG5cdFx0XHRjb2RlUG9pbnQgPT0gMHgzRiB8fFxuXHRcdFx0KGNvZGVQb2ludCA+PSAweDVCICYmIGNvZGVQb2ludCA8PSAweDVFKSB8fFxuXHRcdFx0KGNvZGVQb2ludCA+PSAweDdCICYmIGNvZGVQb2ludCA8PSAweDdEKVxuXHRcdCkge1xuXHRcdFx0Ly8gVGhlIGNvZGUgcG9pbnQgbWFwcyB0byBhbiB1bnNhZmUgcHJpbnRhYmxlIEFTQ0lJIGNoYXJhY3Rlcjtcblx0XHRcdC8vIGJhY2tzbGFzaC1lc2NhcGUgaXQuIEhlcmXigJlzIHRoZSBsaXN0IG9mIHRob3NlIHN5bWJvbHM6XG5cdFx0XHQvL1xuXHRcdFx0Ly8gICAgICQoKSorLS4vP1tcXF1ee3x9XG5cdFx0XHQvL1xuXHRcdFx0Ly8gU2VlICM3IGZvciBtb3JlIGluZm8uXG5cdFx0XHRzdHJpbmcgPSAnXFxcXCcgKyBzdHJpbmdGcm9tQ2hhckNvZGUoY29kZVBvaW50KTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAoY29kZVBvaW50ID49IDB4MjAgJiYgY29kZVBvaW50IDw9IDB4N0UpIHtcblx0XHRcdC8vIFRoZSBjb2RlIHBvaW50IG1hcHMgdG8gb25lIG9mIHRoZXNlIHByaW50YWJsZSBBU0NJSSBzeW1ib2xzXG5cdFx0XHQvLyAoaW5jbHVkaW5nIHRoZSBzcGFjZSBjaGFyYWN0ZXIpOlxuXHRcdFx0Ly9cblx0XHRcdC8vICAgICAgIVwiIyUmJywvMDEyMzQ1Njc4OTo7PD0+QEFCQ0RFRkdISUpLTE1OT1xuXHRcdFx0Ly8gICAgIFBRUlNUVVZXWFlaX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5en5cblx0XHRcdC8vXG5cdFx0XHQvLyBUaGVzZSBjYW4gc2FmZWx5IGJlIHVzZWQgZGlyZWN0bHkuXG5cdFx0XHRzdHJpbmcgPSBzdHJpbmdGcm9tQ2hhckNvZGUoY29kZVBvaW50KTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAoY29kZVBvaW50IDw9IDB4RkYpIHtcblx0XHRcdC8vIGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVzY2FwZXMjaGV4YWRlY2ltYWxcblx0XHRcdHN0cmluZyA9ICdcXFxceCcgKyBwYWQoaGV4KGNvZGVQb2ludCksIDIpO1xuXHRcdH1cblx0XHRlbHNlIHsgLy8gYGNvZGVQb2ludCA8PSAweEZGRkZgIGhvbGRzIHRydWUuXG5cdFx0XHQvLyBodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lc2NhcGVzI3VuaWNvZGVcblx0XHRcdHN0cmluZyA9ICdcXFxcdScgKyBwYWQoaGV4KGNvZGVQb2ludCksIDQpO1xuXHRcdH1cblxuXHRcdC8vIFRoZXJl4oCZcyBubyBuZWVkIHRvIGFjY291bnQgZm9yIGFzdHJhbCBzeW1ib2xzIC8gc3Vycm9nYXRlIHBhaXJzIGhlcmUsXG5cdFx0Ly8gc2luY2UgYGNvZGVQb2ludFRvU3RyaW5nYCBpcyBwcml2YXRlIGFuZCBvbmx5IHVzZWQgZm9yIEJNUCBjb2RlIHBvaW50cy5cblx0XHQvLyBCdXQgaWYgdGhhdOKAmXMgd2hhdCB5b3UgbmVlZCwganVzdCBhZGQgYW4gYGVsc2VgIGJsb2NrIHdpdGggdGhpcyBjb2RlOlxuXHRcdC8vXG5cdFx0Ly8gICAgIHN0cmluZyA9ICdcXFxcdScgKyBwYWQoaGV4KGhpZ2hTdXJyb2dhdGUoY29kZVBvaW50KSksIDQpXG5cdFx0Ly8gICAgIFx0KyAnXFxcXHUnICsgcGFkKGhleChsb3dTdXJyb2dhdGUoY29kZVBvaW50KSksIDQpO1xuXG5cdFx0cmV0dXJuIHN0cmluZztcblx0fTtcblxuXHR2YXIgY29kZVBvaW50VG9TdHJpbmdVbmljb2RlID0gZnVuY3Rpb24oY29kZVBvaW50KSB7XG5cdFx0aWYgKGNvZGVQb2ludCA8PSAweEZGRkYpIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnRUb1N0cmluZyhjb2RlUG9pbnQpO1xuXHRcdH1cblx0XHRyZXR1cm4gJ1xcXFx1eycgKyBjb2RlUG9pbnQudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkgKyAnfSc7XG5cdH07XG5cblx0dmFyIHN5bWJvbFRvQ29kZVBvaW50ID0gZnVuY3Rpb24oc3ltYm9sKSB7XG5cdFx0dmFyIGxlbmd0aCA9IHN5bWJvbC5sZW5ndGg7XG5cdFx0dmFyIGZpcnN0ID0gc3ltYm9sLmNoYXJDb2RlQXQoMCk7XG5cdFx0dmFyIHNlY29uZDtcblx0XHRpZiAoXG5cdFx0XHRmaXJzdCA+PSBISUdIX1NVUlJPR0FURV9NSU4gJiYgZmlyc3QgPD0gSElHSF9TVVJST0dBVEVfTUFYICYmXG5cdFx0XHRsZW5ndGggPiAxIC8vIFRoZXJlIGlzIGEgbmV4dCBjb2RlIHVuaXQuXG5cdFx0KSB7XG5cdFx0XHQvLyBgZmlyc3RgIGlzIGEgaGlnaCBzdXJyb2dhdGUsIGFuZCB0aGVyZSBpcyBhIG5leHQgY2hhcmFjdGVyLiBBc3N1bWVcblx0XHRcdC8vIGl04oCZcyBhIGxvdyBzdXJyb2dhdGUgKGVsc2UgaXTigJlzIGludmFsaWQgdXNhZ2Ugb2YgUmVnZW5lcmF0ZSBhbnl3YXkpLlxuXHRcdFx0c2Vjb25kID0gc3ltYm9sLmNoYXJDb2RlQXQoMSk7XG5cdFx0XHQvLyBodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZyNzdXJyb2dhdGUtZm9ybXVsYWVcblx0XHRcdHJldHVybiAoZmlyc3QgLSBISUdIX1NVUlJPR0FURV9NSU4pICogMHg0MDAgK1xuXHRcdFx0XHRzZWNvbmQgLSBMT1dfU1VSUk9HQVRFX01JTiArIDB4MTAwMDA7XG5cdFx0fVxuXHRcdHJldHVybiBmaXJzdDtcblx0fTtcblxuXHR2YXIgY3JlYXRlQk1QQ2hhcmFjdGVyQ2xhc3NlcyA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHQvLyBJdGVyYXRlIG92ZXIgdGhlIGRhdGEgcGVyIGAoc3RhcnQsIGVuZClgIHBhaXIuXG5cdFx0dmFyIHJlc3VsdCA9ICcnO1xuXHRcdHZhciBpbmRleCA9IDA7XG5cdFx0dmFyIHN0YXJ0O1xuXHRcdHZhciBlbmQ7XG5cdFx0dmFyIGxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuXHRcdGlmIChkYXRhSXNTaW5nbGV0b24oZGF0YSkpIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnRUb1N0cmluZyhkYXRhWzBdKTtcblx0XHR9XG5cdFx0d2hpbGUgKGluZGV4IDwgbGVuZ3RoKSB7XG5cdFx0XHRzdGFydCA9IGRhdGFbaW5kZXhdO1xuXHRcdFx0ZW5kID0gZGF0YVtpbmRleCArIDFdIC0gMTsgLy8gTm90ZTogdGhlIGAtIDFgIG1ha2VzIGBlbmRgIGluY2x1c2l2ZS5cblx0XHRcdGlmIChzdGFydCA9PSBlbmQpIHtcblx0XHRcdFx0cmVzdWx0ICs9IGNvZGVQb2ludFRvU3RyaW5nKHN0YXJ0KTtcblx0XHRcdH0gZWxzZSBpZiAoc3RhcnQgKyAxID09IGVuZCkge1xuXHRcdFx0XHRyZXN1bHQgKz0gY29kZVBvaW50VG9TdHJpbmcoc3RhcnQpICsgY29kZVBvaW50VG9TdHJpbmcoZW5kKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlc3VsdCArPSBjb2RlUG9pbnRUb1N0cmluZyhzdGFydCkgKyAnLScgKyBjb2RlUG9pbnRUb1N0cmluZyhlbmQpO1xuXHRcdFx0fVxuXHRcdFx0aW5kZXggKz0gMjtcblx0XHR9XG5cdFx0cmV0dXJuICdbJyArIHJlc3VsdCArICddJztcblx0fTtcblxuXHR2YXIgY3JlYXRlVW5pY29kZUNoYXJhY3RlckNsYXNzZXMgPSBmdW5jdGlvbihkYXRhKSB7XG5cdFx0Ly8gSXRlcmF0ZSBvdmVyIHRoZSBkYXRhIHBlciBgKHN0YXJ0LCBlbmQpYCBwYWlyLlxuXHRcdHZhciByZXN1bHQgPSAnJztcblx0XHR2YXIgaW5kZXggPSAwO1xuXHRcdHZhciBzdGFydDtcblx0XHR2YXIgZW5kO1xuXHRcdHZhciBsZW5ndGggPSBkYXRhLmxlbmd0aDtcblx0XHRpZiAoZGF0YUlzU2luZ2xldG9uKGRhdGEpKSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50VG9TdHJpbmdVbmljb2RlKGRhdGFbMF0pO1xuXHRcdH1cblx0XHR3aGlsZSAoaW5kZXggPCBsZW5ndGgpIHtcblx0XHRcdHN0YXJ0ID0gZGF0YVtpbmRleF07XG5cdFx0XHRlbmQgPSBkYXRhW2luZGV4ICsgMV0gLSAxOyAvLyBOb3RlOiB0aGUgYC0gMWAgbWFrZXMgYGVuZGAgaW5jbHVzaXZlLlxuXHRcdFx0aWYgKHN0YXJ0ID09IGVuZCkge1xuXHRcdFx0XHRyZXN1bHQgKz0gY29kZVBvaW50VG9TdHJpbmdVbmljb2RlKHN0YXJ0KTtcblx0XHRcdH0gZWxzZSBpZiAoc3RhcnQgKyAxID09IGVuZCkge1xuXHRcdFx0XHRyZXN1bHQgKz0gY29kZVBvaW50VG9TdHJpbmdVbmljb2RlKHN0YXJ0KSArIGNvZGVQb2ludFRvU3RyaW5nVW5pY29kZShlbmQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVzdWx0ICs9IGNvZGVQb2ludFRvU3RyaW5nVW5pY29kZShzdGFydCkgKyAnLScgKyBjb2RlUG9pbnRUb1N0cmluZ1VuaWNvZGUoZW5kKTtcblx0XHRcdH1cblx0XHRcdGluZGV4ICs9IDI7XG5cdFx0fVxuXHRcdHJldHVybiAnWycgKyByZXN1bHQgKyAnXSc7XG5cdH07XG5cblx0dmFyIHNwbGl0QXRCTVAgPSBmdW5jdGlvbihkYXRhKSB7XG5cdFx0Ly8gSXRlcmF0ZSBvdmVyIHRoZSBkYXRhIHBlciBgKHN0YXJ0LCBlbmQpYCBwYWlyLlxuXHRcdHZhciBsb25lSGlnaFN1cnJvZ2F0ZXMgPSBbXTtcblx0XHR2YXIgbG9uZUxvd1N1cnJvZ2F0ZXMgPSBbXTtcblx0XHR2YXIgYm1wID0gW107XG5cdFx0dmFyIGFzdHJhbCA9IFtdO1xuXHRcdHZhciBpbmRleCA9IDA7XG5cdFx0dmFyIHN0YXJ0O1xuXHRcdHZhciBlbmQ7XG5cdFx0dmFyIGxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuXHRcdHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuXHRcdFx0c3RhcnQgPSBkYXRhW2luZGV4XTtcblx0XHRcdGVuZCA9IGRhdGFbaW5kZXggKyAxXSAtIDE7IC8vIE5vdGU6IHRoZSBgLSAxYCBtYWtlcyBgZW5kYCBpbmNsdXNpdmUuXG5cblx0XHRcdGlmIChzdGFydCA8IEhJR0hfU1VSUk9HQVRFX01JTikge1xuXG5cdFx0XHRcdC8vIFRoZSByYW5nZSBzdGFydHMgYW5kIGVuZHMgYmVmb3JlIHRoZSBoaWdoIHN1cnJvZ2F0ZSByYW5nZS5cblx0XHRcdFx0Ly8gRS5nLiAoMCwgMHgxMCkuXG5cdFx0XHRcdGlmIChlbmQgPCBISUdIX1NVUlJPR0FURV9NSU4pIHtcblx0XHRcdFx0XHRibXAucHVzaChzdGFydCwgZW5kICsgMSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBUaGUgcmFuZ2Ugc3RhcnRzIGJlZm9yZSB0aGUgaGlnaCBzdXJyb2dhdGUgcmFuZ2UgYW5kIGVuZHMgd2l0aGluIGl0LlxuXHRcdFx0XHQvLyBFLmcuICgwLCAweEQ4NTUpLlxuXHRcdFx0XHRpZiAoZW5kID49IEhJR0hfU1VSUk9HQVRFX01JTiAmJiBlbmQgPD0gSElHSF9TVVJST0dBVEVfTUFYKSB7XG5cdFx0XHRcdFx0Ym1wLnB1c2goc3RhcnQsIEhJR0hfU1VSUk9HQVRFX01JTik7XG5cdFx0XHRcdFx0bG9uZUhpZ2hTdXJyb2dhdGVzLnB1c2goSElHSF9TVVJST0dBVEVfTUlOLCBlbmQgKyAxKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFRoZSByYW5nZSBzdGFydHMgYmVmb3JlIHRoZSBoaWdoIHN1cnJvZ2F0ZSByYW5nZSBhbmQgZW5kcyBpbiB0aGUgbG93XG5cdFx0XHRcdC8vIHN1cnJvZ2F0ZSByYW5nZS4gRS5nLiAoMCwgMHhEQ0ZGKS5cblx0XHRcdFx0aWYgKGVuZCA+PSBMT1dfU1VSUk9HQVRFX01JTiAmJiBlbmQgPD0gTE9XX1NVUlJPR0FURV9NQVgpIHtcblx0XHRcdFx0XHRibXAucHVzaChzdGFydCwgSElHSF9TVVJST0dBVEVfTUlOKTtcblx0XHRcdFx0XHRsb25lSGlnaFN1cnJvZ2F0ZXMucHVzaChISUdIX1NVUlJPR0FURV9NSU4sIEhJR0hfU1VSUk9HQVRFX01BWCArIDEpO1xuXHRcdFx0XHRcdGxvbmVMb3dTdXJyb2dhdGVzLnB1c2goTE9XX1NVUlJPR0FURV9NSU4sIGVuZCArIDEpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVGhlIHJhbmdlIHN0YXJ0cyBiZWZvcmUgdGhlIGhpZ2ggc3Vycm9nYXRlIHJhbmdlIGFuZCBlbmRzIGFmdGVyIHRoZVxuXHRcdFx0XHQvLyBsb3cgc3Vycm9nYXRlIHJhbmdlLiBFLmcuICgwLCAweDEwRkZGRikuXG5cdFx0XHRcdGlmIChlbmQgPiBMT1dfU1VSUk9HQVRFX01BWCkge1xuXHRcdFx0XHRcdGJtcC5wdXNoKHN0YXJ0LCBISUdIX1NVUlJPR0FURV9NSU4pO1xuXHRcdFx0XHRcdGxvbmVIaWdoU3Vycm9nYXRlcy5wdXNoKEhJR0hfU1VSUk9HQVRFX01JTiwgSElHSF9TVVJST0dBVEVfTUFYICsgMSk7XG5cdFx0XHRcdFx0bG9uZUxvd1N1cnJvZ2F0ZXMucHVzaChMT1dfU1VSUk9HQVRFX01JTiwgTE9XX1NVUlJPR0FURV9NQVggKyAxKTtcblx0XHRcdFx0XHRpZiAoZW5kIDw9IDB4RkZGRikge1xuXHRcdFx0XHRcdFx0Ym1wLnB1c2goTE9XX1NVUlJPR0FURV9NQVggKyAxLCBlbmQgKyAxKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ym1wLnB1c2goTE9XX1NVUlJPR0FURV9NQVggKyAxLCAweEZGRkYgKyAxKTtcblx0XHRcdFx0XHRcdGFzdHJhbC5wdXNoKDB4RkZGRiArIDEsIGVuZCArIDEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2UgaWYgKHN0YXJ0ID49IEhJR0hfU1VSUk9HQVRFX01JTiAmJiBzdGFydCA8PSBISUdIX1NVUlJPR0FURV9NQVgpIHtcblxuXHRcdFx0XHQvLyBUaGUgcmFuZ2Ugc3RhcnRzIGFuZCBlbmRzIGluIHRoZSBoaWdoIHN1cnJvZ2F0ZSByYW5nZS5cblx0XHRcdFx0Ly8gRS5nLiAoMHhEODU1LCAweEQ4NjYpLlxuXHRcdFx0XHRpZiAoZW5kID49IEhJR0hfU1VSUk9HQVRFX01JTiAmJiBlbmQgPD0gSElHSF9TVVJST0dBVEVfTUFYKSB7XG5cdFx0XHRcdFx0bG9uZUhpZ2hTdXJyb2dhdGVzLnB1c2goc3RhcnQsIGVuZCArIDEpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVGhlIHJhbmdlIHN0YXJ0cyBpbiB0aGUgaGlnaCBzdXJyb2dhdGUgcmFuZ2UgYW5kIGVuZHMgaW4gdGhlIGxvd1xuXHRcdFx0XHQvLyBzdXJyb2dhdGUgcmFuZ2UuIEUuZy4gKDB4RDg1NSwgMHhEQ0ZGKS5cblx0XHRcdFx0aWYgKGVuZCA+PSBMT1dfU1VSUk9HQVRFX01JTiAmJiBlbmQgPD0gTE9XX1NVUlJPR0FURV9NQVgpIHtcblx0XHRcdFx0XHRsb25lSGlnaFN1cnJvZ2F0ZXMucHVzaChzdGFydCwgSElHSF9TVVJST0dBVEVfTUFYICsgMSk7XG5cdFx0XHRcdFx0bG9uZUxvd1N1cnJvZ2F0ZXMucHVzaChMT1dfU1VSUk9HQVRFX01JTiwgZW5kICsgMSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBUaGUgcmFuZ2Ugc3RhcnRzIGluIHRoZSBoaWdoIHN1cnJvZ2F0ZSByYW5nZSBhbmQgZW5kcyBhZnRlciB0aGUgbG93XG5cdFx0XHRcdC8vIHN1cnJvZ2F0ZSByYW5nZS4gRS5nLiAoMHhEODU1LCAweDEwRkZGRikuXG5cdFx0XHRcdGlmIChlbmQgPiBMT1dfU1VSUk9HQVRFX01BWCkge1xuXHRcdFx0XHRcdGxvbmVIaWdoU3Vycm9nYXRlcy5wdXNoKHN0YXJ0LCBISUdIX1NVUlJPR0FURV9NQVggKyAxKTtcblx0XHRcdFx0XHRsb25lTG93U3Vycm9nYXRlcy5wdXNoKExPV19TVVJST0dBVEVfTUlOLCBMT1dfU1VSUk9HQVRFX01BWCArIDEpO1xuXHRcdFx0XHRcdGlmIChlbmQgPD0gMHhGRkZGKSB7XG5cdFx0XHRcdFx0XHRibXAucHVzaChMT1dfU1VSUk9HQVRFX01BWCArIDEsIGVuZCArIDEpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRibXAucHVzaChMT1dfU1VSUk9HQVRFX01BWCArIDEsIDB4RkZGRiArIDEpO1xuXHRcdFx0XHRcdFx0YXN0cmFsLnB1c2goMHhGRkZGICsgMSwgZW5kICsgMSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSBpZiAoc3RhcnQgPj0gTE9XX1NVUlJPR0FURV9NSU4gJiYgc3RhcnQgPD0gTE9XX1NVUlJPR0FURV9NQVgpIHtcblxuXHRcdFx0XHQvLyBUaGUgcmFuZ2Ugc3RhcnRzIGFuZCBlbmRzIGluIHRoZSBsb3cgc3Vycm9nYXRlIHJhbmdlLlxuXHRcdFx0XHQvLyBFLmcuICgweERDRkYsIDB4RERGRikuXG5cdFx0XHRcdGlmIChlbmQgPj0gTE9XX1NVUlJPR0FURV9NSU4gJiYgZW5kIDw9IExPV19TVVJST0dBVEVfTUFYKSB7XG5cdFx0XHRcdFx0bG9uZUxvd1N1cnJvZ2F0ZXMucHVzaChzdGFydCwgZW5kICsgMSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBUaGUgcmFuZ2Ugc3RhcnRzIGluIHRoZSBsb3cgc3Vycm9nYXRlIHJhbmdlIGFuZCBlbmRzIGFmdGVyIHRoZSBsb3dcblx0XHRcdFx0Ly8gc3Vycm9nYXRlIHJhbmdlLiBFLmcuICgweERDRkYsIDB4MTBGRkZGKS5cblx0XHRcdFx0aWYgKGVuZCA+IExPV19TVVJST0dBVEVfTUFYKSB7XG5cdFx0XHRcdFx0bG9uZUxvd1N1cnJvZ2F0ZXMucHVzaChzdGFydCwgTE9XX1NVUlJPR0FURV9NQVggKyAxKTtcblx0XHRcdFx0XHRpZiAoZW5kIDw9IDB4RkZGRikge1xuXHRcdFx0XHRcdFx0Ym1wLnB1c2goTE9XX1NVUlJPR0FURV9NQVggKyAxLCBlbmQgKyAxKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ym1wLnB1c2goTE9XX1NVUlJPR0FURV9NQVggKyAxLCAweEZGRkYgKyAxKTtcblx0XHRcdFx0XHRcdGFzdHJhbC5wdXNoKDB4RkZGRiArIDEsIGVuZCArIDEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2UgaWYgKHN0YXJ0ID4gTE9XX1NVUlJPR0FURV9NQVggJiYgc3RhcnQgPD0gMHhGRkZGKSB7XG5cblx0XHRcdFx0Ly8gVGhlIHJhbmdlIHN0YXJ0cyBhbmQgZW5kcyBhZnRlciB0aGUgbG93IHN1cnJvZ2F0ZSByYW5nZS5cblx0XHRcdFx0Ly8gRS5nLiAoMHhGRkFBLCAweDEwRkZGRikuXG5cdFx0XHRcdGlmIChlbmQgPD0gMHhGRkZGKSB7XG5cdFx0XHRcdFx0Ym1wLnB1c2goc3RhcnQsIGVuZCArIDEpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGJtcC5wdXNoKHN0YXJ0LCAweEZGRkYgKyAxKTtcblx0XHRcdFx0XHRhc3RyYWwucHVzaCgweEZGRkYgKyAxLCBlbmQgKyAxKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIFRoZSByYW5nZSBzdGFydHMgYW5kIGVuZHMgaW4gdGhlIGFzdHJhbCByYW5nZS5cblx0XHRcdFx0YXN0cmFsLnB1c2goc3RhcnQsIGVuZCArIDEpO1xuXG5cdFx0XHR9XG5cblx0XHRcdGluZGV4ICs9IDI7XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHQnbG9uZUhpZ2hTdXJyb2dhdGVzJzogbG9uZUhpZ2hTdXJyb2dhdGVzLFxuXHRcdFx0J2xvbmVMb3dTdXJyb2dhdGVzJzogbG9uZUxvd1N1cnJvZ2F0ZXMsXG5cdFx0XHQnYm1wJzogYm1wLFxuXHRcdFx0J2FzdHJhbCc6IGFzdHJhbFxuXHRcdH07XG5cdH07XG5cblx0dmFyIG9wdGltaXplU3Vycm9nYXRlTWFwcGluZ3MgPSBmdW5jdGlvbihzdXJyb2dhdGVNYXBwaW5ncykge1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHR2YXIgdG1wTG93ID0gW107XG5cdFx0dmFyIGFkZExvdyA9IGZhbHNlO1xuXHRcdHZhciBtYXBwaW5nO1xuXHRcdHZhciBuZXh0TWFwcGluZztcblx0XHR2YXIgaGlnaFN1cnJvZ2F0ZXM7XG5cdFx0dmFyIGxvd1N1cnJvZ2F0ZXM7XG5cdFx0dmFyIG5leHRIaWdoU3Vycm9nYXRlcztcblx0XHR2YXIgbmV4dExvd1N1cnJvZ2F0ZXM7XG5cdFx0dmFyIGluZGV4ID0gLTE7XG5cdFx0dmFyIGxlbmd0aCA9IHN1cnJvZ2F0ZU1hcHBpbmdzLmxlbmd0aDtcblx0XHR3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHRcdFx0bWFwcGluZyA9IHN1cnJvZ2F0ZU1hcHBpbmdzW2luZGV4XTtcblx0XHRcdG5leHRNYXBwaW5nID0gc3Vycm9nYXRlTWFwcGluZ3NbaW5kZXggKyAxXTtcblx0XHRcdGlmICghbmV4dE1hcHBpbmcpIHtcblx0XHRcdFx0cmVzdWx0LnB1c2gobWFwcGluZyk7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0aGlnaFN1cnJvZ2F0ZXMgPSBtYXBwaW5nWzBdO1xuXHRcdFx0bG93U3Vycm9nYXRlcyA9IG1hcHBpbmdbMV07XG5cdFx0XHRuZXh0SGlnaFN1cnJvZ2F0ZXMgPSBuZXh0TWFwcGluZ1swXTtcblx0XHRcdG5leHRMb3dTdXJyb2dhdGVzID0gbmV4dE1hcHBpbmdbMV07XG5cblx0XHRcdC8vIENoZWNrIGZvciBpZGVudGljYWwgaGlnaCBzdXJyb2dhdGUgcmFuZ2VzLlxuXHRcdFx0dG1wTG93ID0gbG93U3Vycm9nYXRlcztcblx0XHRcdHdoaWxlIChcblx0XHRcdFx0bmV4dEhpZ2hTdXJyb2dhdGVzICYmXG5cdFx0XHRcdGhpZ2hTdXJyb2dhdGVzWzBdID09IG5leHRIaWdoU3Vycm9nYXRlc1swXSAmJlxuXHRcdFx0XHRoaWdoU3Vycm9nYXRlc1sxXSA9PSBuZXh0SGlnaFN1cnJvZ2F0ZXNbMV1cblx0XHRcdCkge1xuXHRcdFx0XHQvLyBNZXJnZSB3aXRoIHRoZSBuZXh0IGl0ZW0uXG5cdFx0XHRcdGlmIChkYXRhSXNTaW5nbGV0b24obmV4dExvd1N1cnJvZ2F0ZXMpKSB7XG5cdFx0XHRcdFx0dG1wTG93ID0gZGF0YUFkZCh0bXBMb3csIG5leHRMb3dTdXJyb2dhdGVzWzBdKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0bXBMb3cgPSBkYXRhQWRkUmFuZ2UoXG5cdFx0XHRcdFx0XHR0bXBMb3csXG5cdFx0XHRcdFx0XHRuZXh0TG93U3Vycm9nYXRlc1swXSxcblx0XHRcdFx0XHRcdG5leHRMb3dTdXJyb2dhdGVzWzFdIC0gMVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0KytpbmRleDtcblx0XHRcdFx0bWFwcGluZyA9IHN1cnJvZ2F0ZU1hcHBpbmdzW2luZGV4XTtcblx0XHRcdFx0aGlnaFN1cnJvZ2F0ZXMgPSBtYXBwaW5nWzBdO1xuXHRcdFx0XHRsb3dTdXJyb2dhdGVzID0gbWFwcGluZ1sxXTtcblx0XHRcdFx0bmV4dE1hcHBpbmcgPSBzdXJyb2dhdGVNYXBwaW5nc1tpbmRleCArIDFdO1xuXHRcdFx0XHRuZXh0SGlnaFN1cnJvZ2F0ZXMgPSBuZXh0TWFwcGluZyAmJiBuZXh0TWFwcGluZ1swXTtcblx0XHRcdFx0bmV4dExvd1N1cnJvZ2F0ZXMgPSBuZXh0TWFwcGluZyAmJiBuZXh0TWFwcGluZ1sxXTtcblx0XHRcdFx0YWRkTG93ID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdHJlc3VsdC5wdXNoKFtcblx0XHRcdFx0aGlnaFN1cnJvZ2F0ZXMsXG5cdFx0XHRcdGFkZExvdyA/IHRtcExvdyA6IGxvd1N1cnJvZ2F0ZXNcblx0XHRcdF0pO1xuXHRcdFx0YWRkTG93ID0gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiBvcHRpbWl6ZUJ5TG93U3Vycm9nYXRlcyhyZXN1bHQpO1xuXHR9O1xuXG5cdHZhciBvcHRpbWl6ZUJ5TG93U3Vycm9nYXRlcyA9IGZ1bmN0aW9uKHN1cnJvZ2F0ZU1hcHBpbmdzKSB7XG5cdFx0aWYgKHN1cnJvZ2F0ZU1hcHBpbmdzLmxlbmd0aCA9PSAxKSB7XG5cdFx0XHRyZXR1cm4gc3Vycm9nYXRlTWFwcGluZ3M7XG5cdFx0fVxuXHRcdHZhciBpbmRleCA9IC0xO1xuXHRcdHZhciBpbm5lckluZGV4ID0gLTE7XG5cdFx0d2hpbGUgKCsraW5kZXggPCBzdXJyb2dhdGVNYXBwaW5ncy5sZW5ndGgpIHtcblx0XHRcdHZhciBtYXBwaW5nID0gc3Vycm9nYXRlTWFwcGluZ3NbaW5kZXhdO1xuXHRcdFx0dmFyIGxvd1N1cnJvZ2F0ZXMgPSBtYXBwaW5nWzFdO1xuXHRcdFx0dmFyIGxvd1N1cnJvZ2F0ZVN0YXJ0ID0gbG93U3Vycm9nYXRlc1swXTtcblx0XHRcdHZhciBsb3dTdXJyb2dhdGVFbmQgPSBsb3dTdXJyb2dhdGVzWzFdO1xuXHRcdFx0aW5uZXJJbmRleCA9IGluZGV4OyAvLyBOb3RlOiB0aGUgbG9vcCBzdGFydHMgYXQgdGhlIG5leHQgaW5kZXguXG5cdFx0XHR3aGlsZSAoKytpbm5lckluZGV4IDwgc3Vycm9nYXRlTWFwcGluZ3MubGVuZ3RoKSB7XG5cdFx0XHRcdHZhciBvdGhlck1hcHBpbmcgPSBzdXJyb2dhdGVNYXBwaW5nc1tpbm5lckluZGV4XTtcblx0XHRcdFx0dmFyIG90aGVyTG93U3Vycm9nYXRlcyA9IG90aGVyTWFwcGluZ1sxXTtcblx0XHRcdFx0dmFyIG90aGVyTG93U3Vycm9nYXRlU3RhcnQgPSBvdGhlckxvd1N1cnJvZ2F0ZXNbMF07XG5cdFx0XHRcdHZhciBvdGhlckxvd1N1cnJvZ2F0ZUVuZCA9IG90aGVyTG93U3Vycm9nYXRlc1sxXTtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdGxvd1N1cnJvZ2F0ZVN0YXJ0ID09IG90aGVyTG93U3Vycm9nYXRlU3RhcnQgJiZcblx0XHRcdFx0XHRsb3dTdXJyb2dhdGVFbmQgPT0gb3RoZXJMb3dTdXJyb2dhdGVFbmRcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0Ly8gQWRkIHRoZSBjb2RlIHBvaW50cyBpbiB0aGUgb3RoZXIgaXRlbSB0byB0aGlzIG9uZS5cblx0XHRcdFx0XHRpZiAoZGF0YUlzU2luZ2xldG9uKG90aGVyTWFwcGluZ1swXSkpIHtcblx0XHRcdFx0XHRcdG1hcHBpbmdbMF0gPSBkYXRhQWRkKG1hcHBpbmdbMF0sIG90aGVyTWFwcGluZ1swXVswXSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG1hcHBpbmdbMF0gPSBkYXRhQWRkUmFuZ2UoXG5cdFx0XHRcdFx0XHRcdG1hcHBpbmdbMF0sXG5cdFx0XHRcdFx0XHRcdG90aGVyTWFwcGluZ1swXVswXSxcblx0XHRcdFx0XHRcdFx0b3RoZXJNYXBwaW5nWzBdWzFdIC0gMVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gUmVtb3ZlIHRoZSBvdGhlciwgbm93IHJlZHVuZGFudCwgaXRlbS5cblx0XHRcdFx0XHRzdXJyb2dhdGVNYXBwaW5ncy5zcGxpY2UoaW5uZXJJbmRleCwgMSk7XG5cdFx0XHRcdFx0LS1pbm5lckluZGV4O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBzdXJyb2dhdGVNYXBwaW5ncztcblx0fTtcblxuXHR2YXIgc3Vycm9nYXRlU2V0ID0gZnVuY3Rpb24oZGF0YSkge1xuXHRcdC8vIEV4aXQgZWFybHkgaWYgYGRhdGFgIGlzIGFuIGVtcHR5IHNldC5cblx0XHRpZiAoIWRhdGEubGVuZ3RoKSB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXG5cdFx0Ly8gSXRlcmF0ZSBvdmVyIHRoZSBkYXRhIHBlciBgKHN0YXJ0LCBlbmQpYCBwYWlyLlxuXHRcdHZhciBpbmRleCA9IDA7XG5cdFx0dmFyIHN0YXJ0O1xuXHRcdHZhciBlbmQ7XG5cdFx0dmFyIHN0YXJ0SGlnaDtcblx0XHR2YXIgc3RhcnRMb3c7XG5cdFx0dmFyIGVuZEhpZ2g7XG5cdFx0dmFyIGVuZExvdztcblx0XHR2YXIgc3Vycm9nYXRlTWFwcGluZ3MgPSBbXTtcblx0XHR2YXIgbGVuZ3RoID0gZGF0YS5sZW5ndGg7XG5cdFx0d2hpbGUgKGluZGV4IDwgbGVuZ3RoKSB7XG5cdFx0XHRzdGFydCA9IGRhdGFbaW5kZXhdO1xuXHRcdFx0ZW5kID0gZGF0YVtpbmRleCArIDFdIC0gMTtcblxuXHRcdFx0c3RhcnRIaWdoID0gaGlnaFN1cnJvZ2F0ZShzdGFydCk7XG5cdFx0XHRzdGFydExvdyA9IGxvd1N1cnJvZ2F0ZShzdGFydCk7XG5cdFx0XHRlbmRIaWdoID0gaGlnaFN1cnJvZ2F0ZShlbmQpO1xuXHRcdFx0ZW5kTG93ID0gbG93U3Vycm9nYXRlKGVuZCk7XG5cblx0XHRcdHZhciBzdGFydHNXaXRoTG93ZXN0TG93U3Vycm9nYXRlID0gc3RhcnRMb3cgPT0gTE9XX1NVUlJPR0FURV9NSU47XG5cdFx0XHR2YXIgZW5kc1dpdGhIaWdoZXN0TG93U3Vycm9nYXRlID0gZW5kTG93ID09IExPV19TVVJST0dBVEVfTUFYO1xuXHRcdFx0dmFyIGNvbXBsZXRlID0gZmFsc2U7XG5cblx0XHRcdC8vIEFwcGVuZCB0aGUgcHJldmlvdXMgaGlnaC1zdXJyb2dhdGUtdG8tbG93LXN1cnJvZ2F0ZSBtYXBwaW5ncy5cblx0XHRcdC8vIFN0ZXAgMTogYChzdGFydEhpZ2gsIHN0YXJ0TG93KWAgdG8gYChzdGFydEhpZ2gsIExPV19TVVJST0dBVEVfTUFYKWAuXG5cdFx0XHRpZiAoXG5cdFx0XHRcdHN0YXJ0SGlnaCA9PSBlbmRIaWdoIHx8XG5cdFx0XHRcdHN0YXJ0c1dpdGhMb3dlc3RMb3dTdXJyb2dhdGUgJiYgZW5kc1dpdGhIaWdoZXN0TG93U3Vycm9nYXRlXG5cdFx0XHQpIHtcblx0XHRcdFx0c3Vycm9nYXRlTWFwcGluZ3MucHVzaChbXG5cdFx0XHRcdFx0W3N0YXJ0SGlnaCwgZW5kSGlnaCArIDFdLFxuXHRcdFx0XHRcdFtzdGFydExvdywgZW5kTG93ICsgMV1cblx0XHRcdFx0XSk7XG5cdFx0XHRcdGNvbXBsZXRlID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN1cnJvZ2F0ZU1hcHBpbmdzLnB1c2goW1xuXHRcdFx0XHRcdFtzdGFydEhpZ2gsIHN0YXJ0SGlnaCArIDFdLFxuXHRcdFx0XHRcdFtzdGFydExvdywgTE9XX1NVUlJPR0FURV9NQVggKyAxXVxuXHRcdFx0XHRdKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RlcCAyOiBgKHN0YXJ0SGlnaCArIDEsIExPV19TVVJST0dBVEVfTUlOKWAgdG9cblx0XHRcdC8vIGAoZW5kSGlnaCAtIDEsIExPV19TVVJST0dBVEVfTUFYKWAuXG5cdFx0XHRpZiAoIWNvbXBsZXRlICYmIHN0YXJ0SGlnaCArIDEgPCBlbmRIaWdoKSB7XG5cdFx0XHRcdGlmIChlbmRzV2l0aEhpZ2hlc3RMb3dTdXJyb2dhdGUpIHtcblx0XHRcdFx0XHQvLyBDb21iaW5lIHN0ZXAgMiBhbmQgc3RlcCAzLlxuXHRcdFx0XHRcdHN1cnJvZ2F0ZU1hcHBpbmdzLnB1c2goW1xuXHRcdFx0XHRcdFx0W3N0YXJ0SGlnaCArIDEsIGVuZEhpZ2ggKyAxXSxcblx0XHRcdFx0XHRcdFtMT1dfU1VSUk9HQVRFX01JTiwgZW5kTG93ICsgMV1cblx0XHRcdFx0XHRdKTtcblx0XHRcdFx0XHRjb21wbGV0ZSA9IHRydWU7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c3Vycm9nYXRlTWFwcGluZ3MucHVzaChbXG5cdFx0XHRcdFx0XHRbc3RhcnRIaWdoICsgMSwgZW5kSGlnaF0sXG5cdFx0XHRcdFx0XHRbTE9XX1NVUlJPR0FURV9NSU4sIExPV19TVVJST0dBVEVfTUFYICsgMV1cblx0XHRcdFx0XHRdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdGVwIDMuIGAoZW5kSGlnaCwgTE9XX1NVUlJPR0FURV9NSU4pYCB0byBgKGVuZEhpZ2gsIGVuZExvdylgLlxuXHRcdFx0aWYgKCFjb21wbGV0ZSkge1xuXHRcdFx0XHRzdXJyb2dhdGVNYXBwaW5ncy5wdXNoKFtcblx0XHRcdFx0XHRbZW5kSGlnaCwgZW5kSGlnaCArIDFdLFxuXHRcdFx0XHRcdFtMT1dfU1VSUk9HQVRFX01JTiwgZW5kTG93ICsgMV1cblx0XHRcdFx0XSk7XG5cdFx0XHR9XG5cblx0XHRcdGluZGV4ICs9IDI7XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIGZvcm1hdCBvZiBgc3Vycm9nYXRlTWFwcGluZ3NgIGlzIGFzIGZvbGxvd3M6XG5cdFx0Ly9cblx0XHQvLyAgICAgWyBzdXJyb2dhdGVNYXBwaW5nMSwgc3Vycm9nYXRlTWFwcGluZzIgXVxuXHRcdC8vXG5cdFx0Ly8gaS5lLjpcblx0XHQvL1xuXHRcdC8vICAgICBbXG5cdFx0Ly8gICAgICAgWyBoaWdoU3Vycm9nYXRlczEsIGxvd1N1cnJvZ2F0ZXMxIF0sXG5cdFx0Ly8gICAgICAgWyBoaWdoU3Vycm9nYXRlczIsIGxvd1N1cnJvZ2F0ZXMyIF1cblx0XHQvLyAgICAgXVxuXHRcdHJldHVybiBvcHRpbWl6ZVN1cnJvZ2F0ZU1hcHBpbmdzKHN1cnJvZ2F0ZU1hcHBpbmdzKTtcblx0fTtcblxuXHR2YXIgY3JlYXRlU3Vycm9nYXRlQ2hhcmFjdGVyQ2xhc3NlcyA9IGZ1bmN0aW9uKHN1cnJvZ2F0ZU1hcHBpbmdzKSB7XG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xuXHRcdGZvckVhY2goc3Vycm9nYXRlTWFwcGluZ3MsIGZ1bmN0aW9uKHN1cnJvZ2F0ZU1hcHBpbmcpIHtcblx0XHRcdHZhciBoaWdoU3Vycm9nYXRlcyA9IHN1cnJvZ2F0ZU1hcHBpbmdbMF07XG5cdFx0XHR2YXIgbG93U3Vycm9nYXRlcyA9IHN1cnJvZ2F0ZU1hcHBpbmdbMV07XG5cdFx0XHRyZXN1bHQucHVzaChcblx0XHRcdFx0Y3JlYXRlQk1QQ2hhcmFjdGVyQ2xhc3NlcyhoaWdoU3Vycm9nYXRlcykgK1xuXHRcdFx0XHRjcmVhdGVCTVBDaGFyYWN0ZXJDbGFzc2VzKGxvd1N1cnJvZ2F0ZXMpXG5cdFx0XHQpO1xuXHRcdH0pO1xuXHRcdHJldHVybiByZXN1bHQuam9pbignfCcpO1xuXHR9O1xuXG5cdHZhciBjcmVhdGVDaGFyYWN0ZXJDbGFzc2VzRnJvbURhdGEgPSBmdW5jdGlvbihkYXRhLCBibXBPbmx5LCBoYXNVbmljb2RlRmxhZykge1xuXHRcdGlmIChoYXNVbmljb2RlRmxhZykge1xuXHRcdFx0cmV0dXJuIGNyZWF0ZVVuaWNvZGVDaGFyYWN0ZXJDbGFzc2VzKGRhdGEpO1xuXHRcdH1cblx0XHR2YXIgcmVzdWx0ID0gW107XG5cblx0XHR2YXIgcGFydHMgPSBzcGxpdEF0Qk1QKGRhdGEpO1xuXHRcdHZhciBsb25lSGlnaFN1cnJvZ2F0ZXMgPSBwYXJ0cy5sb25lSGlnaFN1cnJvZ2F0ZXM7XG5cdFx0dmFyIGxvbmVMb3dTdXJyb2dhdGVzID0gcGFydHMubG9uZUxvd1N1cnJvZ2F0ZXM7XG5cdFx0dmFyIGJtcCA9IHBhcnRzLmJtcDtcblx0XHR2YXIgYXN0cmFsID0gcGFydHMuYXN0cmFsO1xuXHRcdHZhciBoYXNMb25lSGlnaFN1cnJvZ2F0ZXMgPSAhZGF0YUlzRW1wdHkobG9uZUhpZ2hTdXJyb2dhdGVzKTtcblx0XHR2YXIgaGFzTG9uZUxvd1N1cnJvZ2F0ZXMgPSAhZGF0YUlzRW1wdHkobG9uZUxvd1N1cnJvZ2F0ZXMpO1xuXG5cdFx0dmFyIHN1cnJvZ2F0ZU1hcHBpbmdzID0gc3Vycm9nYXRlU2V0KGFzdHJhbCk7XG5cblx0XHRpZiAoYm1wT25seSkge1xuXHRcdFx0Ym1wID0gZGF0YUFkZERhdGEoYm1wLCBsb25lSGlnaFN1cnJvZ2F0ZXMpO1xuXHRcdFx0aGFzTG9uZUhpZ2hTdXJyb2dhdGVzID0gZmFsc2U7XG5cdFx0XHRibXAgPSBkYXRhQWRkRGF0YShibXAsIGxvbmVMb3dTdXJyb2dhdGVzKTtcblx0XHRcdGhhc0xvbmVMb3dTdXJyb2dhdGVzID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0aWYgKCFkYXRhSXNFbXB0eShibXApKSB7XG5cdFx0XHQvLyBUaGUgZGF0YSBzZXQgY29udGFpbnMgQk1QIGNvZGUgcG9pbnRzIHRoYXQgYXJlIG5vdCBoaWdoIHN1cnJvZ2F0ZXNcblx0XHRcdC8vIG5lZWRlZCBmb3IgYXN0cmFsIGNvZGUgcG9pbnRzIGluIHRoZSBzZXQuXG5cdFx0XHRyZXN1bHQucHVzaChjcmVhdGVCTVBDaGFyYWN0ZXJDbGFzc2VzKGJtcCkpO1xuXHRcdH1cblx0XHRpZiAoc3Vycm9nYXRlTWFwcGluZ3MubGVuZ3RoKSB7XG5cdFx0XHQvLyBUaGUgZGF0YSBzZXQgY29udGFpbnMgYXN0cmFsIGNvZGUgcG9pbnRzOyBhcHBlbmQgY2hhcmFjdGVyIGNsYXNzZXNcblx0XHRcdC8vIGJhc2VkIG9uIHRoZWlyIHN1cnJvZ2F0ZSBwYWlycy5cblx0XHRcdHJlc3VsdC5wdXNoKGNyZWF0ZVN1cnJvZ2F0ZUNoYXJhY3RlckNsYXNzZXMoc3Vycm9nYXRlTWFwcGluZ3MpKTtcblx0XHR9XG5cdFx0Ly8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vbWF0aGlhc2J5bmVucy9iYmU3Zjg3MDIwOGFiY2ZlYzg2MFxuXHRcdGlmIChoYXNMb25lSGlnaFN1cnJvZ2F0ZXMpIHtcblx0XHRcdHJlc3VsdC5wdXNoKFxuXHRcdFx0XHRjcmVhdGVCTVBDaGFyYWN0ZXJDbGFzc2VzKGxvbmVIaWdoU3Vycm9nYXRlcykgK1xuXHRcdFx0XHQvLyBNYWtlIHN1cmUgdGhlIGhpZ2ggc3Vycm9nYXRlcyBhcmVu4oCZdCBwYXJ0IG9mIGEgc3Vycm9nYXRlIHBhaXIuXG5cdFx0XHRcdCcoPyFbXFxcXHVEQzAwLVxcXFx1REZGRl0pJ1xuXHRcdFx0KTtcblx0XHR9XG5cdFx0aWYgKGhhc0xvbmVMb3dTdXJyb2dhdGVzKSB7XG5cdFx0XHRyZXN1bHQucHVzaChcblx0XHRcdFx0Ly8gSXQgaXMgbm90IHBvc3NpYmxlIHRvIGFjY3VyYXRlbHkgYXNzZXJ0IHRoZSBsb3cgc3Vycm9nYXRlcyBhcmVu4oCZdFxuXHRcdFx0XHQvLyBwYXJ0IG9mIGEgc3Vycm9nYXRlIHBhaXIsIHNpbmNlIEphdmFTY3JpcHQgcmVndWxhciBleHByZXNzaW9ucyBkb1xuXHRcdFx0XHQvLyBub3Qgc3VwcG9ydCBsb29rYmVoaW5kLlxuXHRcdFx0XHQnKD86W15cXFxcdUQ4MDAtXFxcXHVEQkZGXXxeKScgK1xuXHRcdFx0XHRjcmVhdGVCTVBDaGFyYWN0ZXJDbGFzc2VzKGxvbmVMb3dTdXJyb2dhdGVzKVxuXHRcdFx0KTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdC5qb2luKCd8Jyk7XG5cdH07XG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0Ly8gYHJlZ2VuZXJhdGVgIGNhbiBiZSB1c2VkIGFzIGEgY29uc3RydWN0b3IgKGFuZCBuZXcgbWV0aG9kcyBjYW4gYmUgYWRkZWQgdG9cblx0Ly8gaXRzIHByb3RvdHlwZSkgYnV0IGFsc28gYXMgYSByZWd1bGFyIGZ1bmN0aW9uLCB0aGUgbGF0dGVyIG9mIHdoaWNoIGlzIHRoZVxuXHQvLyBkb2N1bWVudGVkIGFuZCBtb3N0IGNvbW1vbiB1c2FnZS4gRm9yIHRoYXQgcmVhc29uLCBpdOKAmXMgbm90IGNhcGl0YWxpemVkLlxuXHR2YXIgcmVnZW5lcmF0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdFx0XHR2YWx1ZSA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMgaW5zdGFuY2VvZiByZWdlbmVyYXRlKSB7XG5cdFx0XHR0aGlzLmRhdGEgPSBbXTtcblx0XHRcdHJldHVybiB2YWx1ZSA/IHRoaXMuYWRkKHZhbHVlKSA6IHRoaXM7XG5cdFx0fVxuXHRcdHJldHVybiAobmV3IHJlZ2VuZXJhdGUpLmFkZCh2YWx1ZSk7XG5cdH07XG5cblx0cmVnZW5lcmF0ZS52ZXJzaW9uID0gJzEuMy4zJztcblxuXHR2YXIgcHJvdG8gPSByZWdlbmVyYXRlLnByb3RvdHlwZTtcblx0ZXh0ZW5kKHByb3RvLCB7XG5cdFx0J2FkZCc6IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHR2YXIgJHRoaXMgPSB0aGlzO1xuXHRcdFx0aWYgKHZhbHVlID09IG51bGwpIHtcblx0XHRcdFx0cmV0dXJuICR0aGlzO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHZhbHVlIGluc3RhbmNlb2YgcmVnZW5lcmF0ZSkge1xuXHRcdFx0XHQvLyBBbGxvdyBwYXNzaW5nIG90aGVyIFJlZ2VuZXJhdGUgaW5zdGFuY2VzLlxuXHRcdFx0XHQkdGhpcy5kYXRhID0gZGF0YUFkZERhdGEoJHRoaXMuZGF0YSwgdmFsdWUuZGF0YSk7XG5cdFx0XHRcdHJldHVybiAkdGhpcztcblx0XHRcdH1cblx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuXHRcdFx0XHR2YWx1ZSA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblx0XHRcdH1cblx0XHRcdGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHRcdFx0XHRmb3JFYWNoKHZhbHVlLCBmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRcdFx0JHRoaXMuYWRkKGl0ZW0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuICR0aGlzO1xuXHRcdFx0fVxuXHRcdFx0JHRoaXMuZGF0YSA9IGRhdGFBZGQoXG5cdFx0XHRcdCR0aGlzLmRhdGEsXG5cdFx0XHRcdGlzTnVtYmVyKHZhbHVlKSA/IHZhbHVlIDogc3ltYm9sVG9Db2RlUG9pbnQodmFsdWUpXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuICR0aGlzO1xuXHRcdH0sXG5cdFx0J3JlbW92ZSc6IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHR2YXIgJHRoaXMgPSB0aGlzO1xuXHRcdFx0aWYgKHZhbHVlID09IG51bGwpIHtcblx0XHRcdFx0cmV0dXJuICR0aGlzO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHZhbHVlIGluc3RhbmNlb2YgcmVnZW5lcmF0ZSkge1xuXHRcdFx0XHQvLyBBbGxvdyBwYXNzaW5nIG90aGVyIFJlZ2VuZXJhdGUgaW5zdGFuY2VzLlxuXHRcdFx0XHQkdGhpcy5kYXRhID0gZGF0YVJlbW92ZURhdGEoJHRoaXMuZGF0YSwgdmFsdWUuZGF0YSk7XG5cdFx0XHRcdHJldHVybiAkdGhpcztcblx0XHRcdH1cblx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuXHRcdFx0XHR2YWx1ZSA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblx0XHRcdH1cblx0XHRcdGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHRcdFx0XHRmb3JFYWNoKHZhbHVlLCBmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRcdFx0JHRoaXMucmVtb3ZlKGl0ZW0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuICR0aGlzO1xuXHRcdFx0fVxuXHRcdFx0JHRoaXMuZGF0YSA9IGRhdGFSZW1vdmUoXG5cdFx0XHRcdCR0aGlzLmRhdGEsXG5cdFx0XHRcdGlzTnVtYmVyKHZhbHVlKSA/IHZhbHVlIDogc3ltYm9sVG9Db2RlUG9pbnQodmFsdWUpXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuICR0aGlzO1xuXHRcdH0sXG5cdFx0J2FkZFJhbmdlJzogZnVuY3Rpb24oc3RhcnQsIGVuZCkge1xuXHRcdFx0dmFyICR0aGlzID0gdGhpcztcblx0XHRcdCR0aGlzLmRhdGEgPSBkYXRhQWRkUmFuZ2UoJHRoaXMuZGF0YSxcblx0XHRcdFx0aXNOdW1iZXIoc3RhcnQpID8gc3RhcnQgOiBzeW1ib2xUb0NvZGVQb2ludChzdGFydCksXG5cdFx0XHRcdGlzTnVtYmVyKGVuZCkgPyBlbmQgOiBzeW1ib2xUb0NvZGVQb2ludChlbmQpXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuICR0aGlzO1xuXHRcdH0sXG5cdFx0J3JlbW92ZVJhbmdlJzogZnVuY3Rpb24oc3RhcnQsIGVuZCkge1xuXHRcdFx0dmFyICR0aGlzID0gdGhpcztcblx0XHRcdHZhciBzdGFydENvZGVQb2ludCA9IGlzTnVtYmVyKHN0YXJ0KSA/IHN0YXJ0IDogc3ltYm9sVG9Db2RlUG9pbnQoc3RhcnQpO1xuXHRcdFx0dmFyIGVuZENvZGVQb2ludCA9IGlzTnVtYmVyKGVuZCkgPyBlbmQgOiBzeW1ib2xUb0NvZGVQb2ludChlbmQpO1xuXHRcdFx0JHRoaXMuZGF0YSA9IGRhdGFSZW1vdmVSYW5nZShcblx0XHRcdFx0JHRoaXMuZGF0YSxcblx0XHRcdFx0c3RhcnRDb2RlUG9pbnQsXG5cdFx0XHRcdGVuZENvZGVQb2ludFxuXHRcdFx0KTtcblx0XHRcdHJldHVybiAkdGhpcztcblx0XHR9LFxuXHRcdCdpbnRlcnNlY3Rpb24nOiBmdW5jdGlvbihhcmd1bWVudCkge1xuXHRcdFx0dmFyICR0aGlzID0gdGhpcztcblx0XHRcdC8vIEFsbG93IHBhc3Npbmcgb3RoZXIgUmVnZW5lcmF0ZSBpbnN0YW5jZXMuXG5cdFx0XHQvLyBUT0RPOiBPcHRpbWl6ZSB0aGlzIGJ5IHdyaXRpbmcgYW5kIHVzaW5nIGBkYXRhSW50ZXJzZWN0aW9uRGF0YSgpYC5cblx0XHRcdHZhciBhcnJheSA9IGFyZ3VtZW50IGluc3RhbmNlb2YgcmVnZW5lcmF0ZSA/XG5cdFx0XHRcdGRhdGFUb0FycmF5KGFyZ3VtZW50LmRhdGEpIDpcblx0XHRcdFx0YXJndW1lbnQ7XG5cdFx0XHQkdGhpcy5kYXRhID0gZGF0YUludGVyc2VjdGlvbigkdGhpcy5kYXRhLCBhcnJheSk7XG5cdFx0XHRyZXR1cm4gJHRoaXM7XG5cdFx0fSxcblx0XHQnY29udGFpbnMnOiBmdW5jdGlvbihjb2RlUG9pbnQpIHtcblx0XHRcdHJldHVybiBkYXRhQ29udGFpbnMoXG5cdFx0XHRcdHRoaXMuZGF0YSxcblx0XHRcdFx0aXNOdW1iZXIoY29kZVBvaW50KSA/IGNvZGVQb2ludCA6IHN5bWJvbFRvQ29kZVBvaW50KGNvZGVQb2ludClcblx0XHRcdCk7XG5cdFx0fSxcblx0XHQnY2xvbmUnOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZXQgPSBuZXcgcmVnZW5lcmF0ZTtcblx0XHRcdHNldC5kYXRhID0gdGhpcy5kYXRhLnNsaWNlKDApO1xuXHRcdFx0cmV0dXJuIHNldDtcblx0XHR9LFxuXHRcdCd0b1N0cmluZyc6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHRcdHZhciByZXN1bHQgPSBjcmVhdGVDaGFyYWN0ZXJDbGFzc2VzRnJvbURhdGEoXG5cdFx0XHRcdHRoaXMuZGF0YSxcblx0XHRcdFx0b3B0aW9ucyA/IG9wdGlvbnMuYm1wT25seSA6IGZhbHNlLFxuXHRcdFx0XHRvcHRpb25zID8gb3B0aW9ucy5oYXNVbmljb2RlRmxhZyA6IGZhbHNlXG5cdFx0XHQpO1xuXHRcdFx0aWYgKCFyZXN1bHQpIHtcblx0XHRcdFx0Ly8gRm9yIGFuIGVtcHR5IHNldCwgcmV0dXJuIHNvbWV0aGluZyB0aGF0IGNhbiBiZSBpbnNlcnRlZCBgL2hlcmUvYCB0b1xuXHRcdFx0XHQvLyBmb3JtIGEgdmFsaWQgcmVndWxhciBleHByZXNzaW9uLiBBdm9pZCBgKD86KWAgc2luY2UgdGhhdCBtYXRjaGVzIHRoZVxuXHRcdFx0XHQvLyBlbXB0eSBzdHJpbmcuXG5cdFx0XHRcdHJldHVybiAnW10nO1xuXHRcdFx0fVxuXHRcdFx0Ly8gVXNlIGBcXDBgIGluc3RlYWQgb2YgYFxceDAwYCB3aGVyZSBwb3NzaWJsZS5cblx0XHRcdHJldHVybiByZXN1bHQucmVwbGFjZShyZWdleE51bGwsICdcXFxcMCQxJyk7XG5cdFx0fSxcblx0XHQndG9SZWdFeHAnOiBmdW5jdGlvbihmbGFncykge1xuXHRcdFx0dmFyIHBhdHRlcm4gPSB0aGlzLnRvU3RyaW5nKFxuXHRcdFx0XHRmbGFncyAmJiBmbGFncy5pbmRleE9mKCd1JykgIT0gLTEgP1xuXHRcdFx0XHRcdHsgJ2hhc1VuaWNvZGVGbGFnJzogdHJ1ZSB9IDpcblx0XHRcdFx0XHRudWxsXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuIFJlZ0V4cChwYXR0ZXJuLCBmbGFncyB8fCAnJyk7XG5cdFx0fSxcblx0XHQndmFsdWVPZic6IGZ1bmN0aW9uKCkgeyAvLyBOb3RlOiBgdmFsdWVPZmAgaXMgYWxpYXNlZCBhcyBgdG9BcnJheWAuXG5cdFx0XHRyZXR1cm4gZGF0YVRvQXJyYXkodGhpcy5kYXRhKTtcblx0XHR9XG5cdH0pO1xuXG5cdHByb3RvLnRvQXJyYXkgPSBwcm90by52YWx1ZU9mO1xuXG5cdC8vIFNvbWUgQU1EIGJ1aWxkIG9wdGltaXplcnMsIGxpa2Ugci5qcywgY2hlY2sgZm9yIHNwZWNpZmljIGNvbmRpdGlvbiBwYXR0ZXJuc1xuXHQvLyBsaWtlIHRoZSBmb2xsb3dpbmc6XG5cdGlmIChcblx0XHR0eXBlb2YgdW5kZWZpbmVkID09ICdmdW5jdGlvbicgJiZcblx0XHR0eXBlb2YgdW5kZWZpbmVkLmFtZCA9PSAnb2JqZWN0JyAmJlxuXHRcdHVuZGVmaW5lZC5hbWRcblx0KSB7XG5cdFx0dW5kZWZpbmVkKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHJlZ2VuZXJhdGU7XG5cdFx0fSk7XG5cdH1cdGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmICFmcmVlRXhwb3J0cy5ub2RlVHlwZSkge1xuXHRcdGlmIChmcmVlTW9kdWxlKSB7IC8vIGluIE5vZGUuanMsIGlvLmpzLCBvciBSaW5nb0pTIHYwLjguMCtcblx0XHRcdGZyZWVNb2R1bGUuZXhwb3J0cyA9IHJlZ2VuZXJhdGU7XG5cdFx0fSBlbHNlIHsgLy8gaW4gTmFyd2hhbCBvciBSaW5nb0pTIHYwLjcuMC1cblx0XHRcdGZyZWVFeHBvcnRzLnJlZ2VuZXJhdGUgPSByZWdlbmVyYXRlO1xuXHRcdH1cblx0fSBlbHNlIHsgLy8gaW4gUmhpbm8gb3IgYSB3ZWIgYnJvd3NlclxuXHRcdHJvb3QucmVnZW5lcmF0ZSA9IHJlZ2VuZXJhdGU7XG5cdH1cblxufShjb21tb25qc0dsb2JhbCkpO1xufSk7XG5cbnZhciB1bmljb2RlQ2Fub25pY2FsUHJvcGVydHlOYW1lc0VjbWFzY3JpcHQgPSBuZXcgU2V0KFtcblx0Ly8gTm9uLWJpbmFyeSBwcm9wZXJ0aWVzOlxuXHQnR2VuZXJhbF9DYXRlZ29yeScsXG5cdCdTY3JpcHQnLFxuXHQnU2NyaXB0X0V4dGVuc2lvbnMnLFxuXHQvLyBCaW5hcnkgcHJvcGVydGllczpcblx0J0FscGhhYmV0aWMnLFxuXHQnQW55Jyxcblx0J0FTQ0lJJyxcblx0J0FTQ0lJX0hleF9EaWdpdCcsXG5cdCdBc3NpZ25lZCcsXG5cdCdCaWRpX0NvbnRyb2wnLFxuXHQnQmlkaV9NaXJyb3JlZCcsXG5cdCdDYXNlX0lnbm9yYWJsZScsXG5cdCdDYXNlZCcsXG5cdCdDaGFuZ2VzX1doZW5fQ2FzZWZvbGRlZCcsXG5cdCdDaGFuZ2VzX1doZW5fQ2FzZW1hcHBlZCcsXG5cdCdDaGFuZ2VzX1doZW5fTG93ZXJjYXNlZCcsXG5cdCdDaGFuZ2VzX1doZW5fTkZLQ19DYXNlZm9sZGVkJyxcblx0J0NoYW5nZXNfV2hlbl9UaXRsZWNhc2VkJyxcblx0J0NoYW5nZXNfV2hlbl9VcHBlcmNhc2VkJyxcblx0J0Rhc2gnLFxuXHQnRGVmYXVsdF9JZ25vcmFibGVfQ29kZV9Qb2ludCcsXG5cdCdEZXByZWNhdGVkJyxcblx0J0RpYWNyaXRpYycsXG5cdCdFbW9qaScsXG5cdCdFbW9qaV9Db21wb25lbnQnLFxuXHQnRW1vamlfTW9kaWZpZXInLFxuXHQnRW1vamlfTW9kaWZpZXJfQmFzZScsXG5cdCdFbW9qaV9QcmVzZW50YXRpb24nLFxuXHQnRXh0ZW5kZXInLFxuXHQnR3JhcGhlbWVfQmFzZScsXG5cdCdHcmFwaGVtZV9FeHRlbmQnLFxuXHQnSGV4X0RpZ2l0Jyxcblx0J0lEX0NvbnRpbnVlJyxcblx0J0lEX1N0YXJ0Jyxcblx0J0lkZW9ncmFwaGljJyxcblx0J0lEU19CaW5hcnlfT3BlcmF0b3InLFxuXHQnSURTX1RyaW5hcnlfT3BlcmF0b3InLFxuXHQnSm9pbl9Db250cm9sJyxcblx0J0xvZ2ljYWxfT3JkZXJfRXhjZXB0aW9uJyxcblx0J0xvd2VyY2FzZScsXG5cdCdNYXRoJyxcblx0J05vbmNoYXJhY3Rlcl9Db2RlX1BvaW50Jyxcblx0J1BhdHRlcm5fU3ludGF4Jyxcblx0J1BhdHRlcm5fV2hpdGVfU3BhY2UnLFxuXHQnUXVvdGF0aW9uX01hcmsnLFxuXHQnUmFkaWNhbCcsXG5cdCdSZWdpb25hbF9JbmRpY2F0b3InLFxuXHQnU2VudGVuY2VfVGVybWluYWwnLFxuXHQnU29mdF9Eb3R0ZWQnLFxuXHQnVGVybWluYWxfUHVuY3R1YXRpb24nLFxuXHQnVW5pZmllZF9JZGVvZ3JhcGgnLFxuXHQnVXBwZXJjYXNlJyxcblx0J1ZhcmlhdGlvbl9TZWxlY3RvcicsXG5cdCdXaGl0ZV9TcGFjZScsXG5cdCdYSURfQ29udGludWUnLFxuXHQnWElEX1N0YXJ0J1xuXSk7XG5cbi8vIEdlbmVyYXRlZCB1c2luZyBgbnBtIHJ1biBidWlsZGAuIERvIG5vdCBlZGl0IVxudmFyIHVuaWNvZGVQcm9wZXJ0eUFsaWFzZXNFY21hc2NyaXB0ID0gbmV3IE1hcChbXG5cdFsnc2N4JywgJ1NjcmlwdF9FeHRlbnNpb25zJ10sXG5cdFsnc2MnLCAnU2NyaXB0J10sXG5cdFsnZ2MnLCAnR2VuZXJhbF9DYXRlZ29yeSddLFxuXHRbJ0FIZXgnLCAnQVNDSUlfSGV4X0RpZ2l0J10sXG5cdFsnQWxwaGEnLCAnQWxwaGFiZXRpYyddLFxuXHRbJ0JpZGlfQycsICdCaWRpX0NvbnRyb2wnXSxcblx0WydCaWRpX00nLCAnQmlkaV9NaXJyb3JlZCddLFxuXHRbJ0Nhc2VkJywgJ0Nhc2VkJ10sXG5cdFsnQ0knLCAnQ2FzZV9JZ25vcmFibGUnXSxcblx0WydDV0NGJywgJ0NoYW5nZXNfV2hlbl9DYXNlZm9sZGVkJ10sXG5cdFsnQ1dDTScsICdDaGFuZ2VzX1doZW5fQ2FzZW1hcHBlZCddLFxuXHRbJ0NXS0NGJywgJ0NoYW5nZXNfV2hlbl9ORktDX0Nhc2Vmb2xkZWQnXSxcblx0WydDV0wnLCAnQ2hhbmdlc19XaGVuX0xvd2VyY2FzZWQnXSxcblx0WydDV1QnLCAnQ2hhbmdlc19XaGVuX1RpdGxlY2FzZWQnXSxcblx0WydDV1UnLCAnQ2hhbmdlc19XaGVuX1VwcGVyY2FzZWQnXSxcblx0WydEYXNoJywgJ0Rhc2gnXSxcblx0WydEZXAnLCAnRGVwcmVjYXRlZCddLFxuXHRbJ0RJJywgJ0RlZmF1bHRfSWdub3JhYmxlX0NvZGVfUG9pbnQnXSxcblx0WydEaWEnLCAnRGlhY3JpdGljJ10sXG5cdFsnRXh0JywgJ0V4dGVuZGVyJ10sXG5cdFsnR3JfQmFzZScsICdHcmFwaGVtZV9CYXNlJ10sXG5cdFsnR3JfRXh0JywgJ0dyYXBoZW1lX0V4dGVuZCddLFxuXHRbJ0hleCcsICdIZXhfRGlnaXQnXSxcblx0WydJREMnLCAnSURfQ29udGludWUnXSxcblx0WydJZGVvJywgJ0lkZW9ncmFwaGljJ10sXG5cdFsnSURTJywgJ0lEX1N0YXJ0J10sXG5cdFsnSURTQicsICdJRFNfQmluYXJ5X09wZXJhdG9yJ10sXG5cdFsnSURTVCcsICdJRFNfVHJpbmFyeV9PcGVyYXRvciddLFxuXHRbJ0pvaW5fQycsICdKb2luX0NvbnRyb2wnXSxcblx0WydMT0UnLCAnTG9naWNhbF9PcmRlcl9FeGNlcHRpb24nXSxcblx0WydMb3dlcicsICdMb3dlcmNhc2UnXSxcblx0WydNYXRoJywgJ01hdGgnXSxcblx0WydOQ2hhcicsICdOb25jaGFyYWN0ZXJfQ29kZV9Qb2ludCddLFxuXHRbJ1BhdF9TeW4nLCAnUGF0dGVybl9TeW50YXgnXSxcblx0WydQYXRfV1MnLCAnUGF0dGVybl9XaGl0ZV9TcGFjZSddLFxuXHRbJ1FNYXJrJywgJ1F1b3RhdGlvbl9NYXJrJ10sXG5cdFsnUmFkaWNhbCcsICdSYWRpY2FsJ10sXG5cdFsnUkknLCAnUmVnaW9uYWxfSW5kaWNhdG9yJ10sXG5cdFsnU0QnLCAnU29mdF9Eb3R0ZWQnXSxcblx0WydTVGVybScsICdTZW50ZW5jZV9UZXJtaW5hbCddLFxuXHRbJ1Rlcm0nLCAnVGVybWluYWxfUHVuY3R1YXRpb24nXSxcblx0WydVSWRlbycsICdVbmlmaWVkX0lkZW9ncmFwaCddLFxuXHRbJ1VwcGVyJywgJ1VwcGVyY2FzZSddLFxuXHRbJ1ZTJywgJ1ZhcmlhdGlvbl9TZWxlY3RvciddLFxuXHRbJ1dTcGFjZScsICdXaGl0ZV9TcGFjZSddLFxuXHRbJ3NwYWNlJywgJ1doaXRlX1NwYWNlJ10sXG5cdFsnWElEQycsICdYSURfQ29udGludWUnXSxcblx0WydYSURTJywgJ1hJRF9TdGFydCddXG5dKTtcblxudmFyIG1hdGNoUHJvcGVydHkgPSBmdW5jdGlvbihwcm9wZXJ0eSkge1xuXHRpZiAodW5pY29kZUNhbm9uaWNhbFByb3BlcnR5TmFtZXNFY21hc2NyaXB0Lmhhcyhwcm9wZXJ0eSkpIHtcblx0XHRyZXR1cm4gcHJvcGVydHk7XG5cdH1cblx0aWYgKHVuaWNvZGVQcm9wZXJ0eUFsaWFzZXNFY21hc2NyaXB0Lmhhcyhwcm9wZXJ0eSkpIHtcblx0XHRyZXR1cm4gdW5pY29kZVByb3BlcnR5QWxpYXNlc0VjbWFzY3JpcHQuZ2V0KHByb3BlcnR5KTtcblx0fVxuXHR0aHJvdyBuZXcgRXJyb3IoKFwiVW5rbm93biBwcm9wZXJ0eTogXCIgKyBwcm9wZXJ0eSkpO1xufTtcblxudmFyIHVuaWNvZGVNYXRjaFByb3BlcnR5RWNtYXNjcmlwdCA9IG1hdGNoUHJvcGVydHk7XG5cbnZhciBtYXBwaW5ncyA9IG5ldyBNYXAoW1xuXHRbJ0dlbmVyYWxfQ2F0ZWdvcnknLCBuZXcgTWFwKFtcblx0XHRbJ0MnLCAnT3RoZXInXSxcblx0XHRbJ0NjJywgJ0NvbnRyb2wnXSxcblx0XHRbJ2NudHJsJywgJ0NvbnRyb2wnXSxcblx0XHRbJ0NmJywgJ0Zvcm1hdCddLFxuXHRcdFsnQ24nLCAnVW5hc3NpZ25lZCddLFxuXHRcdFsnQ28nLCAnUHJpdmF0ZV9Vc2UnXSxcblx0XHRbJ0NzJywgJ1N1cnJvZ2F0ZSddLFxuXHRcdFsnTCcsICdMZXR0ZXInXSxcblx0XHRbJ0xDJywgJ0Nhc2VkX0xldHRlciddLFxuXHRcdFsnTGwnLCAnTG93ZXJjYXNlX0xldHRlciddLFxuXHRcdFsnTG0nLCAnTW9kaWZpZXJfTGV0dGVyJ10sXG5cdFx0WydMbycsICdPdGhlcl9MZXR0ZXInXSxcblx0XHRbJ0x0JywgJ1RpdGxlY2FzZV9MZXR0ZXInXSxcblx0XHRbJ0x1JywgJ1VwcGVyY2FzZV9MZXR0ZXInXSxcblx0XHRbJ00nLCAnTWFyayddLFxuXHRcdFsnQ29tYmluaW5nX01hcmsnLCAnTWFyayddLFxuXHRcdFsnTWMnLCAnU3BhY2luZ19NYXJrJ10sXG5cdFx0WydNZScsICdFbmNsb3NpbmdfTWFyayddLFxuXHRcdFsnTW4nLCAnTm9uc3BhY2luZ19NYXJrJ10sXG5cdFx0WydOJywgJ051bWJlciddLFxuXHRcdFsnTmQnLCAnRGVjaW1hbF9OdW1iZXInXSxcblx0XHRbJ2RpZ2l0JywgJ0RlY2ltYWxfTnVtYmVyJ10sXG5cdFx0WydObCcsICdMZXR0ZXJfTnVtYmVyJ10sXG5cdFx0WydObycsICdPdGhlcl9OdW1iZXInXSxcblx0XHRbJ1AnLCAnUHVuY3R1YXRpb24nXSxcblx0XHRbJ3B1bmN0JywgJ1B1bmN0dWF0aW9uJ10sXG5cdFx0WydQYycsICdDb25uZWN0b3JfUHVuY3R1YXRpb24nXSxcblx0XHRbJ1BkJywgJ0Rhc2hfUHVuY3R1YXRpb24nXSxcblx0XHRbJ1BlJywgJ0Nsb3NlX1B1bmN0dWF0aW9uJ10sXG5cdFx0WydQZicsICdGaW5hbF9QdW5jdHVhdGlvbiddLFxuXHRcdFsnUGknLCAnSW5pdGlhbF9QdW5jdHVhdGlvbiddLFxuXHRcdFsnUG8nLCAnT3RoZXJfUHVuY3R1YXRpb24nXSxcblx0XHRbJ1BzJywgJ09wZW5fUHVuY3R1YXRpb24nXSxcblx0XHRbJ1MnLCAnU3ltYm9sJ10sXG5cdFx0WydTYycsICdDdXJyZW5jeV9TeW1ib2wnXSxcblx0XHRbJ1NrJywgJ01vZGlmaWVyX1N5bWJvbCddLFxuXHRcdFsnU20nLCAnTWF0aF9TeW1ib2wnXSxcblx0XHRbJ1NvJywgJ090aGVyX1N5bWJvbCddLFxuXHRcdFsnWicsICdTZXBhcmF0b3InXSxcblx0XHRbJ1psJywgJ0xpbmVfU2VwYXJhdG9yJ10sXG5cdFx0WydacCcsICdQYXJhZ3JhcGhfU2VwYXJhdG9yJ10sXG5cdFx0WydacycsICdTcGFjZV9TZXBhcmF0b3InXSxcblx0XHRbJ090aGVyJywgJ090aGVyJ10sXG5cdFx0WydDb250cm9sJywgJ0NvbnRyb2wnXSxcblx0XHRbJ0Zvcm1hdCcsICdGb3JtYXQnXSxcblx0XHRbJ1VuYXNzaWduZWQnLCAnVW5hc3NpZ25lZCddLFxuXHRcdFsnUHJpdmF0ZV9Vc2UnLCAnUHJpdmF0ZV9Vc2UnXSxcblx0XHRbJ1N1cnJvZ2F0ZScsICdTdXJyb2dhdGUnXSxcblx0XHRbJ0xldHRlcicsICdMZXR0ZXInXSxcblx0XHRbJ0Nhc2VkX0xldHRlcicsICdDYXNlZF9MZXR0ZXInXSxcblx0XHRbJ0xvd2VyY2FzZV9MZXR0ZXInLCAnTG93ZXJjYXNlX0xldHRlciddLFxuXHRcdFsnTW9kaWZpZXJfTGV0dGVyJywgJ01vZGlmaWVyX0xldHRlciddLFxuXHRcdFsnT3RoZXJfTGV0dGVyJywgJ090aGVyX0xldHRlciddLFxuXHRcdFsnVGl0bGVjYXNlX0xldHRlcicsICdUaXRsZWNhc2VfTGV0dGVyJ10sXG5cdFx0WydVcHBlcmNhc2VfTGV0dGVyJywgJ1VwcGVyY2FzZV9MZXR0ZXInXSxcblx0XHRbJ01hcmsnLCAnTWFyayddLFxuXHRcdFsnU3BhY2luZ19NYXJrJywgJ1NwYWNpbmdfTWFyayddLFxuXHRcdFsnRW5jbG9zaW5nX01hcmsnLCAnRW5jbG9zaW5nX01hcmsnXSxcblx0XHRbJ05vbnNwYWNpbmdfTWFyaycsICdOb25zcGFjaW5nX01hcmsnXSxcblx0XHRbJ051bWJlcicsICdOdW1iZXInXSxcblx0XHRbJ0RlY2ltYWxfTnVtYmVyJywgJ0RlY2ltYWxfTnVtYmVyJ10sXG5cdFx0WydMZXR0ZXJfTnVtYmVyJywgJ0xldHRlcl9OdW1iZXInXSxcblx0XHRbJ090aGVyX051bWJlcicsICdPdGhlcl9OdW1iZXInXSxcblx0XHRbJ1B1bmN0dWF0aW9uJywgJ1B1bmN0dWF0aW9uJ10sXG5cdFx0WydDb25uZWN0b3JfUHVuY3R1YXRpb24nLCAnQ29ubmVjdG9yX1B1bmN0dWF0aW9uJ10sXG5cdFx0WydEYXNoX1B1bmN0dWF0aW9uJywgJ0Rhc2hfUHVuY3R1YXRpb24nXSxcblx0XHRbJ0Nsb3NlX1B1bmN0dWF0aW9uJywgJ0Nsb3NlX1B1bmN0dWF0aW9uJ10sXG5cdFx0WydGaW5hbF9QdW5jdHVhdGlvbicsICdGaW5hbF9QdW5jdHVhdGlvbiddLFxuXHRcdFsnSW5pdGlhbF9QdW5jdHVhdGlvbicsICdJbml0aWFsX1B1bmN0dWF0aW9uJ10sXG5cdFx0WydPdGhlcl9QdW5jdHVhdGlvbicsICdPdGhlcl9QdW5jdHVhdGlvbiddLFxuXHRcdFsnT3Blbl9QdW5jdHVhdGlvbicsICdPcGVuX1B1bmN0dWF0aW9uJ10sXG5cdFx0WydTeW1ib2wnLCAnU3ltYm9sJ10sXG5cdFx0WydDdXJyZW5jeV9TeW1ib2wnLCAnQ3VycmVuY3lfU3ltYm9sJ10sXG5cdFx0WydNb2RpZmllcl9TeW1ib2wnLCAnTW9kaWZpZXJfU3ltYm9sJ10sXG5cdFx0WydNYXRoX1N5bWJvbCcsICdNYXRoX1N5bWJvbCddLFxuXHRcdFsnT3RoZXJfU3ltYm9sJywgJ090aGVyX1N5bWJvbCddLFxuXHRcdFsnU2VwYXJhdG9yJywgJ1NlcGFyYXRvciddLFxuXHRcdFsnTGluZV9TZXBhcmF0b3InLCAnTGluZV9TZXBhcmF0b3InXSxcblx0XHRbJ1BhcmFncmFwaF9TZXBhcmF0b3InLCAnUGFyYWdyYXBoX1NlcGFyYXRvciddLFxuXHRcdFsnU3BhY2VfU2VwYXJhdG9yJywgJ1NwYWNlX1NlcGFyYXRvciddXG5cdF0pXSxcblx0WydTY3JpcHQnLCBuZXcgTWFwKFtcblx0XHRbJ0FkbG0nLCAnQWRsYW0nXSxcblx0XHRbJ0FnaGInLCAnQ2F1Y2FzaWFuX0FsYmFuaWFuJ10sXG5cdFx0WydBaG9tJywgJ0Fob20nXSxcblx0XHRbJ0FyYWInLCAnQXJhYmljJ10sXG5cdFx0WydBcm1pJywgJ0ltcGVyaWFsX0FyYW1haWMnXSxcblx0XHRbJ0FybW4nLCAnQXJtZW5pYW4nXSxcblx0XHRbJ0F2c3QnLCAnQXZlc3RhbiddLFxuXHRcdFsnQmFsaScsICdCYWxpbmVzZSddLFxuXHRcdFsnQmFtdScsICdCYW11bSddLFxuXHRcdFsnQmFzcycsICdCYXNzYV9WYWgnXSxcblx0XHRbJ0JhdGsnLCAnQmF0YWsnXSxcblx0XHRbJ0JlbmcnLCAnQmVuZ2FsaSddLFxuXHRcdFsnQmhrcycsICdCaGFpa3N1a2knXSxcblx0XHRbJ0JvcG8nLCAnQm9wb21vZm8nXSxcblx0XHRbJ0JyYWgnLCAnQnJhaG1pJ10sXG5cdFx0WydCcmFpJywgJ0JyYWlsbGUnXSxcblx0XHRbJ0J1Z2knLCAnQnVnaW5lc2UnXSxcblx0XHRbJ0J1aGQnLCAnQnVoaWQnXSxcblx0XHRbJ0Nha20nLCAnQ2hha21hJ10sXG5cdFx0WydDYW5zJywgJ0NhbmFkaWFuX0Fib3JpZ2luYWwnXSxcblx0XHRbJ0NhcmknLCAnQ2FyaWFuJ10sXG5cdFx0WydDaGFtJywgJ0NoYW0nXSxcblx0XHRbJ0NoZXInLCAnQ2hlcm9rZWUnXSxcblx0XHRbJ0NvcHQnLCAnQ29wdGljJ10sXG5cdFx0WydRYWFjJywgJ0NvcHRpYyddLFxuXHRcdFsnQ3BydCcsICdDeXByaW90J10sXG5cdFx0WydDeXJsJywgJ0N5cmlsbGljJ10sXG5cdFx0WydEZXZhJywgJ0RldmFuYWdhcmknXSxcblx0XHRbJ0RzcnQnLCAnRGVzZXJldCddLFxuXHRcdFsnRHVwbCcsICdEdXBsb3lhbiddLFxuXHRcdFsnRWd5cCcsICdFZ3lwdGlhbl9IaWVyb2dseXBocyddLFxuXHRcdFsnRWxiYScsICdFbGJhc2FuJ10sXG5cdFx0WydFdGhpJywgJ0V0aGlvcGljJ10sXG5cdFx0WydHZW9yJywgJ0dlb3JnaWFuJ10sXG5cdFx0WydHbGFnJywgJ0dsYWdvbGl0aWMnXSxcblx0XHRbJ0dvbm0nLCAnTWFzYXJhbV9Hb25kaSddLFxuXHRcdFsnR290aCcsICdHb3RoaWMnXSxcblx0XHRbJ0dyYW4nLCAnR3JhbnRoYSddLFxuXHRcdFsnR3JlaycsICdHcmVlayddLFxuXHRcdFsnR3VqcicsICdHdWphcmF0aSddLFxuXHRcdFsnR3VydScsICdHdXJtdWtoaSddLFxuXHRcdFsnSGFuZycsICdIYW5ndWwnXSxcblx0XHRbJ0hhbmknLCAnSGFuJ10sXG5cdFx0WydIYW5vJywgJ0hhbnVub28nXSxcblx0XHRbJ0hhdHInLCAnSGF0cmFuJ10sXG5cdFx0WydIZWJyJywgJ0hlYnJldyddLFxuXHRcdFsnSGlyYScsICdIaXJhZ2FuYSddLFxuXHRcdFsnSGx1dycsICdBbmF0b2xpYW5fSGllcm9nbHlwaHMnXSxcblx0XHRbJ0htbmcnLCAnUGFoYXdoX0htb25nJ10sXG5cdFx0WydIcmt0JywgJ0thdGFrYW5hX09yX0hpcmFnYW5hJ10sXG5cdFx0WydIdW5nJywgJ09sZF9IdW5nYXJpYW4nXSxcblx0XHRbJ0l0YWwnLCAnT2xkX0l0YWxpYyddLFxuXHRcdFsnSmF2YScsICdKYXZhbmVzZSddLFxuXHRcdFsnS2FsaScsICdLYXlhaF9MaSddLFxuXHRcdFsnS2FuYScsICdLYXRha2FuYSddLFxuXHRcdFsnS2hhcicsICdLaGFyb3NodGhpJ10sXG5cdFx0WydLaG1yJywgJ0tobWVyJ10sXG5cdFx0WydLaG9qJywgJ0tob2praSddLFxuXHRcdFsnS25kYScsICdLYW5uYWRhJ10sXG5cdFx0WydLdGhpJywgJ0thaXRoaSddLFxuXHRcdFsnTGFuYScsICdUYWlfVGhhbSddLFxuXHRcdFsnTGFvbycsICdMYW8nXSxcblx0XHRbJ0xhdG4nLCAnTGF0aW4nXSxcblx0XHRbJ0xlcGMnLCAnTGVwY2hhJ10sXG5cdFx0WydMaW1iJywgJ0xpbWJ1J10sXG5cdFx0WydMaW5hJywgJ0xpbmVhcl9BJ10sXG5cdFx0WydMaW5iJywgJ0xpbmVhcl9CJ10sXG5cdFx0WydMaXN1JywgJ0xpc3UnXSxcblx0XHRbJ0x5Y2knLCAnTHljaWFuJ10sXG5cdFx0WydMeWRpJywgJ0x5ZGlhbiddLFxuXHRcdFsnTWFoaicsICdNYWhhamFuaSddLFxuXHRcdFsnTWFuZCcsICdNYW5kYWljJ10sXG5cdFx0WydNYW5pJywgJ01hbmljaGFlYW4nXSxcblx0XHRbJ01hcmMnLCAnTWFyY2hlbiddLFxuXHRcdFsnTWVuZCcsICdNZW5kZV9LaWtha3VpJ10sXG5cdFx0WydNZXJjJywgJ01lcm9pdGljX0N1cnNpdmUnXSxcblx0XHRbJ01lcm8nLCAnTWVyb2l0aWNfSGllcm9nbHlwaHMnXSxcblx0XHRbJ01seW0nLCAnTWFsYXlhbGFtJ10sXG5cdFx0WydNb2RpJywgJ01vZGknXSxcblx0XHRbJ01vbmcnLCAnTW9uZ29saWFuJ10sXG5cdFx0WydNcm9vJywgJ01ybyddLFxuXHRcdFsnTXRlaScsICdNZWV0ZWlfTWF5ZWsnXSxcblx0XHRbJ011bHQnLCAnTXVsdGFuaSddLFxuXHRcdFsnTXltcicsICdNeWFubWFyJ10sXG5cdFx0WydOYXJiJywgJ09sZF9Ob3J0aF9BcmFiaWFuJ10sXG5cdFx0WydOYmF0JywgJ05hYmF0YWVhbiddLFxuXHRcdFsnTmV3YScsICdOZXdhJ10sXG5cdFx0WydOa29vJywgJ05rbyddLFxuXHRcdFsnTnNodScsICdOdXNodSddLFxuXHRcdFsnT2dhbScsICdPZ2hhbSddLFxuXHRcdFsnT2xjaycsICdPbF9DaGlraSddLFxuXHRcdFsnT3JraCcsICdPbGRfVHVya2ljJ10sXG5cdFx0WydPcnlhJywgJ09yaXlhJ10sXG5cdFx0WydPc2dlJywgJ09zYWdlJ10sXG5cdFx0WydPc21hJywgJ09zbWFueWEnXSxcblx0XHRbJ1BhbG0nLCAnUGFsbXlyZW5lJ10sXG5cdFx0WydQYXVjJywgJ1BhdV9DaW5fSGF1J10sXG5cdFx0WydQZXJtJywgJ09sZF9QZXJtaWMnXSxcblx0XHRbJ1BoYWcnLCAnUGhhZ3NfUGEnXSxcblx0XHRbJ1BobGknLCAnSW5zY3JpcHRpb25hbF9QYWhsYXZpJ10sXG5cdFx0WydQaGxwJywgJ1BzYWx0ZXJfUGFobGF2aSddLFxuXHRcdFsnUGhueCcsICdQaG9lbmljaWFuJ10sXG5cdFx0WydQbHJkJywgJ01pYW8nXSxcblx0XHRbJ1BydGknLCAnSW5zY3JpcHRpb25hbF9QYXJ0aGlhbiddLFxuXHRcdFsnUmpuZycsICdSZWphbmcnXSxcblx0XHRbJ1J1bnInLCAnUnVuaWMnXSxcblx0XHRbJ1NhbXInLCAnU2FtYXJpdGFuJ10sXG5cdFx0WydTYXJiJywgJ09sZF9Tb3V0aF9BcmFiaWFuJ10sXG5cdFx0WydTYXVyJywgJ1NhdXJhc2h0cmEnXSxcblx0XHRbJ1NnbncnLCAnU2lnbldyaXRpbmcnXSxcblx0XHRbJ1NoYXcnLCAnU2hhdmlhbiddLFxuXHRcdFsnU2hyZCcsICdTaGFyYWRhJ10sXG5cdFx0WydTaWRkJywgJ1NpZGRoYW0nXSxcblx0XHRbJ1NpbmQnLCAnS2h1ZGF3YWRpJ10sXG5cdFx0WydTaW5oJywgJ1NpbmhhbGEnXSxcblx0XHRbJ1NvcmEnLCAnU29yYV9Tb21wZW5nJ10sXG5cdFx0WydTb3lvJywgJ1NveW9tYm8nXSxcblx0XHRbJ1N1bmQnLCAnU3VuZGFuZXNlJ10sXG5cdFx0WydTeWxvJywgJ1N5bG90aV9OYWdyaSddLFxuXHRcdFsnU3lyYycsICdTeXJpYWMnXSxcblx0XHRbJ1RhZ2InLCAnVGFnYmFud2EnXSxcblx0XHRbJ1Rha3InLCAnVGFrcmknXSxcblx0XHRbJ1RhbGUnLCAnVGFpX0xlJ10sXG5cdFx0WydUYWx1JywgJ05ld19UYWlfTHVlJ10sXG5cdFx0WydUYW1sJywgJ1RhbWlsJ10sXG5cdFx0WydUYW5nJywgJ1Rhbmd1dCddLFxuXHRcdFsnVGF2dCcsICdUYWlfVmlldCddLFxuXHRcdFsnVGVsdScsICdUZWx1Z3UnXSxcblx0XHRbJ1RmbmcnLCAnVGlmaW5hZ2gnXSxcblx0XHRbJ1RnbGcnLCAnVGFnYWxvZyddLFxuXHRcdFsnVGhhYScsICdUaGFhbmEnXSxcblx0XHRbJ1RoYWknLCAnVGhhaSddLFxuXHRcdFsnVGlidCcsICdUaWJldGFuJ10sXG5cdFx0WydUaXJoJywgJ1Rpcmh1dGEnXSxcblx0XHRbJ1VnYXInLCAnVWdhcml0aWMnXSxcblx0XHRbJ1ZhaWknLCAnVmFpJ10sXG5cdFx0WydXYXJhJywgJ1dhcmFuZ19DaXRpJ10sXG5cdFx0WydYcGVvJywgJ09sZF9QZXJzaWFuJ10sXG5cdFx0WydYc3V4JywgJ0N1bmVpZm9ybSddLFxuXHRcdFsnWWlpaScsICdZaSddLFxuXHRcdFsnWmFuYicsICdaYW5hYmF6YXJfU3F1YXJlJ10sXG5cdFx0WydaaW5oJywgJ0luaGVyaXRlZCddLFxuXHRcdFsnUWFhaScsICdJbmhlcml0ZWQnXSxcblx0XHRbJ1p5eXknLCAnQ29tbW9uJ10sXG5cdFx0Wydaenp6JywgJ1Vua25vd24nXSxcblx0XHRbJ0FkbGFtJywgJ0FkbGFtJ10sXG5cdFx0WydDYXVjYXNpYW5fQWxiYW5pYW4nLCAnQ2F1Y2FzaWFuX0FsYmFuaWFuJ10sXG5cdFx0WydBcmFiaWMnLCAnQXJhYmljJ10sXG5cdFx0WydJbXBlcmlhbF9BcmFtYWljJywgJ0ltcGVyaWFsX0FyYW1haWMnXSxcblx0XHRbJ0FybWVuaWFuJywgJ0FybWVuaWFuJ10sXG5cdFx0WydBdmVzdGFuJywgJ0F2ZXN0YW4nXSxcblx0XHRbJ0JhbGluZXNlJywgJ0JhbGluZXNlJ10sXG5cdFx0WydCYW11bScsICdCYW11bSddLFxuXHRcdFsnQmFzc2FfVmFoJywgJ0Jhc3NhX1ZhaCddLFxuXHRcdFsnQmF0YWsnLCAnQmF0YWsnXSxcblx0XHRbJ0JlbmdhbGknLCAnQmVuZ2FsaSddLFxuXHRcdFsnQmhhaWtzdWtpJywgJ0JoYWlrc3VraSddLFxuXHRcdFsnQm9wb21vZm8nLCAnQm9wb21vZm8nXSxcblx0XHRbJ0JyYWhtaScsICdCcmFobWknXSxcblx0XHRbJ0JyYWlsbGUnLCAnQnJhaWxsZSddLFxuXHRcdFsnQnVnaW5lc2UnLCAnQnVnaW5lc2UnXSxcblx0XHRbJ0J1aGlkJywgJ0J1aGlkJ10sXG5cdFx0WydDaGFrbWEnLCAnQ2hha21hJ10sXG5cdFx0WydDYW5hZGlhbl9BYm9yaWdpbmFsJywgJ0NhbmFkaWFuX0Fib3JpZ2luYWwnXSxcblx0XHRbJ0NhcmlhbicsICdDYXJpYW4nXSxcblx0XHRbJ0NoZXJva2VlJywgJ0NoZXJva2VlJ10sXG5cdFx0WydDb3B0aWMnLCAnQ29wdGljJ10sXG5cdFx0WydDeXByaW90JywgJ0N5cHJpb3QnXSxcblx0XHRbJ0N5cmlsbGljJywgJ0N5cmlsbGljJ10sXG5cdFx0WydEZXZhbmFnYXJpJywgJ0RldmFuYWdhcmknXSxcblx0XHRbJ0Rlc2VyZXQnLCAnRGVzZXJldCddLFxuXHRcdFsnRHVwbG95YW4nLCAnRHVwbG95YW4nXSxcblx0XHRbJ0VneXB0aWFuX0hpZXJvZ2x5cGhzJywgJ0VneXB0aWFuX0hpZXJvZ2x5cGhzJ10sXG5cdFx0WydFbGJhc2FuJywgJ0VsYmFzYW4nXSxcblx0XHRbJ0V0aGlvcGljJywgJ0V0aGlvcGljJ10sXG5cdFx0WydHZW9yZ2lhbicsICdHZW9yZ2lhbiddLFxuXHRcdFsnR2xhZ29saXRpYycsICdHbGFnb2xpdGljJ10sXG5cdFx0WydNYXNhcmFtX0dvbmRpJywgJ01hc2FyYW1fR29uZGknXSxcblx0XHRbJ0dvdGhpYycsICdHb3RoaWMnXSxcblx0XHRbJ0dyYW50aGEnLCAnR3JhbnRoYSddLFxuXHRcdFsnR3JlZWsnLCAnR3JlZWsnXSxcblx0XHRbJ0d1amFyYXRpJywgJ0d1amFyYXRpJ10sXG5cdFx0WydHdXJtdWtoaScsICdHdXJtdWtoaSddLFxuXHRcdFsnSGFuZ3VsJywgJ0hhbmd1bCddLFxuXHRcdFsnSGFuJywgJ0hhbiddLFxuXHRcdFsnSGFudW5vbycsICdIYW51bm9vJ10sXG5cdFx0WydIYXRyYW4nLCAnSGF0cmFuJ10sXG5cdFx0WydIZWJyZXcnLCAnSGVicmV3J10sXG5cdFx0WydIaXJhZ2FuYScsICdIaXJhZ2FuYSddLFxuXHRcdFsnQW5hdG9saWFuX0hpZXJvZ2x5cGhzJywgJ0FuYXRvbGlhbl9IaWVyb2dseXBocyddLFxuXHRcdFsnUGFoYXdoX0htb25nJywgJ1BhaGF3aF9IbW9uZyddLFxuXHRcdFsnS2F0YWthbmFfT3JfSGlyYWdhbmEnLCAnS2F0YWthbmFfT3JfSGlyYWdhbmEnXSxcblx0XHRbJ09sZF9IdW5nYXJpYW4nLCAnT2xkX0h1bmdhcmlhbiddLFxuXHRcdFsnT2xkX0l0YWxpYycsICdPbGRfSXRhbGljJ10sXG5cdFx0WydKYXZhbmVzZScsICdKYXZhbmVzZSddLFxuXHRcdFsnS2F5YWhfTGknLCAnS2F5YWhfTGknXSxcblx0XHRbJ0thdGFrYW5hJywgJ0thdGFrYW5hJ10sXG5cdFx0WydLaGFyb3NodGhpJywgJ0toYXJvc2h0aGknXSxcblx0XHRbJ0tobWVyJywgJ0tobWVyJ10sXG5cdFx0WydLaG9qa2knLCAnS2hvamtpJ10sXG5cdFx0WydLYW5uYWRhJywgJ0thbm5hZGEnXSxcblx0XHRbJ0thaXRoaScsICdLYWl0aGknXSxcblx0XHRbJ1RhaV9UaGFtJywgJ1RhaV9UaGFtJ10sXG5cdFx0WydMYW8nLCAnTGFvJ10sXG5cdFx0WydMYXRpbicsICdMYXRpbiddLFxuXHRcdFsnTGVwY2hhJywgJ0xlcGNoYSddLFxuXHRcdFsnTGltYnUnLCAnTGltYnUnXSxcblx0XHRbJ0xpbmVhcl9BJywgJ0xpbmVhcl9BJ10sXG5cdFx0WydMaW5lYXJfQicsICdMaW5lYXJfQiddLFxuXHRcdFsnTHljaWFuJywgJ0x5Y2lhbiddLFxuXHRcdFsnTHlkaWFuJywgJ0x5ZGlhbiddLFxuXHRcdFsnTWFoYWphbmknLCAnTWFoYWphbmknXSxcblx0XHRbJ01hbmRhaWMnLCAnTWFuZGFpYyddLFxuXHRcdFsnTWFuaWNoYWVhbicsICdNYW5pY2hhZWFuJ10sXG5cdFx0WydNYXJjaGVuJywgJ01hcmNoZW4nXSxcblx0XHRbJ01lbmRlX0tpa2FrdWknLCAnTWVuZGVfS2lrYWt1aSddLFxuXHRcdFsnTWVyb2l0aWNfQ3Vyc2l2ZScsICdNZXJvaXRpY19DdXJzaXZlJ10sXG5cdFx0WydNZXJvaXRpY19IaWVyb2dseXBocycsICdNZXJvaXRpY19IaWVyb2dseXBocyddLFxuXHRcdFsnTWFsYXlhbGFtJywgJ01hbGF5YWxhbSddLFxuXHRcdFsnTW9uZ29saWFuJywgJ01vbmdvbGlhbiddLFxuXHRcdFsnTXJvJywgJ01ybyddLFxuXHRcdFsnTWVldGVpX01heWVrJywgJ01lZXRlaV9NYXllayddLFxuXHRcdFsnTXVsdGFuaScsICdNdWx0YW5pJ10sXG5cdFx0WydNeWFubWFyJywgJ015YW5tYXInXSxcblx0XHRbJ09sZF9Ob3J0aF9BcmFiaWFuJywgJ09sZF9Ob3J0aF9BcmFiaWFuJ10sXG5cdFx0WydOYWJhdGFlYW4nLCAnTmFiYXRhZWFuJ10sXG5cdFx0WydOa28nLCAnTmtvJ10sXG5cdFx0WydOdXNodScsICdOdXNodSddLFxuXHRcdFsnT2doYW0nLCAnT2doYW0nXSxcblx0XHRbJ09sX0NoaWtpJywgJ09sX0NoaWtpJ10sXG5cdFx0WydPbGRfVHVya2ljJywgJ09sZF9UdXJraWMnXSxcblx0XHRbJ09yaXlhJywgJ09yaXlhJ10sXG5cdFx0WydPc2FnZScsICdPc2FnZSddLFxuXHRcdFsnT3NtYW55YScsICdPc21hbnlhJ10sXG5cdFx0WydQYWxteXJlbmUnLCAnUGFsbXlyZW5lJ10sXG5cdFx0WydQYXVfQ2luX0hhdScsICdQYXVfQ2luX0hhdSddLFxuXHRcdFsnT2xkX1Blcm1pYycsICdPbGRfUGVybWljJ10sXG5cdFx0WydQaGFnc19QYScsICdQaGFnc19QYSddLFxuXHRcdFsnSW5zY3JpcHRpb25hbF9QYWhsYXZpJywgJ0luc2NyaXB0aW9uYWxfUGFobGF2aSddLFxuXHRcdFsnUHNhbHRlcl9QYWhsYXZpJywgJ1BzYWx0ZXJfUGFobGF2aSddLFxuXHRcdFsnUGhvZW5pY2lhbicsICdQaG9lbmljaWFuJ10sXG5cdFx0WydNaWFvJywgJ01pYW8nXSxcblx0XHRbJ0luc2NyaXB0aW9uYWxfUGFydGhpYW4nLCAnSW5zY3JpcHRpb25hbF9QYXJ0aGlhbiddLFxuXHRcdFsnUmVqYW5nJywgJ1JlamFuZyddLFxuXHRcdFsnUnVuaWMnLCAnUnVuaWMnXSxcblx0XHRbJ1NhbWFyaXRhbicsICdTYW1hcml0YW4nXSxcblx0XHRbJ09sZF9Tb3V0aF9BcmFiaWFuJywgJ09sZF9Tb3V0aF9BcmFiaWFuJ10sXG5cdFx0WydTYXVyYXNodHJhJywgJ1NhdXJhc2h0cmEnXSxcblx0XHRbJ1NpZ25Xcml0aW5nJywgJ1NpZ25Xcml0aW5nJ10sXG5cdFx0WydTaGF2aWFuJywgJ1NoYXZpYW4nXSxcblx0XHRbJ1NoYXJhZGEnLCAnU2hhcmFkYSddLFxuXHRcdFsnU2lkZGhhbScsICdTaWRkaGFtJ10sXG5cdFx0WydLaHVkYXdhZGknLCAnS2h1ZGF3YWRpJ10sXG5cdFx0WydTaW5oYWxhJywgJ1NpbmhhbGEnXSxcblx0XHRbJ1NvcmFfU29tcGVuZycsICdTb3JhX1NvbXBlbmcnXSxcblx0XHRbJ1NveW9tYm8nLCAnU295b21ibyddLFxuXHRcdFsnU3VuZGFuZXNlJywgJ1N1bmRhbmVzZSddLFxuXHRcdFsnU3lsb3RpX05hZ3JpJywgJ1N5bG90aV9OYWdyaSddLFxuXHRcdFsnU3lyaWFjJywgJ1N5cmlhYyddLFxuXHRcdFsnVGFnYmFud2EnLCAnVGFnYmFud2EnXSxcblx0XHRbJ1Rha3JpJywgJ1Rha3JpJ10sXG5cdFx0WydUYWlfTGUnLCAnVGFpX0xlJ10sXG5cdFx0WydOZXdfVGFpX0x1ZScsICdOZXdfVGFpX0x1ZSddLFxuXHRcdFsnVGFtaWwnLCAnVGFtaWwnXSxcblx0XHRbJ1Rhbmd1dCcsICdUYW5ndXQnXSxcblx0XHRbJ1RhaV9WaWV0JywgJ1RhaV9WaWV0J10sXG5cdFx0WydUZWx1Z3UnLCAnVGVsdWd1J10sXG5cdFx0WydUaWZpbmFnaCcsICdUaWZpbmFnaCddLFxuXHRcdFsnVGFnYWxvZycsICdUYWdhbG9nJ10sXG5cdFx0WydUaGFhbmEnLCAnVGhhYW5hJ10sXG5cdFx0WydUaWJldGFuJywgJ1RpYmV0YW4nXSxcblx0XHRbJ1Rpcmh1dGEnLCAnVGlyaHV0YSddLFxuXHRcdFsnVWdhcml0aWMnLCAnVWdhcml0aWMnXSxcblx0XHRbJ1ZhaScsICdWYWknXSxcblx0XHRbJ1dhcmFuZ19DaXRpJywgJ1dhcmFuZ19DaXRpJ10sXG5cdFx0WydPbGRfUGVyc2lhbicsICdPbGRfUGVyc2lhbiddLFxuXHRcdFsnQ3VuZWlmb3JtJywgJ0N1bmVpZm9ybSddLFxuXHRcdFsnWWknLCAnWWknXSxcblx0XHRbJ1phbmFiYXphcl9TcXVhcmUnLCAnWmFuYWJhemFyX1NxdWFyZSddLFxuXHRcdFsnSW5oZXJpdGVkJywgJ0luaGVyaXRlZCddLFxuXHRcdFsnQ29tbW9uJywgJ0NvbW1vbiddLFxuXHRcdFsnVW5rbm93bicsICdVbmtub3duJ11cblx0XSldLFxuXHRbJ1NjcmlwdF9FeHRlbnNpb25zJywgbmV3IE1hcChbXG5cdFx0WydBZGxtJywgJ0FkbGFtJ10sXG5cdFx0WydBZ2hiJywgJ0NhdWNhc2lhbl9BbGJhbmlhbiddLFxuXHRcdFsnQWhvbScsICdBaG9tJ10sXG5cdFx0WydBcmFiJywgJ0FyYWJpYyddLFxuXHRcdFsnQXJtaScsICdJbXBlcmlhbF9BcmFtYWljJ10sXG5cdFx0WydBcm1uJywgJ0FybWVuaWFuJ10sXG5cdFx0WydBdnN0JywgJ0F2ZXN0YW4nXSxcblx0XHRbJ0JhbGknLCAnQmFsaW5lc2UnXSxcblx0XHRbJ0JhbXUnLCAnQmFtdW0nXSxcblx0XHRbJ0Jhc3MnLCAnQmFzc2FfVmFoJ10sXG5cdFx0WydCYXRrJywgJ0JhdGFrJ10sXG5cdFx0WydCZW5nJywgJ0JlbmdhbGknXSxcblx0XHRbJ0Joa3MnLCAnQmhhaWtzdWtpJ10sXG5cdFx0WydCb3BvJywgJ0JvcG9tb2ZvJ10sXG5cdFx0WydCcmFoJywgJ0JyYWhtaSddLFxuXHRcdFsnQnJhaScsICdCcmFpbGxlJ10sXG5cdFx0WydCdWdpJywgJ0J1Z2luZXNlJ10sXG5cdFx0WydCdWhkJywgJ0J1aGlkJ10sXG5cdFx0WydDYWttJywgJ0NoYWttYSddLFxuXHRcdFsnQ2FucycsICdDYW5hZGlhbl9BYm9yaWdpbmFsJ10sXG5cdFx0WydDYXJpJywgJ0NhcmlhbiddLFxuXHRcdFsnQ2hhbScsICdDaGFtJ10sXG5cdFx0WydDaGVyJywgJ0NoZXJva2VlJ10sXG5cdFx0WydDb3B0JywgJ0NvcHRpYyddLFxuXHRcdFsnUWFhYycsICdDb3B0aWMnXSxcblx0XHRbJ0NwcnQnLCAnQ3lwcmlvdCddLFxuXHRcdFsnQ3lybCcsICdDeXJpbGxpYyddLFxuXHRcdFsnRGV2YScsICdEZXZhbmFnYXJpJ10sXG5cdFx0WydEc3J0JywgJ0Rlc2VyZXQnXSxcblx0XHRbJ0R1cGwnLCAnRHVwbG95YW4nXSxcblx0XHRbJ0VneXAnLCAnRWd5cHRpYW5fSGllcm9nbHlwaHMnXSxcblx0XHRbJ0VsYmEnLCAnRWxiYXNhbiddLFxuXHRcdFsnRXRoaScsICdFdGhpb3BpYyddLFxuXHRcdFsnR2VvcicsICdHZW9yZ2lhbiddLFxuXHRcdFsnR2xhZycsICdHbGFnb2xpdGljJ10sXG5cdFx0WydHb25tJywgJ01hc2FyYW1fR29uZGknXSxcblx0XHRbJ0dvdGgnLCAnR290aGljJ10sXG5cdFx0WydHcmFuJywgJ0dyYW50aGEnXSxcblx0XHRbJ0dyZWsnLCAnR3JlZWsnXSxcblx0XHRbJ0d1anInLCAnR3VqYXJhdGknXSxcblx0XHRbJ0d1cnUnLCAnR3VybXVraGknXSxcblx0XHRbJ0hhbmcnLCAnSGFuZ3VsJ10sXG5cdFx0WydIYW5pJywgJ0hhbiddLFxuXHRcdFsnSGFubycsICdIYW51bm9vJ10sXG5cdFx0WydIYXRyJywgJ0hhdHJhbiddLFxuXHRcdFsnSGVicicsICdIZWJyZXcnXSxcblx0XHRbJ0hpcmEnLCAnSGlyYWdhbmEnXSxcblx0XHRbJ0hsdXcnLCAnQW5hdG9saWFuX0hpZXJvZ2x5cGhzJ10sXG5cdFx0WydIbW5nJywgJ1BhaGF3aF9IbW9uZyddLFxuXHRcdFsnSHJrdCcsICdLYXRha2FuYV9Pcl9IaXJhZ2FuYSddLFxuXHRcdFsnSHVuZycsICdPbGRfSHVuZ2FyaWFuJ10sXG5cdFx0WydJdGFsJywgJ09sZF9JdGFsaWMnXSxcblx0XHRbJ0phdmEnLCAnSmF2YW5lc2UnXSxcblx0XHRbJ0thbGknLCAnS2F5YWhfTGknXSxcblx0XHRbJ0thbmEnLCAnS2F0YWthbmEnXSxcblx0XHRbJ0toYXInLCAnS2hhcm9zaHRoaSddLFxuXHRcdFsnS2htcicsICdLaG1lciddLFxuXHRcdFsnS2hvaicsICdLaG9qa2knXSxcblx0XHRbJ0tuZGEnLCAnS2FubmFkYSddLFxuXHRcdFsnS3RoaScsICdLYWl0aGknXSxcblx0XHRbJ0xhbmEnLCAnVGFpX1RoYW0nXSxcblx0XHRbJ0xhb28nLCAnTGFvJ10sXG5cdFx0WydMYXRuJywgJ0xhdGluJ10sXG5cdFx0WydMZXBjJywgJ0xlcGNoYSddLFxuXHRcdFsnTGltYicsICdMaW1idSddLFxuXHRcdFsnTGluYScsICdMaW5lYXJfQSddLFxuXHRcdFsnTGluYicsICdMaW5lYXJfQiddLFxuXHRcdFsnTGlzdScsICdMaXN1J10sXG5cdFx0WydMeWNpJywgJ0x5Y2lhbiddLFxuXHRcdFsnTHlkaScsICdMeWRpYW4nXSxcblx0XHRbJ01haGonLCAnTWFoYWphbmknXSxcblx0XHRbJ01hbmQnLCAnTWFuZGFpYyddLFxuXHRcdFsnTWFuaScsICdNYW5pY2hhZWFuJ10sXG5cdFx0WydNYXJjJywgJ01hcmNoZW4nXSxcblx0XHRbJ01lbmQnLCAnTWVuZGVfS2lrYWt1aSddLFxuXHRcdFsnTWVyYycsICdNZXJvaXRpY19DdXJzaXZlJ10sXG5cdFx0WydNZXJvJywgJ01lcm9pdGljX0hpZXJvZ2x5cGhzJ10sXG5cdFx0WydNbHltJywgJ01hbGF5YWxhbSddLFxuXHRcdFsnTW9kaScsICdNb2RpJ10sXG5cdFx0WydNb25nJywgJ01vbmdvbGlhbiddLFxuXHRcdFsnTXJvbycsICdNcm8nXSxcblx0XHRbJ010ZWknLCAnTWVldGVpX01heWVrJ10sXG5cdFx0WydNdWx0JywgJ011bHRhbmknXSxcblx0XHRbJ015bXInLCAnTXlhbm1hciddLFxuXHRcdFsnTmFyYicsICdPbGRfTm9ydGhfQXJhYmlhbiddLFxuXHRcdFsnTmJhdCcsICdOYWJhdGFlYW4nXSxcblx0XHRbJ05ld2EnLCAnTmV3YSddLFxuXHRcdFsnTmtvbycsICdOa28nXSxcblx0XHRbJ05zaHUnLCAnTnVzaHUnXSxcblx0XHRbJ09nYW0nLCAnT2doYW0nXSxcblx0XHRbJ09sY2snLCAnT2xfQ2hpa2knXSxcblx0XHRbJ09ya2gnLCAnT2xkX1R1cmtpYyddLFxuXHRcdFsnT3J5YScsICdPcml5YSddLFxuXHRcdFsnT3NnZScsICdPc2FnZSddLFxuXHRcdFsnT3NtYScsICdPc21hbnlhJ10sXG5cdFx0WydQYWxtJywgJ1BhbG15cmVuZSddLFxuXHRcdFsnUGF1YycsICdQYXVfQ2luX0hhdSddLFxuXHRcdFsnUGVybScsICdPbGRfUGVybWljJ10sXG5cdFx0WydQaGFnJywgJ1BoYWdzX1BhJ10sXG5cdFx0WydQaGxpJywgJ0luc2NyaXB0aW9uYWxfUGFobGF2aSddLFxuXHRcdFsnUGhscCcsICdQc2FsdGVyX1BhaGxhdmknXSxcblx0XHRbJ1BobngnLCAnUGhvZW5pY2lhbiddLFxuXHRcdFsnUGxyZCcsICdNaWFvJ10sXG5cdFx0WydQcnRpJywgJ0luc2NyaXB0aW9uYWxfUGFydGhpYW4nXSxcblx0XHRbJ1JqbmcnLCAnUmVqYW5nJ10sXG5cdFx0WydSdW5yJywgJ1J1bmljJ10sXG5cdFx0WydTYW1yJywgJ1NhbWFyaXRhbiddLFxuXHRcdFsnU2FyYicsICdPbGRfU291dGhfQXJhYmlhbiddLFxuXHRcdFsnU2F1cicsICdTYXVyYXNodHJhJ10sXG5cdFx0WydTZ253JywgJ1NpZ25Xcml0aW5nJ10sXG5cdFx0WydTaGF3JywgJ1NoYXZpYW4nXSxcblx0XHRbJ1NocmQnLCAnU2hhcmFkYSddLFxuXHRcdFsnU2lkZCcsICdTaWRkaGFtJ10sXG5cdFx0WydTaW5kJywgJ0todWRhd2FkaSddLFxuXHRcdFsnU2luaCcsICdTaW5oYWxhJ10sXG5cdFx0WydTb3JhJywgJ1NvcmFfU29tcGVuZyddLFxuXHRcdFsnU295bycsICdTb3lvbWJvJ10sXG5cdFx0WydTdW5kJywgJ1N1bmRhbmVzZSddLFxuXHRcdFsnU3lsbycsICdTeWxvdGlfTmFncmknXSxcblx0XHRbJ1N5cmMnLCAnU3lyaWFjJ10sXG5cdFx0WydUYWdiJywgJ1RhZ2JhbndhJ10sXG5cdFx0WydUYWtyJywgJ1Rha3JpJ10sXG5cdFx0WydUYWxlJywgJ1RhaV9MZSddLFxuXHRcdFsnVGFsdScsICdOZXdfVGFpX0x1ZSddLFxuXHRcdFsnVGFtbCcsICdUYW1pbCddLFxuXHRcdFsnVGFuZycsICdUYW5ndXQnXSxcblx0XHRbJ1RhdnQnLCAnVGFpX1ZpZXQnXSxcblx0XHRbJ1RlbHUnLCAnVGVsdWd1J10sXG5cdFx0WydUZm5nJywgJ1RpZmluYWdoJ10sXG5cdFx0WydUZ2xnJywgJ1RhZ2Fsb2cnXSxcblx0XHRbJ1RoYWEnLCAnVGhhYW5hJ10sXG5cdFx0WydUaGFpJywgJ1RoYWknXSxcblx0XHRbJ1RpYnQnLCAnVGliZXRhbiddLFxuXHRcdFsnVGlyaCcsICdUaXJodXRhJ10sXG5cdFx0WydVZ2FyJywgJ1VnYXJpdGljJ10sXG5cdFx0WydWYWlpJywgJ1ZhaSddLFxuXHRcdFsnV2FyYScsICdXYXJhbmdfQ2l0aSddLFxuXHRcdFsnWHBlbycsICdPbGRfUGVyc2lhbiddLFxuXHRcdFsnWHN1eCcsICdDdW5laWZvcm0nXSxcblx0XHRbJ1lpaWknLCAnWWknXSxcblx0XHRbJ1phbmInLCAnWmFuYWJhemFyX1NxdWFyZSddLFxuXHRcdFsnWmluaCcsICdJbmhlcml0ZWQnXSxcblx0XHRbJ1FhYWknLCAnSW5oZXJpdGVkJ10sXG5cdFx0WydaeXl5JywgJ0NvbW1vbiddLFxuXHRcdFsnWnp6eicsICdVbmtub3duJ10sXG5cdFx0WydBZGxhbScsICdBZGxhbSddLFxuXHRcdFsnQ2F1Y2FzaWFuX0FsYmFuaWFuJywgJ0NhdWNhc2lhbl9BbGJhbmlhbiddLFxuXHRcdFsnQXJhYmljJywgJ0FyYWJpYyddLFxuXHRcdFsnSW1wZXJpYWxfQXJhbWFpYycsICdJbXBlcmlhbF9BcmFtYWljJ10sXG5cdFx0WydBcm1lbmlhbicsICdBcm1lbmlhbiddLFxuXHRcdFsnQXZlc3RhbicsICdBdmVzdGFuJ10sXG5cdFx0WydCYWxpbmVzZScsICdCYWxpbmVzZSddLFxuXHRcdFsnQmFtdW0nLCAnQmFtdW0nXSxcblx0XHRbJ0Jhc3NhX1ZhaCcsICdCYXNzYV9WYWgnXSxcblx0XHRbJ0JhdGFrJywgJ0JhdGFrJ10sXG5cdFx0WydCZW5nYWxpJywgJ0JlbmdhbGknXSxcblx0XHRbJ0JoYWlrc3VraScsICdCaGFpa3N1a2knXSxcblx0XHRbJ0JvcG9tb2ZvJywgJ0JvcG9tb2ZvJ10sXG5cdFx0WydCcmFobWknLCAnQnJhaG1pJ10sXG5cdFx0WydCcmFpbGxlJywgJ0JyYWlsbGUnXSxcblx0XHRbJ0J1Z2luZXNlJywgJ0J1Z2luZXNlJ10sXG5cdFx0WydCdWhpZCcsICdCdWhpZCddLFxuXHRcdFsnQ2hha21hJywgJ0NoYWttYSddLFxuXHRcdFsnQ2FuYWRpYW5fQWJvcmlnaW5hbCcsICdDYW5hZGlhbl9BYm9yaWdpbmFsJ10sXG5cdFx0WydDYXJpYW4nLCAnQ2FyaWFuJ10sXG5cdFx0WydDaGVyb2tlZScsICdDaGVyb2tlZSddLFxuXHRcdFsnQ29wdGljJywgJ0NvcHRpYyddLFxuXHRcdFsnQ3lwcmlvdCcsICdDeXByaW90J10sXG5cdFx0WydDeXJpbGxpYycsICdDeXJpbGxpYyddLFxuXHRcdFsnRGV2YW5hZ2FyaScsICdEZXZhbmFnYXJpJ10sXG5cdFx0WydEZXNlcmV0JywgJ0Rlc2VyZXQnXSxcblx0XHRbJ0R1cGxveWFuJywgJ0R1cGxveWFuJ10sXG5cdFx0WydFZ3lwdGlhbl9IaWVyb2dseXBocycsICdFZ3lwdGlhbl9IaWVyb2dseXBocyddLFxuXHRcdFsnRWxiYXNhbicsICdFbGJhc2FuJ10sXG5cdFx0WydFdGhpb3BpYycsICdFdGhpb3BpYyddLFxuXHRcdFsnR2VvcmdpYW4nLCAnR2VvcmdpYW4nXSxcblx0XHRbJ0dsYWdvbGl0aWMnLCAnR2xhZ29saXRpYyddLFxuXHRcdFsnTWFzYXJhbV9Hb25kaScsICdNYXNhcmFtX0dvbmRpJ10sXG5cdFx0WydHb3RoaWMnLCAnR290aGljJ10sXG5cdFx0WydHcmFudGhhJywgJ0dyYW50aGEnXSxcblx0XHRbJ0dyZWVrJywgJ0dyZWVrJ10sXG5cdFx0WydHdWphcmF0aScsICdHdWphcmF0aSddLFxuXHRcdFsnR3VybXVraGknLCAnR3VybXVraGknXSxcblx0XHRbJ0hhbmd1bCcsICdIYW5ndWwnXSxcblx0XHRbJ0hhbicsICdIYW4nXSxcblx0XHRbJ0hhbnVub28nLCAnSGFudW5vbyddLFxuXHRcdFsnSGF0cmFuJywgJ0hhdHJhbiddLFxuXHRcdFsnSGVicmV3JywgJ0hlYnJldyddLFxuXHRcdFsnSGlyYWdhbmEnLCAnSGlyYWdhbmEnXSxcblx0XHRbJ0FuYXRvbGlhbl9IaWVyb2dseXBocycsICdBbmF0b2xpYW5fSGllcm9nbHlwaHMnXSxcblx0XHRbJ1BhaGF3aF9IbW9uZycsICdQYWhhd2hfSG1vbmcnXSxcblx0XHRbJ0thdGFrYW5hX09yX0hpcmFnYW5hJywgJ0thdGFrYW5hX09yX0hpcmFnYW5hJ10sXG5cdFx0WydPbGRfSHVuZ2FyaWFuJywgJ09sZF9IdW5nYXJpYW4nXSxcblx0XHRbJ09sZF9JdGFsaWMnLCAnT2xkX0l0YWxpYyddLFxuXHRcdFsnSmF2YW5lc2UnLCAnSmF2YW5lc2UnXSxcblx0XHRbJ0theWFoX0xpJywgJ0theWFoX0xpJ10sXG5cdFx0WydLYXRha2FuYScsICdLYXRha2FuYSddLFxuXHRcdFsnS2hhcm9zaHRoaScsICdLaGFyb3NodGhpJ10sXG5cdFx0WydLaG1lcicsICdLaG1lciddLFxuXHRcdFsnS2hvamtpJywgJ0tob2praSddLFxuXHRcdFsnS2FubmFkYScsICdLYW5uYWRhJ10sXG5cdFx0WydLYWl0aGknLCAnS2FpdGhpJ10sXG5cdFx0WydUYWlfVGhhbScsICdUYWlfVGhhbSddLFxuXHRcdFsnTGFvJywgJ0xhbyddLFxuXHRcdFsnTGF0aW4nLCAnTGF0aW4nXSxcblx0XHRbJ0xlcGNoYScsICdMZXBjaGEnXSxcblx0XHRbJ0xpbWJ1JywgJ0xpbWJ1J10sXG5cdFx0WydMaW5lYXJfQScsICdMaW5lYXJfQSddLFxuXHRcdFsnTGluZWFyX0InLCAnTGluZWFyX0InXSxcblx0XHRbJ0x5Y2lhbicsICdMeWNpYW4nXSxcblx0XHRbJ0x5ZGlhbicsICdMeWRpYW4nXSxcblx0XHRbJ01haGFqYW5pJywgJ01haGFqYW5pJ10sXG5cdFx0WydNYW5kYWljJywgJ01hbmRhaWMnXSxcblx0XHRbJ01hbmljaGFlYW4nLCAnTWFuaWNoYWVhbiddLFxuXHRcdFsnTWFyY2hlbicsICdNYXJjaGVuJ10sXG5cdFx0WydNZW5kZV9LaWtha3VpJywgJ01lbmRlX0tpa2FrdWknXSxcblx0XHRbJ01lcm9pdGljX0N1cnNpdmUnLCAnTWVyb2l0aWNfQ3Vyc2l2ZSddLFxuXHRcdFsnTWVyb2l0aWNfSGllcm9nbHlwaHMnLCAnTWVyb2l0aWNfSGllcm9nbHlwaHMnXSxcblx0XHRbJ01hbGF5YWxhbScsICdNYWxheWFsYW0nXSxcblx0XHRbJ01vbmdvbGlhbicsICdNb25nb2xpYW4nXSxcblx0XHRbJ01ybycsICdNcm8nXSxcblx0XHRbJ01lZXRlaV9NYXllaycsICdNZWV0ZWlfTWF5ZWsnXSxcblx0XHRbJ011bHRhbmknLCAnTXVsdGFuaSddLFxuXHRcdFsnTXlhbm1hcicsICdNeWFubWFyJ10sXG5cdFx0WydPbGRfTm9ydGhfQXJhYmlhbicsICdPbGRfTm9ydGhfQXJhYmlhbiddLFxuXHRcdFsnTmFiYXRhZWFuJywgJ05hYmF0YWVhbiddLFxuXHRcdFsnTmtvJywgJ05rbyddLFxuXHRcdFsnTnVzaHUnLCAnTnVzaHUnXSxcblx0XHRbJ09naGFtJywgJ09naGFtJ10sXG5cdFx0WydPbF9DaGlraScsICdPbF9DaGlraSddLFxuXHRcdFsnT2xkX1R1cmtpYycsICdPbGRfVHVya2ljJ10sXG5cdFx0WydPcml5YScsICdPcml5YSddLFxuXHRcdFsnT3NhZ2UnLCAnT3NhZ2UnXSxcblx0XHRbJ09zbWFueWEnLCAnT3NtYW55YSddLFxuXHRcdFsnUGFsbXlyZW5lJywgJ1BhbG15cmVuZSddLFxuXHRcdFsnUGF1X0Npbl9IYXUnLCAnUGF1X0Npbl9IYXUnXSxcblx0XHRbJ09sZF9QZXJtaWMnLCAnT2xkX1Blcm1pYyddLFxuXHRcdFsnUGhhZ3NfUGEnLCAnUGhhZ3NfUGEnXSxcblx0XHRbJ0luc2NyaXB0aW9uYWxfUGFobGF2aScsICdJbnNjcmlwdGlvbmFsX1BhaGxhdmknXSxcblx0XHRbJ1BzYWx0ZXJfUGFobGF2aScsICdQc2FsdGVyX1BhaGxhdmknXSxcblx0XHRbJ1Bob2VuaWNpYW4nLCAnUGhvZW5pY2lhbiddLFxuXHRcdFsnTWlhbycsICdNaWFvJ10sXG5cdFx0WydJbnNjcmlwdGlvbmFsX1BhcnRoaWFuJywgJ0luc2NyaXB0aW9uYWxfUGFydGhpYW4nXSxcblx0XHRbJ1JlamFuZycsICdSZWphbmcnXSxcblx0XHRbJ1J1bmljJywgJ1J1bmljJ10sXG5cdFx0WydTYW1hcml0YW4nLCAnU2FtYXJpdGFuJ10sXG5cdFx0WydPbGRfU291dGhfQXJhYmlhbicsICdPbGRfU291dGhfQXJhYmlhbiddLFxuXHRcdFsnU2F1cmFzaHRyYScsICdTYXVyYXNodHJhJ10sXG5cdFx0WydTaWduV3JpdGluZycsICdTaWduV3JpdGluZyddLFxuXHRcdFsnU2hhdmlhbicsICdTaGF2aWFuJ10sXG5cdFx0WydTaGFyYWRhJywgJ1NoYXJhZGEnXSxcblx0XHRbJ1NpZGRoYW0nLCAnU2lkZGhhbSddLFxuXHRcdFsnS2h1ZGF3YWRpJywgJ0todWRhd2FkaSddLFxuXHRcdFsnU2luaGFsYScsICdTaW5oYWxhJ10sXG5cdFx0WydTb3JhX1NvbXBlbmcnLCAnU29yYV9Tb21wZW5nJ10sXG5cdFx0WydTb3lvbWJvJywgJ1NveW9tYm8nXSxcblx0XHRbJ1N1bmRhbmVzZScsICdTdW5kYW5lc2UnXSxcblx0XHRbJ1N5bG90aV9OYWdyaScsICdTeWxvdGlfTmFncmknXSxcblx0XHRbJ1N5cmlhYycsICdTeXJpYWMnXSxcblx0XHRbJ1RhZ2JhbndhJywgJ1RhZ2JhbndhJ10sXG5cdFx0WydUYWtyaScsICdUYWtyaSddLFxuXHRcdFsnVGFpX0xlJywgJ1RhaV9MZSddLFxuXHRcdFsnTmV3X1RhaV9MdWUnLCAnTmV3X1RhaV9MdWUnXSxcblx0XHRbJ1RhbWlsJywgJ1RhbWlsJ10sXG5cdFx0WydUYW5ndXQnLCAnVGFuZ3V0J10sXG5cdFx0WydUYWlfVmlldCcsICdUYWlfVmlldCddLFxuXHRcdFsnVGVsdWd1JywgJ1RlbHVndSddLFxuXHRcdFsnVGlmaW5hZ2gnLCAnVGlmaW5hZ2gnXSxcblx0XHRbJ1RhZ2Fsb2cnLCAnVGFnYWxvZyddLFxuXHRcdFsnVGhhYW5hJywgJ1RoYWFuYSddLFxuXHRcdFsnVGliZXRhbicsICdUaWJldGFuJ10sXG5cdFx0WydUaXJodXRhJywgJ1Rpcmh1dGEnXSxcblx0XHRbJ1VnYXJpdGljJywgJ1VnYXJpdGljJ10sXG5cdFx0WydWYWknLCAnVmFpJ10sXG5cdFx0WydXYXJhbmdfQ2l0aScsICdXYXJhbmdfQ2l0aSddLFxuXHRcdFsnT2xkX1BlcnNpYW4nLCAnT2xkX1BlcnNpYW4nXSxcblx0XHRbJ0N1bmVpZm9ybScsICdDdW5laWZvcm0nXSxcblx0XHRbJ1lpJywgJ1lpJ10sXG5cdFx0WydaYW5hYmF6YXJfU3F1YXJlJywgJ1phbmFiYXphcl9TcXVhcmUnXSxcblx0XHRbJ0luaGVyaXRlZCcsICdJbmhlcml0ZWQnXSxcblx0XHRbJ0NvbW1vbicsICdDb21tb24nXSxcblx0XHRbJ1Vua25vd24nLCAnVW5rbm93biddXG5cdF0pXVxuXSk7XG5cbnZhciBtYXRjaFByb3BlcnR5VmFsdWUgPSBmdW5jdGlvbihwcm9wZXJ0eSwgdmFsdWUpIHtcblx0dmFyIGFsaWFzVG9WYWx1ZSA9IG1hcHBpbmdzLmdldChwcm9wZXJ0eSk7XG5cdGlmICghYWxpYXNUb1ZhbHVlKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKChcIlVua25vd24gcHJvcGVydHkgYFwiICsgcHJvcGVydHkgKyBcImAuXCIpKTtcblx0fVxuXHR2YXIgY2Fub25pY2FsVmFsdWUgPSBhbGlhc1RvVmFsdWUuZ2V0KHZhbHVlKTtcblx0aWYgKGNhbm9uaWNhbFZhbHVlKSB7XG5cdFx0cmV0dXJuIGNhbm9uaWNhbFZhbHVlO1xuXHR9XG5cdHRocm93IG5ldyBFcnJvcihcblx0XHQoXCJVbmtub3duIHZhbHVlIGBcIiArIHZhbHVlICsgXCJgIGZvciBwcm9wZXJ0eSBgXCIgKyBwcm9wZXJ0eSArIFwiYC5cIilcblx0KTtcbn07XG5cbnZhciB1bmljb2RlTWF0Y2hQcm9wZXJ0eVZhbHVlRWNtYXNjcmlwdCA9IG1hdGNoUHJvcGVydHlWYWx1ZTtcblxudmFyIGl1TWFwcGluZ3MgPSBuZXcgTWFwKFtcblx0WzB4NEIsIDB4MjEyQV0sXG5cdFsweDUzLCAweDE3Rl0sXG5cdFsweDZCLCAweDIxMkFdLFxuXHRbMHg3MywgMHgxN0ZdLFxuXHRbMHhCNSwgMHgzOUNdLFxuXHRbMHhDNSwgMHgyMTJCXSxcblx0WzB4REYsIDB4MUU5RV0sXG5cdFsweEU1LCAweDIxMkJdLFxuXHRbMHgxN0YsIDB4NTNdLFxuXHRbMHgxQzQsIDB4MUM1XSxcblx0WzB4MUM1LCAweDFDNF0sXG5cdFsweDFDNywgMHgxQzhdLFxuXHRbMHgxQzgsIDB4MUM3XSxcblx0WzB4MUNBLCAweDFDQl0sXG5cdFsweDFDQiwgMHgxQ0FdLFxuXHRbMHgxRjEsIDB4MUYyXSxcblx0WzB4MUYyLCAweDFGMV0sXG5cdFsweDI2QSwgMHhBN0FFXSxcblx0WzB4MjlELCAweEE3QjJdLFxuXHRbMHgzNDUsIDB4MUZCRV0sXG5cdFsweDM5MiwgMHgzRDBdLFxuXHRbMHgzOTUsIDB4M0Y1XSxcblx0WzB4Mzk4LCAweDNGNF0sXG5cdFsweDM5OSwgMHgxRkJFXSxcblx0WzB4MzlBLCAweDNGMF0sXG5cdFsweDM5QywgMHhCNV0sXG5cdFsweDNBMCwgMHgzRDZdLFxuXHRbMHgzQTEsIDB4M0YxXSxcblx0WzB4M0EzLCAweDNDMl0sXG5cdFsweDNBNiwgMHgzRDVdLFxuXHRbMHgzQTksIDB4MjEyNl0sXG5cdFsweDNCOCwgMHgzRjRdLFxuXHRbMHgzQzIsIDB4M0EzXSxcblx0WzB4M0M5LCAweDIxMjZdLFxuXHRbMHgzRDAsIDB4MzkyXSxcblx0WzB4M0QxLCAweDNGNF0sXG5cdFsweDNENSwgMHgzQTZdLFxuXHRbMHgzRDYsIDB4M0EwXSxcblx0WzB4M0YwLCAweDM5QV0sXG5cdFsweDNGMSwgMHgzQTFdLFxuXHRbMHgzRjQsIFtcblx0XHQweDM5OCxcblx0XHQweDNEMSxcblx0XHQweDNCOFxuXHRdXSxcblx0WzB4M0Y1LCAweDM5NV0sXG5cdFsweDQxMiwgMHgxQzgwXSxcblx0WzB4NDE0LCAweDFDODFdLFxuXHRbMHg0MUUsIDB4MUM4Ml0sXG5cdFsweDQyMSwgMHgxQzgzXSxcblx0WzB4NDIyLCAweDFDODVdLFxuXHRbMHg0MkEsIDB4MUM4Nl0sXG5cdFsweDQzMiwgMHgxQzgwXSxcblx0WzB4NDM0LCAweDFDODFdLFxuXHRbMHg0M0UsIDB4MUM4Ml0sXG5cdFsweDQ0MSwgMHgxQzgzXSxcblx0WzB4NDQyLCBbXG5cdFx0MHgxQzg0LFxuXHRcdDB4MUM4NVxuXHRdXSxcblx0WzB4NDRBLCAweDFDODZdLFxuXHRbMHg0NjIsIDB4MUM4N10sXG5cdFsweDQ2MywgMHgxQzg3XSxcblx0WzB4MTNBMCwgMHhBQjcwXSxcblx0WzB4MTNBMSwgMHhBQjcxXSxcblx0WzB4MTNBMiwgMHhBQjcyXSxcblx0WzB4MTNBMywgMHhBQjczXSxcblx0WzB4MTNBNCwgMHhBQjc0XSxcblx0WzB4MTNBNSwgMHhBQjc1XSxcblx0WzB4MTNBNiwgMHhBQjc2XSxcblx0WzB4MTNBNywgMHhBQjc3XSxcblx0WzB4MTNBOCwgMHhBQjc4XSxcblx0WzB4MTNBOSwgMHhBQjc5XSxcblx0WzB4MTNBQSwgMHhBQjdBXSxcblx0WzB4MTNBQiwgMHhBQjdCXSxcblx0WzB4MTNBQywgMHhBQjdDXSxcblx0WzB4MTNBRCwgMHhBQjdEXSxcblx0WzB4MTNBRSwgMHhBQjdFXSxcblx0WzB4MTNBRiwgMHhBQjdGXSxcblx0WzB4MTNCMCwgMHhBQjgwXSxcblx0WzB4MTNCMSwgMHhBQjgxXSxcblx0WzB4MTNCMiwgMHhBQjgyXSxcblx0WzB4MTNCMywgMHhBQjgzXSxcblx0WzB4MTNCNCwgMHhBQjg0XSxcblx0WzB4MTNCNSwgMHhBQjg1XSxcblx0WzB4MTNCNiwgMHhBQjg2XSxcblx0WzB4MTNCNywgMHhBQjg3XSxcblx0WzB4MTNCOCwgMHhBQjg4XSxcblx0WzB4MTNCOSwgMHhBQjg5XSxcblx0WzB4MTNCQSwgMHhBQjhBXSxcblx0WzB4MTNCQiwgMHhBQjhCXSxcblx0WzB4MTNCQywgMHhBQjhDXSxcblx0WzB4MTNCRCwgMHhBQjhEXSxcblx0WzB4MTNCRSwgMHhBQjhFXSxcblx0WzB4MTNCRiwgMHhBQjhGXSxcblx0WzB4MTNDMCwgMHhBQjkwXSxcblx0WzB4MTNDMSwgMHhBQjkxXSxcblx0WzB4MTNDMiwgMHhBQjkyXSxcblx0WzB4MTNDMywgMHhBQjkzXSxcblx0WzB4MTNDNCwgMHhBQjk0XSxcblx0WzB4MTNDNSwgMHhBQjk1XSxcblx0WzB4MTNDNiwgMHhBQjk2XSxcblx0WzB4MTNDNywgMHhBQjk3XSxcblx0WzB4MTNDOCwgMHhBQjk4XSxcblx0WzB4MTNDOSwgMHhBQjk5XSxcblx0WzB4MTNDQSwgMHhBQjlBXSxcblx0WzB4MTNDQiwgMHhBQjlCXSxcblx0WzB4MTNDQywgMHhBQjlDXSxcblx0WzB4MTNDRCwgMHhBQjlEXSxcblx0WzB4MTNDRSwgMHhBQjlFXSxcblx0WzB4MTNDRiwgMHhBQjlGXSxcblx0WzB4MTNEMCwgMHhBQkEwXSxcblx0WzB4MTNEMSwgMHhBQkExXSxcblx0WzB4MTNEMiwgMHhBQkEyXSxcblx0WzB4MTNEMywgMHhBQkEzXSxcblx0WzB4MTNENCwgMHhBQkE0XSxcblx0WzB4MTNENSwgMHhBQkE1XSxcblx0WzB4MTNENiwgMHhBQkE2XSxcblx0WzB4MTNENywgMHhBQkE3XSxcblx0WzB4MTNEOCwgMHhBQkE4XSxcblx0WzB4MTNEOSwgMHhBQkE5XSxcblx0WzB4MTNEQSwgMHhBQkFBXSxcblx0WzB4MTNEQiwgMHhBQkFCXSxcblx0WzB4MTNEQywgMHhBQkFDXSxcblx0WzB4MTNERCwgMHhBQkFEXSxcblx0WzB4MTNERSwgMHhBQkFFXSxcblx0WzB4MTNERiwgMHhBQkFGXSxcblx0WzB4MTNFMCwgMHhBQkIwXSxcblx0WzB4MTNFMSwgMHhBQkIxXSxcblx0WzB4MTNFMiwgMHhBQkIyXSxcblx0WzB4MTNFMywgMHhBQkIzXSxcblx0WzB4MTNFNCwgMHhBQkI0XSxcblx0WzB4MTNFNSwgMHhBQkI1XSxcblx0WzB4MTNFNiwgMHhBQkI2XSxcblx0WzB4MTNFNywgMHhBQkI3XSxcblx0WzB4MTNFOCwgMHhBQkI4XSxcblx0WzB4MTNFOSwgMHhBQkI5XSxcblx0WzB4MTNFQSwgMHhBQkJBXSxcblx0WzB4MTNFQiwgMHhBQkJCXSxcblx0WzB4MTNFQywgMHhBQkJDXSxcblx0WzB4MTNFRCwgMHhBQkJEXSxcblx0WzB4MTNFRSwgMHhBQkJFXSxcblx0WzB4MTNFRiwgMHhBQkJGXSxcblx0WzB4MTNGMCwgMHgxM0Y4XSxcblx0WzB4MTNGMSwgMHgxM0Y5XSxcblx0WzB4MTNGMiwgMHgxM0ZBXSxcblx0WzB4MTNGMywgMHgxM0ZCXSxcblx0WzB4MTNGNCwgMHgxM0ZDXSxcblx0WzB4MTNGNSwgMHgxM0ZEXSxcblx0WzB4MTNGOCwgMHgxM0YwXSxcblx0WzB4MTNGOSwgMHgxM0YxXSxcblx0WzB4MTNGQSwgMHgxM0YyXSxcblx0WzB4MTNGQiwgMHgxM0YzXSxcblx0WzB4MTNGQywgMHgxM0Y0XSxcblx0WzB4MTNGRCwgMHgxM0Y1XSxcblx0WzB4MUM4MCwgW1xuXHRcdDB4NDEyLFxuXHRcdDB4NDMyXG5cdF1dLFxuXHRbMHgxQzgxLCBbXG5cdFx0MHg0MTQsXG5cdFx0MHg0MzRcblx0XV0sXG5cdFsweDFDODIsIFtcblx0XHQweDQxRSxcblx0XHQweDQzRVxuXHRdXSxcblx0WzB4MUM4MywgW1xuXHRcdDB4NDIxLFxuXHRcdDB4NDQxXG5cdF1dLFxuXHRbMHgxQzg0LCBbXG5cdFx0MHgxQzg1LFxuXHRcdDB4NDQyXG5cdF1dLFxuXHRbMHgxQzg1LCBbXG5cdFx0MHg0MjIsXG5cdFx0MHgxQzg0LFxuXHRcdDB4NDQyXG5cdF1dLFxuXHRbMHgxQzg2LCBbXG5cdFx0MHg0MkEsXG5cdFx0MHg0NEFcblx0XV0sXG5cdFsweDFDODcsIFtcblx0XHQweDQ2Mixcblx0XHQweDQ2M1xuXHRdXSxcblx0WzB4MUM4OCwgW1xuXHRcdDB4QTY0QSxcblx0XHQweEE2NEJcblx0XV0sXG5cdFsweDFFNjAsIDB4MUU5Ql0sXG5cdFsweDFFOUIsIDB4MUU2MF0sXG5cdFsweDFFOUUsIDB4REZdLFxuXHRbMHgxRjgwLCAweDFGODhdLFxuXHRbMHgxRjgxLCAweDFGODldLFxuXHRbMHgxRjgyLCAweDFGOEFdLFxuXHRbMHgxRjgzLCAweDFGOEJdLFxuXHRbMHgxRjg0LCAweDFGOENdLFxuXHRbMHgxRjg1LCAweDFGOERdLFxuXHRbMHgxRjg2LCAweDFGOEVdLFxuXHRbMHgxRjg3LCAweDFGOEZdLFxuXHRbMHgxRjg4LCAweDFGODBdLFxuXHRbMHgxRjg5LCAweDFGODFdLFxuXHRbMHgxRjhBLCAweDFGODJdLFxuXHRbMHgxRjhCLCAweDFGODNdLFxuXHRbMHgxRjhDLCAweDFGODRdLFxuXHRbMHgxRjhELCAweDFGODVdLFxuXHRbMHgxRjhFLCAweDFGODZdLFxuXHRbMHgxRjhGLCAweDFGODddLFxuXHRbMHgxRjkwLCAweDFGOThdLFxuXHRbMHgxRjkxLCAweDFGOTldLFxuXHRbMHgxRjkyLCAweDFGOUFdLFxuXHRbMHgxRjkzLCAweDFGOUJdLFxuXHRbMHgxRjk0LCAweDFGOUNdLFxuXHRbMHgxRjk1LCAweDFGOURdLFxuXHRbMHgxRjk2LCAweDFGOUVdLFxuXHRbMHgxRjk3LCAweDFGOUZdLFxuXHRbMHgxRjk4LCAweDFGOTBdLFxuXHRbMHgxRjk5LCAweDFGOTFdLFxuXHRbMHgxRjlBLCAweDFGOTJdLFxuXHRbMHgxRjlCLCAweDFGOTNdLFxuXHRbMHgxRjlDLCAweDFGOTRdLFxuXHRbMHgxRjlELCAweDFGOTVdLFxuXHRbMHgxRjlFLCAweDFGOTZdLFxuXHRbMHgxRjlGLCAweDFGOTddLFxuXHRbMHgxRkEwLCAweDFGQThdLFxuXHRbMHgxRkExLCAweDFGQTldLFxuXHRbMHgxRkEyLCAweDFGQUFdLFxuXHRbMHgxRkEzLCAweDFGQUJdLFxuXHRbMHgxRkE0LCAweDFGQUNdLFxuXHRbMHgxRkE1LCAweDFGQURdLFxuXHRbMHgxRkE2LCAweDFGQUVdLFxuXHRbMHgxRkE3LCAweDFGQUZdLFxuXHRbMHgxRkE4LCAweDFGQTBdLFxuXHRbMHgxRkE5LCAweDFGQTFdLFxuXHRbMHgxRkFBLCAweDFGQTJdLFxuXHRbMHgxRkFCLCAweDFGQTNdLFxuXHRbMHgxRkFDLCAweDFGQTRdLFxuXHRbMHgxRkFELCAweDFGQTVdLFxuXHRbMHgxRkFFLCAweDFGQTZdLFxuXHRbMHgxRkFGLCAweDFGQTddLFxuXHRbMHgxRkIzLCAweDFGQkNdLFxuXHRbMHgxRkJDLCAweDFGQjNdLFxuXHRbMHgxRkJFLCBbXG5cdFx0MHgzNDUsXG5cdFx0MHgzOTlcblx0XV0sXG5cdFsweDFGQzMsIDB4MUZDQ10sXG5cdFsweDFGQ0MsIDB4MUZDM10sXG5cdFsweDFGRjMsIDB4MUZGQ10sXG5cdFsweDFGRkMsIDB4MUZGM10sXG5cdFsweDIxMjYsIFtcblx0XHQweDNBOSxcblx0XHQweDNDOVxuXHRdXSxcblx0WzB4MjEyQSwgMHg0Ql0sXG5cdFsweDIxMkIsIFtcblx0XHQweEM1LFxuXHRcdDB4RTVcblx0XV0sXG5cdFsweEE2NEEsIDB4MUM4OF0sXG5cdFsweEE2NEIsIDB4MUM4OF0sXG5cdFsweEE3QUUsIDB4MjZBXSxcblx0WzB4QTdCMiwgMHgyOURdLFxuXHRbMHhBN0IzLCAweEFCNTNdLFxuXHRbMHhBN0I0LCAweEE3QjVdLFxuXHRbMHhBN0I1LCAweEE3QjRdLFxuXHRbMHhBN0I2LCAweEE3QjddLFxuXHRbMHhBN0I3LCAweEE3QjZdLFxuXHRbMHhBQjUzLCAweEE3QjNdLFxuXHRbMHhBQjcwLCAweDEzQTBdLFxuXHRbMHhBQjcxLCAweDEzQTFdLFxuXHRbMHhBQjcyLCAweDEzQTJdLFxuXHRbMHhBQjczLCAweDEzQTNdLFxuXHRbMHhBQjc0LCAweDEzQTRdLFxuXHRbMHhBQjc1LCAweDEzQTVdLFxuXHRbMHhBQjc2LCAweDEzQTZdLFxuXHRbMHhBQjc3LCAweDEzQTddLFxuXHRbMHhBQjc4LCAweDEzQThdLFxuXHRbMHhBQjc5LCAweDEzQTldLFxuXHRbMHhBQjdBLCAweDEzQUFdLFxuXHRbMHhBQjdCLCAweDEzQUJdLFxuXHRbMHhBQjdDLCAweDEzQUNdLFxuXHRbMHhBQjdELCAweDEzQURdLFxuXHRbMHhBQjdFLCAweDEzQUVdLFxuXHRbMHhBQjdGLCAweDEzQUZdLFxuXHRbMHhBQjgwLCAweDEzQjBdLFxuXHRbMHhBQjgxLCAweDEzQjFdLFxuXHRbMHhBQjgyLCAweDEzQjJdLFxuXHRbMHhBQjgzLCAweDEzQjNdLFxuXHRbMHhBQjg0LCAweDEzQjRdLFxuXHRbMHhBQjg1LCAweDEzQjVdLFxuXHRbMHhBQjg2LCAweDEzQjZdLFxuXHRbMHhBQjg3LCAweDEzQjddLFxuXHRbMHhBQjg4LCAweDEzQjhdLFxuXHRbMHhBQjg5LCAweDEzQjldLFxuXHRbMHhBQjhBLCAweDEzQkFdLFxuXHRbMHhBQjhCLCAweDEzQkJdLFxuXHRbMHhBQjhDLCAweDEzQkNdLFxuXHRbMHhBQjhELCAweDEzQkRdLFxuXHRbMHhBQjhFLCAweDEzQkVdLFxuXHRbMHhBQjhGLCAweDEzQkZdLFxuXHRbMHhBQjkwLCAweDEzQzBdLFxuXHRbMHhBQjkxLCAweDEzQzFdLFxuXHRbMHhBQjkyLCAweDEzQzJdLFxuXHRbMHhBQjkzLCAweDEzQzNdLFxuXHRbMHhBQjk0LCAweDEzQzRdLFxuXHRbMHhBQjk1LCAweDEzQzVdLFxuXHRbMHhBQjk2LCAweDEzQzZdLFxuXHRbMHhBQjk3LCAweDEzQzddLFxuXHRbMHhBQjk4LCAweDEzQzhdLFxuXHRbMHhBQjk5LCAweDEzQzldLFxuXHRbMHhBQjlBLCAweDEzQ0FdLFxuXHRbMHhBQjlCLCAweDEzQ0JdLFxuXHRbMHhBQjlDLCAweDEzQ0NdLFxuXHRbMHhBQjlELCAweDEzQ0RdLFxuXHRbMHhBQjlFLCAweDEzQ0VdLFxuXHRbMHhBQjlGLCAweDEzQ0ZdLFxuXHRbMHhBQkEwLCAweDEzRDBdLFxuXHRbMHhBQkExLCAweDEzRDFdLFxuXHRbMHhBQkEyLCAweDEzRDJdLFxuXHRbMHhBQkEzLCAweDEzRDNdLFxuXHRbMHhBQkE0LCAweDEzRDRdLFxuXHRbMHhBQkE1LCAweDEzRDVdLFxuXHRbMHhBQkE2LCAweDEzRDZdLFxuXHRbMHhBQkE3LCAweDEzRDddLFxuXHRbMHhBQkE4LCAweDEzRDhdLFxuXHRbMHhBQkE5LCAweDEzRDldLFxuXHRbMHhBQkFBLCAweDEzREFdLFxuXHRbMHhBQkFCLCAweDEzREJdLFxuXHRbMHhBQkFDLCAweDEzRENdLFxuXHRbMHhBQkFELCAweDEzRERdLFxuXHRbMHhBQkFFLCAweDEzREVdLFxuXHRbMHhBQkFGLCAweDEzREZdLFxuXHRbMHhBQkIwLCAweDEzRTBdLFxuXHRbMHhBQkIxLCAweDEzRTFdLFxuXHRbMHhBQkIyLCAweDEzRTJdLFxuXHRbMHhBQkIzLCAweDEzRTNdLFxuXHRbMHhBQkI0LCAweDEzRTRdLFxuXHRbMHhBQkI1LCAweDEzRTVdLFxuXHRbMHhBQkI2LCAweDEzRTZdLFxuXHRbMHhBQkI3LCAweDEzRTddLFxuXHRbMHhBQkI4LCAweDEzRThdLFxuXHRbMHhBQkI5LCAweDEzRTldLFxuXHRbMHhBQkJBLCAweDEzRUFdLFxuXHRbMHhBQkJCLCAweDEzRUJdLFxuXHRbMHhBQkJDLCAweDEzRUNdLFxuXHRbMHhBQkJELCAweDEzRURdLFxuXHRbMHhBQkJFLCAweDEzRUVdLFxuXHRbMHhBQkJGLCAweDEzRUZdLFxuXHRbMHgxMDQwMCwgMHgxMDQyOF0sXG5cdFsweDEwNDAxLCAweDEwNDI5XSxcblx0WzB4MTA0MDIsIDB4MTA0MkFdLFxuXHRbMHgxMDQwMywgMHgxMDQyQl0sXG5cdFsweDEwNDA0LCAweDEwNDJDXSxcblx0WzB4MTA0MDUsIDB4MTA0MkRdLFxuXHRbMHgxMDQwNiwgMHgxMDQyRV0sXG5cdFsweDEwNDA3LCAweDEwNDJGXSxcblx0WzB4MTA0MDgsIDB4MTA0MzBdLFxuXHRbMHgxMDQwOSwgMHgxMDQzMV0sXG5cdFsweDEwNDBBLCAweDEwNDMyXSxcblx0WzB4MTA0MEIsIDB4MTA0MzNdLFxuXHRbMHgxMDQwQywgMHgxMDQzNF0sXG5cdFsweDEwNDBELCAweDEwNDM1XSxcblx0WzB4MTA0MEUsIDB4MTA0MzZdLFxuXHRbMHgxMDQwRiwgMHgxMDQzN10sXG5cdFsweDEwNDEwLCAweDEwNDM4XSxcblx0WzB4MTA0MTEsIDB4MTA0MzldLFxuXHRbMHgxMDQxMiwgMHgxMDQzQV0sXG5cdFsweDEwNDEzLCAweDEwNDNCXSxcblx0WzB4MTA0MTQsIDB4MTA0M0NdLFxuXHRbMHgxMDQxNSwgMHgxMDQzRF0sXG5cdFsweDEwNDE2LCAweDEwNDNFXSxcblx0WzB4MTA0MTcsIDB4MTA0M0ZdLFxuXHRbMHgxMDQxOCwgMHgxMDQ0MF0sXG5cdFsweDEwNDE5LCAweDEwNDQxXSxcblx0WzB4MTA0MUEsIDB4MTA0NDJdLFxuXHRbMHgxMDQxQiwgMHgxMDQ0M10sXG5cdFsweDEwNDFDLCAweDEwNDQ0XSxcblx0WzB4MTA0MUQsIDB4MTA0NDVdLFxuXHRbMHgxMDQxRSwgMHgxMDQ0Nl0sXG5cdFsweDEwNDFGLCAweDEwNDQ3XSxcblx0WzB4MTA0MjAsIDB4MTA0NDhdLFxuXHRbMHgxMDQyMSwgMHgxMDQ0OV0sXG5cdFsweDEwNDIyLCAweDEwNDRBXSxcblx0WzB4MTA0MjMsIDB4MTA0NEJdLFxuXHRbMHgxMDQyNCwgMHgxMDQ0Q10sXG5cdFsweDEwNDI1LCAweDEwNDREXSxcblx0WzB4MTA0MjYsIDB4MTA0NEVdLFxuXHRbMHgxMDQyNywgMHgxMDQ0Rl0sXG5cdFsweDEwNDI4LCAweDEwNDAwXSxcblx0WzB4MTA0MjksIDB4MTA0MDFdLFxuXHRbMHgxMDQyQSwgMHgxMDQwMl0sXG5cdFsweDEwNDJCLCAweDEwNDAzXSxcblx0WzB4MTA0MkMsIDB4MTA0MDRdLFxuXHRbMHgxMDQyRCwgMHgxMDQwNV0sXG5cdFsweDEwNDJFLCAweDEwNDA2XSxcblx0WzB4MTA0MkYsIDB4MTA0MDddLFxuXHRbMHgxMDQzMCwgMHgxMDQwOF0sXG5cdFsweDEwNDMxLCAweDEwNDA5XSxcblx0WzB4MTA0MzIsIDB4MTA0MEFdLFxuXHRbMHgxMDQzMywgMHgxMDQwQl0sXG5cdFsweDEwNDM0LCAweDEwNDBDXSxcblx0WzB4MTA0MzUsIDB4MTA0MERdLFxuXHRbMHgxMDQzNiwgMHgxMDQwRV0sXG5cdFsweDEwNDM3LCAweDEwNDBGXSxcblx0WzB4MTA0MzgsIDB4MTA0MTBdLFxuXHRbMHgxMDQzOSwgMHgxMDQxMV0sXG5cdFsweDEwNDNBLCAweDEwNDEyXSxcblx0WzB4MTA0M0IsIDB4MTA0MTNdLFxuXHRbMHgxMDQzQywgMHgxMDQxNF0sXG5cdFsweDEwNDNELCAweDEwNDE1XSxcblx0WzB4MTA0M0UsIDB4MTA0MTZdLFxuXHRbMHgxMDQzRiwgMHgxMDQxN10sXG5cdFsweDEwNDQwLCAweDEwNDE4XSxcblx0WzB4MTA0NDEsIDB4MTA0MTldLFxuXHRbMHgxMDQ0MiwgMHgxMDQxQV0sXG5cdFsweDEwNDQzLCAweDEwNDFCXSxcblx0WzB4MTA0NDQsIDB4MTA0MUNdLFxuXHRbMHgxMDQ0NSwgMHgxMDQxRF0sXG5cdFsweDEwNDQ2LCAweDEwNDFFXSxcblx0WzB4MTA0NDcsIDB4MTA0MUZdLFxuXHRbMHgxMDQ0OCwgMHgxMDQyMF0sXG5cdFsweDEwNDQ5LCAweDEwNDIxXSxcblx0WzB4MTA0NEEsIDB4MTA0MjJdLFxuXHRbMHgxMDQ0QiwgMHgxMDQyM10sXG5cdFsweDEwNDRDLCAweDEwNDI0XSxcblx0WzB4MTA0NEQsIDB4MTA0MjVdLFxuXHRbMHgxMDQ0RSwgMHgxMDQyNl0sXG5cdFsweDEwNDRGLCAweDEwNDI3XSxcblx0WzB4MTA0QjAsIDB4MTA0RDhdLFxuXHRbMHgxMDRCMSwgMHgxMDREOV0sXG5cdFsweDEwNEIyLCAweDEwNERBXSxcblx0WzB4MTA0QjMsIDB4MTA0REJdLFxuXHRbMHgxMDRCNCwgMHgxMDREQ10sXG5cdFsweDEwNEI1LCAweDEwNEREXSxcblx0WzB4MTA0QjYsIDB4MTA0REVdLFxuXHRbMHgxMDRCNywgMHgxMDRERl0sXG5cdFsweDEwNEI4LCAweDEwNEUwXSxcblx0WzB4MTA0QjksIDB4MTA0RTFdLFxuXHRbMHgxMDRCQSwgMHgxMDRFMl0sXG5cdFsweDEwNEJCLCAweDEwNEUzXSxcblx0WzB4MTA0QkMsIDB4MTA0RTRdLFxuXHRbMHgxMDRCRCwgMHgxMDRFNV0sXG5cdFsweDEwNEJFLCAweDEwNEU2XSxcblx0WzB4MTA0QkYsIDB4MTA0RTddLFxuXHRbMHgxMDRDMCwgMHgxMDRFOF0sXG5cdFsweDEwNEMxLCAweDEwNEU5XSxcblx0WzB4MTA0QzIsIDB4MTA0RUFdLFxuXHRbMHgxMDRDMywgMHgxMDRFQl0sXG5cdFsweDEwNEM0LCAweDEwNEVDXSxcblx0WzB4MTA0QzUsIDB4MTA0RURdLFxuXHRbMHgxMDRDNiwgMHgxMDRFRV0sXG5cdFsweDEwNEM3LCAweDEwNEVGXSxcblx0WzB4MTA0QzgsIDB4MTA0RjBdLFxuXHRbMHgxMDRDOSwgMHgxMDRGMV0sXG5cdFsweDEwNENBLCAweDEwNEYyXSxcblx0WzB4MTA0Q0IsIDB4MTA0RjNdLFxuXHRbMHgxMDRDQywgMHgxMDRGNF0sXG5cdFsweDEwNENELCAweDEwNEY1XSxcblx0WzB4MTA0Q0UsIDB4MTA0RjZdLFxuXHRbMHgxMDRDRiwgMHgxMDRGN10sXG5cdFsweDEwNEQwLCAweDEwNEY4XSxcblx0WzB4MTA0RDEsIDB4MTA0RjldLFxuXHRbMHgxMDREMiwgMHgxMDRGQV0sXG5cdFsweDEwNEQzLCAweDEwNEZCXSxcblx0WzB4MTA0RDgsIDB4MTA0QjBdLFxuXHRbMHgxMDREOSwgMHgxMDRCMV0sXG5cdFsweDEwNERBLCAweDEwNEIyXSxcblx0WzB4MTA0REIsIDB4MTA0QjNdLFxuXHRbMHgxMDREQywgMHgxMDRCNF0sXG5cdFsweDEwNERELCAweDEwNEI1XSxcblx0WzB4MTA0REUsIDB4MTA0QjZdLFxuXHRbMHgxMDRERiwgMHgxMDRCN10sXG5cdFsweDEwNEUwLCAweDEwNEI4XSxcblx0WzB4MTA0RTEsIDB4MTA0QjldLFxuXHRbMHgxMDRFMiwgMHgxMDRCQV0sXG5cdFsweDEwNEUzLCAweDEwNEJCXSxcblx0WzB4MTA0RTQsIDB4MTA0QkNdLFxuXHRbMHgxMDRFNSwgMHgxMDRCRF0sXG5cdFsweDEwNEU2LCAweDEwNEJFXSxcblx0WzB4MTA0RTcsIDB4MTA0QkZdLFxuXHRbMHgxMDRFOCwgMHgxMDRDMF0sXG5cdFsweDEwNEU5LCAweDEwNEMxXSxcblx0WzB4MTA0RUEsIDB4MTA0QzJdLFxuXHRbMHgxMDRFQiwgMHgxMDRDM10sXG5cdFsweDEwNEVDLCAweDEwNEM0XSxcblx0WzB4MTA0RUQsIDB4MTA0QzVdLFxuXHRbMHgxMDRFRSwgMHgxMDRDNl0sXG5cdFsweDEwNEVGLCAweDEwNEM3XSxcblx0WzB4MTA0RjAsIDB4MTA0QzhdLFxuXHRbMHgxMDRGMSwgMHgxMDRDOV0sXG5cdFsweDEwNEYyLCAweDEwNENBXSxcblx0WzB4MTA0RjMsIDB4MTA0Q0JdLFxuXHRbMHgxMDRGNCwgMHgxMDRDQ10sXG5cdFsweDEwNEY1LCAweDEwNENEXSxcblx0WzB4MTA0RjYsIDB4MTA0Q0VdLFxuXHRbMHgxMDRGNywgMHgxMDRDRl0sXG5cdFsweDEwNEY4LCAweDEwNEQwXSxcblx0WzB4MTA0RjksIDB4MTA0RDFdLFxuXHRbMHgxMDRGQSwgMHgxMDREMl0sXG5cdFsweDEwNEZCLCAweDEwNEQzXSxcblx0WzB4MTBDODAsIDB4MTBDQzBdLFxuXHRbMHgxMEM4MSwgMHgxMENDMV0sXG5cdFsweDEwQzgyLCAweDEwQ0MyXSxcblx0WzB4MTBDODMsIDB4MTBDQzNdLFxuXHRbMHgxMEM4NCwgMHgxMENDNF0sXG5cdFsweDEwQzg1LCAweDEwQ0M1XSxcblx0WzB4MTBDODYsIDB4MTBDQzZdLFxuXHRbMHgxMEM4NywgMHgxMENDN10sXG5cdFsweDEwQzg4LCAweDEwQ0M4XSxcblx0WzB4MTBDODksIDB4MTBDQzldLFxuXHRbMHgxMEM4QSwgMHgxMENDQV0sXG5cdFsweDEwQzhCLCAweDEwQ0NCXSxcblx0WzB4MTBDOEMsIDB4MTBDQ0NdLFxuXHRbMHgxMEM4RCwgMHgxMENDRF0sXG5cdFsweDEwQzhFLCAweDEwQ0NFXSxcblx0WzB4MTBDOEYsIDB4MTBDQ0ZdLFxuXHRbMHgxMEM5MCwgMHgxMENEMF0sXG5cdFsweDEwQzkxLCAweDEwQ0QxXSxcblx0WzB4MTBDOTIsIDB4MTBDRDJdLFxuXHRbMHgxMEM5MywgMHgxMENEM10sXG5cdFsweDEwQzk0LCAweDEwQ0Q0XSxcblx0WzB4MTBDOTUsIDB4MTBDRDVdLFxuXHRbMHgxMEM5NiwgMHgxMENENl0sXG5cdFsweDEwQzk3LCAweDEwQ0Q3XSxcblx0WzB4MTBDOTgsIDB4MTBDRDhdLFxuXHRbMHgxMEM5OSwgMHgxMENEOV0sXG5cdFsweDEwQzlBLCAweDEwQ0RBXSxcblx0WzB4MTBDOUIsIDB4MTBDREJdLFxuXHRbMHgxMEM5QywgMHgxMENEQ10sXG5cdFsweDEwQzlELCAweDEwQ0REXSxcblx0WzB4MTBDOUUsIDB4MTBDREVdLFxuXHRbMHgxMEM5RiwgMHgxMENERl0sXG5cdFsweDEwQ0EwLCAweDEwQ0UwXSxcblx0WzB4MTBDQTEsIDB4MTBDRTFdLFxuXHRbMHgxMENBMiwgMHgxMENFMl0sXG5cdFsweDEwQ0EzLCAweDEwQ0UzXSxcblx0WzB4MTBDQTQsIDB4MTBDRTRdLFxuXHRbMHgxMENBNSwgMHgxMENFNV0sXG5cdFsweDEwQ0E2LCAweDEwQ0U2XSxcblx0WzB4MTBDQTcsIDB4MTBDRTddLFxuXHRbMHgxMENBOCwgMHgxMENFOF0sXG5cdFsweDEwQ0E5LCAweDEwQ0U5XSxcblx0WzB4MTBDQUEsIDB4MTBDRUFdLFxuXHRbMHgxMENBQiwgMHgxMENFQl0sXG5cdFsweDEwQ0FDLCAweDEwQ0VDXSxcblx0WzB4MTBDQUQsIDB4MTBDRURdLFxuXHRbMHgxMENBRSwgMHgxMENFRV0sXG5cdFsweDEwQ0FGLCAweDEwQ0VGXSxcblx0WzB4MTBDQjAsIDB4MTBDRjBdLFxuXHRbMHgxMENCMSwgMHgxMENGMV0sXG5cdFsweDEwQ0IyLCAweDEwQ0YyXSxcblx0WzB4MTBDQzAsIDB4MTBDODBdLFxuXHRbMHgxMENDMSwgMHgxMEM4MV0sXG5cdFsweDEwQ0MyLCAweDEwQzgyXSxcblx0WzB4MTBDQzMsIDB4MTBDODNdLFxuXHRbMHgxMENDNCwgMHgxMEM4NF0sXG5cdFsweDEwQ0M1LCAweDEwQzg1XSxcblx0WzB4MTBDQzYsIDB4MTBDODZdLFxuXHRbMHgxMENDNywgMHgxMEM4N10sXG5cdFsweDEwQ0M4LCAweDEwQzg4XSxcblx0WzB4MTBDQzksIDB4MTBDODldLFxuXHRbMHgxMENDQSwgMHgxMEM4QV0sXG5cdFsweDEwQ0NCLCAweDEwQzhCXSxcblx0WzB4MTBDQ0MsIDB4MTBDOENdLFxuXHRbMHgxMENDRCwgMHgxMEM4RF0sXG5cdFsweDEwQ0NFLCAweDEwQzhFXSxcblx0WzB4MTBDQ0YsIDB4MTBDOEZdLFxuXHRbMHgxMENEMCwgMHgxMEM5MF0sXG5cdFsweDEwQ0QxLCAweDEwQzkxXSxcblx0WzB4MTBDRDIsIDB4MTBDOTJdLFxuXHRbMHgxMENEMywgMHgxMEM5M10sXG5cdFsweDEwQ0Q0LCAweDEwQzk0XSxcblx0WzB4MTBDRDUsIDB4MTBDOTVdLFxuXHRbMHgxMENENiwgMHgxMEM5Nl0sXG5cdFsweDEwQ0Q3LCAweDEwQzk3XSxcblx0WzB4MTBDRDgsIDB4MTBDOThdLFxuXHRbMHgxMENEOSwgMHgxMEM5OV0sXG5cdFsweDEwQ0RBLCAweDEwQzlBXSxcblx0WzB4MTBDREIsIDB4MTBDOUJdLFxuXHRbMHgxMENEQywgMHgxMEM5Q10sXG5cdFsweDEwQ0RELCAweDEwQzlEXSxcblx0WzB4MTBDREUsIDB4MTBDOUVdLFxuXHRbMHgxMENERiwgMHgxMEM5Rl0sXG5cdFsweDEwQ0UwLCAweDEwQ0EwXSxcblx0WzB4MTBDRTEsIDB4MTBDQTFdLFxuXHRbMHgxMENFMiwgMHgxMENBMl0sXG5cdFsweDEwQ0UzLCAweDEwQ0EzXSxcblx0WzB4MTBDRTQsIDB4MTBDQTRdLFxuXHRbMHgxMENFNSwgMHgxMENBNV0sXG5cdFsweDEwQ0U2LCAweDEwQ0E2XSxcblx0WzB4MTBDRTcsIDB4MTBDQTddLFxuXHRbMHgxMENFOCwgMHgxMENBOF0sXG5cdFsweDEwQ0U5LCAweDEwQ0E5XSxcblx0WzB4MTBDRUEsIDB4MTBDQUFdLFxuXHRbMHgxMENFQiwgMHgxMENBQl0sXG5cdFsweDEwQ0VDLCAweDEwQ0FDXSxcblx0WzB4MTBDRUQsIDB4MTBDQURdLFxuXHRbMHgxMENFRSwgMHgxMENBRV0sXG5cdFsweDEwQ0VGLCAweDEwQ0FGXSxcblx0WzB4MTBDRjAsIDB4MTBDQjBdLFxuXHRbMHgxMENGMSwgMHgxMENCMV0sXG5cdFsweDEwQ0YyLCAweDEwQ0IyXSxcblx0WzB4MTE4QTAsIDB4MTE4QzBdLFxuXHRbMHgxMThBMSwgMHgxMThDMV0sXG5cdFsweDExOEEyLCAweDExOEMyXSxcblx0WzB4MTE4QTMsIDB4MTE4QzNdLFxuXHRbMHgxMThBNCwgMHgxMThDNF0sXG5cdFsweDExOEE1LCAweDExOEM1XSxcblx0WzB4MTE4QTYsIDB4MTE4QzZdLFxuXHRbMHgxMThBNywgMHgxMThDN10sXG5cdFsweDExOEE4LCAweDExOEM4XSxcblx0WzB4MTE4QTksIDB4MTE4QzldLFxuXHRbMHgxMThBQSwgMHgxMThDQV0sXG5cdFsweDExOEFCLCAweDExOENCXSxcblx0WzB4MTE4QUMsIDB4MTE4Q0NdLFxuXHRbMHgxMThBRCwgMHgxMThDRF0sXG5cdFsweDExOEFFLCAweDExOENFXSxcblx0WzB4MTE4QUYsIDB4MTE4Q0ZdLFxuXHRbMHgxMThCMCwgMHgxMThEMF0sXG5cdFsweDExOEIxLCAweDExOEQxXSxcblx0WzB4MTE4QjIsIDB4MTE4RDJdLFxuXHRbMHgxMThCMywgMHgxMThEM10sXG5cdFsweDExOEI0LCAweDExOEQ0XSxcblx0WzB4MTE4QjUsIDB4MTE4RDVdLFxuXHRbMHgxMThCNiwgMHgxMThENl0sXG5cdFsweDExOEI3LCAweDExOEQ3XSxcblx0WzB4MTE4QjgsIDB4MTE4RDhdLFxuXHRbMHgxMThCOSwgMHgxMThEOV0sXG5cdFsweDExOEJBLCAweDExOERBXSxcblx0WzB4MTE4QkIsIDB4MTE4REJdLFxuXHRbMHgxMThCQywgMHgxMThEQ10sXG5cdFsweDExOEJELCAweDExOEREXSxcblx0WzB4MTE4QkUsIDB4MTE4REVdLFxuXHRbMHgxMThCRiwgMHgxMThERl0sXG5cdFsweDExOEMwLCAweDExOEEwXSxcblx0WzB4MTE4QzEsIDB4MTE4QTFdLFxuXHRbMHgxMThDMiwgMHgxMThBMl0sXG5cdFsweDExOEMzLCAweDExOEEzXSxcblx0WzB4MTE4QzQsIDB4MTE4QTRdLFxuXHRbMHgxMThDNSwgMHgxMThBNV0sXG5cdFsweDExOEM2LCAweDExOEE2XSxcblx0WzB4MTE4QzcsIDB4MTE4QTddLFxuXHRbMHgxMThDOCwgMHgxMThBOF0sXG5cdFsweDExOEM5LCAweDExOEE5XSxcblx0WzB4MTE4Q0EsIDB4MTE4QUFdLFxuXHRbMHgxMThDQiwgMHgxMThBQl0sXG5cdFsweDExOENDLCAweDExOEFDXSxcblx0WzB4MTE4Q0QsIDB4MTE4QURdLFxuXHRbMHgxMThDRSwgMHgxMThBRV0sXG5cdFsweDExOENGLCAweDExOEFGXSxcblx0WzB4MTE4RDAsIDB4MTE4QjBdLFxuXHRbMHgxMThEMSwgMHgxMThCMV0sXG5cdFsweDExOEQyLCAweDExOEIyXSxcblx0WzB4MTE4RDMsIDB4MTE4QjNdLFxuXHRbMHgxMThENCwgMHgxMThCNF0sXG5cdFsweDExOEQ1LCAweDExOEI1XSxcblx0WzB4MTE4RDYsIDB4MTE4QjZdLFxuXHRbMHgxMThENywgMHgxMThCN10sXG5cdFsweDExOEQ4LCAweDExOEI4XSxcblx0WzB4MTE4RDksIDB4MTE4QjldLFxuXHRbMHgxMThEQSwgMHgxMThCQV0sXG5cdFsweDExOERCLCAweDExOEJCXSxcblx0WzB4MTE4REMsIDB4MTE4QkNdLFxuXHRbMHgxMThERCwgMHgxMThCRF0sXG5cdFsweDExOERFLCAweDExOEJFXSxcblx0WzB4MTE4REYsIDB4MTE4QkZdLFxuXHRbMHgxRTkwMCwgMHgxRTkyMl0sXG5cdFsweDFFOTAxLCAweDFFOTIzXSxcblx0WzB4MUU5MDIsIDB4MUU5MjRdLFxuXHRbMHgxRTkwMywgMHgxRTkyNV0sXG5cdFsweDFFOTA0LCAweDFFOTI2XSxcblx0WzB4MUU5MDUsIDB4MUU5MjddLFxuXHRbMHgxRTkwNiwgMHgxRTkyOF0sXG5cdFsweDFFOTA3LCAweDFFOTI5XSxcblx0WzB4MUU5MDgsIDB4MUU5MkFdLFxuXHRbMHgxRTkwOSwgMHgxRTkyQl0sXG5cdFsweDFFOTBBLCAweDFFOTJDXSxcblx0WzB4MUU5MEIsIDB4MUU5MkRdLFxuXHRbMHgxRTkwQywgMHgxRTkyRV0sXG5cdFsweDFFOTBELCAweDFFOTJGXSxcblx0WzB4MUU5MEUsIDB4MUU5MzBdLFxuXHRbMHgxRTkwRiwgMHgxRTkzMV0sXG5cdFsweDFFOTEwLCAweDFFOTMyXSxcblx0WzB4MUU5MTEsIDB4MUU5MzNdLFxuXHRbMHgxRTkxMiwgMHgxRTkzNF0sXG5cdFsweDFFOTEzLCAweDFFOTM1XSxcblx0WzB4MUU5MTQsIDB4MUU5MzZdLFxuXHRbMHgxRTkxNSwgMHgxRTkzN10sXG5cdFsweDFFOTE2LCAweDFFOTM4XSxcblx0WzB4MUU5MTcsIDB4MUU5MzldLFxuXHRbMHgxRTkxOCwgMHgxRTkzQV0sXG5cdFsweDFFOTE5LCAweDFFOTNCXSxcblx0WzB4MUU5MUEsIDB4MUU5M0NdLFxuXHRbMHgxRTkxQiwgMHgxRTkzRF0sXG5cdFsweDFFOTFDLCAweDFFOTNFXSxcblx0WzB4MUU5MUQsIDB4MUU5M0ZdLFxuXHRbMHgxRTkxRSwgMHgxRTk0MF0sXG5cdFsweDFFOTFGLCAweDFFOTQxXSxcblx0WzB4MUU5MjAsIDB4MUU5NDJdLFxuXHRbMHgxRTkyMSwgMHgxRTk0M10sXG5cdFsweDFFOTIyLCAweDFFOTAwXSxcblx0WzB4MUU5MjMsIDB4MUU5MDFdLFxuXHRbMHgxRTkyNCwgMHgxRTkwMl0sXG5cdFsweDFFOTI1LCAweDFFOTAzXSxcblx0WzB4MUU5MjYsIDB4MUU5MDRdLFxuXHRbMHgxRTkyNywgMHgxRTkwNV0sXG5cdFsweDFFOTI4LCAweDFFOTA2XSxcblx0WzB4MUU5MjksIDB4MUU5MDddLFxuXHRbMHgxRTkyQSwgMHgxRTkwOF0sXG5cdFsweDFFOTJCLCAweDFFOTA5XSxcblx0WzB4MUU5MkMsIDB4MUU5MEFdLFxuXHRbMHgxRTkyRCwgMHgxRTkwQl0sXG5cdFsweDFFOTJFLCAweDFFOTBDXSxcblx0WzB4MUU5MkYsIDB4MUU5MERdLFxuXHRbMHgxRTkzMCwgMHgxRTkwRV0sXG5cdFsweDFFOTMxLCAweDFFOTBGXSxcblx0WzB4MUU5MzIsIDB4MUU5MTBdLFxuXHRbMHgxRTkzMywgMHgxRTkxMV0sXG5cdFsweDFFOTM0LCAweDFFOTEyXSxcblx0WzB4MUU5MzUsIDB4MUU5MTNdLFxuXHRbMHgxRTkzNiwgMHgxRTkxNF0sXG5cdFsweDFFOTM3LCAweDFFOTE1XSxcblx0WzB4MUU5MzgsIDB4MUU5MTZdLFxuXHRbMHgxRTkzOSwgMHgxRTkxN10sXG5cdFsweDFFOTNBLCAweDFFOTE4XSxcblx0WzB4MUU5M0IsIDB4MUU5MTldLFxuXHRbMHgxRTkzQywgMHgxRTkxQV0sXG5cdFsweDFFOTNELCAweDFFOTFCXSxcblx0WzB4MUU5M0UsIDB4MUU5MUNdLFxuXHRbMHgxRTkzRiwgMHgxRTkxRF0sXG5cdFsweDFFOTQwLCAweDFFOTFFXSxcblx0WzB4MUU5NDEsIDB4MUU5MUZdLFxuXHRbMHgxRTk0MiwgMHgxRTkyMF0sXG5cdFsweDFFOTQzLCAweDFFOTIxXVxuXSk7XG5cbnZhciBSRUdVTEFSID0gbmV3IE1hcChbXG5cdFsnZCcsIHJlZ2VuZXJhdGUoKVxuXHRcdC5hZGRSYW5nZSgweDMwLCAweDM5KV0sXG5cdFsnRCcsIHJlZ2VuZXJhdGUoKVxuXHRcdC5hZGRSYW5nZSgweDAsIDB4MkYpXG5cdFx0LmFkZFJhbmdlKDB4M0EsIDB4RkZGRildLFxuXHRbJ3MnLCByZWdlbmVyYXRlKDB4MjAsIDB4QTAsIDB4MTY4MCwgMHgyMDJGLCAweDIwNUYsIDB4MzAwMCwgMHhGRUZGKVxuXHRcdC5hZGRSYW5nZSgweDksIDB4RClcblx0XHQuYWRkUmFuZ2UoMHgyMDAwLCAweDIwMEEpXG5cdFx0LmFkZFJhbmdlKDB4MjAyOCwgMHgyMDI5KV0sXG5cdFsnUycsIHJlZ2VuZXJhdGUoKVxuXHRcdC5hZGRSYW5nZSgweDAsIDB4OClcblx0XHQuYWRkUmFuZ2UoMHhFLCAweDFGKVxuXHRcdC5hZGRSYW5nZSgweDIxLCAweDlGKVxuXHRcdC5hZGRSYW5nZSgweEExLCAweDE2N0YpXG5cdFx0LmFkZFJhbmdlKDB4MTY4MSwgMHgxRkZGKVxuXHRcdC5hZGRSYW5nZSgweDIwMEIsIDB4MjAyNylcblx0XHQuYWRkUmFuZ2UoMHgyMDJBLCAweDIwMkUpXG5cdFx0LmFkZFJhbmdlKDB4MjAzMCwgMHgyMDVFKVxuXHRcdC5hZGRSYW5nZSgweDIwNjAsIDB4MkZGRilcblx0XHQuYWRkUmFuZ2UoMHgzMDAxLCAweEZFRkUpXG5cdFx0LmFkZFJhbmdlKDB4RkYwMCwgMHhGRkZGKV0sXG5cdFsndycsIHJlZ2VuZXJhdGUoMHg1Rilcblx0XHQuYWRkUmFuZ2UoMHgzMCwgMHgzOSlcblx0XHQuYWRkUmFuZ2UoMHg0MSwgMHg1QSlcblx0XHQuYWRkUmFuZ2UoMHg2MSwgMHg3QSldLFxuXHRbJ1cnLCByZWdlbmVyYXRlKDB4NjApXG5cdFx0LmFkZFJhbmdlKDB4MCwgMHgyRilcblx0XHQuYWRkUmFuZ2UoMHgzQSwgMHg0MClcblx0XHQuYWRkUmFuZ2UoMHg1QiwgMHg1RSlcblx0XHQuYWRkUmFuZ2UoMHg3QiwgMHhGRkZGKV1cbl0pO1xuXG52YXIgVU5JQ09ERSA9IG5ldyBNYXAoW1xuXHRbJ2QnLCByZWdlbmVyYXRlKClcblx0XHQuYWRkUmFuZ2UoMHgzMCwgMHgzOSldLFxuXHRbJ0QnLCByZWdlbmVyYXRlKClcblx0XHQuYWRkUmFuZ2UoMHgwLCAweDJGKVxuXHRcdC5hZGRSYW5nZSgweDNBLCAweDEwRkZGRildLFxuXHRbJ3MnLCByZWdlbmVyYXRlKDB4MjAsIDB4QTAsIDB4MTY4MCwgMHgyMDJGLCAweDIwNUYsIDB4MzAwMCwgMHhGRUZGKVxuXHRcdC5hZGRSYW5nZSgweDksIDB4RClcblx0XHQuYWRkUmFuZ2UoMHgyMDAwLCAweDIwMEEpXG5cdFx0LmFkZFJhbmdlKDB4MjAyOCwgMHgyMDI5KV0sXG5cdFsnUycsIHJlZ2VuZXJhdGUoKVxuXHRcdC5hZGRSYW5nZSgweDAsIDB4OClcblx0XHQuYWRkUmFuZ2UoMHhFLCAweDFGKVxuXHRcdC5hZGRSYW5nZSgweDIxLCAweDlGKVxuXHRcdC5hZGRSYW5nZSgweEExLCAweDE2N0YpXG5cdFx0LmFkZFJhbmdlKDB4MTY4MSwgMHgxRkZGKVxuXHRcdC5hZGRSYW5nZSgweDIwMEIsIDB4MjAyNylcblx0XHQuYWRkUmFuZ2UoMHgyMDJBLCAweDIwMkUpXG5cdFx0LmFkZFJhbmdlKDB4MjAzMCwgMHgyMDVFKVxuXHRcdC5hZGRSYW5nZSgweDIwNjAsIDB4MkZGRilcblx0XHQuYWRkUmFuZ2UoMHgzMDAxLCAweEZFRkUpXG5cdFx0LmFkZFJhbmdlKDB4RkYwMCwgMHgxMEZGRkYpXSxcblx0Wyd3JywgcmVnZW5lcmF0ZSgweDVGKVxuXHRcdC5hZGRSYW5nZSgweDMwLCAweDM5KVxuXHRcdC5hZGRSYW5nZSgweDQxLCAweDVBKVxuXHRcdC5hZGRSYW5nZSgweDYxLCAweDdBKV0sXG5cdFsnVycsIHJlZ2VuZXJhdGUoMHg2MClcblx0XHQuYWRkUmFuZ2UoMHgwLCAweDJGKVxuXHRcdC5hZGRSYW5nZSgweDNBLCAweDQwKVxuXHRcdC5hZGRSYW5nZSgweDVCLCAweDVFKVxuXHRcdC5hZGRSYW5nZSgweDdCLCAweDEwRkZGRildXG5dKTtcblxudmFyIFVOSUNPREVfSUdOT1JFX0NBU0UgPSBuZXcgTWFwKFtcblx0WydkJywgcmVnZW5lcmF0ZSgpXG5cdFx0LmFkZFJhbmdlKDB4MzAsIDB4MzkpXSxcblx0WydEJywgcmVnZW5lcmF0ZSgpXG5cdFx0LmFkZFJhbmdlKDB4MCwgMHgyRilcblx0XHQuYWRkUmFuZ2UoMHgzQSwgMHgxMEZGRkYpXSxcblx0WydzJywgcmVnZW5lcmF0ZSgweDIwLCAweEEwLCAweDE2ODAsIDB4MjAyRiwgMHgyMDVGLCAweDMwMDAsIDB4RkVGRilcblx0XHQuYWRkUmFuZ2UoMHg5LCAweEQpXG5cdFx0LmFkZFJhbmdlKDB4MjAwMCwgMHgyMDBBKVxuXHRcdC5hZGRSYW5nZSgweDIwMjgsIDB4MjAyOSldLFxuXHRbJ1MnLCByZWdlbmVyYXRlKClcblx0XHQuYWRkUmFuZ2UoMHgwLCAweDgpXG5cdFx0LmFkZFJhbmdlKDB4RSwgMHgxRilcblx0XHQuYWRkUmFuZ2UoMHgyMSwgMHg5Rilcblx0XHQuYWRkUmFuZ2UoMHhBMSwgMHgxNjdGKVxuXHRcdC5hZGRSYW5nZSgweDE2ODEsIDB4MUZGRilcblx0XHQuYWRkUmFuZ2UoMHgyMDBCLCAweDIwMjcpXG5cdFx0LmFkZFJhbmdlKDB4MjAyQSwgMHgyMDJFKVxuXHRcdC5hZGRSYW5nZSgweDIwMzAsIDB4MjA1RSlcblx0XHQuYWRkUmFuZ2UoMHgyMDYwLCAweDJGRkYpXG5cdFx0LmFkZFJhbmdlKDB4MzAwMSwgMHhGRUZFKVxuXHRcdC5hZGRSYW5nZSgweEZGMDAsIDB4MTBGRkZGKV0sXG5cdFsndycsIHJlZ2VuZXJhdGUoMHg1RiwgMHgxN0YsIDB4MjEyQSlcblx0XHQuYWRkUmFuZ2UoMHgzMCwgMHgzOSlcblx0XHQuYWRkUmFuZ2UoMHg0MSwgMHg1QSlcblx0XHQuYWRkUmFuZ2UoMHg2MSwgMHg3QSldLFxuXHRbJ1cnLCByZWdlbmVyYXRlKDB4NjApXG5cdFx0LmFkZFJhbmdlKDB4MCwgMHgyRilcblx0XHQuYWRkUmFuZ2UoMHgzQSwgMHg0MClcblx0XHQuYWRkUmFuZ2UoMHg1QiwgMHg1RSlcblx0XHQuYWRkUmFuZ2UoMHg3QiwgMHgxN0UpXG5cdFx0LmFkZFJhbmdlKDB4MTgwLCAweDIxMjkpXG5cdFx0LmFkZFJhbmdlKDB4MjEyQiwgMHgxMEZGRkYpXVxuXSk7XG5cbnZhciBjaGFyYWN0ZXJDbGFzc0VzY2FwZVNldHMgPSB7XG5cdFJFR1VMQVI6IFJFR1VMQVIsXG5cdFVOSUNPREU6IFVOSUNPREUsXG5cdFVOSUNPREVfSUdOT1JFX0NBU0U6IFVOSUNPREVfSUdOT1JFX0NBU0Vcbn07XG5cbnZhciByZXdyaXRlUGF0dGVybl8xID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSkge1xudmFyIGdlbmVyYXRlID0gcmVnanNnZW4uZ2VuZXJhdGU7XG52YXIgcGFyc2UgPSBwYXJzZXIucGFyc2U7XG5cblxuXG5cblxuXG4vLyBQcmVwYXJlIGEgUmVnZW5lcmF0ZSBzZXQgY29udGFpbmluZyBhbGwgY29kZSBwb2ludHMsIHVzZWQgZm9yIG5lZ2F0aXZlXG4vLyBjaGFyYWN0ZXIgY2xhc3NlcyAoaWYgYW55KS5cbnZhciBVTklDT0RFX1NFVCA9IHJlZ2VuZXJhdGUoKS5hZGRSYW5nZSgweDAsIDB4MTBGRkZGKTtcbi8vIFdpdGhvdXQgdGhlIGB1YCBmbGFnLCB0aGUgcmFuZ2Ugc3RvcHMgYXQgMHhGRkZGLlxuLy8gaHR0cHM6Ly9tdGhzLmJlL2VzNiNzZWMtcGF0dGVybi1zZW1hbnRpY3NcbnZhciBCTVBfU0VUID0gcmVnZW5lcmF0ZSgpLmFkZFJhbmdlKDB4MCwgMHhGRkZGKTtcblxuLy8gUHJlcGFyZSBhIFJlZ2VuZXJhdGUgc2V0IGNvbnRhaW5pbmcgYWxsIGNvZGUgcG9pbnRzIHRoYXQgYXJlIHN1cHBvc2VkIHRvIGJlXG4vLyBtYXRjaGVkIGJ5IGAvLi91YC4gaHR0cHM6Ly9tdGhzLmJlL2VzNiNzZWMtYXRvbVxudmFyIERPVF9TRVRfVU5JQ09ERSA9IFVOSUNPREVfU0VULmNsb25lKCkgLy8gYWxsIFVuaWNvZGUgY29kZSBwb2ludHNcblx0LnJlbW92ZShcblx0XHQvLyBtaW51cyBgTGluZVRlcm1pbmF0b3JgcyAoaHR0cHM6Ly9tdGhzLmJlL2VzNiNzZWMtbGluZS10ZXJtaW5hdG9ycyk6XG5cdFx0MHgwMDBBLCAvLyBMaW5lIEZlZWQgPExGPlxuXHRcdDB4MDAwRCwgLy8gQ2FycmlhZ2UgUmV0dXJuIDxDUj5cblx0XHQweDIwMjgsIC8vIExpbmUgU2VwYXJhdG9yIDxMUz5cblx0XHQweDIwMjkgIC8vIFBhcmFncmFwaCBTZXBhcmF0b3IgPFBTPlxuXHQpO1xuLy8gUHJlcGFyZSBhIFJlZ2VuZXJhdGUgc2V0IGNvbnRhaW5pbmcgYWxsIGNvZGUgcG9pbnRzIHRoYXQgYXJlIHN1cHBvc2VkIHRvIGJlXG4vLyBtYXRjaGVkIGJ5IGAvLi9gIChvbmx5IEJNUCBjb2RlIHBvaW50cykuXG52YXIgRE9UX1NFVCA9IERPVF9TRVRfVU5JQ09ERS5jbG9uZSgpXG5cdC5pbnRlcnNlY3Rpb24oQk1QX1NFVCk7XG5cbnZhciBnZXRDaGFyYWN0ZXJDbGFzc0VzY2FwZVNldCA9IGZ1bmN0aW9uIChjaGFyYWN0ZXIsIHVuaWNvZGUsIGlnbm9yZUNhc2UpIHtcblx0aWYgKHVuaWNvZGUpIHtcblx0XHRpZiAoaWdub3JlQ2FzZSkge1xuXHRcdFx0cmV0dXJuIGNoYXJhY3RlckNsYXNzRXNjYXBlU2V0cy5VTklDT0RFX0lHTk9SRV9DQVNFLmdldChjaGFyYWN0ZXIpO1xuXHRcdH1cblx0XHRyZXR1cm4gY2hhcmFjdGVyQ2xhc3NFc2NhcGVTZXRzLlVOSUNPREUuZ2V0KGNoYXJhY3Rlcik7XG5cdH1cblx0cmV0dXJuIGNoYXJhY3RlckNsYXNzRXNjYXBlU2V0cy5SRUdVTEFSLmdldChjaGFyYWN0ZXIpO1xufTtcblxudmFyIGdldERvdFNldCA9IGZ1bmN0aW9uICh1bmljb2RlLCBkb3RBbGwpIHtcblx0aWYgKGRvdEFsbCkge1xuXHRcdHJldHVybiB1bmljb2RlID8gVU5JQ09ERV9TRVQgOiBCTVBfU0VUO1xuXHR9XG5cdHJldHVybiB1bmljb2RlID8gRE9UX1NFVF9VTklDT0RFIDogRE9UX1NFVDtcbn07XG5cbnZhciBnZXRVbmljb2RlUHJvcGVydHlWYWx1ZVNldCA9IGZ1bmN0aW9uIChwcm9wZXJ0eSwgdmFsdWUpIHtcblx0dmFyIHBhdGggPSB2YWx1ZSA/XG5cdFx0KHByb3BlcnR5ICsgXCIvXCIgKyB2YWx1ZSkgOlxuXHRcdChcIkJpbmFyeV9Qcm9wZXJ0eS9cIiArIHByb3BlcnR5KTtcblx0dHJ5IHtcblx0XHRyZXR1cm4gY29tbW9uanNSZXF1aXJlKChcInJlZ2VuZXJhdGUtdW5pY29kZS1wcm9wZXJ0aWVzL1wiICsgcGF0aCArIFwiLmpzXCIpKTtcblx0fSBjYXRjaCAoZXhjZXB0aW9uKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XCJGYWlsZWQgdG8gcmVjb2duaXplIHZhbHVlIGBcIiArIHZhbHVlICsgXCJgIGZvciBwcm9wZXJ0eSBcIiArXG5cdFx0XHRcImBcIiArIHByb3BlcnR5ICsgXCJgLlwiXG5cdFx0KTtcblx0fVxufTtcblxudmFyIGhhbmRsZUxvbmVVbmljb2RlUHJvcGVydHlOYW1lT3JWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQvLyBJdCBjb3VsZCBiZSBhIGBHZW5lcmFsX0NhdGVnb3J5YCB2YWx1ZSBvciBhIGJpbmFyeSBwcm9wZXJ0eS5cblx0Ly8gTm90ZTogYHVuaWNvZGVNYXRjaFByb3BlcnR5VmFsdWVgIHRocm93cyBvbiBpbnZhbGlkIHZhbHVlcy5cblx0dHJ5IHtcblx0XHR2YXIgcHJvcGVydHkkMSA9ICdHZW5lcmFsX0NhdGVnb3J5Jztcblx0XHR2YXIgY2F0ZWdvcnkgPSB1bmljb2RlTWF0Y2hQcm9wZXJ0eVZhbHVlRWNtYXNjcmlwdChwcm9wZXJ0eSQxLCB2YWx1ZSk7XG5cdFx0cmV0dXJuIGdldFVuaWNvZGVQcm9wZXJ0eVZhbHVlU2V0KHByb3BlcnR5JDEsIGNhdGVnb3J5KTtcblx0fSBjYXRjaCAoZXhjZXB0aW9uKSB7fVxuXHQvLyBJdOKAmXMgbm90IGEgYEdlbmVyYWxfQ2F0ZWdvcnlgIHZhbHVlLCBzbyBjaGVjayBpZiBpdOKAmXMgYSBiaW5hcnlcblx0Ly8gcHJvcGVydHkuIE5vdGU6IGB1bmljb2RlTWF0Y2hQcm9wZXJ0eWAgdGhyb3dzIG9uIGludmFsaWQgcHJvcGVydGllcy5cblx0dmFyIHByb3BlcnR5ID0gdW5pY29kZU1hdGNoUHJvcGVydHlFY21hc2NyaXB0KHZhbHVlKTtcblx0cmV0dXJuIGdldFVuaWNvZGVQcm9wZXJ0eVZhbHVlU2V0KHByb3BlcnR5KTtcbn07XG5cbnZhciBnZXRVbmljb2RlUHJvcGVydHlFc2NhcGVTZXQgPSBmdW5jdGlvbiAodmFsdWUsIGlzTmVnYXRpdmUpIHtcblx0dmFyIHBhcnRzID0gdmFsdWUuc3BsaXQoJz0nKTtcblx0dmFyIGZpcnN0UGFydCA9IHBhcnRzWzBdO1xuXHR2YXIgc2V0O1xuXHRpZiAocGFydHMubGVuZ3RoID09IDEpIHtcblx0XHRzZXQgPSBoYW5kbGVMb25lVW5pY29kZVByb3BlcnR5TmFtZU9yVmFsdWUoZmlyc3RQYXJ0KTtcblx0fSBlbHNlIHtcblx0XHQvLyBUaGUgcGF0dGVybiBjb25zaXN0cyBvZiB0d28gcGFydHMsIGkuZS4gYFByb3BlcnR5PVZhbHVlYC5cblx0XHR2YXIgcHJvcGVydHkgPSB1bmljb2RlTWF0Y2hQcm9wZXJ0eUVjbWFzY3JpcHQoZmlyc3RQYXJ0KTtcblx0XHR2YXIgdmFsdWUkMSA9IHVuaWNvZGVNYXRjaFByb3BlcnR5VmFsdWVFY21hc2NyaXB0KHByb3BlcnR5LCBwYXJ0c1sxXSk7XG5cdFx0c2V0ID0gZ2V0VW5pY29kZVByb3BlcnR5VmFsdWVTZXQocHJvcGVydHksIHZhbHVlJDEpO1xuXHR9XG5cdGlmIChpc05lZ2F0aXZlKSB7XG5cdFx0cmV0dXJuIFVOSUNPREVfU0VULmNsb25lKCkucmVtb3ZlKHNldCk7XG5cdH1cblx0cmV0dXJuIHNldC5jbG9uZSgpO1xufTtcblxuLy8gR2l2ZW4gYSByYW5nZSBvZiBjb2RlIHBvaW50cywgYWRkIGFueSBjYXNlLWZvbGRlZCBjb2RlIHBvaW50cyBpbiB0aGF0IHJhbmdlXG4vLyB0byBhIHNldC5cbnJlZ2VuZXJhdGUucHJvdG90eXBlLml1QWRkUmFuZ2UgPSBmdW5jdGlvbihtaW4sIG1heCkge1xuXHR2YXIgJHRoaXMgPSB0aGlzO1xuXHRkbyB7XG5cdFx0dmFyIGZvbGRlZCA9IGNhc2VGb2xkKG1pbik7XG5cdFx0aWYgKGZvbGRlZCkge1xuXHRcdFx0JHRoaXMuYWRkKGZvbGRlZCk7XG5cdFx0fVxuXHR9IHdoaWxlICgrK21pbiA8PSBtYXgpO1xuXHRyZXR1cm4gJHRoaXM7XG59O1xuXG52YXIgdXBkYXRlID0gZnVuY3Rpb24gKGl0ZW0sIHBhdHRlcm4pIHtcblx0dmFyIHRyZWUgPSBwYXJzZShwYXR0ZXJuLCBjb25maWcudXNlVW5pY29kZUZsYWcgPyAndScgOiAnJyk7XG5cdHN3aXRjaCAodHJlZS50eXBlKSB7XG5cdFx0Y2FzZSAnY2hhcmFjdGVyQ2xhc3MnOlxuXHRcdGNhc2UgJ2dyb3VwJzpcblx0XHRjYXNlICd2YWx1ZSc6XG5cdFx0XHQvLyBObyB3cmFwcGluZyBuZWVkZWQuXG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OlxuXHRcdFx0Ly8gV3JhcCB0aGUgcGF0dGVybiBpbiBhIG5vbi1jYXB0dXJpbmcgZ3JvdXAuXG5cdFx0XHR0cmVlID0gd3JhcCh0cmVlLCBwYXR0ZXJuKTtcblx0fVxuXHRPYmplY3QuYXNzaWduKGl0ZW0sIHRyZWUpO1xufTtcblxudmFyIHdyYXAgPSBmdW5jdGlvbiAodHJlZSwgcGF0dGVybikge1xuXHQvLyBXcmFwIHRoZSBwYXR0ZXJuIGluIGEgbm9uLWNhcHR1cmluZyBncm91cC5cblx0cmV0dXJuIHtcblx0XHQndHlwZSc6ICdncm91cCcsXG5cdFx0J2JlaGF2aW9yJzogJ2lnbm9yZScsXG5cdFx0J2JvZHknOiBbdHJlZV0sXG5cdFx0J3Jhdyc6IChcIig/OlwiICsgcGF0dGVybiArIFwiKVwiKVxuXHR9O1xufTtcblxudmFyIGNhc2VGb2xkID0gZnVuY3Rpb24gKGNvZGVQb2ludCkge1xuXHRyZXR1cm4gaXVNYXBwaW5ncy5nZXQoY29kZVBvaW50KSB8fCBmYWxzZTtcbn07XG5cbnZhciBwcm9jZXNzQ2hhcmFjdGVyQ2xhc3MgPSBmdW5jdGlvbiAoY2hhcmFjdGVyQ2xhc3NJdGVtLCByZWdlbmVyYXRlT3B0aW9ucykge1xuXHR2YXIgc2V0ID0gcmVnZW5lcmF0ZSgpO1xuXHRmb3IgKHZhciBpID0gMCwgbGlzdCA9IGNoYXJhY3RlckNsYXNzSXRlbS5ib2R5OyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcblxuXHRcdHN3aXRjaCAoaXRlbS50eXBlKSB7XG5cdFx0XHRjYXNlICd2YWx1ZSc6XG5cdFx0XHRcdHNldC5hZGQoaXRlbS5jb2RlUG9pbnQpO1xuXHRcdFx0XHRpZiAoY29uZmlnLmlnbm9yZUNhc2UgJiYgY29uZmlnLnVuaWNvZGUgJiYgIWNvbmZpZy51c2VVbmljb2RlRmxhZykge1xuXHRcdFx0XHRcdHZhciBmb2xkZWQgPSBjYXNlRm9sZChpdGVtLmNvZGVQb2ludCk7XG5cdFx0XHRcdFx0aWYgKGZvbGRlZCkge1xuXHRcdFx0XHRcdFx0c2V0LmFkZChmb2xkZWQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2NoYXJhY3RlckNsYXNzUmFuZ2UnOlxuXHRcdFx0XHR2YXIgbWluID0gaXRlbS5taW4uY29kZVBvaW50O1xuXHRcdFx0XHR2YXIgbWF4ID0gaXRlbS5tYXguY29kZVBvaW50O1xuXHRcdFx0XHRzZXQuYWRkUmFuZ2UobWluLCBtYXgpO1xuXHRcdFx0XHRpZiAoY29uZmlnLmlnbm9yZUNhc2UgJiYgY29uZmlnLnVuaWNvZGUgJiYgIWNvbmZpZy51c2VVbmljb2RlRmxhZykge1xuXHRcdFx0XHRcdHNldC5pdUFkZFJhbmdlKG1pbiwgbWF4KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2NoYXJhY3RlckNsYXNzRXNjYXBlJzpcblx0XHRcdFx0c2V0LmFkZChnZXRDaGFyYWN0ZXJDbGFzc0VzY2FwZVNldChcblx0XHRcdFx0XHRpdGVtLnZhbHVlLFxuXHRcdFx0XHRcdGNvbmZpZy51bmljb2RlLFxuXHRcdFx0XHRcdGNvbmZpZy5pZ25vcmVDYXNlXG5cdFx0XHRcdCkpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ3VuaWNvZGVQcm9wZXJ0eUVzY2FwZSc6XG5cdFx0XHRcdHNldC5hZGQoZ2V0VW5pY29kZVByb3BlcnR5RXNjYXBlU2V0KGl0ZW0udmFsdWUsIGl0ZW0ubmVnYXRpdmUpKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHQvLyBUaGUgYGRlZmF1bHRgIGNsYXVzZSBpcyBvbmx5IGhlcmUgYXMgYSBzYWZlZ3VhcmQ7IGl0IHNob3VsZCBuZXZlciBiZVxuXHRcdFx0Ly8gcmVhY2hlZC4gQ29kZSBjb3ZlcmFnZSB0b29scyBzaG91bGQgaWdub3JlIGl0LlxuXHRcdFx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcigoXCJVbmtub3duIHRlcm0gdHlwZTogXCIgKyAoaXRlbS50eXBlKSkpO1xuXHRcdH1cblx0fVxuXHRpZiAoY2hhcmFjdGVyQ2xhc3NJdGVtLm5lZ2F0aXZlKSB7XG5cdFx0c2V0ID0gKGNvbmZpZy51bmljb2RlID8gVU5JQ09ERV9TRVQgOiBCTVBfU0VUKS5jbG9uZSgpLnJlbW92ZShzZXQpO1xuXHR9XG5cdHVwZGF0ZShjaGFyYWN0ZXJDbGFzc0l0ZW0sIHNldC50b1N0cmluZyhyZWdlbmVyYXRlT3B0aW9ucykpO1xuXHRyZXR1cm4gY2hhcmFjdGVyQ2xhc3NJdGVtO1xufTtcblxudmFyIHByb2Nlc3NUZXJtID0gZnVuY3Rpb24gKGl0ZW0sIHJlZ2VuZXJhdGVPcHRpb25zKSB7XG5cdHN3aXRjaCAoaXRlbS50eXBlKSB7XG5cdFx0Y2FzZSAnZG90Jzpcblx0XHRcdHVwZGF0ZShcblx0XHRcdFx0aXRlbSxcblx0XHRcdFx0Z2V0RG90U2V0KGNvbmZpZy51bmljb2RlLCBjb25maWcuZG90QWxsKS50b1N0cmluZyhyZWdlbmVyYXRlT3B0aW9ucylcblx0XHRcdCk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdjaGFyYWN0ZXJDbGFzcyc6XG5cdFx0XHRpdGVtID0gcHJvY2Vzc0NoYXJhY3RlckNsYXNzKGl0ZW0sIHJlZ2VuZXJhdGVPcHRpb25zKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ3VuaWNvZGVQcm9wZXJ0eUVzY2FwZSc6XG5cdFx0XHR1cGRhdGUoXG5cdFx0XHRcdGl0ZW0sXG5cdFx0XHRcdGdldFVuaWNvZGVQcm9wZXJ0eUVzY2FwZVNldChpdGVtLnZhbHVlLCBpdGVtLm5lZ2F0aXZlKVxuXHRcdFx0XHRcdC50b1N0cmluZyhyZWdlbmVyYXRlT3B0aW9ucylcblx0XHRcdCk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdjaGFyYWN0ZXJDbGFzc0VzY2FwZSc6XG5cdFx0XHR1cGRhdGUoXG5cdFx0XHRcdGl0ZW0sXG5cdFx0XHRcdGdldENoYXJhY3RlckNsYXNzRXNjYXBlU2V0KFxuXHRcdFx0XHRcdGl0ZW0udmFsdWUsXG5cdFx0XHRcdFx0Y29uZmlnLnVuaWNvZGUsXG5cdFx0XHRcdFx0Y29uZmlnLmlnbm9yZUNhc2Vcblx0XHRcdFx0KS50b1N0cmluZyhyZWdlbmVyYXRlT3B0aW9ucylcblx0XHRcdCk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdhbHRlcm5hdGl2ZSc6XG5cdFx0Y2FzZSAnZGlzanVuY3Rpb24nOlxuXHRcdGNhc2UgJ2dyb3VwJzpcblx0XHRjYXNlICdxdWFudGlmaWVyJzpcblx0XHRcdGl0ZW0uYm9keSA9IGl0ZW0uYm9keS5tYXAoZnVuY3Rpb24gKHRlcm0pIHtcblx0XHRcdFx0cmV0dXJuIHByb2Nlc3NUZXJtKHRlcm0sIHJlZ2VuZXJhdGVPcHRpb25zKTtcblx0XHRcdH0pO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAndmFsdWUnOlxuXHRcdFx0dmFyIGNvZGVQb2ludCA9IGl0ZW0uY29kZVBvaW50O1xuXHRcdFx0dmFyIHNldCA9IHJlZ2VuZXJhdGUoY29kZVBvaW50KTtcblx0XHRcdGlmIChjb25maWcuaWdub3JlQ2FzZSAmJiBjb25maWcudW5pY29kZSAmJiAhY29uZmlnLnVzZVVuaWNvZGVGbGFnKSB7XG5cdFx0XHRcdHZhciBmb2xkZWQgPSBjYXNlRm9sZChjb2RlUG9pbnQpO1xuXHRcdFx0XHRpZiAoZm9sZGVkKSB7XG5cdFx0XHRcdFx0c2V0LmFkZChmb2xkZWQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR1cGRhdGUoaXRlbSwgc2V0LnRvU3RyaW5nKHJlZ2VuZXJhdGVPcHRpb25zKSk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdhbmNob3InOlxuXHRcdGNhc2UgJ2VtcHR5Jzpcblx0XHRjYXNlICdncm91cCc6XG5cdFx0Y2FzZSAncmVmZXJlbmNlJzpcblx0XHRcdC8vIE5vdGhpbmcgdG8gZG8gaGVyZS5cblx0XHRcdGJyZWFrO1xuXHRcdC8vIFRoZSBgZGVmYXVsdGAgY2xhdXNlIGlzIG9ubHkgaGVyZSBhcyBhIHNhZmVndWFyZDsgaXQgc2hvdWxkIG5ldmVyIGJlXG5cdFx0Ly8gcmVhY2hlZC4gQ29kZSBjb3ZlcmFnZSB0b29scyBzaG91bGQgaWdub3JlIGl0LlxuXHRcdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdFx0ZGVmYXVsdDpcblx0XHRcdHRocm93IG5ldyBFcnJvcigoXCJVbmtub3duIHRlcm0gdHlwZTogXCIgKyAoaXRlbS50eXBlKSkpO1xuXHR9XG5cdHJldHVybiBpdGVtO1xufTtcblxudmFyIGNvbmZpZyA9IHtcblx0J2lnbm9yZUNhc2UnOiBmYWxzZSxcblx0J3VuaWNvZGUnOiBmYWxzZSxcblx0J2RvdEFsbCc6IGZhbHNlLFxuXHQndXNlVW5pY29kZUZsYWcnOiBmYWxzZVxufTtcbnZhciByZXdyaXRlUGF0dGVybiA9IGZ1bmN0aW9uIChwYXR0ZXJuLCBmbGFncywgb3B0aW9ucykge1xuXHR2YXIgcmVnanNwYXJzZXJGZWF0dXJlcyA9IHtcblx0XHQndW5pY29kZVByb3BlcnR5RXNjYXBlJzogb3B0aW9ucyAmJiBvcHRpb25zLnVuaWNvZGVQcm9wZXJ0eUVzY2FwZVxuXHR9O1xuXHRjb25maWcuaWdub3JlQ2FzZSA9IGZsYWdzICYmIGZsYWdzLmluY2x1ZGVzKCdpJyk7XG5cdGNvbmZpZy51bmljb2RlID0gZmxhZ3MgJiYgZmxhZ3MuaW5jbHVkZXMoJ3UnKTtcblx0dmFyIHN1cHBvcnREb3RBbGxGbGFnID0gb3B0aW9ucyAmJiBvcHRpb25zLmRvdEFsbEZsYWc7XG5cdGNvbmZpZy5kb3RBbGwgPSBzdXBwb3J0RG90QWxsRmxhZyAmJiBmbGFncyAmJiBmbGFncy5pbmNsdWRlcygncycpO1xuXHRjb25maWcudXNlVW5pY29kZUZsYWcgPSBvcHRpb25zICYmIG9wdGlvbnMudXNlVW5pY29kZUZsYWc7XG5cdHZhciByZWdlbmVyYXRlT3B0aW9ucyA9IHtcblx0XHQnaGFzVW5pY29kZUZsYWcnOiBjb25maWcudXNlVW5pY29kZUZsYWcsXG5cdFx0J2JtcE9ubHknOiAhY29uZmlnLnVuaWNvZGVcblx0fTtcblx0dmFyIHRyZWUgPSBwYXJzZShwYXR0ZXJuLCBmbGFncywgcmVnanNwYXJzZXJGZWF0dXJlcyk7XG5cdC8vIE5vdGU6IGBwcm9jZXNzVGVybWAgbXV0YXRlcyBgdHJlZWAuXG5cdHByb2Nlc3NUZXJtKHRyZWUsIHJlZ2VuZXJhdGVPcHRpb25zKTtcblx0cmV0dXJuIGdlbmVyYXRlKHRyZWUpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSByZXdyaXRlUGF0dGVybjtcbn0pO1xuXG52YXIgTGl0ZXJhbCA9IChmdW5jdGlvbiAoTm9kZSQkMSkge1xuXHRmdW5jdGlvbiBMaXRlcmFsICgpIHtcblx0XHROb2RlJCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAoIE5vZGUkJDEgKSBMaXRlcmFsLl9fcHJvdG9fXyA9IE5vZGUkJDE7XG5cdExpdGVyYWwucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTm9kZSQkMSAmJiBOb2RlJCQxLnByb3RvdHlwZSApO1xuXHRMaXRlcmFsLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExpdGVyYWw7XG5cblx0TGl0ZXJhbC5wcm90b3R5cGUuaW5pdGlhbGlzZSA9IGZ1bmN0aW9uIGluaXRpYWxpc2UgKCkge1xuXHRcdGlmICh0eXBlb2YgdGhpcy52YWx1ZSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdHRoaXMucHJvZ3JhbS5pbmRlbnRFeGNsdXNpb25FbGVtZW50cy5wdXNoKHRoaXMpO1xuXHRcdH1cblx0fTtcblxuXHRMaXRlcmFsLnByb3RvdHlwZS50cmFuc3BpbGUgPSBmdW5jdGlvbiB0cmFuc3BpbGUgKGNvZGUsIHRyYW5zZm9ybXMpIHtcblx0XHRpZiAodHJhbnNmb3Jtcy5udW1lcmljTGl0ZXJhbCkge1xuXHRcdFx0dmFyIGxlYWRpbmcgPSB0aGlzLnJhdy5zbGljZSgwLCAyKTtcblx0XHRcdGlmIChsZWFkaW5nID09PSAnMGInIHx8IGxlYWRpbmcgPT09ICcwbycpIHtcblx0XHRcdFx0Y29kZS5vdmVyd3JpdGUodGhpcy5zdGFydCwgdGhpcy5lbmQsIFN0cmluZyh0aGlzLnZhbHVlKSwge1xuXHRcdFx0XHRcdHN0b3JlTmFtZTogdHJ1ZSxcblx0XHRcdFx0XHRjb250ZW50T25seTogdHJ1ZVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAodGhpcy5yZWdleCkge1xuXHRcdFx0dmFyIHJlZiA9IHRoaXMucmVnZXg7XG5cdFx0XHR2YXIgcGF0dGVybiA9IHJlZi5wYXR0ZXJuO1xuXHRcdFx0dmFyIGZsYWdzID0gcmVmLmZsYWdzO1xuXG5cdFx0XHRpZiAodHJhbnNmb3Jtcy5zdGlja3lSZWdFeHAgJiYgL3kvLnRlc3QoZmxhZ3MpKVxuXHRcdFx0XHR7IHRocm93IG5ldyBDb21waWxlRXJyb3IoXG5cdFx0XHRcdFx0J1JlZ3VsYXIgZXhwcmVzc2lvbiBzdGlja3kgZmxhZyBpcyBub3Qgc3VwcG9ydGVkJyxcblx0XHRcdFx0XHR0aGlzXG5cdFx0XHRcdCk7IH1cblx0XHRcdGlmICh0cmFuc2Zvcm1zLnVuaWNvZGVSZWdFeHAgJiYgL3UvLnRlc3QoZmxhZ3MpKSB7XG5cdFx0XHRcdGNvZGUub3ZlcndyaXRlKFxuXHRcdFx0XHRcdHRoaXMuc3RhcnQsXG5cdFx0XHRcdFx0dGhpcy5lbmQsXG5cdFx0XHRcdFx0KFwiL1wiICsgKHJld3JpdGVQYXR0ZXJuXzEocGF0dGVybiwgZmxhZ3MpKSArIFwiL1wiICsgKGZsYWdzLnJlcGxhY2UoJ3UnLCAnJykpKSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjb250ZW50T25seTogdHJ1ZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIExpdGVyYWw7XG59KE5vZGUpKTtcblxudmFyIE1lbWJlckV4cHJlc3Npb24gPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gTWVtYmVyRXhwcmVzc2lvbiAoKSB7XG5cdFx0Tm9kZSQkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0aWYgKCBOb2RlJCQxICkgTWVtYmVyRXhwcmVzc2lvbi5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRNZW1iZXJFeHByZXNzaW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0TWVtYmVyRXhwcmVzc2lvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNZW1iZXJFeHByZXNzaW9uO1xuXG5cdE1lbWJlckV4cHJlc3Npb24ucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdGlmICh0cmFuc2Zvcm1zLnJlc2VydmVkUHJvcGVydGllcyAmJiByZXNlcnZlZFt0aGlzLnByb3BlcnR5Lm5hbWVdKSB7XG5cdFx0XHRjb2RlLm92ZXJ3cml0ZSh0aGlzLm9iamVjdC5lbmQsIHRoaXMucHJvcGVydHkuc3RhcnQsIFwiWydcIik7XG5cdFx0XHRjb2RlLmFwcGVuZExlZnQodGhpcy5wcm9wZXJ0eS5lbmQsIFwiJ11cIik7XG5cdFx0fVxuXG5cdFx0Tm9kZSQkMS5wcm90b3R5cGUudHJhbnNwaWxlLmNhbGwodGhpcywgY29kZSwgdHJhbnNmb3Jtcyk7XG5cdH07XG5cblx0cmV0dXJuIE1lbWJlckV4cHJlc3Npb247XG59KE5vZGUpKTtcblxudmFyIE5ld0V4cHJlc3Npb24gPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gTmV3RXhwcmVzc2lvbiAoKSB7XG5cdFx0Tm9kZSQkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0aWYgKCBOb2RlJCQxICkgTmV3RXhwcmVzc2lvbi5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHROZXdFeHByZXNzaW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0TmV3RXhwcmVzc2lvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBOZXdFeHByZXNzaW9uO1xuXG5cdE5ld0V4cHJlc3Npb24ucHJvdG90eXBlLmluaXRpYWxpc2UgPSBmdW5jdGlvbiBpbml0aWFsaXNlICh0cmFuc2Zvcm1zKSB7XG5cdFx0dmFyIHRoaXMkMSA9IHRoaXM7XG5cblx0XHRpZiAodHJhbnNmb3Jtcy5zcHJlYWRSZXN0ICYmIHRoaXMuYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0dmFyIGxleGljYWxCb3VuZGFyeSA9IHRoaXMuZmluZExleGljYWxCb3VuZGFyeSgpO1xuXG5cdFx0XHR2YXIgaSA9IHRoaXMuYXJndW1lbnRzLmxlbmd0aDtcblx0XHRcdHdoaWxlIChpLS0pIHtcblx0XHRcdFx0dmFyIGFyZyA9IHRoaXMkMS5hcmd1bWVudHNbaV07XG5cdFx0XHRcdGlmIChhcmcudHlwZSA9PT0gJ1NwcmVhZEVsZW1lbnQnICYmIGlzQXJndW1lbnRzKGFyZy5hcmd1bWVudCkpIHtcblx0XHRcdFx0XHR0aGlzJDEuYXJndW1lbnRzQXJyYXlBbGlhcyA9IGxleGljYWxCb3VuZGFyeS5nZXRBcmd1bWVudHNBcnJheUFsaWFzKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHROb2RlJCQxLnByb3RvdHlwZS5pbml0aWFsaXNlLmNhbGwodGhpcywgdHJhbnNmb3Jtcyk7XG5cdH07XG5cblx0TmV3RXhwcmVzc2lvbi5wcm90b3R5cGUudHJhbnNwaWxlID0gZnVuY3Rpb24gdHJhbnNwaWxlIChjb2RlLCB0cmFuc2Zvcm1zKSB7XG5cdFx0Tm9kZSQkMS5wcm90b3R5cGUudHJhbnNwaWxlLmNhbGwodGhpcywgY29kZSwgdHJhbnNmb3Jtcyk7XG5cblx0XHRpZiAodHJhbnNmb3Jtcy5zcHJlYWRSZXN0ICYmIHRoaXMuYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0dmFyIGZpcnN0QXJndW1lbnQgPSB0aGlzLmFyZ3VtZW50c1swXTtcblx0XHRcdHZhciBpc05ldyA9IHRydWU7XG5cdFx0XHR2YXIgaGFzU3ByZWFkRWxlbWVudHMgPSBzcHJlYWQoXG5cdFx0XHRcdGNvZGUsXG5cdFx0XHRcdHRoaXMuYXJndW1lbnRzLFxuXHRcdFx0XHRmaXJzdEFyZ3VtZW50LnN0YXJ0LFxuXHRcdFx0XHR0aGlzLmFyZ3VtZW50c0FycmF5QWxpYXMsXG5cdFx0XHRcdGlzTmV3XG5cdFx0XHQpO1xuXG5cdFx0XHRpZiAoaGFzU3ByZWFkRWxlbWVudHMpIHtcblx0XHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQoXG5cdFx0XHRcdFx0dGhpcy5zdGFydCArICduZXcnLmxlbmd0aCxcblx0XHRcdFx0XHQnIChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseSgnXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGNvZGUub3ZlcndyaXRlKFxuXHRcdFx0XHRcdHRoaXMuY2FsbGVlLmVuZCxcblx0XHRcdFx0XHRmaXJzdEFyZ3VtZW50LnN0YXJ0LFxuXHRcdFx0XHRcdCcsIFsgbnVsbCBdLmNvbmNhdCggJ1xuXHRcdFx0XHQpO1xuXHRcdFx0XHRjb2RlLmFwcGVuZExlZnQodGhpcy5lbmQsICcgKSknKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAodGhpcy5hcmd1bWVudHMubGVuZ3RoKSB7XG5cdFx0XHRyZW1vdmVUcmFpbGluZ0NvbW1hKGNvZGUsIHRoaXMuYXJndW1lbnRzW3RoaXMuYXJndW1lbnRzLmxlbmd0aCAtIDFdLmVuZCk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBOZXdFeHByZXNzaW9uO1xufShOb2RlKSk7XG5cbnZhciBPYmplY3RFeHByZXNzaW9uID0gKGZ1bmN0aW9uIChOb2RlJCQxKSB7XG5cdGZ1bmN0aW9uIE9iamVjdEV4cHJlc3Npb24gKCkge1xuXHRcdE5vZGUkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTm9kZSQkMSApIE9iamVjdEV4cHJlc3Npb24uX19wcm90b19fID0gTm9kZSQkMTtcblx0T2JqZWN0RXhwcmVzc2lvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBOb2RlJCQxICYmIE5vZGUkJDEucHJvdG90eXBlICk7XG5cdE9iamVjdEV4cHJlc3Npb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gT2JqZWN0RXhwcmVzc2lvbjtcblxuXHRPYmplY3RFeHByZXNzaW9uLnByb3RvdHlwZS50cmFuc3BpbGUgPSBmdW5jdGlvbiB0cmFuc3BpbGUgKGNvZGUsIHRyYW5zZm9ybXMpIHtcblx0XHR2YXIgdGhpcyQxID0gdGhpcztcblxuXHRcdE5vZGUkJDEucHJvdG90eXBlLnRyYW5zcGlsZS5jYWxsKHRoaXMsIGNvZGUsIHRyYW5zZm9ybXMpO1xuXG5cdFx0dmFyIGZpcnN0UHJvcGVydHlTdGFydCA9IHRoaXMuc3RhcnQgKyAxO1xuXHRcdHZhciByZWd1bGFyUHJvcGVydHlDb3VudCA9IDA7XG5cdFx0dmFyIHNwcmVhZFByb3BlcnR5Q291bnQgPSAwO1xuXHRcdHZhciBjb21wdXRlZFByb3BlcnR5Q291bnQgPSAwO1xuXHRcdHZhciBmaXJzdFNwcmVhZFByb3BlcnR5ID0gbnVsbDtcblx0XHR2YXIgZmlyc3RDb21wdXRlZFByb3BlcnR5ID0gbnVsbDtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9wZXJ0aWVzLmxlbmd0aDsgKytpKSB7XG5cdFx0XHR2YXIgcHJvcCA9IHRoaXMkMS5wcm9wZXJ0aWVzW2ldO1xuXHRcdFx0aWYgKHByb3AudHlwZSA9PT0gJ1NwcmVhZEVsZW1lbnQnKSB7XG5cdFx0XHRcdHNwcmVhZFByb3BlcnR5Q291bnQgKz0gMTtcblx0XHRcdFx0aWYgKGZpcnN0U3ByZWFkUHJvcGVydHkgPT09IG51bGwpIHsgZmlyc3RTcHJlYWRQcm9wZXJ0eSA9IGk7IH1cblx0XHRcdH0gZWxzZSBpZiAocHJvcC5jb21wdXRlZCkge1xuXHRcdFx0XHRjb21wdXRlZFByb3BlcnR5Q291bnQgKz0gMTtcblx0XHRcdFx0aWYgKGZpcnN0Q29tcHV0ZWRQcm9wZXJ0eSA9PT0gbnVsbCkgeyBmaXJzdENvbXB1dGVkUHJvcGVydHkgPSBpOyB9XG5cdFx0XHR9IGVsc2UgaWYgKHByb3AudHlwZSA9PT0gJ1Byb3BlcnR5Jykge1xuXHRcdFx0XHRyZWd1bGFyUHJvcGVydHlDb3VudCArPSAxO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChzcHJlYWRQcm9wZXJ0eUNvdW50KSB7XG5cdFx0XHRpZiAoIXRoaXMucHJvZ3JhbS5vcHRpb25zLm9iamVjdEFzc2lnbikge1xuXHRcdFx0XHR0aHJvdyBuZXcgQ29tcGlsZUVycm9yKFxuXHRcdFx0XHRcdFwiT2JqZWN0IHNwcmVhZCBvcGVyYXRvciByZXF1aXJlcyBzcGVjaWZpZWQgb2JqZWN0QXNzaWduIG9wdGlvbiB3aXRoICdPYmplY3QuYXNzaWduJyBvciBwb2x5ZmlsbCBoZWxwZXIuXCIsXG5cdFx0XHRcdFx0dGhpc1xuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gZW5jbG9zZSBydW4gb2Ygbm9uLXNwcmVhZCBwcm9wZXJ0aWVzIGluIGN1cmxpZXNcblx0XHRcdHZhciBpJDEgPSB0aGlzLnByb3BlcnRpZXMubGVuZ3RoO1xuXHRcdFx0aWYgKHJlZ3VsYXJQcm9wZXJ0eUNvdW50ICYmICFjb21wdXRlZFByb3BlcnR5Q291bnQpIHtcblx0XHRcdFx0d2hpbGUgKGkkMS0tKSB7XG5cdFx0XHRcdFx0dmFyIHByb3AkMSA9IHRoaXMkMS5wcm9wZXJ0aWVzW2kkMV07XG5cblx0XHRcdFx0XHRpZiAocHJvcCQxLnR5cGUgPT09ICdQcm9wZXJ0eScgJiYgIXByb3AkMS5jb21wdXRlZCkge1xuXHRcdFx0XHRcdFx0dmFyIGxhc3RQcm9wID0gdGhpcyQxLnByb3BlcnRpZXNbaSQxIC0gMV07XG5cdFx0XHRcdFx0XHR2YXIgbmV4dFByb3AgPSB0aGlzJDEucHJvcGVydGllc1tpJDEgKyAxXTtcblxuXHRcdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0XHQhbGFzdFByb3AgfHxcblx0XHRcdFx0XHRcdFx0bGFzdFByb3AudHlwZSAhPT0gJ1Byb3BlcnR5JyB8fFxuXHRcdFx0XHRcdFx0XHRsYXN0UHJvcC5jb21wdXRlZFxuXHRcdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KHByb3AkMS5zdGFydCwgJ3snKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0XHQhbmV4dFByb3AgfHxcblx0XHRcdFx0XHRcdFx0bmV4dFByb3AudHlwZSAhPT0gJ1Byb3BlcnR5JyB8fFxuXHRcdFx0XHRcdFx0XHRuZXh0UHJvcC5jb21wdXRlZFxuXHRcdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRcdGNvZGUuYXBwZW5kTGVmdChwcm9wJDEuZW5kLCAnfScpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyB3cmFwIHRoZSB3aG9sZSB0aGluZyBpbiBPYmplY3QuYXNzaWduXG5cdFx0XHRmaXJzdFByb3BlcnR5U3RhcnQgPSB0aGlzLnByb3BlcnRpZXNbMF0uc3RhcnQ7XG5cdFx0XHRpZiAoIWNvbXB1dGVkUHJvcGVydHlDb3VudCkge1xuXHRcdFx0XHRjb2RlLm92ZXJ3cml0ZShcblx0XHRcdFx0XHR0aGlzLnN0YXJ0LFxuXHRcdFx0XHRcdGZpcnN0UHJvcGVydHlTdGFydCxcblx0XHRcdFx0XHQoKHRoaXMucHJvZ3JhbS5vcHRpb25zLm9iamVjdEFzc2lnbikgKyBcIih7fSwgXCIpXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGNvZGUub3ZlcndyaXRlKFxuXHRcdFx0XHRcdHRoaXMucHJvcGVydGllc1t0aGlzLnByb3BlcnRpZXMubGVuZ3RoIC0gMV0uZW5kLFxuXHRcdFx0XHRcdHRoaXMuZW5kLFxuXHRcdFx0XHRcdCcpJ1xuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIGlmICh0aGlzLnByb3BlcnRpZXNbMF0udHlwZSA9PT0gJ1NwcmVhZEVsZW1lbnQnKSB7XG5cdFx0XHRcdGNvZGUub3ZlcndyaXRlKFxuXHRcdFx0XHRcdHRoaXMuc3RhcnQsXG5cdFx0XHRcdFx0Zmlyc3RQcm9wZXJ0eVN0YXJ0LFxuXHRcdFx0XHRcdCgodGhpcy5wcm9ncmFtLm9wdGlvbnMub2JqZWN0QXNzaWduKSArIFwiKHt9LCBcIilcblx0XHRcdFx0KTtcblx0XHRcdFx0Y29kZS5yZW1vdmUodGhpcy5lbmQgLSAxLCB0aGlzLmVuZCk7XG5cdFx0XHRcdGNvZGUuYXBwZW5kUmlnaHQodGhpcy5lbmQsICcpJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb2RlLnByZXBlbmRMZWZ0KHRoaXMuc3RhcnQsICgodGhpcy5wcm9ncmFtLm9wdGlvbnMub2JqZWN0QXNzaWduKSArIFwiKFwiKSk7XG5cdFx0XHRcdGNvZGUuYXBwZW5kUmlnaHQodGhpcy5lbmQsICcpJyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGNvbXB1dGVkUHJvcGVydHlDb3VudCAmJiB0cmFuc2Zvcm1zLmNvbXB1dGVkUHJvcGVydHkpIHtcblx0XHRcdHZhciBpMCA9IHRoaXMuZ2V0SW5kZW50YXRpb24oKTtcblxuXHRcdFx0dmFyIGlzU2ltcGxlQXNzaWdubWVudDtcblx0XHRcdHZhciBuYW1lO1xuXG5cdFx0XHRpZiAoXG5cdFx0XHRcdHRoaXMucGFyZW50LnR5cGUgPT09ICdWYXJpYWJsZURlY2xhcmF0b3InICYmXG5cdFx0XHRcdHRoaXMucGFyZW50LnBhcmVudC5kZWNsYXJhdGlvbnMubGVuZ3RoID09PSAxICYmXG5cdFx0XHRcdHRoaXMucGFyZW50LmlkLnR5cGUgPT09ICdJZGVudGlmaWVyJ1xuXHRcdFx0KSB7XG5cdFx0XHRcdGlzU2ltcGxlQXNzaWdubWVudCA9IHRydWU7XG5cdFx0XHRcdG5hbWUgPSB0aGlzLnBhcmVudC5pZC5hbGlhcyB8fCB0aGlzLnBhcmVudC5pZC5uYW1lOyAvLyBUT0RPIGlzIHRoaXMgcmlnaHQ/XG5cdFx0XHR9IGVsc2UgaWYgKFxuXHRcdFx0XHR0aGlzLnBhcmVudC50eXBlID09PSAnQXNzaWdubWVudEV4cHJlc3Npb24nICYmXG5cdFx0XHRcdHRoaXMucGFyZW50LnBhcmVudC50eXBlID09PSAnRXhwcmVzc2lvblN0YXRlbWVudCcgJiZcblx0XHRcdFx0dGhpcy5wYXJlbnQubGVmdC50eXBlID09PSAnSWRlbnRpZmllcidcblx0XHRcdCkge1xuXHRcdFx0XHRpc1NpbXBsZUFzc2lnbm1lbnQgPSB0cnVlO1xuXHRcdFx0XHRuYW1lID0gdGhpcy5wYXJlbnQubGVmdC5hbGlhcyB8fCB0aGlzLnBhcmVudC5sZWZ0Lm5hbWU7IC8vIFRPRE8gaXMgdGhpcyByaWdodD9cblx0XHRcdH0gZWxzZSBpZiAoXG5cdFx0XHRcdHRoaXMucGFyZW50LnR5cGUgPT09ICdBc3NpZ25tZW50UGF0dGVybicgJiZcblx0XHRcdFx0dGhpcy5wYXJlbnQubGVmdC50eXBlID09PSAnSWRlbnRpZmllcidcblx0XHRcdCkge1xuXHRcdFx0XHRpc1NpbXBsZUFzc2lnbm1lbnQgPSB0cnVlO1xuXHRcdFx0XHRuYW1lID0gdGhpcy5wYXJlbnQubGVmdC5hbGlhcyB8fCB0aGlzLnBhcmVudC5sZWZ0Lm5hbWU7IC8vIFRPRE8gaXMgdGhpcyByaWdodD9cblx0XHRcdH1cblxuXHRcdFx0aWYgKHNwcmVhZFByb3BlcnR5Q291bnQpIHsgaXNTaW1wbGVBc3NpZ25tZW50ID0gZmFsc2U7IH1cblxuXHRcdFx0Ly8gaGFuZGxlIGJsb2NrIHNjb3Bpbmdcblx0XHRcdG5hbWUgPSB0aGlzLmZpbmRTY29wZShmYWxzZSkucmVzb2x2ZU5hbWUobmFtZSk7XG5cblx0XHRcdHZhciBzdGFydCA9IGZpcnN0UHJvcGVydHlTdGFydDtcblx0XHRcdHZhciBlbmQgPSB0aGlzLmVuZDtcblxuXHRcdFx0aWYgKGlzU2ltcGxlQXNzaWdubWVudCkge1xuXHRcdFx0XHQvLyA/Pz9cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHRmaXJzdFNwcmVhZFByb3BlcnR5ID09PSBudWxsIHx8XG5cdFx0XHRcdFx0Zmlyc3RDb21wdXRlZFByb3BlcnR5IDwgZmlyc3RTcHJlYWRQcm9wZXJ0eVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRuYW1lID0gdGhpcy5maW5kU2NvcGUodHJ1ZSkuY3JlYXRlRGVjbGFyYXRpb24oJ29iaicpO1xuXG5cdFx0XHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQodGhpcy5zdGFydCwgKFwiKCBcIiArIG5hbWUgKyBcIiA9IFwiKSk7XG5cdFx0XHRcdH0gZWxzZSB7IG5hbWUgPSBudWxsOyB9IC8vIFdlIGRvbid0IGFjdHVhbGx5IG5lZWQgdGhpcyB2YXJpYWJsZVxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgbGVuID0gdGhpcy5wcm9wZXJ0aWVzLmxlbmd0aDtcblx0XHRcdHZhciBsYXN0Q29tcHV0ZWRQcm9wO1xuXHRcdFx0dmFyIHNhd05vbkNvbXB1dGVkUHJvcGVydHkgPSBmYWxzZTtcblx0XHRcdHZhciBpc0ZpcnN0ID0gdHJ1ZTtcblxuXHRcdFx0Zm9yICh2YXIgaSQyID0gMDsgaSQyIDwgbGVuOyBpJDIgKz0gMSkge1xuXHRcdFx0XHR2YXIgcHJvcCQyID0gdGhpcyQxLnByb3BlcnRpZXNbaSQyXTtcblx0XHRcdFx0dmFyIG1vdmVTdGFydCA9IGkkMiA+IDAgPyB0aGlzJDEucHJvcGVydGllc1tpJDIgLSAxXS5lbmQgOiBzdGFydDtcblxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0cHJvcCQyLnR5cGUgPT09ICdQcm9wZXJ0eScgJiZcblx0XHRcdFx0XHQocHJvcCQyLmNvbXB1dGVkIHx8IChsYXN0Q29tcHV0ZWRQcm9wICYmICFzcHJlYWRQcm9wZXJ0eUNvdW50KSlcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0aWYgKGkkMiA9PT0gMCkgeyBtb3ZlU3RhcnQgPSB0aGlzJDEuc3RhcnQgKyAxOyB9IC8vIFRyaW0gbGVhZGluZyB3aGl0ZXNwYWNlXG5cdFx0XHRcdFx0bGFzdENvbXB1dGVkUHJvcCA9IHByb3AkMjtcblxuXHRcdFx0XHRcdGlmICghbmFtZSkge1xuXHRcdFx0XHRcdFx0bmFtZSA9IHRoaXMkMS5maW5kU2NvcGUodHJ1ZSkuY3JlYXRlRGVjbGFyYXRpb24oJ29iaicpO1xuXG5cdFx0XHRcdFx0XHR2YXIgcHJvcElkID0gbmFtZSArIChwcm9wJDIuY29tcHV0ZWQgPyAnJyA6ICcuJyk7XG5cdFx0XHRcdFx0XHRjb2RlLmFwcGVuZFJpZ2h0KHByb3AkMi5zdGFydCwgKFwiKCBcIiArIG5hbWUgKyBcIiA9IHt9LCBcIiArIHByb3BJZCkpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR2YXIgcHJvcElkJDEgPVxuXHRcdFx0XHRcdFx0XHQoaXNTaW1wbGVBc3NpZ25tZW50ID8gKFwiO1xcblwiICsgaTAgKyBuYW1lKSA6IChcIiwgXCIgKyBuYW1lKSkgK1xuXHRcdFx0XHRcdFx0XHQocHJvcCQyLmtleS50eXBlID09PSAnTGl0ZXJhbCcgfHwgcHJvcCQyLmNvbXB1dGVkID8gJycgOiAnLicpO1xuXG5cdFx0XHRcdFx0XHRpZiAobW92ZVN0YXJ0IDwgcHJvcCQyLnN0YXJ0KSB7XG5cdFx0XHRcdFx0XHRcdGNvZGUub3ZlcndyaXRlKG1vdmVTdGFydCwgcHJvcCQyLnN0YXJ0LCBwcm9wSWQkMSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb2RlLnByZXBlbmRSaWdodChwcm9wJDIuc3RhcnQsIHByb3BJZCQxKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR2YXIgYyA9IHByb3AkMi5rZXkuZW5kO1xuXHRcdFx0XHRcdGlmIChwcm9wJDIuY29tcHV0ZWQpIHtcblx0XHRcdFx0XHRcdHdoaWxlIChjb2RlLm9yaWdpbmFsW2NdICE9PSAnXScpIHsgYyArPSAxOyB9XG5cdFx0XHRcdFx0XHRjICs9IDE7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChwcm9wJDIua2V5LnR5cGUgPT09ICdMaXRlcmFsJyAmJiAhcHJvcCQyLmNvbXB1dGVkKSB7XG5cdFx0XHRcdFx0XHRjb2RlLm92ZXJ3cml0ZShcblx0XHRcdFx0XHRcdFx0cHJvcCQyLnN0YXJ0LFxuXHRcdFx0XHRcdFx0XHRwcm9wJDIua2V5LmVuZCArIDEsXG5cdFx0XHRcdFx0XHRcdCdbJyArIGNvZGUuc2xpY2UocHJvcCQyLnN0YXJ0LCBwcm9wJDIua2V5LmVuZCkgKyAnXSA9ICdcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChwcm9wJDIuc2hvcnRoYW5kIHx8IChwcm9wJDIubWV0aG9kICYmICFwcm9wJDIuY29tcHV0ZWQgJiYgdHJhbnNmb3Jtcy5jb25jaXNlTWV0aG9kUHJvcGVydHkpKSB7XG5cdFx0XHRcdFx0XHQvLyBSZXBsYWNlIDogd2l0aCA9IGlmIFByb3BlcnR5Ojp0cmFuc3BpbGUgaW5zZXJ0ZWQgdGhlIDpcblx0XHRcdFx0XHRcdGNvZGUub3ZlcndyaXRlKFxuXHRcdFx0XHRcdFx0XHRwcm9wJDIua2V5LnN0YXJ0LFxuXHRcdFx0XHRcdFx0XHRwcm9wJDIua2V5LmVuZCxcblx0XHRcdFx0XHRcdFx0Y29kZS5zbGljZShwcm9wJDIua2V5LnN0YXJ0LCBwcm9wJDIua2V5LmVuZCkucmVwbGFjZSgvOi8sICcgPScpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRpZiAocHJvcCQyLnZhbHVlLnN0YXJ0ID4gYykgeyBjb2RlLnJlbW92ZShjLCBwcm9wJDIudmFsdWUuc3RhcnQpOyB9XG5cdFx0XHRcdFx0XHRjb2RlLnByZXBlbmRMZWZ0KGMsICcgPSAnKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBUaGlzIGR1cGxpY2F0ZXMgYmVoYXZpb3IgZnJvbSBQcm9wZXJ0eTo6dHJhbnNwaWxlIHdoaWNoIGlzIGRpc2FibGVkXG5cdFx0XHRcdFx0Ly8gZm9yIGNvbXB1dGVkIHByb3BlcnRpZXMgb3IgaWYgY29uY2lzZU1ldGhvZFByb3BlcnR5IGlzIGZhbHNlXG5cdFx0XHRcdFx0aWYgKHByb3AkMi5tZXRob2QgJiYgKHByb3AkMi5jb21wdXRlZCB8fCAhdHJhbnNmb3Jtcy5jb25jaXNlTWV0aG9kUHJvcGVydHkpKSB7XG5cdFx0XHRcdFx0XHRpZiAocHJvcCQyLnZhbHVlLmdlbmVyYXRvcikgeyBjb2RlLnJlbW92ZShwcm9wJDIuc3RhcnQsIHByb3AkMi5rZXkuc3RhcnQpOyB9XG5cdFx0XHRcdFx0XHRjb2RlLnByZXBlbmRSaWdodChwcm9wJDIudmFsdWUuc3RhcnQsIChcImZ1bmN0aW9uXCIgKyAocHJvcCQyLnZhbHVlLmdlbmVyYXRvciA/ICcqJyA6ICcnKSArIFwiIFwiKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKHByb3AkMi50eXBlID09PSAnU3ByZWFkRWxlbWVudCcpIHtcblx0XHRcdFx0XHRpZiAobmFtZSAmJiBpJDIgPiAwKSB7XG5cdFx0XHRcdFx0XHRpZiAoIWxhc3RDb21wdXRlZFByb3ApIHtcblx0XHRcdFx0XHRcdFx0bGFzdENvbXB1dGVkUHJvcCA9IHRoaXMkMS5wcm9wZXJ0aWVzW2kkMiAtIDFdO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KGxhc3RDb21wdXRlZFByb3AuZW5kLCAoXCIsIFwiICsgbmFtZSArIFwiIClcIikpO1xuXG5cdFx0XHRcdFx0XHRsYXN0Q29tcHV0ZWRQcm9wID0gbnVsbDtcblx0XHRcdFx0XHRcdG5hbWUgPSBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoIWlzRmlyc3QgJiYgc3ByZWFkUHJvcGVydHlDb3VudCkge1xuXHRcdFx0XHRcdFx0Ly8gV2UgYXJlIGluIGFuIE9iamVjdC5hc3NpZ24gY29udGV4dCwgc28gd2UgbmVlZCB0byB3cmFwIHJlZ3VsYXIgcHJvcGVydGllc1xuXHRcdFx0XHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQocHJvcCQyLnN0YXJ0LCAneycpO1xuXHRcdFx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHByb3AkMi5lbmQsICd9Jyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHNhd05vbkNvbXB1dGVkUHJvcGVydHkgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChpc0ZpcnN0ICYmIChwcm9wJDIudHlwZSA9PT0gJ1NwcmVhZEVsZW1lbnQnIHx8IHByb3AkMi5jb21wdXRlZCkpIHtcblx0XHRcdFx0XHR2YXIgYmVnaW5FbmQgPSBzYXdOb25Db21wdXRlZFByb3BlcnR5XG5cdFx0XHRcdFx0XHQ/IHRoaXMkMS5wcm9wZXJ0aWVzW3RoaXMkMS5wcm9wZXJ0aWVzLmxlbmd0aCAtIDFdLmVuZFxuXHRcdFx0XHRcdFx0OiB0aGlzJDEuZW5kIC0gMTtcblx0XHRcdFx0XHQvLyBUcmltIHRyYWlsaW5nIGNvbW1hIGJlY2F1c2UgaXQgY2FuIGVhc2lseSBiZWNvbWUgYSBsZWFkaW5nIGNvbW1hIHdoaWNoIGlzIGlsbGVnYWxcblx0XHRcdFx0XHRpZiAoY29kZS5vcmlnaW5hbFtiZWdpbkVuZF0gPT0gJywnKSB7ICsrYmVnaW5FbmQ7IH1cblx0XHRcdFx0XHR2YXIgY2xvc2luZyA9IGNvZGUuc2xpY2UoYmVnaW5FbmQsIGVuZCk7XG5cdFx0XHRcdFx0Y29kZS5wcmVwZW5kTGVmdChtb3ZlU3RhcnQsIGNsb3NpbmcpO1xuXHRcdFx0XHRcdGNvZGUucmVtb3ZlKGJlZ2luRW5kLCBlbmQpO1xuXHRcdFx0XHRcdGlzRmlyc3QgPSBmYWxzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENsZWFuIHVwIHNvbWUgZXh0cmFub3VzIHdoaXRlc3BhY2Vcblx0XHRcdFx0dmFyIGMkMSA9IHByb3AkMi5lbmQ7XG5cdFx0XHRcdGlmIChpJDIgPCBsZW4gLSAxICYmICFzYXdOb25Db21wdXRlZFByb3BlcnR5KSB7XG5cdFx0XHRcdFx0d2hpbGUgKGNvZGUub3JpZ2luYWxbYyQxXSAhPT0gJywnKSB7IGMkMSArPSAxOyB9XG5cdFx0XHRcdH0gZWxzZSBpZiAoaSQyID09IGxlbiAtIDEpIHsgYyQxID0gdGhpcyQxLmVuZDsgfVxuXHRcdFx0XHRjb2RlLnJlbW92ZShwcm9wJDIuZW5kLCBjJDEpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBzcGVjaWFsIGNhc2Vcblx0XHRcdGlmIChjb21wdXRlZFByb3BlcnR5Q291bnQgPT09IGxlbikge1xuXHRcdFx0XHRjb2RlLnJlbW92ZSh0aGlzLnByb3BlcnRpZXNbbGVuIC0gMV0uZW5kLCB0aGlzLmVuZCAtIDEpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIWlzU2ltcGxlQXNzaWdubWVudCAmJiBuYW1lKSB7XG5cdFx0XHRcdGNvZGUuYXBwZW5kTGVmdChsYXN0Q29tcHV0ZWRQcm9wLmVuZCwgKFwiLCBcIiArIG5hbWUgKyBcIiApXCIpKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIE9iamVjdEV4cHJlc3Npb247XG59KE5vZGUpKTtcblxudmFyIFByb3BlcnR5ID0gKGZ1bmN0aW9uIChOb2RlJCQxKSB7XG5cdGZ1bmN0aW9uIFByb3BlcnR5ICgpIHtcblx0XHROb2RlJCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAoIE5vZGUkJDEgKSBQcm9wZXJ0eS5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRQcm9wZXJ0eS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBOb2RlJCQxICYmIE5vZGUkJDEucHJvdG90eXBlICk7XG5cdFByb3BlcnR5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFByb3BlcnR5O1xuXG5cdFByb3BlcnR5LnByb3RvdHlwZS50cmFuc3BpbGUgPSBmdW5jdGlvbiB0cmFuc3BpbGUgKGNvZGUsIHRyYW5zZm9ybXMpIHtcblx0XHROb2RlJCQxLnByb3RvdHlwZS50cmFuc3BpbGUuY2FsbCh0aGlzLCBjb2RlLCB0cmFuc2Zvcm1zKTtcblxuXHRcdGlmIChcblx0XHRcdHRyYW5zZm9ybXMuY29uY2lzZU1ldGhvZFByb3BlcnR5ICYmXG5cdFx0XHQhdGhpcy5jb21wdXRlZCAmJlxuXHRcdFx0dGhpcy5wYXJlbnQudHlwZSAhPT0gJ09iamVjdFBhdHRlcm4nXG5cdFx0KSB7XG5cdFx0XHRpZiAodGhpcy5zaG9ydGhhbmQpIHtcblx0XHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQodGhpcy5zdGFydCwgKCh0aGlzLmtleS5uYW1lKSArIFwiOiBcIikpO1xuXHRcdFx0fSBlbHNlIGlmICh0aGlzLm1ldGhvZCkge1xuXHRcdFx0XHR2YXIgbmFtZSA9ICcnO1xuXHRcdFx0XHRpZiAodGhpcy5wcm9ncmFtLm9wdGlvbnMubmFtZWRGdW5jdGlvbkV4cHJlc3Npb25zICE9PSBmYWxzZSkge1xuXHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdHRoaXMua2V5LnR5cGUgPT09ICdMaXRlcmFsJyAmJlxuXHRcdFx0XHRcdFx0dHlwZW9mIHRoaXMua2V5LnZhbHVlID09PSAnbnVtYmVyJ1xuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0bmFtZSA9ICcnO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5rZXkudHlwZSA9PT0gJ0lkZW50aWZpZXInKSB7XG5cdFx0XHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0XHRcdHJlc2VydmVkW3RoaXMua2V5Lm5hbWVdIHx8XG5cdFx0XHRcdFx0XHRcdCEvXlthLXpfJF1bYS16MC05XyRdKiQvaS50ZXN0KHRoaXMua2V5Lm5hbWUpIHx8XG5cdFx0XHRcdFx0XHRcdHRoaXMudmFsdWUuYm9keS5zY29wZS5yZWZlcmVuY2VzW3RoaXMua2V5Lm5hbWVdXG5cdFx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdFx0bmFtZSA9IHRoaXMuZmluZFNjb3BlKHRydWUpLmNyZWF0ZUlkZW50aWZpZXIodGhpcy5rZXkubmFtZSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRuYW1lID0gdGhpcy5rZXkubmFtZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0bmFtZSA9IHRoaXMuZmluZFNjb3BlKHRydWUpLmNyZWF0ZUlkZW50aWZpZXIodGhpcy5rZXkudmFsdWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRuYW1lID0gJyAnICsgbmFtZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICh0aGlzLnZhbHVlLmdlbmVyYXRvcikgeyBjb2RlLnJlbW92ZSh0aGlzLnN0YXJ0LCB0aGlzLmtleS5zdGFydCk7IH1cblx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KFxuXHRcdFx0XHRcdHRoaXMua2V5LmVuZCxcblx0XHRcdFx0XHQoXCI6IGZ1bmN0aW9uXCIgKyAodGhpcy52YWx1ZS5nZW5lcmF0b3IgPyAnKicgOiAnJykgKyBuYW1lKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICh0cmFuc2Zvcm1zLnJlc2VydmVkUHJvcGVydGllcyAmJiByZXNlcnZlZFt0aGlzLmtleS5uYW1lXSkge1xuXHRcdFx0Y29kZS5wcmVwZW5kUmlnaHQodGhpcy5rZXkuc3RhcnQsIFwiJ1wiKTtcblx0XHRcdGNvZGUuYXBwZW5kTGVmdCh0aGlzLmtleS5lbmQsIFwiJ1wiKTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIFByb3BlcnR5O1xufShOb2RlKSk7XG5cbnZhciBSZXR1cm5TdGF0ZW1lbnQgPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gUmV0dXJuU3RhdGVtZW50ICgpIHtcblx0XHROb2RlJCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAoIE5vZGUkJDEgKSBSZXR1cm5TdGF0ZW1lbnQuX19wcm90b19fID0gTm9kZSQkMTtcblx0UmV0dXJuU3RhdGVtZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0UmV0dXJuU3RhdGVtZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJldHVyblN0YXRlbWVudDtcblxuXHRSZXR1cm5TdGF0ZW1lbnQucHJvdG90eXBlLmluaXRpYWxpc2UgPSBmdW5jdGlvbiBpbml0aWFsaXNlICh0cmFuc2Zvcm1zKSB7XG5cdFx0dGhpcy5sb29wID0gdGhpcy5maW5kTmVhcmVzdChsb29wU3RhdGVtZW50KTtcblx0XHR0aGlzLm5lYXJlc3RGdW5jdGlvbiA9IHRoaXMuZmluZE5lYXJlc3QoL0Z1bmN0aW9uLyk7XG5cblx0XHRpZiAoXG5cdFx0XHR0aGlzLmxvb3AgJiZcblx0XHRcdCghdGhpcy5uZWFyZXN0RnVuY3Rpb24gfHwgdGhpcy5sb29wLmRlcHRoID4gdGhpcy5uZWFyZXN0RnVuY3Rpb24uZGVwdGgpXG5cdFx0KSB7XG5cdFx0XHR0aGlzLmxvb3AuY2FuUmV0dXJuID0gdHJ1ZTtcblx0XHRcdHRoaXMuc2hvdWxkV3JhcCA9IHRydWU7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuYXJndW1lbnQpIHsgdGhpcy5hcmd1bWVudC5pbml0aWFsaXNlKHRyYW5zZm9ybXMpOyB9XG5cdH07XG5cblx0UmV0dXJuU3RhdGVtZW50LnByb3RvdHlwZS50cmFuc3BpbGUgPSBmdW5jdGlvbiB0cmFuc3BpbGUgKGNvZGUsIHRyYW5zZm9ybXMpIHtcblx0XHR2YXIgc2hvdWxkV3JhcCA9XG5cdFx0XHR0aGlzLnNob3VsZFdyYXAgJiYgdGhpcy5sb29wICYmIHRoaXMubG9vcC5zaG91bGRSZXdyaXRlQXNGdW5jdGlvbjtcblxuXHRcdGlmICh0aGlzLmFyZ3VtZW50KSB7XG5cdFx0XHRpZiAoc2hvdWxkV3JhcCkgeyBjb2RlLnByZXBlbmRSaWdodCh0aGlzLmFyZ3VtZW50LnN0YXJ0LCBcInsgdjogXCIpOyB9XG5cdFx0XHR0aGlzLmFyZ3VtZW50LnRyYW5zcGlsZShjb2RlLCB0cmFuc2Zvcm1zKTtcblx0XHRcdGlmIChzaG91bGRXcmFwKSB7IGNvZGUuYXBwZW5kTGVmdCh0aGlzLmFyZ3VtZW50LmVuZCwgXCIgfVwiKTsgfVxuXHRcdH0gZWxzZSBpZiAoc2hvdWxkV3JhcCkge1xuXHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHRoaXMuc3RhcnQgKyA2LCAnIHt9Jyk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBSZXR1cm5TdGF0ZW1lbnQ7XG59KE5vZGUpKTtcblxudmFyIFNwcmVhZEVsZW1lbnQgPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gU3ByZWFkRWxlbWVudCAoKSB7XG5cdFx0Tm9kZSQkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0aWYgKCBOb2RlJCQxICkgU3ByZWFkRWxlbWVudC5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRTcHJlYWRFbGVtZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0U3ByZWFkRWxlbWVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTcHJlYWRFbGVtZW50O1xuXG5cdFNwcmVhZEVsZW1lbnQucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdGlmICh0aGlzLnBhcmVudC50eXBlID09ICdPYmplY3RFeHByZXNzaW9uJykge1xuXHRcdFx0Y29kZS5yZW1vdmUodGhpcy5zdGFydCwgdGhpcy5hcmd1bWVudC5zdGFydCk7XG5cdFx0XHRjb2RlLnJlbW92ZSh0aGlzLmFyZ3VtZW50LmVuZCwgdGhpcy5lbmQpO1xuXHRcdH1cblxuXHRcdE5vZGUkJDEucHJvdG90eXBlLnRyYW5zcGlsZS5jYWxsKHRoaXMsIGNvZGUsIHRyYW5zZm9ybXMpO1xuXHR9O1xuXG5cdHJldHVybiBTcHJlYWRFbGVtZW50O1xufShOb2RlKSk7XG5cbnZhciBTdXBlciA9IChmdW5jdGlvbiAoTm9kZSQkMSkge1xuXHRmdW5jdGlvbiBTdXBlciAoKSB7XG5cdFx0Tm9kZSQkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0aWYgKCBOb2RlJCQxICkgU3VwZXIuX19wcm90b19fID0gTm9kZSQkMTtcblx0U3VwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTm9kZSQkMSAmJiBOb2RlJCQxLnByb3RvdHlwZSApO1xuXHRTdXBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdXBlcjtcblxuXHRTdXBlci5wcm90b3R5cGUuaW5pdGlhbGlzZSA9IGZ1bmN0aW9uIGluaXRpYWxpc2UgKHRyYW5zZm9ybXMpIHtcblx0XHRpZiAodHJhbnNmb3Jtcy5jbGFzc2VzKSB7XG5cdFx0XHR0aGlzLm1ldGhvZCA9IHRoaXMuZmluZE5lYXJlc3QoJ01ldGhvZERlZmluaXRpb24nKTtcblx0XHRcdGlmICghdGhpcy5tZXRob2QpXG5cdFx0XHRcdHsgdGhyb3cgbmV3IENvbXBpbGVFcnJvcigndXNlIG9mIHN1cGVyIG91dHNpZGUgY2xhc3MgbWV0aG9kJywgdGhpcyk7IH1cblxuXHRcdFx0dmFyIHBhcmVudENsYXNzID0gdGhpcy5maW5kTmVhcmVzdCgnQ2xhc3NCb2R5JykucGFyZW50O1xuXHRcdFx0dGhpcy5zdXBlckNsYXNzTmFtZSA9XG5cdFx0XHRcdHBhcmVudENsYXNzLnN1cGVyQ2xhc3MgJiYgKHBhcmVudENsYXNzLnN1cGVyQ2xhc3MubmFtZSB8fCAnc3VwZXJjbGFzcycpO1xuXG5cdFx0XHRpZiAoIXRoaXMuc3VwZXJDbGFzc05hbWUpXG5cdFx0XHRcdHsgdGhyb3cgbmV3IENvbXBpbGVFcnJvcignc3VwZXIgdXNlZCBpbiBiYXNlIGNsYXNzJywgdGhpcyk7IH1cblxuXHRcdFx0dGhpcy5pc0NhbGxlZCA9XG5cdFx0XHRcdHRoaXMucGFyZW50LnR5cGUgPT09ICdDYWxsRXhwcmVzc2lvbicgJiYgdGhpcyA9PT0gdGhpcy5wYXJlbnQuY2FsbGVlO1xuXG5cdFx0XHRpZiAodGhpcy5tZXRob2Qua2luZCAhPT0gJ2NvbnN0cnVjdG9yJyAmJiB0aGlzLmlzQ2FsbGVkKSB7XG5cdFx0XHRcdHRocm93IG5ldyBDb21waWxlRXJyb3IoXG5cdFx0XHRcdFx0J3N1cGVyKCkgbm90IGFsbG93ZWQgb3V0c2lkZSBjbGFzcyBjb25zdHJ1Y3RvcicsXG5cdFx0XHRcdFx0dGhpc1xuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmlzTWVtYmVyID0gdGhpcy5wYXJlbnQudHlwZSA9PT0gJ01lbWJlckV4cHJlc3Npb24nO1xuXG5cdFx0XHRpZiAoIXRoaXMuaXNDYWxsZWQgJiYgIXRoaXMuaXNNZW1iZXIpIHtcblx0XHRcdFx0dGhyb3cgbmV3IENvbXBpbGVFcnJvcihcblx0XHRcdFx0XHQnVW5leHBlY3RlZCB1c2Ugb2YgYHN1cGVyYCAoZXhwZWN0ZWQgYHN1cGVyKC4uLilgIG9yIGBzdXBlci4qYCknLFxuXHRcdFx0XHRcdHRoaXNcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAodHJhbnNmb3Jtcy5hcnJvdykge1xuXHRcdFx0dmFyIGxleGljYWxCb3VuZGFyeSA9IHRoaXMuZmluZExleGljYWxCb3VuZGFyeSgpO1xuXHRcdFx0dmFyIGFycm93RnVuY3Rpb24gPSB0aGlzLmZpbmROZWFyZXN0KCdBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbicpO1xuXHRcdFx0dmFyIGxvb3AgPSB0aGlzLmZpbmROZWFyZXN0KGxvb3BTdGF0ZW1lbnQpO1xuXG5cdFx0XHRpZiAoYXJyb3dGdW5jdGlvbiAmJiBhcnJvd0Z1bmN0aW9uLmRlcHRoID4gbGV4aWNhbEJvdW5kYXJ5LmRlcHRoKSB7XG5cdFx0XHRcdHRoaXMudGhpc0FsaWFzID0gbGV4aWNhbEJvdW5kYXJ5LmdldFRoaXNBbGlhcygpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoXG5cdFx0XHRcdGxvb3AgJiZcblx0XHRcdFx0bG9vcC5ib2R5LmNvbnRhaW5zKHRoaXMpICYmXG5cdFx0XHRcdGxvb3AuZGVwdGggPiBsZXhpY2FsQm91bmRhcnkuZGVwdGhcblx0XHRcdCkge1xuXHRcdFx0XHR0aGlzLnRoaXNBbGlhcyA9IGxleGljYWxCb3VuZGFyeS5nZXRUaGlzQWxpYXMoKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0U3VwZXIucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdGlmICh0cmFuc2Zvcm1zLmNsYXNzZXMpIHtcblx0XHRcdHZhciBleHByZXNzaW9uID1cblx0XHRcdFx0dGhpcy5pc0NhbGxlZCB8fCB0aGlzLm1ldGhvZC5zdGF0aWNcblx0XHRcdFx0XHQ/IHRoaXMuc3VwZXJDbGFzc05hbWVcblx0XHRcdFx0XHQ6ICgodGhpcy5zdXBlckNsYXNzTmFtZSkgKyBcIi5wcm90b3R5cGVcIik7XG5cblx0XHRcdGNvZGUub3ZlcndyaXRlKHRoaXMuc3RhcnQsIHRoaXMuZW5kLCBleHByZXNzaW9uLCB7XG5cdFx0XHRcdHN0b3JlTmFtZTogdHJ1ZSxcblx0XHRcdFx0Y29udGVudE9ubHk6IHRydWVcblx0XHRcdH0pO1xuXG5cdFx0XHR2YXIgY2FsbEV4cHJlc3Npb24gPSB0aGlzLmlzQ2FsbGVkID8gdGhpcy5wYXJlbnQgOiB0aGlzLnBhcmVudC5wYXJlbnQ7XG5cblx0XHRcdGlmIChjYWxsRXhwcmVzc2lvbiAmJiBjYWxsRXhwcmVzc2lvbi50eXBlID09PSAnQ2FsbEV4cHJlc3Npb24nKSB7XG5cdFx0XHRcdGlmICghdGhpcy5ub0NhbGwpIHtcblx0XHRcdFx0XHQvLyBzcGVjaWFsIGNhc2Ug4oCTIGBzdXBlciggLi4uYXJncyApYFxuXHRcdFx0XHRcdGNvZGUuYXBwZW5kTGVmdChjYWxsRXhwcmVzc2lvbi5jYWxsZWUuZW5kLCAnLmNhbGwnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciB0aGlzQWxpYXMgPSB0aGlzLnRoaXNBbGlhcyB8fCAndGhpcyc7XG5cblx0XHRcdFx0aWYgKGNhbGxFeHByZXNzaW9uLmFyZ3VtZW50cy5sZW5ndGgpIHtcblx0XHRcdFx0XHRjb2RlLmFwcGVuZExlZnQoY2FsbEV4cHJlc3Npb24uYXJndW1lbnRzWzBdLnN0YXJ0LCAodGhpc0FsaWFzICsgXCIsIFwiKSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KGNhbGxFeHByZXNzaW9uLmVuZCAtIDEsIChcIlwiICsgdGhpc0FsaWFzKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIFN1cGVyO1xufShOb2RlKSk7XG5cbnZhciBUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24gPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uICgpIHtcblx0XHROb2RlJCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAoIE5vZGUkJDEgKSBUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24uX19wcm90b19fID0gTm9kZSQkMTtcblx0VGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0VGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbjtcblxuXHRUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24ucHJvdG90eXBlLmluaXRpYWxpc2UgPSBmdW5jdGlvbiBpbml0aWFsaXNlICh0cmFuc2Zvcm1zKSB7XG5cdFx0aWYgKFxuXHRcdFx0dHJhbnNmb3Jtcy50ZW1wbGF0ZVN0cmluZyAmJlxuXHRcdFx0IXRyYW5zZm9ybXMuZGFuZ2Vyb3VzVGFnZ2VkVGVtcGxhdGVTdHJpbmdcblx0XHQpIHtcblx0XHRcdHRocm93IG5ldyBDb21waWxlRXJyb3IoXG5cdFx0XHRcdFwiVGFnZ2VkIHRlbXBsYXRlIHN0cmluZ3MgYXJlIG5vdCBzdXBwb3J0ZWQuIFVzZSBgdHJhbnNmb3JtczogeyB0ZW1wbGF0ZVN0cmluZzogZmFsc2UgfWAgdG8gc2tpcCB0cmFuc2Zvcm1hdGlvbiBhbmQgZGlzYWJsZSB0aGlzIGVycm9yLCBvciBgdHJhbnNmb3JtczogeyBkYW5nZXJvdXNUYWdnZWRUZW1wbGF0ZVN0cmluZzogdHJ1ZSB9YCBpZiB5b3Uga25vdyB3aGF0IHlvdSdyZSBkb2luZ1wiLFxuXHRcdFx0XHR0aGlzXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdE5vZGUkJDEucHJvdG90eXBlLmluaXRpYWxpc2UuY2FsbCh0aGlzLCB0cmFuc2Zvcm1zKTtcblx0fTtcblxuXHRUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24ucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdGlmICh0cmFuc2Zvcm1zLnRlbXBsYXRlU3RyaW5nICYmIHRyYW5zZm9ybXMuZGFuZ2Vyb3VzVGFnZ2VkVGVtcGxhdGVTdHJpbmcpIHtcblx0XHRcdHZhciBvcmRlcmVkID0gdGhpcy5xdWFzaS5leHByZXNzaW9uc1xuXHRcdFx0XHQuY29uY2F0KHRoaXMucXVhc2kucXVhc2lzKVxuXHRcdFx0XHQuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5zdGFydCAtIGIuc3RhcnQ7IH0pO1xuXG5cdFx0XHR2YXIgcHJvZ3JhbSA9IHRoaXMucHJvZ3JhbTtcblx0XHRcdHZhciByb290U2NvcGUgPSBwcm9ncmFtLmJvZHkuc2NvcGU7XG5cblx0XHRcdC8vIGluc2VydCBzdHJpbmdzIGF0IHN0YXJ0XG5cdFx0XHR2YXIgdGVtcGxhdGVTdHJpbmdzID0gdGhpcy5xdWFzaS5xdWFzaXMubWFwKGZ1bmN0aW9uIChxdWFzaSkgeyByZXR1cm4gSlNPTi5zdHJpbmdpZnkocXVhc2kudmFsdWUuY29va2VkKTsgfVxuXHRcdFx0KS5qb2luKCcsICcpO1xuXG5cdFx0XHR2YXIgdGVtcGxhdGVPYmplY3QgPSB0aGlzLnByb2dyYW0udGVtcGxhdGVMaXRlcmFsUXVhc2lzW3RlbXBsYXRlU3RyaW5nc107XG5cdFx0XHRpZiAoIXRlbXBsYXRlT2JqZWN0KSB7XG5cdFx0XHRcdHRlbXBsYXRlT2JqZWN0ID0gcm9vdFNjb3BlLmNyZWF0ZUlkZW50aWZpZXIoJ3RlbXBsYXRlT2JqZWN0Jyk7XG5cdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KHRoaXMucHJvZ3JhbS5wcmVwZW5kQXQsIChcInZhciBcIiArIHRlbXBsYXRlT2JqZWN0ICsgXCIgPSBPYmplY3QuZnJlZXplKFtcIiArIHRlbXBsYXRlU3RyaW5ncyArIFwiXSk7XFxuXCIpKTtcblxuXHRcdFx0XHR0aGlzLnByb2dyYW0udGVtcGxhdGVMaXRlcmFsUXVhc2lzW3RlbXBsYXRlU3RyaW5nc10gPSB0ZW1wbGF0ZU9iamVjdDtcblx0XHRcdH1cblxuXHRcdFx0Y29kZS5vdmVyd3JpdGUoXG5cdFx0XHRcdHRoaXMudGFnLmVuZCxcblx0XHRcdFx0b3JkZXJlZFswXS5zdGFydCxcblx0XHRcdFx0KFwiKFwiICsgdGVtcGxhdGVPYmplY3QpXG5cdFx0XHQpO1xuXG5cdFx0XHR2YXIgbGFzdEluZGV4ID0gb3JkZXJlZFswXS5zdGFydDtcblx0XHRcdG9yZGVyZWQuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuXHRcdFx0XHRpZiAobm9kZS50eXBlID09PSAnVGVtcGxhdGVFbGVtZW50Jykge1xuXHRcdFx0XHRcdGNvZGUucmVtb3ZlKGxhc3RJbmRleCwgbm9kZS5lbmQpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvZGUub3ZlcndyaXRlKGxhc3RJbmRleCwgbm9kZS5zdGFydCwgJywgJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRsYXN0SW5kZXggPSBub2RlLmVuZDtcblx0XHRcdH0pO1xuXG5cdFx0XHRjb2RlLm92ZXJ3cml0ZShsYXN0SW5kZXgsIHRoaXMuZW5kLCAnKScpO1xuXHRcdH1cblxuXHRcdE5vZGUkJDEucHJvdG90eXBlLnRyYW5zcGlsZS5jYWxsKHRoaXMsIGNvZGUsIHRyYW5zZm9ybXMpO1xuXHR9O1xuXG5cdHJldHVybiBUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb247XG59KE5vZGUpKTtcblxudmFyIFRlbXBsYXRlRWxlbWVudCA9IChmdW5jdGlvbiAoTm9kZSQkMSkge1xuXHRmdW5jdGlvbiBUZW1wbGF0ZUVsZW1lbnQgKCkge1xuXHRcdE5vZGUkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTm9kZSQkMSApIFRlbXBsYXRlRWxlbWVudC5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTm9kZSQkMSAmJiBOb2RlJCQxLnByb3RvdHlwZSApO1xuXHRUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVGVtcGxhdGVFbGVtZW50O1xuXG5cdFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUuaW5pdGlhbGlzZSA9IGZ1bmN0aW9uIGluaXRpYWxpc2UgKCkge1xuXHRcdHRoaXMucHJvZ3JhbS5pbmRlbnRFeGNsdXNpb25FbGVtZW50cy5wdXNoKHRoaXMpO1xuXHR9O1xuXG5cdHJldHVybiBUZW1wbGF0ZUVsZW1lbnQ7XG59KE5vZGUpKTtcblxudmFyIFRlbXBsYXRlTGl0ZXJhbCA9IChmdW5jdGlvbiAoTm9kZSQkMSkge1xuXHRmdW5jdGlvbiBUZW1wbGF0ZUxpdGVyYWwgKCkge1xuXHRcdE5vZGUkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTm9kZSQkMSApIFRlbXBsYXRlTGl0ZXJhbC5fX3Byb3RvX18gPSBOb2RlJCQxO1xuXHRUZW1wbGF0ZUxpdGVyYWwucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTm9kZSQkMSAmJiBOb2RlJCQxLnByb3RvdHlwZSApO1xuXHRUZW1wbGF0ZUxpdGVyYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVGVtcGxhdGVMaXRlcmFsO1xuXG5cdFRlbXBsYXRlTGl0ZXJhbC5wcm90b3R5cGUudHJhbnNwaWxlID0gZnVuY3Rpb24gdHJhbnNwaWxlIChjb2RlLCB0cmFuc2Zvcm1zKSB7XG5cdFx0Tm9kZSQkMS5wcm90b3R5cGUudHJhbnNwaWxlLmNhbGwodGhpcywgY29kZSwgdHJhbnNmb3Jtcyk7XG5cblx0XHRpZiAoXG5cdFx0XHR0cmFuc2Zvcm1zLnRlbXBsYXRlU3RyaW5nICYmXG5cdFx0XHR0aGlzLnBhcmVudC50eXBlICE9PSAnVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uJ1xuXHRcdCkge1xuXHRcdFx0dmFyIG9yZGVyZWQgPSB0aGlzLmV4cHJlc3Npb25zXG5cdFx0XHRcdC5jb25jYXQodGhpcy5xdWFzaXMpXG5cdFx0XHRcdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLnN0YXJ0IC0gYi5zdGFydCB8fCBhLmVuZCAtIGIuZW5kOyB9KVxuXHRcdFx0XHQuZmlsdGVyKGZ1bmN0aW9uIChub2RlLCBpKSB7XG5cdFx0XHRcdFx0Ly8gaW5jbHVkZSBhbGwgZXhwcmVzc2lvbnNcblx0XHRcdFx0XHRpZiAobm9kZS50eXBlICE9PSAnVGVtcGxhdGVFbGVtZW50JykgeyByZXR1cm4gdHJ1ZTsgfVxuXG5cdFx0XHRcdFx0Ly8gaW5jbHVkZSBhbGwgbm9uLWVtcHR5IHN0cmluZ3Ncblx0XHRcdFx0XHRpZiAobm9kZS52YWx1ZS5yYXcpIHsgcmV0dXJuIHRydWU7IH1cblxuXHRcdFx0XHRcdC8vIGV4Y2x1ZGUgYWxsIGVtcHR5IHN0cmluZ3Mgbm90IGF0IHRoZSBoZWFkXG5cdFx0XHRcdFx0cmV0dXJuICFpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0Ly8gc3BlY2lhbCBjYXNlIOKAkyB3ZSBtYXkgYmUgYWJsZSB0byBza2lwIHRoZSBmaXJzdCBlbGVtZW50LFxuXHRcdFx0Ly8gaWYgaXQncyB0aGUgZW1wdHkgc3RyaW5nLCBidXQgb25seSBpZiB0aGUgc2Vjb25kIGFuZFxuXHRcdFx0Ly8gdGhpcmQgZWxlbWVudHMgYXJlbid0IGJvdGggZXhwcmVzc2lvbnMgKHNpbmNlIHRoZXkgbWF5YmVcblx0XHRcdC8vIGJlIG51bWVyaWMsIGFuZCBgMSArIDIgKyAnMycgPT09ICczMydgKVxuXHRcdFx0aWYgKG9yZGVyZWQubGVuZ3RoID49IDMpIHtcblx0XHRcdFx0dmFyIGZpcnN0ID0gb3JkZXJlZFswXTtcblx0XHRcdFx0dmFyIHRoaXJkID0gb3JkZXJlZFsyXTtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdGZpcnN0LnR5cGUgPT09ICdUZW1wbGF0ZUVsZW1lbnQnICYmXG5cdFx0XHRcdFx0Zmlyc3QudmFsdWUucmF3ID09PSAnJyAmJlxuXHRcdFx0XHRcdHRoaXJkLnR5cGUgPT09ICdUZW1wbGF0ZUVsZW1lbnQnXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdG9yZGVyZWQuc2hpZnQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgcGFyZW50aGVzaXNlID1cblx0XHRcdFx0KHRoaXMucXVhc2lzLmxlbmd0aCAhPT0gMSB8fCB0aGlzLmV4cHJlc3Npb25zLmxlbmd0aCAhPT0gMCkgJiZcblx0XHRcdFx0dGhpcy5wYXJlbnQudHlwZSAhPT0gJ1RlbXBsYXRlTGl0ZXJhbCcgJiZcblx0XHRcdFx0dGhpcy5wYXJlbnQudHlwZSAhPT0gJ0Fzc2lnbm1lbnRFeHByZXNzaW9uJyAmJlxuXHRcdFx0XHR0aGlzLnBhcmVudC50eXBlICE9PSAnQXNzaWdubWVudFBhdHRlcm4nICYmXG5cdFx0XHRcdHRoaXMucGFyZW50LnR5cGUgIT09ICdWYXJpYWJsZURlY2xhcmF0b3InICYmXG5cdFx0XHRcdCh0aGlzLnBhcmVudC50eXBlICE9PSAnQmluYXJ5RXhwcmVzc2lvbicgfHxcblx0XHRcdFx0XHR0aGlzLnBhcmVudC5vcGVyYXRvciAhPT0gJysnKTtcblxuXHRcdFx0aWYgKHBhcmVudGhlc2lzZSkgeyBjb2RlLmFwcGVuZFJpZ2h0KHRoaXMuc3RhcnQsICcoJyk7IH1cblxuXHRcdFx0dmFyIGxhc3RJbmRleCA9IHRoaXMuc3RhcnQ7XG5cblx0XHRcdG9yZGVyZWQuZm9yRWFjaChmdW5jdGlvbiAobm9kZSwgaSkge1xuXHRcdFx0XHR2YXIgcHJlZml4ID0gaSA9PT0gMCA/IChwYXJlbnRoZXNpc2UgPyAnKCcgOiAnJykgOiAnICsgJztcblxuXHRcdFx0XHRpZiAobm9kZS50eXBlID09PSAnVGVtcGxhdGVFbGVtZW50Jykge1xuXHRcdFx0XHRcdGNvZGUub3ZlcndyaXRlKFxuXHRcdFx0XHRcdFx0bGFzdEluZGV4LFxuXHRcdFx0XHRcdFx0bm9kZS5lbmQsXG5cdFx0XHRcdFx0XHRwcmVmaXggKyBKU09OLnN0cmluZ2lmeShub2RlLnZhbHVlLmNvb2tlZClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZhciBwYXJlbnRoZXNpc2UkMSA9IG5vZGUudHlwZSAhPT0gJ0lkZW50aWZpZXInOyAvLyBUT0RPIG90aGVyIGNhc2VzIHdoZXJlIGl0J3Mgc2FmZVxuXG5cdFx0XHRcdFx0aWYgKHBhcmVudGhlc2lzZSQxKSB7IHByZWZpeCArPSAnKCc7IH1cblxuXHRcdFx0XHRcdGNvZGUucmVtb3ZlKGxhc3RJbmRleCwgbm9kZS5zdGFydCk7XG5cblx0XHRcdFx0XHRpZiAocHJlZml4KSB7IGNvZGUucHJlcGVuZFJpZ2h0KG5vZGUuc3RhcnQsIHByZWZpeCk7IH1cblx0XHRcdFx0XHRpZiAocGFyZW50aGVzaXNlJDEpIHsgY29kZS5hcHBlbmRMZWZ0KG5vZGUuZW5kLCAnKScpOyB9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRsYXN0SW5kZXggPSBub2RlLmVuZDtcblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAocGFyZW50aGVzaXNlKSB7IGNvZGUuYXBwZW5kTGVmdChsYXN0SW5kZXgsICcpJyk7IH1cblx0XHRcdGNvZGUub3ZlcndyaXRlKGxhc3RJbmRleCwgdGhpcy5lbmQsIFwiXCIsIHsgY29udGVudE9ubHk6IHRydWUgfSApO1xuXHRcdH1cblx0fTtcblxuXHRyZXR1cm4gVGVtcGxhdGVMaXRlcmFsO1xufShOb2RlKSk7XG5cbnZhciBUaGlzRXhwcmVzc2lvbiA9IChmdW5jdGlvbiAoTm9kZSQkMSkge1xuXHRmdW5jdGlvbiBUaGlzRXhwcmVzc2lvbiAoKSB7XG5cdFx0Tm9kZSQkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0aWYgKCBOb2RlJCQxICkgVGhpc0V4cHJlc3Npb24uX19wcm90b19fID0gTm9kZSQkMTtcblx0VGhpc0V4cHJlc3Npb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTm9kZSQkMSAmJiBOb2RlJCQxLnByb3RvdHlwZSApO1xuXHRUaGlzRXhwcmVzc2lvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUaGlzRXhwcmVzc2lvbjtcblxuXHRUaGlzRXhwcmVzc2lvbi5wcm90b3R5cGUuaW5pdGlhbGlzZSA9IGZ1bmN0aW9uIGluaXRpYWxpc2UgKHRyYW5zZm9ybXMpIHtcblx0XHRpZiAodHJhbnNmb3Jtcy5hcnJvdykge1xuXHRcdFx0dmFyIGxleGljYWxCb3VuZGFyeSA9IHRoaXMuZmluZExleGljYWxCb3VuZGFyeSgpO1xuXHRcdFx0dmFyIGFycm93RnVuY3Rpb24gPSB0aGlzLmZpbmROZWFyZXN0KCdBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbicpO1xuXHRcdFx0dmFyIGxvb3AgPSB0aGlzLmZpbmROZWFyZXN0KGxvb3BTdGF0ZW1lbnQpO1xuXG5cdFx0XHRpZiAoXG5cdFx0XHRcdChhcnJvd0Z1bmN0aW9uICYmIGFycm93RnVuY3Rpb24uZGVwdGggPiBsZXhpY2FsQm91bmRhcnkuZGVwdGgpIHx8XG5cdFx0XHRcdChsb29wICYmXG5cdFx0XHRcdFx0bG9vcC5ib2R5LmNvbnRhaW5zKHRoaXMpICYmXG5cdFx0XHRcdFx0bG9vcC5kZXB0aCA+IGxleGljYWxCb3VuZGFyeS5kZXB0aCkgfHxcblx0XHRcdFx0KGxvb3AgJiYgbG9vcC5yaWdodCAmJiBsb29wLnJpZ2h0LmNvbnRhaW5zKHRoaXMpKVxuXHRcdFx0KSB7XG5cdFx0XHRcdHRoaXMuYWxpYXMgPSBsZXhpY2FsQm91bmRhcnkuZ2V0VGhpc0FsaWFzKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdFRoaXNFeHByZXNzaW9uLnByb3RvdHlwZS50cmFuc3BpbGUgPSBmdW5jdGlvbiB0cmFuc3BpbGUgKGNvZGUpIHtcblx0XHRpZiAodGhpcy5hbGlhcykge1xuXHRcdFx0Y29kZS5vdmVyd3JpdGUodGhpcy5zdGFydCwgdGhpcy5lbmQsIHRoaXMuYWxpYXMsIHtcblx0XHRcdFx0c3RvcmVOYW1lOiB0cnVlLFxuXHRcdFx0XHRjb250ZW50T25seTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBUaGlzRXhwcmVzc2lvbjtcbn0oTm9kZSkpO1xuXG52YXIgVXBkYXRlRXhwcmVzc2lvbiA9IChmdW5jdGlvbiAoTm9kZSQkMSkge1xuXHRmdW5jdGlvbiBVcGRhdGVFeHByZXNzaW9uICgpIHtcblx0XHROb2RlJCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAoIE5vZGUkJDEgKSBVcGRhdGVFeHByZXNzaW9uLl9fcHJvdG9fXyA9IE5vZGUkJDE7XG5cdFVwZGF0ZUV4cHJlc3Npb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTm9kZSQkMSAmJiBOb2RlJCQxLnByb3RvdHlwZSApO1xuXHRVcGRhdGVFeHByZXNzaW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFVwZGF0ZUV4cHJlc3Npb247XG5cblx0VXBkYXRlRXhwcmVzc2lvbi5wcm90b3R5cGUuaW5pdGlhbGlzZSA9IGZ1bmN0aW9uIGluaXRpYWxpc2UgKHRyYW5zZm9ybXMpIHtcblx0XHRpZiAodGhpcy5hcmd1bWVudC50eXBlID09PSAnSWRlbnRpZmllcicpIHtcblx0XHRcdHZhciBkZWNsYXJhdGlvbiA9IHRoaXMuZmluZFNjb3BlKGZhbHNlKS5maW5kRGVjbGFyYXRpb24oXG5cdFx0XHRcdHRoaXMuYXJndW1lbnQubmFtZVxuXHRcdFx0KTtcblx0XHRcdC8vIHNwZWNpYWwgY2FzZSDigJMgaHR0cHM6Ly9naXRsYWIuY29tL1JpY2gtSGFycmlzL2J1YmxlL2lzc3Vlcy8xNTBcblx0XHRcdHZhciBzdGF0ZW1lbnQgPSBkZWNsYXJhdGlvbiAmJiBkZWNsYXJhdGlvbi5ub2RlLmFuY2VzdG9yKDMpO1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRzdGF0ZW1lbnQgJiZcblx0XHRcdFx0c3RhdGVtZW50LnR5cGUgPT09ICdGb3JTdGF0ZW1lbnQnICYmXG5cdFx0XHRcdHN0YXRlbWVudC5ib2R5LmNvbnRhaW5zKHRoaXMpXG5cdFx0XHQpIHtcblx0XHRcdFx0c3RhdGVtZW50LnJlYXNzaWduZWRbdGhpcy5hcmd1bWVudC5uYW1lXSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Tm9kZSQkMS5wcm90b3R5cGUuaW5pdGlhbGlzZS5jYWxsKHRoaXMsIHRyYW5zZm9ybXMpO1xuXHR9O1xuXG5cdFVwZGF0ZUV4cHJlc3Npb24ucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdGlmICh0aGlzLmFyZ3VtZW50LnR5cGUgPT09ICdJZGVudGlmaWVyJykge1xuXHRcdFx0Ly8gRG8gdGhpcyBjaGVjayBhZnRlciBldmVyeXRoaW5nIGhhcyBiZWVuIGluaXRpYWxpemVkIHRvIGZpbmRcblx0XHRcdC8vIHNoYWRvd2luZyBkZWNsYXJhdGlvbnMgYWZ0ZXIgdGhpcyBleHByZXNzaW9uXG5cdFx0XHRjaGVja0NvbnN0KHRoaXMuYXJndW1lbnQsIHRoaXMuZmluZFNjb3BlKGZhbHNlKSk7XG5cdFx0fVxuXHRcdE5vZGUkJDEucHJvdG90eXBlLnRyYW5zcGlsZS5jYWxsKHRoaXMsIGNvZGUsIHRyYW5zZm9ybXMpO1xuXHR9O1xuXG5cdHJldHVybiBVcGRhdGVFeHByZXNzaW9uO1xufShOb2RlKSk7XG5cbnZhciBWYXJpYWJsZURlY2xhcmF0aW9uID0gKGZ1bmN0aW9uIChOb2RlJCQxKSB7XG5cdGZ1bmN0aW9uIFZhcmlhYmxlRGVjbGFyYXRpb24gKCkge1xuXHRcdE5vZGUkJDEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXG5cdGlmICggTm9kZSQkMSApIFZhcmlhYmxlRGVjbGFyYXRpb24uX19wcm90b19fID0gTm9kZSQkMTtcblx0VmFyaWFibGVEZWNsYXJhdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBOb2RlJCQxICYmIE5vZGUkJDEucHJvdG90eXBlICk7XG5cdFZhcmlhYmxlRGVjbGFyYXRpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVmFyaWFibGVEZWNsYXJhdGlvbjtcblxuXHRWYXJpYWJsZURlY2xhcmF0aW9uLnByb3RvdHlwZS5pbml0aWFsaXNlID0gZnVuY3Rpb24gaW5pdGlhbGlzZSAodHJhbnNmb3Jtcykge1xuXHRcdHRoaXMuc2NvcGUgPSB0aGlzLmZpbmRTY29wZSh0aGlzLmtpbmQgPT09ICd2YXInKTtcblx0XHR0aGlzLmRlY2xhcmF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChkZWNsYXJhdG9yKSB7IHJldHVybiBkZWNsYXJhdG9yLmluaXRpYWxpc2UodHJhbnNmb3Jtcyk7IH0pO1xuXHR9O1xuXG5cdFZhcmlhYmxlRGVjbGFyYXRpb24ucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdHZhciB0aGlzJDEgPSB0aGlzO1xuXG5cdFx0dmFyIGkwID0gdGhpcy5nZXRJbmRlbnRhdGlvbigpO1xuXHRcdHZhciBraW5kID0gdGhpcy5raW5kO1xuXG5cdFx0aWYgKHRyYW5zZm9ybXMubGV0Q29uc3QgJiYga2luZCAhPT0gJ3ZhcicpIHtcblx0XHRcdGtpbmQgPSAndmFyJztcblx0XHRcdGNvZGUub3ZlcndyaXRlKHRoaXMuc3RhcnQsIHRoaXMuc3RhcnQgKyB0aGlzLmtpbmQubGVuZ3RoLCBraW5kLCB7XG5cdFx0XHRcdHN0b3JlTmFtZTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKHRyYW5zZm9ybXMuZGVzdHJ1Y3R1cmluZyAmJiB0aGlzLnBhcmVudC50eXBlICE9PSAnRm9yT2ZTdGF0ZW1lbnQnICYmIHRoaXMucGFyZW50LnR5cGUgIT09ICdGb3JJblN0YXRlbWVudCcpIHtcblx0XHRcdHZhciBjID0gdGhpcy5zdGFydDtcblx0XHRcdHZhciBsYXN0RGVjbGFyYXRvcklzUGF0dGVybjtcblxuXHRcdFx0dGhpcy5kZWNsYXJhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZGVjbGFyYXRvciwgaSkge1xuXHRcdFx0XHRkZWNsYXJhdG9yLnRyYW5zcGlsZShjb2RlLCB0cmFuc2Zvcm1zKTtcblxuXHRcdFx0XHRpZiAoZGVjbGFyYXRvci5pZC50eXBlID09PSAnSWRlbnRpZmllcicpIHtcblx0XHRcdFx0XHRpZiAoaSA+IDAgJiYgdGhpcyQxLmRlY2xhcmF0aW9uc1tpIC0gMV0uaWQudHlwZSAhPT0gJ0lkZW50aWZpZXInKSB7XG5cdFx0XHRcdFx0XHRjb2RlLm92ZXJ3cml0ZShjLCBkZWNsYXJhdG9yLmlkLnN0YXJ0LCBcInZhciBcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZhciBpbmxpbmUgPSBsb29wU3RhdGVtZW50LnRlc3QodGhpcyQxLnBhcmVudC50eXBlKTtcblxuXHRcdFx0XHRcdGlmIChpID09PSAwKSB7XG5cdFx0XHRcdFx0XHRjb2RlLnJlbW92ZShjLCBkZWNsYXJhdG9yLmlkLnN0YXJ0KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29kZS5vdmVyd3JpdGUoYywgZGVjbGFyYXRvci5pZC5zdGFydCwgKFwiO1xcblwiICsgaTApKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR2YXIgc2ltcGxlID1cblx0XHRcdFx0XHRcdGRlY2xhcmF0b3IuaW5pdC50eXBlID09PSAnSWRlbnRpZmllcicgJiYgIWRlY2xhcmF0b3IuaW5pdC5yZXdyaXR0ZW47XG5cblx0XHRcdFx0XHR2YXIgbmFtZSA9IHNpbXBsZVxuXHRcdFx0XHRcdFx0PyAoZGVjbGFyYXRvci5pbml0LmFsaWFzIHx8IGRlY2xhcmF0b3IuaW5pdC5uYW1lKVxuXHRcdFx0XHRcdFx0OiBkZWNsYXJhdG9yLmZpbmRTY29wZSh0cnVlKS5jcmVhdGVJZGVudGlmaWVyKCdyZWYnKTtcblxuXHRcdFx0XHRcdGMgPSBkZWNsYXJhdG9yLnN0YXJ0O1xuXG5cdFx0XHRcdFx0dmFyIHN0YXRlbWVudEdlbmVyYXRvcnMgPSBbXTtcblxuXHRcdFx0XHRcdGlmIChzaW1wbGUpIHtcblx0XHRcdFx0XHRcdGNvZGUucmVtb3ZlKGRlY2xhcmF0b3IuaWQuZW5kLCBkZWNsYXJhdG9yLmVuZCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHN0YXRlbWVudEdlbmVyYXRvcnMucHVzaChmdW5jdGlvbiAoc3RhcnQsIHByZWZpeCwgc3VmZml4KSB7XG5cdFx0XHRcdFx0XHRcdGNvZGUucHJlcGVuZFJpZ2h0KGRlY2xhcmF0b3IuaWQuZW5kLCAoXCJ2YXIgXCIgKyBuYW1lKSk7XG5cdFx0XHRcdFx0XHRcdGNvZGUuYXBwZW5kTGVmdChkZWNsYXJhdG9yLmluaXQuZW5kLCAoXCJcIiArIHN1ZmZpeCkpO1xuXHRcdFx0XHRcdFx0XHRjb2RlLm1vdmUoZGVjbGFyYXRvci5pZC5lbmQsIGRlY2xhcmF0b3IuZW5kLCBzdGFydCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR2YXIgc2NvcGUgPSBkZWNsYXJhdG9yLmZpbmRTY29wZShmYWxzZSk7XG5cdFx0XHRcdFx0ZGVzdHJ1Y3R1cmUoXG5cdFx0XHRcdFx0XHRjb2RlLFxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gKGlkKSB7IHJldHVybiBzY29wZS5jcmVhdGVJZGVudGlmaWVyKGlkKTsgfSxcblx0XHRcdFx0XHRcdGZ1bmN0aW9uIChyZWYpIHtcblx0XHRcdFx0XHRcdFx0dmFyIG5hbWUgPSByZWYubmFtZTtcblxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gc2NvcGUucmVzb2x2ZU5hbWUobmFtZSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGRlY2xhcmF0b3IuaWQsXG5cdFx0XHRcdFx0XHRuYW1lLFxuXHRcdFx0XHRcdFx0aW5saW5lLFxuXHRcdFx0XHRcdFx0c3RhdGVtZW50R2VuZXJhdG9yc1xuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHR2YXIgcHJlZml4ID0gaW5saW5lID8gJ3ZhciAnIDogJyc7XG5cdFx0XHRcdFx0dmFyIHN1ZmZpeCA9IGlubGluZSA/IFwiLCBcIiA6IChcIjtcXG5cIiArIGkwKTtcblx0XHRcdFx0XHRzdGF0ZW1lbnRHZW5lcmF0b3JzLmZvckVhY2goZnVuY3Rpb24gKGZuLCBqKSB7XG5cdFx0XHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0XHRcdGkgPT09IHRoaXMkMS5kZWNsYXJhdGlvbnMubGVuZ3RoIC0gMSAmJlxuXHRcdFx0XHRcdFx0XHRqID09PSBzdGF0ZW1lbnRHZW5lcmF0b3JzLmxlbmd0aCAtIDFcblx0XHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0XHRzdWZmaXggPSBpbmxpbmUgPyAnJyA6ICc7Jztcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Zm4oZGVjbGFyYXRvci5zdGFydCwgaiA9PT0gMCA/IHByZWZpeCA6ICcnLCBzdWZmaXgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YyA9IGRlY2xhcmF0b3IuZW5kO1xuXHRcdFx0XHRsYXN0RGVjbGFyYXRvcklzUGF0dGVybiA9IGRlY2xhcmF0b3IuaWQudHlwZSAhPT0gJ0lkZW50aWZpZXInO1xuXHRcdFx0fSk7XG5cblx0XHRcdGlmIChsYXN0RGVjbGFyYXRvcklzUGF0dGVybiAmJiB0aGlzLmVuZCA+IGMpIHtcblx0XHRcdFx0Y29kZS5vdmVyd3JpdGUoYywgdGhpcy5lbmQsICcnLCB7IGNvbnRlbnRPbmx5OiB0cnVlIH0pO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmRlY2xhcmF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChkZWNsYXJhdG9yKSB7XG5cdFx0XHRcdGRlY2xhcmF0b3IudHJhbnNwaWxlKGNvZGUsIHRyYW5zZm9ybXMpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBWYXJpYWJsZURlY2xhcmF0aW9uO1xufShOb2RlKSk7XG5cbnZhciBWYXJpYWJsZURlY2xhcmF0b3IgPSAoZnVuY3Rpb24gKE5vZGUkJDEpIHtcblx0ZnVuY3Rpb24gVmFyaWFibGVEZWNsYXJhdG9yICgpIHtcblx0XHROb2RlJCQxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHRpZiAoIE5vZGUkJDEgKSBWYXJpYWJsZURlY2xhcmF0b3IuX19wcm90b19fID0gTm9kZSQkMTtcblx0VmFyaWFibGVEZWNsYXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE5vZGUkJDEgJiYgTm9kZSQkMS5wcm90b3R5cGUgKTtcblx0VmFyaWFibGVEZWNsYXJhdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFZhcmlhYmxlRGVjbGFyYXRvcjtcblxuXHRWYXJpYWJsZURlY2xhcmF0b3IucHJvdG90eXBlLmluaXRpYWxpc2UgPSBmdW5jdGlvbiBpbml0aWFsaXNlICh0cmFuc2Zvcm1zKSB7XG5cdFx0dmFyIGtpbmQgPSB0aGlzLnBhcmVudC5raW5kO1xuXHRcdGlmIChraW5kID09PSAnbGV0JyAmJiB0aGlzLnBhcmVudC5wYXJlbnQudHlwZSA9PT0gJ0ZvclN0YXRlbWVudCcpIHtcblx0XHRcdGtpbmQgPSAnZm9yLmxldCc7IC8vIHNwZWNpYWwgY2FzZS4uLlxuXHRcdH1cblxuXHRcdHRoaXMucGFyZW50LnNjb3BlLmFkZERlY2xhcmF0aW9uKHRoaXMuaWQsIGtpbmQpO1xuXHRcdE5vZGUkJDEucHJvdG90eXBlLmluaXRpYWxpc2UuY2FsbCh0aGlzLCB0cmFuc2Zvcm1zKTtcblx0fTtcblxuXHRWYXJpYWJsZURlY2xhcmF0b3IucHJvdG90eXBlLnRyYW5zcGlsZSA9IGZ1bmN0aW9uIHRyYW5zcGlsZSAoY29kZSwgdHJhbnNmb3Jtcykge1xuXHRcdGlmICghdGhpcy5pbml0ICYmIHRyYW5zZm9ybXMubGV0Q29uc3QgJiYgdGhpcy5wYXJlbnQua2luZCAhPT0gJ3ZhcicpIHtcblx0XHRcdHZhciBpbkxvb3AgPSB0aGlzLmZpbmROZWFyZXN0KFxuXHRcdFx0XHQvRnVuY3Rpb258XkZvcihJbnxPZik/U3RhdGVtZW50fF4oPzpEbyk/V2hpbGVTdGF0ZW1lbnQvXG5cdFx0XHQpO1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRpbkxvb3AgJiZcblx0XHRcdFx0IS9GdW5jdGlvbi8udGVzdChpbkxvb3AudHlwZSkgJiZcblx0XHRcdFx0IXRoaXMuaXNMZWZ0RGVjbGFyYXRvck9mTG9vcCgpXG5cdFx0XHQpIHtcblx0XHRcdFx0Y29kZS5hcHBlbmRMZWZ0KHRoaXMuaWQuZW5kLCAnID0gKHZvaWQgMCknKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAodGhpcy5pZCkgeyB0aGlzLmlkLnRyYW5zcGlsZShjb2RlLCB0cmFuc2Zvcm1zKTsgfVxuXHRcdGlmICh0aGlzLmluaXQpIHsgdGhpcy5pbml0LnRyYW5zcGlsZShjb2RlLCB0cmFuc2Zvcm1zKTsgfVxuXHR9O1xuXG5cdFZhcmlhYmxlRGVjbGFyYXRvci5wcm90b3R5cGUuaXNMZWZ0RGVjbGFyYXRvck9mTG9vcCA9IGZ1bmN0aW9uIGlzTGVmdERlY2xhcmF0b3JPZkxvb3AgKCkge1xuXHRcdHJldHVybiAoXG5cdFx0XHR0aGlzLnBhcmVudCAmJlxuXHRcdFx0dGhpcy5wYXJlbnQudHlwZSA9PT0gJ1ZhcmlhYmxlRGVjbGFyYXRpb24nICYmXG5cdFx0XHR0aGlzLnBhcmVudC5wYXJlbnQgJiZcblx0XHRcdCh0aGlzLnBhcmVudC5wYXJlbnQudHlwZSA9PT0gJ0ZvckluU3RhdGVtZW50JyB8fFxuXHRcdFx0XHR0aGlzLnBhcmVudC5wYXJlbnQudHlwZSA9PT0gJ0Zvck9mU3RhdGVtZW50JykgJiZcblx0XHRcdHRoaXMucGFyZW50LnBhcmVudC5sZWZ0ICYmXG5cdFx0XHR0aGlzLnBhcmVudC5wYXJlbnQubGVmdC5kZWNsYXJhdGlvbnNbMF0gPT09IHRoaXNcblx0XHQpO1xuXHR9O1xuXG5cdHJldHVybiBWYXJpYWJsZURlY2xhcmF0b3I7XG59KE5vZGUpKTtcblxudmFyIHR5cGVzID0ge1xuXHRBcnJheUV4cHJlc3Npb246IEFycmF5RXhwcmVzc2lvbixcblx0QXJyb3dGdW5jdGlvbkV4cHJlc3Npb246IEFycm93RnVuY3Rpb25FeHByZXNzaW9uLFxuXHRBc3NpZ25tZW50RXhwcmVzc2lvbjogQXNzaWdubWVudEV4cHJlc3Npb24sXG5cdEJpbmFyeUV4cHJlc3Npb246IEJpbmFyeUV4cHJlc3Npb24sXG5cdEJyZWFrU3RhdGVtZW50OiBCcmVha1N0YXRlbWVudCxcblx0Q2FsbEV4cHJlc3Npb246IENhbGxFeHByZXNzaW9uLFxuXHRDbGFzc0JvZHk6IENsYXNzQm9keSxcblx0Q2xhc3NEZWNsYXJhdGlvbjogQ2xhc3NEZWNsYXJhdGlvbixcblx0Q2xhc3NFeHByZXNzaW9uOiBDbGFzc0V4cHJlc3Npb24sXG5cdENvbnRpbnVlU3RhdGVtZW50OiBDb250aW51ZVN0YXRlbWVudCxcblx0RG9XaGlsZVN0YXRlbWVudDogTG9vcFN0YXRlbWVudCxcblx0RXhwb3J0TmFtZWREZWNsYXJhdGlvbjogRXhwb3J0TmFtZWREZWNsYXJhdGlvbixcblx0RXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uOiBFeHBvcnREZWZhdWx0RGVjbGFyYXRpb24sXG5cdEZvclN0YXRlbWVudDogRm9yU3RhdGVtZW50LFxuXHRGb3JJblN0YXRlbWVudDogRm9ySW5TdGF0ZW1lbnQsXG5cdEZvck9mU3RhdGVtZW50OiBGb3JPZlN0YXRlbWVudCxcblx0RnVuY3Rpb25EZWNsYXJhdGlvbjogRnVuY3Rpb25EZWNsYXJhdGlvbixcblx0RnVuY3Rpb25FeHByZXNzaW9uOiBGdW5jdGlvbkV4cHJlc3Npb24sXG5cdElkZW50aWZpZXI6IElkZW50aWZpZXIsXG5cdElmU3RhdGVtZW50OiBJZlN0YXRlbWVudCxcblx0SW1wb3J0RGVjbGFyYXRpb246IEltcG9ydERlY2xhcmF0aW9uLFxuXHRJbXBvcnREZWZhdWx0U3BlY2lmaWVyOiBJbXBvcnREZWZhdWx0U3BlY2lmaWVyLFxuXHRJbXBvcnRTcGVjaWZpZXI6IEltcG9ydFNwZWNpZmllcixcblx0SlNYQXR0cmlidXRlOiBKU1hBdHRyaWJ1dGUsXG5cdEpTWENsb3NpbmdFbGVtZW50OiBKU1hDbG9zaW5nRWxlbWVudCxcblx0SlNYQ2xvc2luZ0ZyYWdtZW50OiBKU1hDbG9zaW5nRnJhZ21lbnQsXG5cdEpTWEVsZW1lbnQ6IEpTWEVsZW1lbnQsXG5cdEpTWEV4cHJlc3Npb25Db250YWluZXI6IEpTWEV4cHJlc3Npb25Db250YWluZXIsXG5cdEpTWEZyYWdtZW50OiBKU1hGcmFnbWVudCxcblx0SlNYT3BlbmluZ0VsZW1lbnQ6IEpTWE9wZW5pbmdFbGVtZW50LFxuXHRKU1hPcGVuaW5nRnJhZ21lbnQ6IEpTWE9wZW5pbmdGcmFnbWVudCxcblx0SlNYU3ByZWFkQXR0cmlidXRlOiBKU1hTcHJlYWRBdHRyaWJ1dGUsXG5cdExpdGVyYWw6IExpdGVyYWwsXG5cdE1lbWJlckV4cHJlc3Npb246IE1lbWJlckV4cHJlc3Npb24sXG5cdE5ld0V4cHJlc3Npb246IE5ld0V4cHJlc3Npb24sXG5cdE9iamVjdEV4cHJlc3Npb246IE9iamVjdEV4cHJlc3Npb24sXG5cdFByb3BlcnR5OiBQcm9wZXJ0eSxcblx0UmV0dXJuU3RhdGVtZW50OiBSZXR1cm5TdGF0ZW1lbnQsXG5cdFNwcmVhZEVsZW1lbnQ6IFNwcmVhZEVsZW1lbnQsXG5cdFN1cGVyOiBTdXBlcixcblx0VGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uOiBUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24sXG5cdFRlbXBsYXRlRWxlbWVudDogVGVtcGxhdGVFbGVtZW50LFxuXHRUZW1wbGF0ZUxpdGVyYWw6IFRlbXBsYXRlTGl0ZXJhbCxcblx0VGhpc0V4cHJlc3Npb246IFRoaXNFeHByZXNzaW9uLFxuXHRVcGRhdGVFeHByZXNzaW9uOiBVcGRhdGVFeHByZXNzaW9uLFxuXHRWYXJpYWJsZURlY2xhcmF0aW9uOiBWYXJpYWJsZURlY2xhcmF0aW9uLFxuXHRWYXJpYWJsZURlY2xhcmF0b3I6IFZhcmlhYmxlRGVjbGFyYXRvcixcblx0V2hpbGVTdGF0ZW1lbnQ6IExvb3BTdGF0ZW1lbnRcbn07XG5cbnZhciBrZXlzID0ge1xuXHRQcm9ncmFtOiBbJ2JvZHknXSxcblx0TGl0ZXJhbDogW11cbn07XG5cbnZhciBzdGF0ZW1lbnRzV2l0aEJsb2NrcyA9IHtcblx0SWZTdGF0ZW1lbnQ6ICdjb25zZXF1ZW50Jyxcblx0Rm9yU3RhdGVtZW50OiAnYm9keScsXG5cdEZvckluU3RhdGVtZW50OiAnYm9keScsXG5cdEZvck9mU3RhdGVtZW50OiAnYm9keScsXG5cdFdoaWxlU3RhdGVtZW50OiAnYm9keScsXG5cdERvV2hpbGVTdGF0ZW1lbnQ6ICdib2R5Jyxcblx0QXJyb3dGdW5jdGlvbkV4cHJlc3Npb246ICdib2R5J1xufTtcblxuZnVuY3Rpb24gd3JhcChyYXcsIHBhcmVudCkge1xuXHRpZiAoIXJhdykgeyByZXR1cm47IH1cblxuXHRpZiAoJ2xlbmd0aCcgaW4gcmF3KSB7XG5cdFx0dmFyIGkgPSByYXcubGVuZ3RoO1xuXHRcdHdoaWxlIChpLS0pIHsgd3JhcChyYXdbaV0sIHBhcmVudCk7IH1cblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyB3aXRoIGUuZy4gc2hvcnRoYW5kIHByb3BlcnRpZXMsIGtleSBhbmQgdmFsdWUgYXJlXG5cdC8vIHRoZSBzYW1lIG5vZGUuIFdlIGRvbid0IHdhbnQgdG8gd3JhcCBhbiBvYmplY3QgdHdpY2Vcblx0aWYgKHJhdy5fX3dyYXBwZWQpIHsgcmV0dXJuOyB9XG5cdHJhdy5fX3dyYXBwZWQgPSB0cnVlO1xuXG5cdGlmICgha2V5c1tyYXcudHlwZV0pIHtcblx0XHRrZXlzW3Jhdy50eXBlXSA9IE9iamVjdC5rZXlzKHJhdykuZmlsdGVyKFxuXHRcdFx0ZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gdHlwZW9mIHJhd1trZXldID09PSAnb2JqZWN0JzsgfVxuXHRcdCk7XG5cdH1cblxuXHQvLyBzcGVjaWFsIGNhc2Ug4oCTIGJvZHktbGVzcyBpZi9mb3Ivd2hpbGUgc3RhdGVtZW50cy4gVE9ETyBvdGhlcnM/XG5cdHZhciBib2R5VHlwZSA9IHN0YXRlbWVudHNXaXRoQmxvY2tzW3Jhdy50eXBlXTtcblx0aWYgKGJvZHlUeXBlICYmIHJhd1tib2R5VHlwZV0udHlwZSAhPT0gJ0Jsb2NrU3RhdGVtZW50Jykge1xuXHRcdHZhciBleHByZXNzaW9uID0gcmF3W2JvZHlUeXBlXTtcblxuXHRcdC8vIGNyZWF0ZSBhIHN5bnRoZXRpYyBibG9jayBzdGF0ZW1lbnQsIG90aGVyd2lzZSBhbGwgaGVsbFxuXHRcdC8vIGJyZWFrcyBsb29zZSB3aGVuIGl0IGNvbWVzIHRvIGJsb2NrIHNjb3Bpbmdcblx0XHRyYXdbYm9keVR5cGVdID0ge1xuXHRcdFx0c3RhcnQ6IGV4cHJlc3Npb24uc3RhcnQsXG5cdFx0XHRlbmQ6IGV4cHJlc3Npb24uZW5kLFxuXHRcdFx0dHlwZTogJ0Jsb2NrU3RhdGVtZW50Jyxcblx0XHRcdGJvZHk6IFtleHByZXNzaW9uXSxcblx0XHRcdHN5bnRoZXRpYzogdHJ1ZVxuXHRcdH07XG5cdH1cblxuXHRyYXcucGFyZW50ID0gcGFyZW50O1xuXHRyYXcucHJvZ3JhbSA9IHBhcmVudC5wcm9ncmFtIHx8IHBhcmVudDtcblx0cmF3LmRlcHRoID0gcGFyZW50LmRlcHRoICsgMTtcblx0cmF3LmtleXMgPSBrZXlzW3Jhdy50eXBlXTtcblx0cmF3LmluZGVudGF0aW9uID0gdW5kZWZpbmVkO1xuXG5cdGZvciAodmFyIGkkMSA9IDAsIGxpc3QgPSBrZXlzW3Jhdy50eXBlXTsgaSQxIDwgbGlzdC5sZW5ndGg7IGkkMSArPSAxKSB7XG5cdFx0dmFyIGtleSA9IGxpc3RbaSQxXTtcblxuXHRcdHdyYXAocmF3W2tleV0sIHJhdyk7XG5cdH1cblxuXHRyYXcucHJvZ3JhbS5tYWdpY1N0cmluZy5hZGRTb3VyY2VtYXBMb2NhdGlvbihyYXcuc3RhcnQpO1xuXHRyYXcucHJvZ3JhbS5tYWdpY1N0cmluZy5hZGRTb3VyY2VtYXBMb2NhdGlvbihyYXcuZW5kKTtcblxuXHR2YXIgdHlwZSA9XG5cdFx0KHJhdy50eXBlID09PSAnQmxvY2tTdGF0ZW1lbnQnID8gQmxvY2tTdGF0ZW1lbnQgOiB0eXBlc1tyYXcudHlwZV0pIHx8IE5vZGU7XG5cdHJhdy5fX3Byb3RvX18gPSB0eXBlLnByb3RvdHlwZTtcbn1cblxuZnVuY3Rpb24gUHJvZ3JhbShzb3VyY2UsIGFzdCwgdHJhbnNmb3Jtcywgb3B0aW9ucykge1xuXHR2YXIgdGhpcyQxID0gdGhpcztcblxuXHR0aGlzLnR5cGUgPSAnUm9vdCc7XG5cblx0Ly8gb3B0aW9uc1xuXHR0aGlzLmpzeCA9IG9wdGlvbnMuanN4IHx8ICdSZWFjdC5jcmVhdGVFbGVtZW50Jztcblx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuXHR0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0dGhpcy5tYWdpY1N0cmluZyA9IG5ldyBNYWdpY1N0cmluZyhzb3VyY2UpO1xuXG5cdHRoaXMuYXN0ID0gYXN0O1xuXHR0aGlzLmRlcHRoID0gMDtcblxuXHR3cmFwKCh0aGlzLmJvZHkgPSBhc3QpLCB0aGlzKTtcblx0dGhpcy5ib2R5Ll9fcHJvdG9fXyA9IEJsb2NrU3RhdGVtZW50LnByb3RvdHlwZTtcblxuXHR0aGlzLnRlbXBsYXRlTGl0ZXJhbFF1YXNpcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ib2R5LmJvZHkubGVuZ3RoOyArK2kpIHtcblx0XHRpZiAoIXRoaXMkMS5ib2R5LmJvZHlbaV0uZGlyZWN0aXZlKSB7XG5cdFx0XHR0aGlzJDEucHJlcGVuZEF0ID0gdGhpcyQxLmJvZHkuYm9keVtpXS5zdGFydDtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXHR0aGlzLm9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzSGVscGVyID0gbnVsbDtcblxuXHR0aGlzLmluZGVudEV4Y2x1c2lvbkVsZW1lbnRzID0gW107XG5cdHRoaXMuYm9keS5pbml0aWFsaXNlKHRyYW5zZm9ybXMpO1xuXG5cdHRoaXMuaW5kZW50RXhjbHVzaW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdGZvciAodmFyIGkkMiA9IDAsIGxpc3QgPSB0aGlzJDEuaW5kZW50RXhjbHVzaW9uRWxlbWVudHM7IGkkMiA8IGxpc3QubGVuZ3RoOyBpJDIgKz0gMSkge1xuXHRcdHZhciBub2RlID0gbGlzdFtpJDJdO1xuXG5cdFx0Zm9yICh2YXIgaSQxID0gbm9kZS5zdGFydDsgaSQxIDwgbm9kZS5lbmQ7IGkkMSArPSAxKSB7XG5cdFx0XHR0aGlzJDEuaW5kZW50RXhjbHVzaW9uc1tpJDFdID0gdHJ1ZTtcblx0XHR9XG5cdH1cblxuXHR0aGlzLmJvZHkudHJhbnNwaWxlKHRoaXMubWFnaWNTdHJpbmcsIHRyYW5zZm9ybXMpO1xufVxuXG5Qcm9ncmFtLnByb3RvdHlwZSA9IHtcblx0ZXhwb3J0OiBmdW5jdGlvbiBleHBvcnQkMShvcHRpb25zKSB7XG5cdFx0aWYgKCBvcHRpb25zID09PSB2b2lkIDAgKSBvcHRpb25zID0ge307XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0Y29kZTogdGhpcy5tYWdpY1N0cmluZy50b1N0cmluZygpLFxuXHRcdFx0bWFwOiB0aGlzLm1hZ2ljU3RyaW5nLmdlbmVyYXRlTWFwKHtcblx0XHRcdFx0ZmlsZTogb3B0aW9ucy5maWxlLFxuXHRcdFx0XHRzb3VyY2U6IG9wdGlvbnMuc291cmNlLFxuXHRcdFx0XHRpbmNsdWRlQ29udGVudDogb3B0aW9ucy5pbmNsdWRlQ29udGVudCAhPT0gZmFsc2Vcblx0XHRcdH0pXG5cdFx0fTtcblx0fSxcblxuXHRmaW5kTmVhcmVzdDogZnVuY3Rpb24gZmluZE5lYXJlc3QoKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH0sXG5cblx0ZmluZFNjb3BlOiBmdW5jdGlvbiBmaW5kU2NvcGUoKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH0sXG5cblx0Z2V0T2JqZWN0V2l0aG91dFByb3BlcnRpZXNIZWxwZXI6IGZ1bmN0aW9uIGdldE9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzSGVscGVyKGNvZGUpIHtcblx0XHRpZiAoIXRoaXMub2JqZWN0V2l0aG91dFByb3BlcnRpZXNIZWxwZXIpIHtcblx0XHRcdHRoaXMub2JqZWN0V2l0aG91dFByb3BlcnRpZXNIZWxwZXIgPSB0aGlzLmJvZHkuc2NvcGUuY3JlYXRlSWRlbnRpZmllcignb2JqZWN0V2l0aG91dFByb3BlcnRpZXMnKTtcblx0XHRcdGNvZGUucHJlcGVuZExlZnQodGhpcy5wcmVwZW5kQXQsIFwiZnVuY3Rpb24gXCIgKyAodGhpcy5vYmplY3RXaXRob3V0UHJvcGVydGllc0hlbHBlcikgKyBcIiAob2JqLCBleGNsdWRlKSB7IFwiICtcblx0XHRcdFx0XCJ2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGsgaW4gb2JqKSBcIiArXG5cdFx0XHRcdFwiaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGspICYmIGV4Y2x1ZGUuaW5kZXhPZihrKSA9PT0gLTEpIFwiICtcblx0XHRcdFx0XCJ0YXJnZXRba10gPSBvYmpba107IHJldHVybiB0YXJnZXQ7IH1cXG5cIlxuXHRcdFx0KTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMub2JqZWN0V2l0aG91dFByb3BlcnRpZXNIZWxwZXI7XG5cdH1cbn07XG5cbnZhciBtYXRyaXggPSB7XG5cdGNocm9tZToge1xuXHRcdCAgICA0ODogMzA1MzU3LFxuXHRcdCAgICA0OTogMzI2MTQzLFxuXHRcdCAgICA1MDogMzkxNjc5LFxuXHRcdCAgICA1MTogMzkxNjc5LFxuXHRcdCAgICA1MjogNTIyNzUxLFxuXHRcdCAgICA1MzogNTIyNzUxLFxuXHRcdCAgICA1NDogNTIyNzUxLFxuXHRcdCAgICA1NTogNTIyNzUxLFxuXHRcdCAgICA1NjogNTIyNzUxLFxuXHRcdCAgICA1NzogNTIyNzUxLFxuXHRcdCAgICA1ODogMTA0NzAzOSxcblx0XHQgICAgNTk6IDEwNDcwMzksXG5cdFx0ICAgIDYwOiAxMDQ3MDM5LFxuXHRcdCAgICA2MTogMTA0NzAzOSxcblx0XHQgICAgNjI6IDEwNDcwMzksXG5cdFx0ICAgIDYzOiAxMDQ3MDM5XG5cdH0sXG5cdGZpcmVmb3g6IHtcblx0XHQgICAgNDM6IDMyNTg1Myxcblx0XHQgICAgNDQ6IDMyNjEwOSxcblx0XHQgICAgNDU6IDMyNjExMSxcblx0XHQgICAgNDY6IDM5MTY0Nyxcblx0XHQgICAgNDc6IDM5MTY3OSxcblx0XHQgICAgNDg6IDM5MTY3OSxcblx0XHQgICAgNDk6IDM4NzU4Myxcblx0XHQgICAgNTA6IDM4NzU4Myxcblx0XHQgICAgNTE6IDM4NzU4Myxcblx0XHQgICAgNTI6IDEwNDcwMzksXG5cdFx0ICAgIDUzOiAxMDQ3MDM5LFxuXHRcdCAgICA1NDogMTA0NzAzOSxcblx0XHQgICAgNTU6IDEwNDcwMzksXG5cdFx0ICAgIDU2OiAxMDQ3MDM5LFxuXHRcdCAgICA1NzogMTA0NzAzOSxcblx0XHQgICAgNTg6IDEwNDcwMzlcblx0fSxcblx0c2FmYXJpOiB7XG5cdFx0ICAgICA4OiAyNjIxNDgsXG5cdFx0ICAgICA5OiAzMDExNjYsXG5cdFx0ICAgIDEwOiA5MTU5NjcsXG5cdFx0JzEwLjEnOiAxMDQ3MDM5LFxuXHRcdCAgICAxMTogMTA0NzAzOVxuXHR9LFxuXHRpZToge1xuXHRcdCAgICAgODogMCxcblx0XHQgICAgIDk6IDI2MjE0NCxcblx0XHQgICAgMTA6IDI2MjE0NCxcblx0XHQgICAgMTE6IDI2MjQwMFxuXHR9LFxuXHRlZGdlOiB7XG5cdFx0ICAgIDEyOiAzMDU0ODUsXG5cdFx0ICAgIDEzOiAzODc1MzUsXG5cdFx0ICAgIDE0OiAxMDQyOTQzLFxuXHRcdCAgICAxNTogMTA0Mjk0Myxcblx0XHQgICAgMTY6IDEwNDI5NDNcblx0fSxcblx0bm9kZToge1xuXHRcdCcwLjEwJzogMjYyMTQ0LFxuXHRcdCcwLjEyJzogMjYyMjA4LFxuXHRcdCAgICAgNDogMjk3MTY3LFxuXHRcdCAgICAgNTogMjk3MTY3LFxuXHRcdCAgICAgNjogMzkxNjc5LFxuXHRcdCAgICAgODogMTA0NzAzOSxcblx0XHQgJzguMyc6IDEwNDcwMzksXG5cdFx0ICc4LjcnOiAxMDQ3MDM5XG5cdH1cbn07XG5cbnZhciBmZWF0dXJlcyA9IFtcblx0J2Fycm93Jyxcblx0J2NsYXNzZXMnLFxuXHQnY29tcHV0ZWRQcm9wZXJ0eScsXG5cdCdjb25jaXNlTWV0aG9kUHJvcGVydHknLFxuXHQnZGVmYXVsdFBhcmFtZXRlcicsXG5cdCdkZXN0cnVjdHVyaW5nJyxcblx0J2Zvck9mJyxcblx0J2dlbmVyYXRvcicsXG5cdCdsZXRDb25zdCcsXG5cdCdtb2R1bGVFeHBvcnQnLFxuXHQnbW9kdWxlSW1wb3J0Jyxcblx0J251bWVyaWNMaXRlcmFsJyxcblx0J3BhcmFtZXRlckRlc3RydWN0dXJpbmcnLFxuXHQnc3ByZWFkUmVzdCcsXG5cdCdzdGlja3lSZWdFeHAnLFxuXHQndGVtcGxhdGVTdHJpbmcnLFxuXHQndW5pY29kZVJlZ0V4cCcsXG5cblx0Ly8gRVMyMDE2XG5cdCdleHBvbmVudGlhdGlvbicsXG5cblx0Ly8gYWRkaXRpb25hbCB0cmFuc2Zvcm1zLCBub3QgZnJvbVxuXHQvLyBodHRwczovL2ZlYXR1cmV0ZXN0cy5pb1xuXHQncmVzZXJ2ZWRQcm9wZXJ0aWVzJyxcblxuXHQndHJhaWxpbmdGdW5jdGlvbkNvbW1hcydcbl07XG5cbnZhciB2ZXJzaW9uID0gXCIwLjE5LjNcIjtcblxudmFyIHJlZiA9IFtpbmplY3QsIGFjb3JuRHluYW1pY0ltcG9ydF0ucmVkdWNlKFxuXHRmdW5jdGlvbiAoZmluYWwsIHBsdWdpbikgeyByZXR1cm4gcGx1Z2luKGZpbmFsKTsgfSxcblx0YWNvcm5cbik7XG52YXIgcGFyc2UgPSByZWYucGFyc2U7XG5cbnZhciBkYW5nZXJvdXNUcmFuc2Zvcm1zID0gWydkYW5nZXJvdXNUYWdnZWRUZW1wbGF0ZVN0cmluZycsICdkYW5nZXJvdXNGb3JPZiddO1xuXG5mdW5jdGlvbiB0YXJnZXQodGFyZ2V0KSB7XG5cdHZhciB0YXJnZXRzID0gT2JqZWN0LmtleXModGFyZ2V0KTtcblx0dmFyIGJpdG1hc2sgPSB0YXJnZXRzLmxlbmd0aFxuXHRcdD8gMTA0ODU3NVxuXHRcdDogMjYyMTQ0O1xuXG5cdE9iamVjdC5rZXlzKHRhcmdldCkuZm9yRWFjaChmdW5jdGlvbiAoZW52aXJvbm1lbnQpIHtcblx0XHR2YXIgdmVyc2lvbnMgPSBtYXRyaXhbZW52aXJvbm1lbnRdO1xuXHRcdGlmICghdmVyc2lvbnMpXG5cdFx0XHR7IHRocm93IG5ldyBFcnJvcihcblx0XHRcdFx0KFwiVW5rbm93biBlbnZpcm9ubWVudCAnXCIgKyBlbnZpcm9ubWVudCArIFwiJy4gUGxlYXNlIHJhaXNlIGFuIGlzc3VlIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9SaWNoLUhhcnJpcy9idWJsZS9pc3N1ZXNcIilcblx0XHRcdCk7IH1cblxuXHRcdHZhciB0YXJnZXRWZXJzaW9uID0gdGFyZ2V0W2Vudmlyb25tZW50XTtcblx0XHRpZiAoISh0YXJnZXRWZXJzaW9uIGluIHZlcnNpb25zKSlcblx0XHRcdHsgdGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHQoXCJTdXBwb3J0IGRhdGEgZXhpc3RzIGZvciB0aGUgZm9sbG93aW5nIHZlcnNpb25zIG9mIFwiICsgZW52aXJvbm1lbnQgKyBcIjogXCIgKyAoT2JqZWN0LmtleXMoXG5cdFx0XHRcdFx0dmVyc2lvbnNcblx0XHRcdFx0KS5qb2luKFxuXHRcdFx0XHRcdCcsICdcblx0XHRcdFx0KSkgKyBcIi4gUGxlYXNlIHJhaXNlIGFuIGlzc3VlIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9SaWNoLUhhcnJpcy9idWJsZS9pc3N1ZXNcIilcblx0XHRcdCk7IH1cblx0XHR2YXIgc3VwcG9ydCA9IHZlcnNpb25zW3RhcmdldFZlcnNpb25dO1xuXG5cdFx0Yml0bWFzayAmPSBzdXBwb3J0O1xuXHR9KTtcblxuXHR2YXIgdHJhbnNmb3JtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdGZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUsIGkpIHtcblx0XHR0cmFuc2Zvcm1zW25hbWVdID0gIShiaXRtYXNrICYgKDEgPDwgaSkpO1xuXHR9KTtcblxuXHRkYW5nZXJvdXNUcmFuc2Zvcm1zLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcblx0XHR0cmFuc2Zvcm1zW25hbWVdID0gZmFsc2U7XG5cdH0pO1xuXG5cdHJldHVybiB0cmFuc2Zvcm1zO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm0oc291cmNlLCBvcHRpb25zKSB7XG5cdGlmICggb3B0aW9ucyA9PT0gdm9pZCAwICkgb3B0aW9ucyA9IHt9O1xuXG5cdHZhciBhc3Q7XG5cdHZhciBqc3ggPSBudWxsO1xuXG5cdHRyeSB7XG5cdFx0YXN0ID0gcGFyc2Uoc291cmNlLCB7XG5cdFx0XHRlY21hVmVyc2lvbjogOSxcblx0XHRcdHByZXNlcnZlUGFyZW5zOiB0cnVlLFxuXHRcdFx0c291cmNlVHlwZTogJ21vZHVsZScsXG5cdFx0XHRvbkNvbW1lbnQ6IGZ1bmN0aW9uIChibG9jaywgdGV4dCkge1xuXHRcdFx0XHRpZiAoIWpzeCkge1xuXHRcdFx0XHRcdHZhciBtYXRjaCA9IC9AanN4XFxzKyhbXlxcc10rKS8uZXhlYyh0ZXh0KTtcblx0XHRcdFx0XHRpZiAobWF0Y2gpIHsganN4ID0gbWF0Y2hbMV07IH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHBsdWdpbnM6IHtcblx0XHRcdFx0anN4OiB0cnVlLFxuXHRcdFx0XHRkeW5hbWljSW1wb3J0OiB0cnVlXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0b3B0aW9ucy5qc3ggPSBqc3ggfHwgb3B0aW9ucy5qc3g7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdGVyci5zbmlwcGV0ID0gZ2V0U25pcHBldChzb3VyY2UsIGVyci5sb2MpO1xuXHRcdGVyci50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICgoZXJyLm5hbWUpICsgXCI6IFwiICsgKGVyci5tZXNzYWdlKSArIFwiXFxuXCIgKyAoZXJyLnNuaXBwZXQpKTsgfTtcblx0XHR0aHJvdyBlcnI7XG5cdH1cblxuXHR2YXIgdHJhbnNmb3JtcyA9IHRhcmdldChvcHRpb25zLnRhcmdldCB8fCB7fSk7XG5cdE9iamVjdC5rZXlzKG9wdGlvbnMudHJhbnNmb3JtcyB8fCB7fSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuXHRcdGlmIChuYW1lID09PSAnbW9kdWxlcycpIHtcblx0XHRcdGlmICghKCdtb2R1bGVJbXBvcnQnIGluIG9wdGlvbnMudHJhbnNmb3JtcykpXG5cdFx0XHRcdHsgdHJhbnNmb3Jtcy5tb2R1bGVJbXBvcnQgPSBvcHRpb25zLnRyYW5zZm9ybXMubW9kdWxlczsgfVxuXHRcdFx0aWYgKCEoJ21vZHVsZUV4cG9ydCcgaW4gb3B0aW9ucy50cmFuc2Zvcm1zKSlcblx0XHRcdFx0eyB0cmFuc2Zvcm1zLm1vZHVsZUV4cG9ydCA9IG9wdGlvbnMudHJhbnNmb3Jtcy5tb2R1bGVzOyB9XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCEobmFtZSBpbiB0cmFuc2Zvcm1zKSkgeyB0aHJvdyBuZXcgRXJyb3IoKFwiVW5rbm93biB0cmFuc2Zvcm0gJ1wiICsgbmFtZSArIFwiJ1wiKSk7IH1cblx0XHR0cmFuc2Zvcm1zW25hbWVdID0gb3B0aW9ucy50cmFuc2Zvcm1zW25hbWVdO1xuXHR9KTtcblxuXHRyZXR1cm4gbmV3IFByb2dyYW0oc291cmNlLCBhc3QsIHRyYW5zZm9ybXMsIG9wdGlvbnMpLmV4cG9ydChvcHRpb25zKTtcbn1cblxuZXhwb3J0IHsgdGFyZ2V0LCB0cmFuc2Zvcm0sIHZlcnNpb24gYXMgVkVSU0lPTiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVibGUtYnJvd3Nlci5lcy5qcy5tYXBcbiIsIi8qIVxuICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cbid1c2Ugc3RyaWN0J1xuXG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnYmFzZTY0LWpzJylcbnZhciBpZWVlNzU0ID0gcmVxdWlyZSgnaWVlZTc1NCcpXG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ2lzYXJyYXknKVxuXG5leHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlclxuZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlclxuZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwXG5cbi8qKlxuICogSWYgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYDpcbiAqICAgPT09IHRydWUgICAgVXNlIFVpbnQ4QXJyYXkgaW1wbGVtZW50YXRpb24gKGZhc3Rlc3QpXG4gKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpXG4gKlxuICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBhcmUgSUUgMTArLCBGaXJlZm94IDQrLCBDaHJvbWUgNyssIFNhZmFyaSA1LjErLFxuICogT3BlcmEgMTEuNissIGlPUyA0LjIrLlxuICpcbiAqIER1ZSB0byB2YXJpb3VzIGJyb3dzZXIgYnVncywgc29tZXRpbWVzIHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24gd2lsbCBiZSB1c2VkIGV2ZW5cbiAqIHdoZW4gdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHlwZWQgYXJyYXlzLlxuICpcbiAqIE5vdGU6XG4gKlxuICogICAtIEZpcmVmb3ggNC0yOSBsYWNrcyBzdXBwb3J0IGZvciBhZGRpbmcgbmV3IHByb3BlcnRpZXMgdG8gYFVpbnQ4QXJyYXlgIGluc3RhbmNlcyxcbiAqICAgICBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NTQzOC5cbiAqXG4gKiAgIC0gQ2hyb21lIDktMTAgaXMgbWlzc2luZyB0aGUgYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbi5cbiAqXG4gKiAgIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZlxuICogICAgIGluY29ycmVjdCBsZW5ndGggaW4gc29tZSBzaXR1YXRpb25zLlxuXG4gKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleVxuICogZ2V0IHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24sIHdoaWNoIGlzIHNsb3dlciBidXQgYmVoYXZlcyBjb3JyZWN0bHkuXG4gKi9cbkJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQgIT09IHVuZGVmaW5lZFxuICA/IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUXG4gIDogdHlwZWRBcnJheVN1cHBvcnQoKVxuXG4vKlxuICogRXhwb3J0IGtNYXhMZW5ndGggYWZ0ZXIgdHlwZWQgYXJyYXkgc3VwcG9ydCBpcyBkZXRlcm1pbmVkLlxuICovXG5leHBvcnRzLmtNYXhMZW5ndGggPSBrTWF4TGVuZ3RoKClcblxuZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkge1xuICB0cnkge1xuICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheSgxKVxuICAgIGFyci5fX3Byb3RvX18gPSB7X19wcm90b19fOiBVaW50OEFycmF5LnByb3RvdHlwZSwgZm9vOiBmdW5jdGlvbiAoKSB7IHJldHVybiA0MiB9fVxuICAgIHJldHVybiBhcnIuZm9vKCkgPT09IDQyICYmIC8vIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkXG4gICAgICAgIHR5cGVvZiBhcnIuc3ViYXJyYXkgPT09ICdmdW5jdGlvbicgJiYgLy8gY2hyb21lIDktMTAgbGFjayBgc3ViYXJyYXlgXG4gICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5mdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHtcbiAgcmV0dXJuIEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUXG4gICAgPyAweDdmZmZmZmZmXG4gICAgOiAweDNmZmZmZmZmXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlciAodGhhdCwgbGVuZ3RoKSB7XG4gIGlmIChrTWF4TGVuZ3RoKCkgPCBsZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGgnKVxuICB9XG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIHRoYXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpXG4gICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIGlmICh0aGF0ID09PSBudWxsKSB7XG4gICAgICB0aGF0ID0gbmV3IEJ1ZmZlcihsZW5ndGgpXG4gICAgfVxuICAgIHRoYXQubGVuZ3RoID0gbGVuZ3RoXG4gIH1cblxuICByZXR1cm4gdGhhdFxufVxuXG4vKipcbiAqIFRoZSBCdWZmZXIgY29uc3RydWN0b3IgcmV0dXJucyBpbnN0YW5jZXMgb2YgYFVpbnQ4QXJyYXlgIHRoYXQgaGF2ZSB0aGVpclxuICogcHJvdG90eXBlIGNoYW5nZWQgdG8gYEJ1ZmZlci5wcm90b3R5cGVgLiBGdXJ0aGVybW9yZSwgYEJ1ZmZlcmAgaXMgYSBzdWJjbGFzcyBvZlxuICogYFVpbnQ4QXJyYXlgLCBzbyB0aGUgcmV0dXJuZWQgaW5zdGFuY2VzIHdpbGwgaGF2ZSBhbGwgdGhlIG5vZGUgYEJ1ZmZlcmAgbWV0aG9kc1xuICogYW5kIHRoZSBgVWludDhBcnJheWAgbWV0aG9kcy4gU3F1YXJlIGJyYWNrZXQgbm90YXRpb24gd29ya3MgYXMgZXhwZWN0ZWQgLS0gaXRcbiAqIHJldHVybnMgYSBzaW5nbGUgb2N0ZXQuXG4gKlxuICogVGhlIGBVaW50OEFycmF5YCBwcm90b3R5cGUgcmVtYWlucyB1bm1vZGlmaWVkLlxuICovXG5cbmZ1bmN0aW9uIEJ1ZmZlciAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiAhKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICAvLyBDb21tb24gY2FzZS5cbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZ09yT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnSWYgZW5jb2RpbmcgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcnXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBhbGxvY1Vuc2FmZSh0aGlzLCBhcmcpXG4gIH1cbiAgcmV0dXJuIGZyb20odGhpcywgYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wb29sU2l6ZSA9IDgxOTIgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvblxuXG4vLyBUT0RPOiBMZWdhY3ksIG5vdCBuZWVkZWQgYW55bW9yZS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvbi5cbkJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgYXJyLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgcmV0dXJuIGFyclxufVxuXG5mdW5jdGlvbiBmcm9tICh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyJylcbiAgfVxuXG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmcm9tU3RyaW5nKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0KVxuICB9XG5cbiAgcmV0dXJuIGZyb21PYmplY3QodGhhdCwgdmFsdWUpXG59XG5cbi8qKlxuICogRnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdG8gQnVmZmVyKGFyZywgZW5jb2RpbmcpIGJ1dCB0aHJvd3MgYSBUeXBlRXJyb3JcbiAqIGlmIHZhbHVlIGlzIGEgbnVtYmVyLlxuICogQnVmZmVyLmZyb20oc3RyWywgZW5jb2RpbmddKVxuICogQnVmZmVyLmZyb20oYXJyYXkpXG4gKiBCdWZmZXIuZnJvbShidWZmZXIpXG4gKiBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlclssIGJ5dGVPZmZzZXRbLCBsZW5ndGhdXSlcbiAqKi9cbkJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGZyb20obnVsbCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gIEJ1ZmZlci5wcm90b3R5cGUuX19wcm90b19fID0gVWludDhBcnJheS5wcm90b3R5cGVcbiAgQnVmZmVyLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXlcbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC5zcGVjaWVzICYmXG4gICAgICBCdWZmZXJbU3ltYm9sLnNwZWNpZXNdID09PSBCdWZmZXIpIHtcbiAgICAvLyBGaXggc3ViYXJyYXkoKSBpbiBFUzIwMTYuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvcHVsbC85N1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIsIFN5bWJvbC5zcGVjaWVzLCB7XG4gICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pXG4gIH1cbn1cblxuZnVuY3Rpb24gYXNzZXJ0U2l6ZSAoc2l6ZSkge1xuICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpXG4gIH0gZWxzZSBpZiAoc2l6ZSA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmUnKVxuICB9XG59XG5cbmZ1bmN0aW9uIGFsbG9jICh0aGF0LCBzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICBhc3NlcnRTaXplKHNpemUpXG4gIGlmIChzaXplIDw9IDApIHtcbiAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpXG4gIH1cbiAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkge1xuICAgIC8vIE9ubHkgcGF5IGF0dGVudGlvbiB0byBlbmNvZGluZyBpZiBpdCdzIGEgc3RyaW5nLiBUaGlzXG4gICAgLy8gcHJldmVudHMgYWNjaWRlbnRhbGx5IHNlbmRpbmcgaW4gYSBudW1iZXIgdGhhdCB3b3VsZFxuICAgIC8vIGJlIGludGVycHJldHRlZCBhcyBhIHN0YXJ0IG9mZnNldC5cbiAgICByZXR1cm4gdHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJ1xuICAgICAgPyBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsLCBlbmNvZGluZylcbiAgICAgIDogY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbClcbiAgfVxuICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBmaWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICogYWxsb2Moc2l6ZVssIGZpbGxbLCBlbmNvZGluZ11dKVxuICoqL1xuQnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIHJldHVybiBhbGxvYyhudWxsLCBzaXplLCBmaWxsLCBlbmNvZGluZylcbn1cblxuZnVuY3Rpb24gYWxsb2NVbnNhZmUgKHRoYXQsIHNpemUpIHtcbiAgYXNzZXJ0U2l6ZShzaXplKVxuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUgPCAwID8gMCA6IGNoZWNrZWQoc2l6ZSkgfCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyArK2kpIHtcbiAgICAgIHRoYXRbaV0gPSAwXG4gICAgfVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbi8qKlxuICogRXF1aXZhbGVudCB0byBCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqICovXG5CdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICByZXR1cm4gYWxsb2NVbnNhZmUobnVsbCwgc2l6ZSlcbn1cbi8qKlxuICogRXF1aXZhbGVudCB0byBTbG93QnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICByZXR1cm4gYWxsb2NVbnNhZmUobnVsbCwgc2l6ZSlcbn1cblxuZnVuY3Rpb24gZnJvbVN0cmluZyAodGhhdCwgc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIHtcbiAgICBlbmNvZGluZyA9ICd1dGY4J1xuICB9XG5cbiAgaWYgKCFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImVuY29kaW5nXCIgbXVzdCBiZSBhIHZhbGlkIHN0cmluZyBlbmNvZGluZycpXG4gIH1cblxuICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDBcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpXG5cbiAgdmFyIGFjdHVhbCA9IHRoYXQud3JpdGUoc3RyaW5nLCBlbmNvZGluZylcblxuICBpZiAoYWN0dWFsICE9PSBsZW5ndGgpIHtcbiAgICAvLyBXcml0aW5nIGEgaGV4IHN0cmluZywgZm9yIGV4YW1wbGUsIHRoYXQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIHdpbGxcbiAgICAvLyBjYXVzZSBldmVyeXRoaW5nIGFmdGVyIHRoZSBmaXJzdCBpbnZhbGlkIGNoYXJhY3RlciB0byBiZSBpZ25vcmVkLiAoZS5nLlxuICAgIC8vICdhYnh4Y2QnIHdpbGwgYmUgdHJlYXRlZCBhcyAnYWInKVxuICAgIHRoYXQgPSB0aGF0LnNsaWNlKDAsIGFjdHVhbClcbiAgfVxuXG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUxpa2UgKHRoYXQsIGFycmF5KSB7XG4gIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGggPCAwID8gMCA6IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlCdWZmZXIgKHRoYXQsIGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpIHtcbiAgYXJyYXkuYnl0ZUxlbmd0aCAvLyB0aGlzIHRocm93cyBpZiBgYXJyYXlgIGlzIG5vdCBhIHZhbGlkIEFycmF5QnVmZmVyXG5cbiAgaWYgKGJ5dGVPZmZzZXQgPCAwIHx8IGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0KSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1xcJ29mZnNldFxcJyBpcyBvdXQgb2YgYm91bmRzJylcbiAgfVxuXG4gIGlmIChhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCArIChsZW5ndGggfHwgMCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnbGVuZ3RoXFwnIGlzIG91dCBvZiBib3VuZHMnKVxuICB9XG5cbiAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXkpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0KVxuICB9IGVsc2Uge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIHRoYXQgPSBhcnJheVxuICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICB0aGF0ID0gZnJvbUFycmF5TGlrZSh0aGF0LCBhcnJheSlcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tT2JqZWN0ICh0aGF0LCBvYmopIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmopKSB7XG4gICAgdmFyIGxlbiA9IGNoZWNrZWQob2JqLmxlbmd0aCkgfCAwXG4gICAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW4pXG5cbiAgICBpZiAodGhhdC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGF0XG4gICAgfVxuXG4gICAgb2JqLmNvcHkodGhhdCwgMCwgMCwgbGVuKVxuICAgIHJldHVybiB0aGF0XG4gIH1cblxuICBpZiAob2JqKSB7XG4gICAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIG9iai5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgfHwgJ2xlbmd0aCcgaW4gb2JqKSB7XG4gICAgICBpZiAodHlwZW9mIG9iai5sZW5ndGggIT09ICdudW1iZXInIHx8IGlzbmFuKG9iai5sZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgMClcbiAgICAgIH1cbiAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iailcbiAgICB9XG5cbiAgICBpZiAob2JqLnR5cGUgPT09ICdCdWZmZXInICYmIGlzQXJyYXkob2JqLmRhdGEpKSB7XG4gICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmouZGF0YSlcbiAgICB9XG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgb3IgYXJyYXktbGlrZSBvYmplY3QuJylcbn1cblxuZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7XG4gIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IGtNYXhMZW5ndGgoKWAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlblxuICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcbiAgaWYgKGxlbmd0aCA+PSBrTWF4TGVuZ3RoKCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKVxuICB9XG4gIHJldHVybiBsZW5ndGggfCAwXG59XG5cbmZ1bmN0aW9uIFNsb3dCdWZmZXIgKGxlbmd0aCkge1xuICBpZiAoK2xlbmd0aCAhPSBsZW5ndGgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXFcbiAgICBsZW5ndGggPSAwXG4gIH1cbiAgcmV0dXJuIEJ1ZmZlci5hbGxvYygrbGVuZ3RoKVxufVxuXG5CdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikge1xuICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKVxufVxuXG5CdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGEgPT09IGIpIHJldHVybiAwXG5cbiAgdmFyIHggPSBhLmxlbmd0aFxuICB2YXIgeSA9IGIubGVuZ3RoXG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IE1hdGgubWluKHgsIHkpOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuICAgICAgeCA9IGFbaV1cbiAgICAgIHkgPSBiW2ldXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuQnVmZmVyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nIChlbmNvZGluZykge1xuICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgJ2hleCc6XG4gICAgY2FzZSAndXRmOCc6XG4gICAgY2FzZSAndXRmLTgnOlxuICAgIGNhc2UgJ2FzY2lpJzpcbiAgICBjYXNlICdsYXRpbjEnOlxuICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICBjYXNlICd1Y3MyJzpcbiAgICBjYXNlICd1Y3MtMic6XG4gICAgY2FzZSAndXRmMTZsZSc6XG4gICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgcmV0dXJuIHRydWVcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuQnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCAobGlzdCwgbGVuZ3RoKSB7XG4gIGlmICghaXNBcnJheShsaXN0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG4gIH1cblxuICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gQnVmZmVyLmFsbG9jKDApXG4gIH1cblxuICB2YXIgaVxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBsZW5ndGggPSAwXG4gICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgIGxlbmd0aCArPSBsaXN0W2ldLmxlbmd0aFxuICAgIH1cbiAgfVxuXG4gIHZhciBidWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUobGVuZ3RoKVxuICB2YXIgcG9zID0gMFxuICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuICAgIHZhciBidWYgPSBsaXN0W2ldXG4gICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcbiAgICB9XG4gICAgYnVmLmNvcHkoYnVmZmVyLCBwb3MpXG4gICAgcG9zICs9IGJ1Zi5sZW5ndGhcbiAgfVxuICByZXR1cm4gYnVmZmVyXG59XG5cbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihzdHJpbmcpKSB7XG4gICAgcmV0dXJuIHN0cmluZy5sZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3ID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAoQXJyYXlCdWZmZXIuaXNWaWV3KHN0cmluZykgfHwgc3RyaW5nIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XG4gICAgcmV0dXJuIHN0cmluZy5ieXRlTGVuZ3RoXG4gIH1cbiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgc3RyaW5nID0gJycgKyBzdHJpbmdcbiAgfVxuXG4gIHZhciBsZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChsZW4gPT09IDApIHJldHVybiAwXG5cbiAgLy8gVXNlIGEgZm9yIGxvb3AgdG8gYXZvaWQgcmVjdXJzaW9uXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxlblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICBjYXNlIHVuZGVmaW5lZDpcbiAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gbGVuICogMlxuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMVxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoIC8vIGFzc3VtZSB1dGY4XG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5CdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcblxuZnVuY3Rpb24gc2xvd1RvU3RyaW5nIChlbmNvZGluZywgc3RhcnQsIGVuZCkge1xuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXG4gIC8vIE5vIG5lZWQgdG8gdmVyaWZ5IHRoYXQgXCJ0aGlzLmxlbmd0aCA8PSBNQVhfVUlOVDMyXCIgc2luY2UgaXQncyBhIHJlYWQtb25seVxuICAvLyBwcm9wZXJ0eSBvZiBhIHR5cGVkIGFycmF5LlxuXG4gIC8vIFRoaXMgYmVoYXZlcyBuZWl0aGVyIGxpa2UgU3RyaW5nIG5vciBVaW50OEFycmF5IGluIHRoYXQgd2Ugc2V0IHN0YXJ0L2VuZFxuICAvLyB0byB0aGVpciB1cHBlci9sb3dlciBib3VuZHMgaWYgdGhlIHZhbHVlIHBhc3NlZCBpcyBvdXQgb2YgcmFuZ2UuXG4gIC8vIHVuZGVmaW5lZCBpcyBoYW5kbGVkIHNwZWNpYWxseSBhcyBwZXIgRUNNQS0yNjIgNnRoIEVkaXRpb24sXG4gIC8vIFNlY3Rpb24gMTMuMy4zLjcgUnVudGltZSBTZW1hbnRpY3M6IEtleWVkQmluZGluZ0luaXRpYWxpemF0aW9uLlxuICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCB8fCBzdGFydCA8IDApIHtcbiAgICBzdGFydCA9IDBcbiAgfVxuICAvLyBSZXR1cm4gZWFybHkgaWYgc3RhcnQgPiB0aGlzLmxlbmd0aC4gRG9uZSBoZXJlIHRvIHByZXZlbnQgcG90ZW50aWFsIHVpbnQzMlxuICAvLyBjb2VyY2lvbiBmYWlsIGJlbG93LlxuICBpZiAoc3RhcnQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgfVxuXG4gIGlmIChlbmQgPD0gMCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgLy8gRm9yY2UgY29lcnNpb24gdG8gdWludDMyLiBUaGlzIHdpbGwgYWxzbyBjb2VyY2UgZmFsc2V5L05hTiB2YWx1ZXMgdG8gMC5cbiAgZW5kID4+Pj0gMFxuICBzdGFydCA+Pj49IDBcblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsYXRpbjFTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuLy8gVGhlIHByb3BlcnR5IGlzIHVzZWQgYnkgYEJ1ZmZlci5pc0J1ZmZlcmAgYW5kIGBpcy1idWZmZXJgIChpbiBTYWZhcmkgNS03KSB0byBkZXRlY3Rcbi8vIEJ1ZmZlciBpbnN0YW5jZXMuXG5CdWZmZXIucHJvdG90eXBlLl9pc0J1ZmZlciA9IHRydWVcblxuZnVuY3Rpb24gc3dhcCAoYiwgbiwgbSkge1xuICB2YXIgaSA9IGJbbl1cbiAgYltuXSA9IGJbbV1cbiAgYlttXSA9IGlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwMTYgPSBmdW5jdGlvbiBzd2FwMTYgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDIgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyAxKVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDMyID0gZnVuY3Rpb24gc3dhcDMyICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA0ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgMilcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXA2NCA9IGZ1bmN0aW9uIHN3YXA2NCAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgOCAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gOCkge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDcpXG4gICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDYpXG4gICAgc3dhcCh0aGlzLCBpICsgMiwgaSArIDUpXG4gICAgc3dhcCh0aGlzLCBpICsgMywgaSArIDQpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMFxuICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKVxuICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWVcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkge1xuICB2YXIgc3RyID0gJydcbiAgdmFyIG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVNcbiAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgIHN0ciA9IHRoaXMudG9TdHJpbmcoJ2hleCcsIDAsIG1heCkubWF0Y2goLy57Mn0vZykuam9pbignICcpXG4gICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJ1xuICB9XG4gIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKHRhcmdldCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgfVxuXG4gIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgc3RhcnQgPSAwXG4gIH1cbiAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5kID0gdGFyZ2V0ID8gdGFyZ2V0Lmxlbmd0aCA6IDBcbiAgfVxuICBpZiAodGhpc1N0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzU3RhcnQgPSAwXG4gIH1cbiAgaWYgKHRoaXNFbmQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXNFbmQgPSB0aGlzLmxlbmd0aFxuICB9XG5cbiAgaWYgKHN0YXJ0IDwgMCB8fCBlbmQgPiB0YXJnZXQubGVuZ3RoIHx8IHRoaXNTdGFydCA8IDAgfHwgdGhpc0VuZCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ291dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQgJiYgc3RhcnQgPj0gZW5kKSB7XG4gICAgcmV0dXJuIDBcbiAgfVxuICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQpIHtcbiAgICByZXR1cm4gLTFcbiAgfVxuICBpZiAoc3RhcnQgPj0gZW5kKSB7XG4gICAgcmV0dXJuIDFcbiAgfVxuXG4gIHN0YXJ0ID4+Pj0gMFxuICBlbmQgPj4+PSAwXG4gIHRoaXNTdGFydCA+Pj49IDBcbiAgdGhpc0VuZCA+Pj49IDBcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0KSByZXR1cm4gMFxuXG4gIHZhciB4ID0gdGhpc0VuZCAtIHRoaXNTdGFydFxuICB2YXIgeSA9IGVuZCAtIHN0YXJ0XG4gIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KVxuXG4gIHZhciB0aGlzQ29weSA9IHRoaXMuc2xpY2UodGhpc1N0YXJ0LCB0aGlzRW5kKVxuICB2YXIgdGFyZ2V0Q29weSA9IHRhcmdldC5zbGljZShzdGFydCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAodGhpc0NvcHlbaV0gIT09IHRhcmdldENvcHlbaV0pIHtcbiAgICAgIHggPSB0aGlzQ29weVtpXVxuICAgICAgeSA9IHRhcmdldENvcHlbaV1cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG4vLyBGaW5kcyBlaXRoZXIgdGhlIGZpcnN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA+PSBgYnl0ZU9mZnNldGAsXG4vLyBPUiB0aGUgbGFzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPD0gYGJ5dGVPZmZzZXRgLlxuLy9cbi8vIEFyZ3VtZW50czpcbi8vIC0gYnVmZmVyIC0gYSBCdWZmZXIgdG8gc2VhcmNoXG4vLyAtIHZhbCAtIGEgc3RyaW5nLCBCdWZmZXIsIG9yIG51bWJlclxuLy8gLSBieXRlT2Zmc2V0IC0gYW4gaW5kZXggaW50byBgYnVmZmVyYDsgd2lsbCBiZSBjbGFtcGVkIHRvIGFuIGludDMyXG4vLyAtIGVuY29kaW5nIC0gYW4gb3B0aW9uYWwgZW5jb2RpbmcsIHJlbGV2YW50IGlzIHZhbCBpcyBhIHN0cmluZ1xuLy8gLSBkaXIgLSB0cnVlIGZvciBpbmRleE9mLCBmYWxzZSBmb3IgbGFzdEluZGV4T2ZcbmZ1bmN0aW9uIGJpZGlyZWN0aW9uYWxJbmRleE9mIChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuICAvLyBFbXB0eSBidWZmZXIgbWVhbnMgbm8gbWF0Y2hcbiAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHJldHVybiAtMVxuXG4gIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0XG4gIGlmICh0eXBlb2YgYnl0ZU9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IGJ5dGVPZmZzZXRcbiAgICBieXRlT2Zmc2V0ID0gMFxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPiAweDdmZmZmZmZmKSB7XG4gICAgYnl0ZU9mZnNldCA9IDB4N2ZmZmZmZmZcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgLTB4ODAwMDAwMDApIHtcbiAgICBieXRlT2Zmc2V0ID0gLTB4ODAwMDAwMDBcbiAgfVxuICBieXRlT2Zmc2V0ID0gK2J5dGVPZmZzZXQgIC8vIENvZXJjZSB0byBOdW1iZXIuXG4gIGlmIChpc05hTihieXRlT2Zmc2V0KSkge1xuICAgIC8vIGJ5dGVPZmZzZXQ6IGl0IGl0J3MgdW5kZWZpbmVkLCBudWxsLCBOYU4sIFwiZm9vXCIsIGV0Yywgc2VhcmNoIHdob2xlIGJ1ZmZlclxuICAgIGJ5dGVPZmZzZXQgPSBkaXIgPyAwIDogKGJ1ZmZlci5sZW5ndGggLSAxKVxuICB9XG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXQ6IG5lZ2F0aXZlIG9mZnNldHMgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZSBidWZmZXJcbiAgaWYgKGJ5dGVPZmZzZXQgPCAwKSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCArIGJ5dGVPZmZzZXRcbiAgaWYgKGJ5dGVPZmZzZXQgPj0gYnVmZmVyLmxlbmd0aCkge1xuICAgIGlmIChkaXIpIHJldHVybiAtMVxuICAgIGVsc2UgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggLSAxXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IDApIHtcbiAgICBpZiAoZGlyKSBieXRlT2Zmc2V0ID0gMFxuICAgIGVsc2UgcmV0dXJuIC0xXG4gIH1cblxuICAvLyBOb3JtYWxpemUgdmFsXG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIHZhbCA9IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpXG4gIH1cblxuICAvLyBGaW5hbGx5LCBzZWFyY2ggZWl0aGVyIGluZGV4T2YgKGlmIGRpciBpcyB0cnVlKSBvciBsYXN0SW5kZXhPZlxuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbCkpIHtcbiAgICAvLyBTcGVjaWFsIGNhc2U6IGxvb2tpbmcgZm9yIGVtcHR5IHN0cmluZy9idWZmZXIgYWx3YXlzIGZhaWxzXG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgdmFsID0gdmFsICYgMHhGRiAvLyBTZWFyY2ggZm9yIGEgYnl0ZSB2YWx1ZSBbMC0yNTVdXG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmXG4gICAgICAgIHR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpZiAoZGlyKSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIFsgdmFsIF0sIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKVxufVxuXG5mdW5jdGlvbiBhcnJheUluZGV4T2YgKGFyciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG4gIHZhciBpbmRleFNpemUgPSAxXG4gIHZhciBhcnJMZW5ndGggPSBhcnIubGVuZ3RoXG4gIHZhciB2YWxMZW5ndGggPSB2YWwubGVuZ3RoXG5cbiAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICBlbmNvZGluZyA9IFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgIGlmIChlbmNvZGluZyA9PT0gJ3VjczInIHx8IGVuY29kaW5nID09PSAndWNzLTInIHx8XG4gICAgICAgIGVuY29kaW5nID09PSAndXRmMTZsZScgfHwgZW5jb2RpbmcgPT09ICd1dGYtMTZsZScpIHtcbiAgICAgIGlmIChhcnIubGVuZ3RoIDwgMiB8fCB2YWwubGVuZ3RoIDwgMikge1xuICAgICAgICByZXR1cm4gLTFcbiAgICAgIH1cbiAgICAgIGluZGV4U2l6ZSA9IDJcbiAgICAgIGFyckxlbmd0aCAvPSAyXG4gICAgICB2YWxMZW5ndGggLz0gMlxuICAgICAgYnl0ZU9mZnNldCAvPSAyXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZCAoYnVmLCBpKSB7XG4gICAgaWYgKGluZGV4U2l6ZSA9PT0gMSkge1xuICAgICAgcmV0dXJuIGJ1ZltpXVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYnVmLnJlYWRVSW50MTZCRShpICogaW5kZXhTaXplKVxuICAgIH1cbiAgfVxuXG4gIHZhciBpXG4gIGlmIChkaXIpIHtcbiAgICB2YXIgZm91bmRJbmRleCA9IC0xXG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA8IGFyckxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocmVhZChhcnIsIGkpID09PSByZWFkKHZhbCwgZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXgpKSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGlcbiAgICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsTGVuZ3RoKSByZXR1cm4gZm91bmRJbmRleCAqIGluZGV4U2l6ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggIT09IC0xKSBpIC09IGkgLSBmb3VuZEluZGV4XG4gICAgICAgIGZvdW5kSW5kZXggPSAtMVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoYnl0ZU9mZnNldCArIHZhbExlbmd0aCA+IGFyckxlbmd0aCkgYnl0ZU9mZnNldCA9IGFyckxlbmd0aCAtIHZhbExlbmd0aFxuICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB2YXIgZm91bmQgPSB0cnVlXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbExlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChyZWFkKGFyciwgaSArIGopICE9PSByZWFkKHZhbCwgaikpIHtcbiAgICAgICAgICBmb3VuZCA9IGZhbHNlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGZvdW5kKSByZXR1cm4gaVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAtMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24gaW5jbHVkZXMgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIHRoaXMuaW5kZXhPZih2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSAhPT0gLTFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgdHJ1ZSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uIGxhc3RJbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBmYWxzZSlcbn1cblxuZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICBvZmZzZXQgPSBOdW1iZXIob2Zmc2V0KSB8fCAwXG4gIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gIH0gZWxzZSB7XG4gICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aClcbiAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7XG4gICAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgICB9XG4gIH1cblxuICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0c1xuICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcblxuICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikge1xuICAgIGxlbmd0aCA9IHN0ckxlbiAvIDJcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgdmFyIHBhcnNlZCA9IHBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNilcbiAgICBpZiAoaXNOYU4ocGFyc2VkKSkgcmV0dXJuIGlcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWRcbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGY4VG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBhc2NpaVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGxhdGluMVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gdWNzMldyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykge1xuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nKVxuICBpZiAob2Zmc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmNvZGluZyA9ICd1dGY4J1xuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBlbmNvZGluZylcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gb2Zmc2V0XG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIG9mZnNldFssIGxlbmd0aF1bLCBlbmNvZGluZ10pXG4gIH0gZWxzZSBpZiAoaXNGaW5pdGUob2Zmc2V0KSkge1xuICAgIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgICBpZiAoaXNGaW5pdGUobGVuZ3RoKSkge1xuICAgICAgbGVuZ3RoID0gbGVuZ3RoIHwgMFxuICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgfSBlbHNlIHtcbiAgICAgIGVuY29kaW5nID0gbGVuZ3RoXG4gICAgICBsZW5ndGggPSB1bmRlZmluZWRcbiAgICB9XG4gIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTNcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQnXG4gICAgKVxuICB9XG5cbiAgdmFyIHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCB8fCBsZW5ndGggPiByZW1haW5pbmcpIGxlbmd0aCA9IHJlbWFpbmluZ1xuXG4gIGlmICgoc3RyaW5nLmxlbmd0aCA+IDAgJiYgKGxlbmd0aCA8IDAgfHwgb2Zmc2V0IDwgMCkpIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzJylcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGF0aW4xV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGVcbiAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQnVmZmVyJyxcbiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcbiAgfVxufVxuXG5mdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpXG4gIH1cbn1cblxuZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuICB2YXIgcmVzID0gW11cblxuICB2YXIgaSA9IHN0YXJ0XG4gIHdoaWxlIChpIDwgZW5kKSB7XG4gICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXVxuICAgIHZhciBjb2RlUG9pbnQgPSBudWxsXG4gICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikgPyA0XG4gICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDNcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4QkYpID8gMlxuICAgICAgOiAxXG5cbiAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7XG4gICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50XG5cbiAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcbiAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweDFGKSA8PCAweDYgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgZm91cnRoQnl0ZSA9IGJ1ZltpICsgM11cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4MTIgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4QyB8ICh0aGlyZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAoZm91cnRoQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7XG4gICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhXG4gICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlXG4gICAgICBjb2RlUG9pbnQgPSAweEZGRkRcbiAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPiAweEZGRkYpIHtcbiAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXG4gICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMFxuICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKVxuICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcbiAgICB9XG5cbiAgICByZXMucHVzaChjb2RlUG9pbnQpXG4gICAgaSArPSBieXRlc1BlclNlcXVlbmNlXG4gIH1cblxuICByZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcylcbn1cblxuLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoXG4vLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuXG4vLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG52YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDBcblxuZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG4gIHZhciBsZW4gPSBjb2RlUG9pbnRzLmxlbmd0aFxuICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG4gIH1cblxuICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG4gIHZhciByZXMgPSAnJ1xuICB2YXIgaSA9IDBcbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShcbiAgICAgIFN0cmluZyxcbiAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSClcbiAgICApXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBsYXRpbjFTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cbiAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cbiAgdmFyIG91dCA9ICcnXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKVxuICB2YXIgcmVzID0gJydcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBzdGFydCA9IH5+c3RhcnRcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW5cbiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIHZhciBuZXdCdWZcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgbmV3QnVmID0gdGhpcy5zdWJhcnJheShzdGFydCwgZW5kKVxuICAgIG5ld0J1Zi5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIH0gZWxzZSB7XG4gICAgdmFyIHNsaWNlTGVuID0gZW5kIC0gc3RhcnRcbiAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgKytpKSB7XG4gICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3QnVmXG59XG5cbi8qXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuICB9XG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuICB2YXIgbXVsID0gMVxuICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArXG4gICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aFxuICB2YXIgbXVsID0gMVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldXG4gIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKVxuICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYnVmZmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpXG4gIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gd3JpdGVVSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApXG4gIH1cblxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApXG4gIH1cblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDggPSBmdW5jdGlvbiB3cml0ZVVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4ZmYsIDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MTYgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyArK2kpIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgJiAoMHhmZiA8PCAoOCAqIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpKSkpID4+PlxuICAgICAgKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkgKiA4XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MzIgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDQpOyBpIDwgajsgKytpKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlID4+PiAobGl0dGxlRW5kaWFuID8gaSA6IDMgLSBpKSAqIDgpICYgMHhmZlxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICB2YXIgaSA9IDBcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpIC0gMV0gIT09IDApIHtcbiAgICAgIHN1YiA9IDFcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludEJFID0gZnVuY3Rpb24gd3JpdGVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSAwXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpICsgMV0gIT09IDApIHtcbiAgICAgIHN1YiA9IDFcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbiAgaWYgKG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5mdW5jdGlvbiB3cml0ZUZsb2F0IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpXG4gIHJldHVybiBvZmZzZXQgKyA4XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUJFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuLy8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKVxuQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkge1xuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoXG4gIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMFxuICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmVcbiAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwXG4gIGlmICh0YXJnZXQubGVuZ3RoID09PSAwIHx8IHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIEZhdGFsIGVycm9yIGNvbmRpdGlvbnNcbiAgaWYgKHRhcmdldFN0YXJ0IDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgfVxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIC8vIEFyZSB3ZSBvb2I/XG4gIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7XG4gICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnRcbiAgfVxuXG4gIHZhciBsZW4gPSBlbmQgLSBzdGFydFxuICB2YXIgaVxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQgJiYgc3RhcnQgPCB0YXJnZXRTdGFydCAmJiB0YXJnZXRTdGFydCA8IGVuZCkge1xuICAgIC8vIGRlc2NlbmRpbmcgY29weSBmcm9tIGVuZFxuICAgIGZvciAoaSA9IGxlbiAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIGFzY2VuZGluZyBjb3B5IGZyb20gc3RhcnRcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKFxuICAgICAgdGFyZ2V0LFxuICAgICAgdGhpcy5zdWJhcnJheShzdGFydCwgc3RhcnQgKyBsZW4pLFxuICAgICAgdGFyZ2V0U3RhcnRcbiAgICApXG4gIH1cblxuICByZXR1cm4gbGVuXG59XG5cbi8vIFVzYWdlOlxuLy8gICAgYnVmZmVyLmZpbGwobnVtYmVyWywgb2Zmc2V0WywgZW5kXV0pXG4vLyAgICBidWZmZXIuZmlsbChidWZmZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKHN0cmluZ1ssIG9mZnNldFssIGVuZF1dWywgZW5jb2RpbmddKVxuQnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsLCBzdGFydCwgZW5kLCBlbmNvZGluZykge1xuICAvLyBIYW5kbGUgc3RyaW5nIGNhc2VzOlxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBzdGFydFxuICAgICAgc3RhcnQgPSAwXG4gICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gZW5kXG4gICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICAgIH1cbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdmFyIGNvZGUgPSB2YWwuY2hhckNvZGVBdCgwKVxuICAgICAgaWYgKGNvZGUgPCAyNTYpIHtcbiAgICAgICAgdmFsID0gY29kZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nJylcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycgJiYgIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDI1NVxuICB9XG5cbiAgLy8gSW52YWxpZCByYW5nZXMgYXJlIG5vdCBzZXQgdG8gYSBkZWZhdWx0LCBzbyBjYW4gcmFuZ2UgY2hlY2sgZWFybHkuXG4gIGlmIChzdGFydCA8IDAgfHwgdGhpcy5sZW5ndGggPCBzdGFydCB8fCB0aGlzLmxlbmd0aCA8IGVuZCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdPdXQgb2YgcmFuZ2UgaW5kZXgnKVxuICB9XG5cbiAgaWYgKGVuZCA8PSBzdGFydCkge1xuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBzdGFydCA9IHN0YXJ0ID4+PiAwXG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDBcblxuICBpZiAoIXZhbCkgdmFsID0gMFxuXG4gIHZhciBpXG4gIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICAgIHRoaXNbaV0gPSB2YWxcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIGJ5dGVzID0gQnVmZmVyLmlzQnVmZmVyKHZhbClcbiAgICAgID8gdmFsXG4gICAgICA6IHV0ZjhUb0J5dGVzKG5ldyBCdWZmZXIodmFsLCBlbmNvZGluZykudG9TdHJpbmcoKSlcbiAgICB2YXIgbGVuID0gYnl0ZXMubGVuZ3RoXG4gICAgZm9yIChpID0gMDsgaSA8IGVuZCAtIHN0YXJ0OyArK2kpIHtcbiAgICAgIHRoaXNbaSArIHN0YXJ0XSA9IGJ5dGVzW2kgJSBsZW5dXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXNcbn1cblxuLy8gSEVMUEVSIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PVxuXG52YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXFwvMC05QS1aYS16LV9dL2dcblxuZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuICAvLyBOb2RlIHN0cmlwcyBvdXQgaW52YWxpZCBjaGFyYWN0ZXJzIGxpa2UgXFxuIGFuZCBcXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgc3RyID0gc3RyaW5ndHJpbShzdHIpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKVxuICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG4gIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnXG4gIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdFxuICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcbiAgICBzdHIgPSBzdHIgKyAnPSdcbiAgfVxuICByZXR1cm4gc3RyXG59XG5cbmZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpXG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpXG59XG5cbmZ1bmN0aW9uIHRvSGV4IChuKSB7XG4gIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuICByZXR1cm4gbi50b1N0cmluZygxNilcbn1cblxuZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcbiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eVxuICB2YXIgY29kZVBvaW50XG4gIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoXG4gIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbFxuICB2YXIgYnl0ZXMgPSBbXVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXG4gICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG4gICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCFsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAgIC8vIG5vIGxlYWQgeWV0XG4gICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHtcbiAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YWxpZCBsZWFkXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyAyIGxlYWRzIGluIGEgcm93XG4gICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG4gICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwXG4gICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICB9XG5cbiAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuXG4gICAgLy8gZW5jb2RlIHV0ZjhcbiAgICBpZiAoY29kZVBvaW50IDwgMHg4MCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBieXRlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cbiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG4gIH1cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuICB2YXIgYywgaGksIGxvXG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuXG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG4gICAgaGkgPSBjID4+IDhcbiAgICBsbyA9IGMgJSAyNTZcbiAgICBieXRlQXJyYXkucHVzaChsbylcbiAgICBieXRlQXJyYXkucHVzaChoaSlcbiAgfVxuXG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyAoc3RyKSB7XG4gIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSlcbn1cblxuZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpIGJyZWFrXG4gICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gaXNuYW4gKHZhbCkge1xuICByZXR1cm4gdmFsICE9PSB2YWwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWNvbXBhcmVcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQ2s4SEE7O0FBNDBDQTs7Ozs7OztBQ3B3S0EiLCJzb3VyY2VSb290IjoiIn0=